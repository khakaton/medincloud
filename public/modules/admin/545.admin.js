(self.webpackChunk=self.webpackChunk||[]).push([[545],{67091:function(e,t,n){"use strict";n.r(t);var a=n(22122),r=n(81253),o=n(67294),i=["styles"];t.default=function(e){e.styles;var t=(0,r.Z)(e,i);return o.createElement("svg",(0,a.Z)({width:"7",height:"10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),o.createElement("path",{d:"M6 1.5L2 5l4 4",stroke:"#8E94AA",strokeWidth:"1.5"}))}},85113:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Zs}});var a=n(96156),r=n(92137),o=n(6610),i=n(5991),l=n(63349),s=n(10379),c=n(46070),u=n(77608),m=n(87757),d=n.n(m),p=n(67294),f=n(73935),h=n(73727),b=n(5977),v=n(31298),g=n(14494),y=n(22122),E=n(81253),x=["styles"],w=function(e){e.styles;var t=(0,E.Z)(e,x);return p.createElement("svg",(0,y.Z)({width:"19",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),p.createElement("path",{fill:"#fff",d:"M0 0h19v2H0zM0 6h19v2H0V6zM0 12h19v2H0z"}))},k=["styles"],N=function(e){var t=e.styles,n=void 0===t?{}:t,a=(0,E.Z)(e,k);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},a),p.createElement("defs",null),p.createElement("g",{id:"Слой_2","data-name":"Слой 2"},p.createElement("g",{id:"Слой_1-2","data-name":"Слой 1"},p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M15.63 1.79h-1v12.48a.36.36 0 01-.36.36H1.79v1a.37.37 0 00.37.37h13.47a.36.36 0 00.37-.37V2.16a.37.37 0 00-.37-.37z"}),p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M13.79 13.42V.37a.37.37 0 00-.37-.37H.37A.36.36 0 000 .37v13.05a.37.37 0 00.37.37h13.05a.38.38 0 00.37-.37zM10 2.71a1.4 1.4 0 11-1.4 1.4 1.4 1.4 0 011.4-1.4zm-8.8 9.91C1.27 11 2.1 8 3.3 6.83s2-.13 2.72.9a27.9 27.9 0 001.73 2.32c.81.81 1.49-.41 2.34-.81 1.23-.59 2.24 2.46 2.5 3.39z"}))))},O=["styles"],S=function(e){e.styles;var t=(0,E.Z)(e,O);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17.73 10.85"},t),p.createElement("g",{"data-name":"Слой 2"},p.createElement("path",{d:"M8.87 0A8.88 8.88 0 000 8.87a9.67 9.67 0 00.16 1.69.37.37 0 00.36.29h16.69a.36.36 0 00.36-.29A8.88 8.88 0 008.87 0zm0 1a.93.93 0 11-.66 1.58A.93.93 0 018.87 1zM2 9.79a.93.93 0 11.92-.92.93.93 0 01-.92.92zm2.63-5.16a.88.88 0 01-.63.28.94.94 0 01-.95-.91.92.92 0 01.95-.95.94.94 0 01.91.95.88.88 0 01-.28.63zm5.78 5.09a2.33 2.33 0 11-3-3.58c1-.83 6.74-2.57 6.74-2.57S11.4 8.9 10.41 9.72zm5.37.07a.93.93 0 11.92-.92.93.93 0 01-.92.92z",fill:"#fff","data-name":"Слой 1"})))},C=["styles"],Z=function(e){var t=e.styles,n=void 0===t?{}:t,a=(0,E.Z)(e,C);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 17.35"},a),p.createElement("defs",null),p.createElement("g",{id:"Слой_2","data-name":"Слой 2"},p.createElement("g",{id:"Слой_1-2","data-name":"Слой 1"},p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M10.33 15.72H1.6V2.64H.47a.47.47 0 00-.47.47v13.77a.47.47 0 00.47.47h9.39a.47.47 0 00.47-.47z"}),p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M13 .47a.47.47 0 00-.47-.47H3.14a.47.47 0 00-.47.47v13.77a.47.47 0 00.47.46h9.39a.44.44 0 00.33-.14.43.43 0 00.14-.32z"}))))},j=["styles"],R=function(e){var t=e.styles,n=void 0===t?{}:t,a=(0,E.Z)(e,j);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16.96"},a),p.createElement("defs",null),p.createElement("g",{id:"Слой_2","data-name":"Слой 2"},p.createElement("g",{id:"Слой_1-2","data-name":"Слой 1"},p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M4.31 2.67A.43.43 0 004 2.54a.41.41 0 00-.31.14c-2.54 2.8-1.16 8.86-1 9.46L.12 14.7A.41.41 0 000 15a.42.42 0 00.12.3l1.54 1.53a.41.41 0 00.6 0l2.55-2.55a17.77 17.77 0 004.19.51c1.65 0 3.91-.26 5.3-1.52a.5.5 0 00.14-.31.46.46 0 00-.13-.31zM8 5.19a.44.44 0 00.3.12.42.42 0 00.3-.12L11.76 2a1.17 1.17 0 00.34-.83 1.18 1.18 0 00-.34-.84 1.16 1.16 0 00-.84-.33 1.15 1.15 0 00-.84.35L6.92 3.51a.42.42 0 000 .6zM16.65 5.24a1.2 1.2 0 00-1.67 0l-3.17 3.17a.44.44 0 000 .6l1.08 1.07a.41.41 0 00.6 0l3.16-3.16a1.18 1.18 0 000-1.68z"}))))},P=["styles"],A=function(e){var t=e.styles,n=void 0===t?{}:t,a=(0,E.Z)(e,P);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},a),p.createElement("defs",null),p.createElement("g",{id:"Слой_2","data-name":"Слой 2"},p.createElement("g",{id:"Слой_1-2","data-name":"Слой 1"},p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M16.14 10H8.06L8 6V1.5c0-.5-.29-.39-.48-.37a8.46 8.46 0 109.31 9.64.69.69 0 00-.69-.79z"}),p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M10.38 0a.37.37 0 00-.27.09.36.36 0 00-.11.25V8h7.65a.36.36 0 00.25-.11.32.32 0 00.1-.25A8 8 0 0010.38 0z"}))))},D=["styles"],F=function(e){e.styles;var t=(0,E.Z)(e,D);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16.6"},t),p.createElement("g",{"data-name":"Слой 2"},p.createElement("path",{d:"M16.66 8.49l-1.5-.34a6.68 6.68 0 00-.55-2.49l1.16-1a.42.42 0 00.06-.61l-1.59-2A.41.41 0 0014 2a.46.46 0 00-.32.09L12.5 3a6.72 6.72 0 00-2.3-1.11V.43A.44.44 0 009.76 0H7.23a.43.43 0 00-.43.43v1.45A6.77 6.77 0 004.45 3l-1.14-.88A.46.46 0 003 2a.41.41 0 00-.29.16l-1.58 2a.44.44 0 00.07.61l1.18.93a6.56 6.56 0 00-.53 2.5l-1.5.35a.38.38 0 00-.27.19.43.43 0 00-.08.34l.57 2.46a.43.43 0 00.52.33l1.55-.36a6.66 6.66 0 001.57 1.93l-.69 1.45a.42.42 0 000 .33.45.45 0 00.22.25L6 16.56a.43.43 0 00.19 0h.15a.45.45 0 00.24-.23l.71-1.47a6.78 6.78 0 002.46 0l.71 1.47a.45.45 0 00.58.2l2.27-1.11a.39.39 0 00.22-.25.42.42 0 000-.33l-.7-1.45a6.67 6.67 0 001.56-1.94l1.54.34a.43.43 0 00.52-.33L17 9a.44.44 0 00-.34-.51zm-5.3-.16A2.86 2.86 0 118.5 5.47a2.86 2.86 0 012.86 2.86z",fill:"#fff","data-name":"Слой 1"})))},M=["styles"],T=function(e){var t=e.styles,n=void 0===t?{}:t,a=(0,E.Z)(e,M);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"},a),p.createElement("defs",null),p.createElement("g",{id:"Слой_2","data-name":"Слой 2"},p.createElement("g",{id:"Слой_1-2","data-name":"Слой 1"},p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M0 .2A.2.2 0 01.2 0h3.6a.2.2 0 01.2.2v3.6a.2.2 0 01-.2.2H.2a.2.2 0 01-.2-.2zM6 .2a.2.2 0 01.2-.2h8.6a.2.2 0 01.2.2v3.6a.2.2 0 01-.2.2H6.2a.2.2 0 01-.2-.2zM0 6.2A.2.2 0 01.2 6h3.6a.2.2 0 01.2.2v8.6a.2.2 0 01-.2.2H.2a.2.2 0 01-.2-.2zM6 6.2a.2.2 0 01.2-.2h8.6a.2.2 0 01.2.2v8.6a.2.2 0 01-.2.2H6.2a.2.2 0 01-.2-.2z"}))))},H=["styles"],B=function(e){var t=e.styles,n=void 0===t?{}:t,a=(0,E.Z)(e,H);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"},a),p.createElement("defs",null),p.createElement("g",{id:"Слой_2","data-name":"Слой 2"},p.createElement("g",{id:"Слой_1-2","data-name":"Слой 1"},p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M14.67 0H.33A.31.31 0 000 .28v3.09a.31.31 0 00.33.28h14.34a.31.31 0 00.33-.28V.28a.31.31 0 00-.33-.28zM9 5H6a.32.32 0 00-.33.32v2.22a.32.32 0 00.33.32h3a.32.32 0 00.33-.32V5.28A.32.32 0 009 5zM9 9.15H6a.32.32 0 00-.33.32v5.21A.32.32 0 006 15h3a.32.32 0 00.33-.32V9.47A.32.32 0 009 9.15zM14.67 5h-3a.32.32 0 00-.33.32V10a.32.32 0 00.33.32h3A.32.32 0 0015 10V5.28a.32.32 0 00-.33-.28zM3.37 5h-3a.32.32 0 00-.37.28V10a.32.32 0 00.33.32h3A.32.32 0 003.7 10V5.28A.32.32 0 003.37 5zM3.37 11.55h-3a.33.33 0 00-.33.32v2.81a.32.32 0 00.29.32h3a.32.32 0 00.33-.32v-2.81a.33.33 0 00-.29-.32zM14.67 11.55h-3a.33.33 0 00-.33.32v2.81a.32.32 0 00.33.32h3a.32.32 0 00.33-.32v-2.81a.33.33 0 00-.33-.32z"}))))},z=["styles"],q=function(e){var t=e.styles,n=void 0===t?{}:t,a=(0,E.Z)(e,z);return p.createElement("svg",(0,y.Z)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18.51 15.26"},a),p.createElement("defs",null),p.createElement("g",{id:"Слой_2","data-name":"Слой 2"},p.createElement("g",{id:"Слой_1-2","data-name":"Слой 1"},p.createElement("path",{className:n["cls-1"]||"cls-1",d:"M13.52 14.52a9.31 9.31 0 01-4 .74A15.11 15.11 0 015 14.52h-.09v-2.68a3.23 3.23 0 013.22-3.22h2.26a3.23 3.23 0 013.22 3.22v2.64zM6.16 7.63a4.56 4.56 0 00-2.7 3.81v.85A15.49 15.49 0 010 11.61s0-.14 0 0V8.9a3.08 3.08 0 013.08-3.1h2.34a3.92 3.92 0 00.74 1.83zM11.6 5.29a2.39 2.39 0 01-2.34 2.43 2.39 2.39 0 01-2.34-2.43 2.39 2.39 0 012.34-2.44 2.39 2.39 0 012.34 2.44zM5.57 4.46a2.35 2.35 0 01-1.2.33 2.38 2.38 0 112.38-2.38 3.33 3.33 0 00-1.18 2.05zM13.09 5.77h2.34a3.09 3.09 0 013.07 3.1v2.71c0-.14 0 0 0 0a15.57 15.57 0 01-3.43.68v-.85a4.56 4.56 0 00-2.7-3.81 3.92 3.92 0 00.72-1.83zM11.75 2.43v-.05a2.39 2.39 0 112.39 2.38 2.32 2.32 0 01-1.2-.33 3.39 3.39 0 00-1.19-2z"}))))},I=["styles"],V=function(e){e.styles;var t=(0,E.Z)(e,I);return p.createElement("svg",(0,y.Z)({width:"100",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),p.createElement("path",{d:"M50.004 7.797l-2.407 5.525c0 1.333.306 2.36.927 3.065.204.238.519.46.952.667l-.697 1.962a3.67 3.67 0 01-1.616-1.089 6.62 6.62 0 01-.808-1.187c-.544.82-1.156 1.387-1.854 1.686-.527.237-1.173.352-1.947.352-1.557 0-2.858-.498-3.887-1.502C37.553 16.211 37 14.77 37 12.946c0-.636.042-1.21.128-1.708.085-.498.238-.973.45-1.418.451-.904 1.055-1.594 1.829-2.069.774-.475 1.667-.713 2.687-.713.944 0 1.76.17 2.45.499.97.46 1.684 1.21 2.126 2.252l1.42-2.804 1.914.812zM45.403 13.3a1 1 0 00.025-.268v-.169a.317.317 0 00-.025-.122c0-.973-.306-1.84-.91-2.598-.613-.759-1.285-1.134-2.025-1.134-.875 0-1.59.337-2.126 1.019-.587.736-.876 1.763-.876 3.088 0 1.21.298 2.138.902 2.774.536.567 1.216.858 2.032.858.57 0 1.038-.153 1.387-.46.578-.52 1.122-1.509 1.616-2.988zM61.97 18.617h-2.517l-2.62-6.445-.62-1.77-.647 1.816-2.543 6.399h-2.688l4.627-11.05a39.743 39.743 0 01-.485-1.165 3.354 3.354 0 00-.255-.52c-.323-.46-.842-.69-1.548-.69-.246 0-.723.069-1.437.206l.28-2.13c.358-.1.647-.168.868-.207.221-.038.442-.061.663-.061 1.327 0 2.365.62 3.105 1.854.28.43.663 1.257 1.156 2.483l4.66 11.28zM72.363 9.238h-3.59v6.107c0 .444.018.728.043.858.034.123.12.238.28.338.154.068.358.107.605.107.187 0 .544-.039 1.088-.107l.374 2.022c-.28.054-.663.108-1.156.146a16.56 16.56 0 01-1.02.061c-.775 0-1.378-.107-1.82-.322a1.994 1.994 0 01-.962-.95c-.093-.207-.161-.482-.204-.835-.042-.345-.068-.82-.068-1.418V9.238l-1.667-.023c-.357 0-.689.145-.995.437-.093.1-.212.252-.374.46l-1.616-1.48c.306-.375.57-.65.79-.835.681-.56 1.413-.835 2.204-.835l8.096.023v2.253h-.008zM84.26 9.674c.417.904.622 1.947.622 3.127 0 1.226-.222 2.283-.672 3.172a5.093 5.093 0 01-1.965 2.107 5.39 5.39 0 01-2.798.774c-.604 0-1.08-.053-1.437-.168-.494-.154-.995-.453-1.506-.897V23h-2.798l.026-10.696c0-2.154.808-3.702 2.432-4.629 1.004-.567 2.144-.858 3.428-.858 1.063 0 1.998.245 2.815.743.8.49 1.42 1.196 1.854 2.115zm-2.797-.046c-.579-.636-1.267-.958-2.084-.958-.8 0-1.514.337-2.126 1.02-.29.337-.519.804-.68 1.41a7.628 7.628 0 00-.247 1.969c0 1.333.289 2.314.876 2.942.587.629 1.284.935 2.084.935.833 0 1.547-.322 2.151-.958.29-.337.519-.781.68-1.356a6.845 6.845 0 00.247-1.877c0-.682-.076-1.288-.22-1.817a3.324 3.324 0 00-.681-1.31zM99.306 9.192l-1.387-.023-.025 9.448h-2.62v-9.44h-4.303v9.448h-2.568V9.199c-.154 0-.34.054-.57.154a3.502 3.502 0 00-.774.551l-1.71-1.54c.63-.56 1.191-.92 1.667-1.096.477-.176 1.02-.26 1.616-.26h10.674v2.184z",fill:"#fff"}),p.createElement("circle",{cx:"12",cy:"12",r:"12",fill:"#D9FF8D"}),p.createElement("path",{d:"M17.603 7.85l-1.926 4.42c0 1.067.245 1.888.742 2.452.163.19.415.368.762.533l-.558 1.57a2.936 2.936 0 01-1.293-.87 5.287 5.287 0 01-.646-.951c-.435.656-.925 1.11-1.483 1.349-.422.19-.939.282-1.558.282-1.245 0-2.286-.399-3.11-1.202-.89-.852-1.333-2.005-1.333-3.463 0-.51.034-.969.102-1.368.068-.398.19-.778.36-1.134.361-.723.844-1.275 1.463-1.655.62-.38 1.334-.57 2.15-.57.756 0 1.409.135 1.96.399.776.367 1.347.968 1.7 1.802L16.073 7.2l1.53.65zm-3.68 4.402a.8.8 0 00.02-.215v-.135a.254.254 0 00-.02-.098c0-.779-.246-1.471-.729-2.078-.49-.607-1.027-.907-1.62-.907-.7 0-1.271.27-1.7.815-.47.588-.701 1.41-.701 2.47 0 .969.238 1.71.721 2.22.429.453.973.686 1.626.686.456 0 .83-.122 1.11-.368.462-.416.897-1.207 1.292-2.39z",fill:"#343B4C"}))},U=n(5298);var L=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){return(0,o.Z)(this,r),a.call(this,e)}return(0,i.Z)(r,[{key:"render",value:function(){return p.createElement("a",{href:"/",target:"_blank",className:"admin__logo"},this.props.adminLogo.assetType?(0,U.vD)(this.props.adminLogo):p.createElement(V,null))}}]),r}(p.Component),W=(0,g.$j)((function(e){return{adminLogo:e.adminLogo}}))(L),Y=n(90484),K=n(3925),G=["styles"],J=function(e){e.styles;var t=(0,E.Z)(e,G);return p.createElement("svg",(0,y.Z)({height:"40",viewBox:"0 0 1792 1792",width:"40",xmlns:"http://www.w3.org/2000/svg"},t),p.createElement("path",{d:"M1395 736q0 13-10 23l-466 466q-10 10-23 10t-23-10L407 759q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l393 393 393-393q10-10 23-10t23 10l50 50q10 10 10 23z"}))};var Q=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={order:"ASC"},e.clickHandler=function(){e.setState({order:"ASC"===e.state.order?"DESC":"ASC"},(function(){return e.props.sortingHandler(e.props.column.name,e.state.order)}))},e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.column,n=e.sortingField,a=this.state.order;return p.createElement("td",{onClick:this.clickHandler,className:"admin-table__td ",title:t.name},t.title,p.createElement(J,{className:"vector-svg ".concat("DESC"===a?"role-svg":""," ").concat(n===t.name?"vector-svg--active":"")}))}}]),r}(p.Component);var $=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(){return(0,o.Z)(this,l),a.apply(this,arguments)}return(0,i.Z)(l,[{key:"render",value:function(){var e=this,t=this.props.row;return p.createElement("tr",{className:"admin-table-row",key:t.id,title:t.id},p.createElement("td",{className:"admin-table__td admin-table__td_check",key:"choose"+t.id,title:"choose"+t.id},p.createElement("input",{type:"checkbox"})),this.props.columns.map((function(n,a){var o="span",i=_.get(t,n.name,"");n.default&&!i&&(i=n.default);var l={className:"td__content",children:i};return n.url&&t.url&&(o="a",l.href=t.url,n.target&&(l.target=n.target)),n.editUrl&&t.editUrl&&(o="Link"===n.tag?h.rU:"a",l.href=t.editUrl,"Link"===n.tag&&(l.to={pathname:t.editUrl,data:t}),n.target&&(l.target=n.target)),n.is_button&&(o="button",l.title=n.button.title,l.children=n.button.title,l.onClick=function(){n.button.function(t)}),n.is_boolean&&(l.children=[_.get(t,n.name,!1).toString()]),p.createElement("td",{className:"admin-table__td td",key:n.name+t.id,title:n.name+t.id},p.createElement(o,l),0===a&&p.createElement("span",{className:"quick-action-menu"},e.props.quickActions&&e.props.quickActions.map((function(e,n){var a="";switch(e.tag){case"a":var o=e.props.href.replace(":id",t.id);a=p.createElement("a",(0,y.Z)({className:"quick-action-menu__item "+(e.className||"")},e.props||{},{href:o}),e.title);break;case"Link":var i=e.props.href.replace(":id",t.id);a=p.createElement(h.rU,(0,y.Z)({className:"quick-action-menu__item "+(e.className||"")},e.props||{},{to:i}),e.title);break;case"button":var l=e.route.replace(":id",t.id);a=p.createElement("button",(0,y.Z)({className:"quick-action-menu__item "+(e.className||"")},e.props||{},{onClick:(0,r.Z)(d().mark((function n(){var a,r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.confirm){n.next=5;break}return n.next=3,confirm(e.confirm);case 3:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:if(a=new K.default({route:l}),!_.isFunction(a[e.method])){n.next=23;break}n.t0=e.method,n.next="get"===n.t0?10:"put"===n.t0?14:18;break;case 10:return n.next=12,a[e.method](t.id);case 12:return r=n.sent,n.abrupt("break",22);case 14:return n.next=16,a[e.method](t.id,e.data);case 16:return r=n.sent,n.abrupt("break",22);case 18:return n.next=20,a[e.method]();case 20:return r=n.sent,n.abrupt("break",22);case 22:_.isFunction(e.after)&&e.after(r);case 23:case"end":return n.stop()}}),n)})))}),e.title)}return e.callBack&&(a=p.createElement("button",{className:"quick-action-menu__item "+(e.className||""),onClick:function(){return e.callBack(t)}},e.title)),p.createElement("span",{className:"quick-action-menu__item_wrapper",key:n+t.id},a)}))))})))}}]),l}(p.Component);var X=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).filterByKeyboard=function(t){_.isFunction(e.props.filterByKeyboard)&&e.props.filterByKeyboard(t.target.value)},e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this,t=this.props,n=t.search,a=t.sortingHandler,r=t.sortingField;return p.createElement("div",{className:"admin-table"},n&&p.createElement("div",{className:"admin-table"},p.createElement("input",{value:n.value,onChange:n.changeHandler,type:"text",className:"form-group"})),p.createElement("table",null,p.createElement("thead",{className:"admin-table-head"},p.createElement("tr",{className:"admin-table-row"},p.createElement("td",{className:"admin-table__td admin-table__td_check"},p.createElement("input",{type:"checkbox"})),this.props.columns.map((function(e){return a?p.createElement(Q,{key:e.name,column:e,sortingHandler:a,sortingField:r}):p.createElement("td",{className:"admin-table__td ",key:e.name,title:e.name},e.title)})))),p.createElement("tbody",{className:"admin-table-body"},this.props.rows.map((function(t){return p.createElement($,(0,y.Z)({key:t.id,row:t},e.props))})))))}}]),r}(p.Component),ee=(n(67091),["styles"]),te=function(e){e.styles;var t=(0,E.Z)(e,ee);return p.createElement("svg",(0,y.Z)({width:"7",height:"10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),p.createElement("path",{d:"M1 8.5L5 5 1 1",stroke:"#343B4C",strokeWidth:"1.5"}))};n(68843);var ne=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).state={currentPage:1},t}return(0,i.Z)(r,[{key:"setCurrentPage",value:function(e){return(e=parseInt(e)||1)<=1?(this.setState({currentPage:1}),void this.props.changePage(1)):e>=this.props.pageCount?(this.setState({currentPage:this.props.pageCount}),void this.props.changePage(this.props.pageCount)):(this.setState({currentPage:e}),void this.props.changePage(e))}},{key:"componentDidUpdate",value:function(){this.state.currentPage>this.props.pageCount&&this.setCurrentPage(this.props.currentPage||this.props.pageCount)}},{key:"render",value:function(){var e=this;return p.createElement("div",{className:"pagination"},p.createElement("div",{className:"version"},p.createElement("p",{className:"pagination__version"},"Version ",altrp_version," ")),p.createElement("div",{className:"pagination__buttons"},p.createElement("p",{className:"pagination__text"},this.props.itemsCount," Items"),p.createElement("div",{className:this.state.currentPage<=1?" pagination__disabled pagination__toStart pagination__move":"pagination__move pagination__toStart",onClick:function(){return e.setCurrentPage(1)}},p.createElement(te,{className:"right__arrow"}),p.createElement(te,{className:"right__arrow"})),p.createElement("div",{className:this.state.currentPage<=1?"pagination__disabled pagination__prev pagination__move":"pagination__move pagination__prev",onClick:function(){return e.setCurrentPage(--e.state.currentPage)}},p.createElement(te,{className:"right__arrow"})," "),p.createElement("input",{type:"text",className:"pagination__indicator",value:this.state.currentPage||1,onChange:function(t){return e.setCurrentPage(t.target.value.replace(/[^0-9]/g,"")||1)}}),p.createElement("div",{className:"pagination__map"},"of ",this.props.pageCount),p.createElement("div",{className:this.state.currentPage>=this.props.pageCount?"pagination__disabled pagination__next pagination__move":"pagination__move pagination__next",onClick:function(){e.setCurrentPage(++e.state.currentPage)}}," ",p.createElement(te,null)," "),p.createElement("div",{className:this.state.currentPage>=this.props.pageCount?"pagination__disabled pagination__move":"pagination__move",onClick:function(){return e.setCurrentPage(e.props.pageCount)}},p.createElement(te,null)," ",p.createElement(te,null))))}}]),r}(p.Component),ae=n(48363);function re(e){e=e||"/",window.location.assign(e)}function oe(){return"_"+Math.random().toString(36).substr(2,9)}function ie(){return window.iconsManager||(window.iconsManager=new ae.default),window.iconsManager}function le(){return se.apply(this,arguments)}function se(){return(se=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new K.default({route:"/logout"}).post();case 2:re(e.sent.location);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){document.location.reload(!0)}n(96486);var ue={"Ё":"Yo","Й":"I","Ц":"Ts","У":"U","К":"K","Е":"E","Н":"N","Г":"G","Ш":"Sh","Щ":"Sch","З":"Z","Х":"H","Ъ":"","ё":"yo","й":"i","ц":"ts","у":"u","к":"k","е":"e","н":"n","г":"g","ш":"sh","щ":"sch","з":"z","х":"h","ъ":"","Ф":"F","Ы":"I","В":"V","А":"a","П":"P","Р":"R","О":"O","Л":"L","Д":"D","Ж":"ZH","Э":"E","ф":"f","ы":"i","в":"v","а":"a","п":"p","р":"r","о":"o","л":"l","д":"d","ж":"zh","э":"e","Я":"Ya","Ч":"CH","С":"S","М":"M","И":"I","Т":"T","Ь":"","Б":"B","Ю":"YU","я":"ya","ч":"ch","с":"s","м":"m","и":"i","т":"t","ь":"","б":"b","ю":"yu"};function me(e){return e?e.split("").map((function(e){return _.isUndefined(ue[e])?e:ue[e]})).join(""):""}function de(e){return(e=me(e)).toLowerCase().replace(/^\d+/,"").replace(/[^\d\w]/g,"_")}function pe(e){return(e=me(e)).toLowerCase().replace(/^\d+/,"").replace(/[^\d\w]/g,"-")}function fe(e){var t=[],n=e.filter((function(e){return null===e.parent_page_id}));if(!n.length)return e;function a(n,r){e.filter((function(e){return e.parent_page_id===n})).forEach((function(e){e.title="—".repeat(r)+e.title,t.push(e),a(e.id,r+1)}))}return n.forEach((function(e){t.push(e),a(e.id,1)})),t}function he(e,t){return e.filter((function(e){return e.roles.some((function(e){return e.id===t}))}))}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(e){var t;return(0,o.Z)(this,l),(t=a.call(this,e)).getPages=function(){var e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"object"===(0,Y.Z)(n)&&(n=void 0),e.next=3,t.resource.getQueried({s:n});case 3:a=e.sent,t.setState((function(e){return ve(ve({},e),{},{pages:a,pagesSearch:n})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.changeSearchHandler=function(e){t.getPages(e.target.value)},t.state={pages:[],currentPage:1,pagesSearch:""},t.resource=new K.default({route:"/admin/ajax/pages"}),t.itemsPerPage=20,t}return(0,i.Z)(l,[{key:"componentDidMount",value:function(){this.getPages()}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentPage,a=t.pages,r=t.pagesSearch;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Pages"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"All Pages")),p.createElement(h.rU,{className:"btn",to:"/admin/pages/add"},"Add New"),p.createElement("div",{className:"admin-filters"},p.createElement("span",{className:"admin-filters__current"},"All (",this.state.pages.length||"0",")"))),p.createElement("div",{className:"admin-content"},p.createElement(X,{columns:[{name:"title",title:"Title",editUrl:!0,tag:"Link"},{name:"author",title:"Author"},{name:"path",title:"Path",url:!0,target:"_blank"}],quickActions:[{tag:"button",route:"/admin/ajax/pages/:id",method:"delete",confirm:"Are You Sure?",after:this.getPages,className:"quick-action-menu__item_danger",title:"Trash"}],rows:fe(a).slice(n*this.itemsPerPage-this.itemsPerPage,n*this.itemsPerPage),search:{value:r||"",changeHandler:this.changeSearchHandler},getPages:this.getPages}),p.createElement(ne,{pageCount:Math.ceil(a.length/this.itemsPerPage)||1,currentPage:n,changePage:function(t){n!==t&&e.setState({currentPage:t})},itemsCount:a.length})))}}]),l}(p.Component),_e=n(340),ye=(n(85025),n(94006)),Ee=n(10096);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke,Ne,Oe=function(e){(0,s.Z)(b,e);var t,n,a,m,f,h=(m=b,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(m);if(f){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(e){var t;return(0,o.Z)(this,b),(t=h.call(this,e)).state={needUpdate:!1},t.updateAltrp=t.updateAltrp.bind((0,l.Z)(t)),t}return(0,i.Z)(b,[{key:"componentDidMount",value:(a=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ee.default.dispatch((0,ye.gy)()),e.next=3,new K.default({route:"/admin/ajax/check_update"}).post({});case 3:e.sent.result&&this.setNeedUpdate(),Ee.default.dispatch((0,ye._H)());case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setNeedUpdate",value:function(){this.setState((function(e){return we(we({},e),{},{needUpdate:!0})}))}},{key:"setDontNeedUpdate",value:function(){this.setState((function(e){return we(we({},e),{},{needUpdate:!1})}))}},{key:"installTestAltrp",value:(n=(0,r.Z)(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ee.default.dispatch((0,ye.gy)()),e.prev=1,e.next=4,new K.default({route:"/admin/ajax/install_test_altrp"}).post({});case 4:t=e.sent,setTimeout((function(){t.result?ce():n.setNeedUpdate()}),1300),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Ee.default.dispatch((0,ye._H)());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(){return n.apply(this,arguments)})},{key:"updateAltrp",value:(t=(0,r.Z)(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ee.default.dispatch((0,ye.gy)()),e.prev=1,e.next=4,new K.default({route:"/admin/ajax/update_altrp"}).post({});case 4:t=e.sent,setTimeout((function(){t.result?ce():n.setNeedUpdate()}),1300),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Ee.default.dispatch((0,ye._H)());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e={updateMessage:"You have the latest version of Altrp."};this.state.needUpdate&&(e.updateMessage="A fresh version of Altrp is available for updating.");var t=this.props.adminState.testEnable;return p.createElement("div",{className:"admin-updates p-4"},p.createElement("div",{className:"admin-caption mt-1"},e.updateMessage),this.state.needUpdate?p.createElement("button",{className:"btn_success btn",onClick:this.updateAltrp},"Update"):p.createElement("button",{className:"btn",onClick:this.updateAltrp},"Re-install Now"),t&&p.createElement(p.Fragment,null,p.createElement("div",{className:"admin-caption mt-1"},"Install Test Version of Altrp"),p.createElement("button",{className:"btn_success btn",onClick:this.installTestAltrp},"Install Test")))}}]),b}(p.Component),Se=(0,g.$j)((function(e){return{adminState:e.adminState}}))(Oe),Ce=n(32465),Ze=n(71893),je="#eee",Re=Ze.ZP.span(Ne||(Ne=(0,Ce.Z)(["\n  animation: "," 1.2s ease-in-out infinite;\n  background-color: ",";\n  background-size: 200px 100%;\n  background-repeat: no-repeat;\n  background-image: linear-gradient(90deg, ",");\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n"])),(function(e,t){return(0,Ze.F4)(ke||(ke=(0,Ce.Z)(["\n  0% {\n    background-position: -200px 0;\n  }\n  ","\n  100% {\n    background-position: calc(200px + 100%) 0;\n  }\n"])),t>0?"".concat(Math.floor(1/(e+t)*e*100),"% {\n    background-position: calc(200px + 100%) 0;\n  }"):void 0)}),(function(e){var t=e.color;return"".concat(t||je)}),(function(e){var t=e.highlightColor,n=e.color;return"".concat(n||je,", ").concat(t||"#f5f5f5",", ").concat(n||je)})),Pe=function(e){return React.createElement("div",{className:e.className},React.createElement(Re,(0,y.Z)({},e,{className:"altrp-skeleton__span"})))};function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe=function(e){(0,s.Z)(h,e);var t,n,a,m,f=(a=h,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(m){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function h(e){var t;return(0,o.Z)(this,h),(t=f.call(this,e)).resource=new K.default({route:t.props.route}),t.state={value:t.props.value||"",disabled:!t.props.value},t.changeValue=t.changeValue.bind((0,l.Z)(t)),t.onChange=t.onChange.bind((0,l.Z)(t)),t.onKeyDown=t.onKeyDown.bind((0,l.Z)(t)),t}return(0,i.Z)(h,[{key:"componentDidUpdate",value:function(e,t){var n=this;e.route!==this.props.route&&(this.resource=new K.default({route:this.props.route}),console.log(this.resource)),e.value!==this.props.value&&this.props.value!==this.state.value&&this.setState((function(e){return De(De({},e),{},{value:n.props.value})}))}},{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.props.value&&this.props.resourceid){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.resource.get(this.props.resourceid);case 4:t=e.sent,this.setState((function(e){return De(De({},e),{},{value:t[n.props.resourceid]||"",disabled:!1})}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.changeValue(e)}},{key:"onChange",value:function(e){var t=e.target.value;this.setState((function(e){return De(De({},e),{},{value:t})})),_.isFunction(this.props.changevalue)&&this.props.changevalue(t)}},{key:"changeValue",value:(t=(0,r.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,this.setState((function(e){return De(De({},e),{},{disabled:!0})})),_.isFunction(this.props.onBlur)&&this.props.onBlur(n),e.next=5,this.resource.put(this.props.resourceid,{value:n,column_value:n});case 5:e.sent,this.setState((function(e){return De(De({},e),{},{disabled:!1})}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.className;this.state.disabled&&(e+=" pointer-event-none");var t=De({},this.props);return delete t.changevalue,p.createElement("input",(0,y.Z)({},t,{className:e,onBlur:this.changeValue,onKeyDown:this.onKeyDown,onChange:this.onChange,value:this.state.value}))}}]),h}(p.Component),Me=n(63144);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=l.call.apply(l,[this].concat(n))).state={iconFile:null,uploaderClasses:"admin-assets__uploader uploader",itemDeleteClasses:"item__delete",imageLazyLoading:"none"},e.updateImageLazyLoading=function(){var t=(0,r.Z)(d().mark((function t(n){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.value,t.next=3,new K.default({route:"/admin/ajax/settings"}).put("altrp_image_lazy",{value:a});case 3:e.setState((function(e){return He(He({},e),{},{imageLazyLoading:a})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDrop=function(t){t.persist(),t.preventDefault(),t.stopPropagation(),e.setState((function(e){return He(He({},e),{},{uploaderClasses:"admin-assets__uploader uploader",iconFile:t.dataTransfer.files[0]})}))},e.onDragOver=function(t){t.preventDefault(),t.stopPropagation(),e.setState((function(e){return He(He({},e),{},{uploaderClasses:"admin-assets__uploader uploader uploader_drag-over"})}))},e.onDragLeave=function(t){e.setState((function(e){return He(He({},e),{},{uploaderClasses:"admin-assets__uploader uploader"})}))},e.submitHandler=function(t){t.preventDefault(),new K.default({route:"/admin/ajax/favicon"}).postFile(e.state.iconFile).then((function(){return alert("Icon successfully  uploaded.")}))},e.skeletonHighlightColorChange=function(){var t=(0,r.Z)(d().mark((function t(n){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=_.isString(n)?n:"rgba(".concat(n.rgb.r,", ").concat(n.rgb.g,", ").concat(n.rgb.b,", ").concat(n.rgb.a,")"),t.next=3,new K.default({route:"/admin/ajax/settings"}).put("altrp_skeleton_highlight_color",{value:a});case 3:e.setState((function(e){return He(He({},e),{},{skeletonHighlightColor:a})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.skeletonColorChange=function(){var t=(0,r.Z)(d().mark((function t(n){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=_.isString(n)?n:"rgba(".concat(n.rgb.r,", ").concat(n.rgb.g,", ").concat(n.rgb.b,", ").concat(n.rgb.a,")"),t.next=3,new K.default({route:"/admin/ajax/settings"}).put("altrp_skeleton_color",{value:a});case 3:e.setState((function(e){return He(He({},e),{},{skeletonColor:a})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new K.default({route:"/admin/ajax/settings"}).get("altrp_image_lazy");case 2:return t=e.sent.altrp_image_lazy,e.next=5,new K.default({route:"/admin/ajax/settings"}).get("altrp_skeleton_color");case 5:return n=e.sent.altrp_skeleton_color,e.next=8,new K.default({route:"/admin/ajax/settings"}).get("altrp_skeleton_highlight_color");case 8:a=e.sent.altrp_skeleton_highlight_color,this.setState((function(e){return He(He({},e),{},{imageLazyLoading:t,skeletonColor:n,skeletonHighlightColor:a})}));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=ie().getIconComponent("upload"),n=this.state,a=n.iconFile,o=n.imageLazyLoading,i=this.state,l=i.skeletonColor,s=void 0===l?"#ccc":l,c=i.skeletonHighlightColor,u=void 0===c?"#d0d0d0":c;return s=s||"#ccc",u=u||"#d0d0d0",p.createElement("div",{className:"admin-styles-settings"},p.createElement("table",null,p.createElement("tbody",{className:"admin-settings-table-row"},p.createElement("tr",{className:"admin-settings-table-row"},p.createElement("td",{className:"admin-settings-table__td row-text",width:"10%"},p.createElement("label",{htmlFor:"settings-container-width"},"Container Width:")),p.createElement("td",{className:"admin-settings-table__td"},p.createElement(Fe,{type:"number",route:"/admin/ajax/settings",resourceid:"container_width",id:"settings-container-width",className:"form__input w-25"}))),p.createElement("tr",{className:"admin-settings-table-row"},p.createElement("td",{className:"admin-settings-table__td row-text",width:"10%"},"Image Lazy Loading:"),p.createElement("td",{className:"admin-settings-table__td"},p.createElement("div",{className:"form-group w-25"},p.createElement("select",{className:"form-control",value:o,onChange:this.updateImageLazyLoading},p.createElement("option",{value:"none"},"None"),p.createElement("option",{value:"color"},"Color"),p.createElement("option",{value:"skeleton"},"Skeleton"))))),"skeleton"===o&&p.createElement("tr",{className:"admin-settings-table-row"},p.createElement("td",{className:"admin-settings-table__td row-text",width:"10%"},"Skeleton Colors:"),p.createElement("td",{className:"admin-settings-table__td admin-skeleton-settings"},p.createElement("div",{className:"row"},p.createElement("div",{className:"control-color-colorPicker pr-5"},p.createElement(Me.xS,{presetColors:[],color:s,onChange:this.skeletonColorChange,style:{padding:0,boxShadow:"none"},name:"colorPicker",className:"sketchPicker"})),p.createElement("div",{className:"control-color-colorPicker pr-5"},p.createElement(Me.xS,{presetColors:[],color:u,onChange:this.skeletonHighlightColorChange,style:{padding:0,boxShadow:"none"},name:"colorPicker",className:"sketchPicker"})),p.createElement("div",{className:"admin-skeleton pr-5 position-relative"},p.createElement(Pe,{className:"altrp-skeleton",color:s,highlightColor:u})),p.createElement("button",{className:"admin-media-input__button btn btn_success align-self-end",onClick:(0,r.Z)(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.skeletonHighlightColorChange("#d0d0d0");case 2:return t.next=4,e.skeletonColorChange("#ccc");case 4:case"end":return t.stop()}}),t)})))},"Reset Colors")))))),p.createElement("form",{onSubmit:this.submitHandler},p.createElement("legend",null,"Add Favicon:"),p.createElement("div",{className:this.state.uploaderClasses,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onDragOver:this.onDragOver},p.createElement("label",{className:"uploader__label d-flex flex-column align-items-center"},p.createElement(t,{width:100,height:100,className:"icon"}),p.createElement("input",{type:"file",accept:"image/*",onChange:function(t){return e.setState({iconFile:t.target.files[0]})},className:"uploader__input"}),p.createElement("span",{className:"uploader__text text text_bold"},"Drag or Choose File"))),a&&p.createElement("div",{className:"centred mt-2"},p.createElement("button",{className:"admin-settings-button btn btn-sm",type:"submit"},"Upload icon"))))}}]),m}(p.Component);var ze=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(e){var t;return(0,o.Z)(this,l),(t=a.call(this,e)).onSubmit=function(){var e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t.resource.postFiles(t.inputFile.current.files,"application/zip,application/x-zip,application/x-zip-compressed");case 3:if(!(a=e.sent).success){e.next=10;break}return e.next=7,alert("Success");case 7:window.location.href="/admin/dashboard",e.next=11;break;case 10:alert("Error "+a.message);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onCustomSubmit=function(){var e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t.custom_resource.postFiles(t.inputCustomFile.current.files,"application/zip,application/x-zip,application/x-zip-compressed");case 3:if(!(a=e.sent).success){e.next=10;break}return e.next=7,alert("Success");case 7:window.location.href="/admin/dashboard",e.next=11;break;case 10:alert("Error "+a.message);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inputFile=React.createRef(),t.inputCustomFile=React.createRef(),t.resource=new K.default({route:"/admin/ajax/import/settings"}),t.custom_resource=new K.default({route:"/admin/ajax/import/custom_settings"}),t}return(0,i.Z)(l,[{key:"render",value:function(){return React.createElement("div",null,React.createElement("form",{onSubmit:this.onSubmit,method:"post",className:"admin-updates p-4"},React.createElement("div",{className:"admin-caption mt-1"},"Export All App Settings in Archive"),React.createElement("input",{type:"hidden",name:"_token",value:_token}),React.createElement("input",{type:"file",ref:this.inputFile,accept:".zip,application/zip,application/x-zip,application/x-zip-compressed",name:"file",required:!0}),React.createElement("button",{className:"btn_success btn"},"Import ZIP Archive")),React.createElement("form",{onSubmit:this.onCustomSubmit,method:"post",className:"admin-updates p-4"},React.createElement("div",{className:"admin-caption mt-1"},"Export All App Settings in Archive"),React.createElement("input",{type:"hidden",name:"_token",value:_token}),React.createElement("input",{type:"file",ref:this.inputCustomFile,accept:".zip,application/zip,application/x-zip,application/x-zip-compressed",name:"file",required:!0}),React.createElement("button",{className:"btn_success btn"},"Import ZIP Archive (JSON)")))}}]),l}(Component);function qe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le=function(e){(0,s.Z)(h,e);var t,n,a,m,f=(a=h,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(m){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function h(e){var t;return(0,o.Z)(this,h),(t=f.call(this,e)).toggleLine=function(e){var n=Ue({},t.state.open);n[e]=!n[e],t.setState((function(e){return Ue(Ue({},e),{},{open:n})}))},t.open={},t.listPages=[],t.items=[{name:"Pages",value:"exportPages",uri:"/admin/ajax/pages"},{name:"Templates",value:"exportTemplates",uri:"/admin/ajax/templates",field:"templates"},{name:"Media",value:"exportMedia",uri:"/admin/ajax/media"},{name:"Settings",value:"exportSettings",uri:!1},{name:"Diagrams",value:"exportDiagrams",uri:"/admin/ajax/diagrams"},{name:"Reports",value:"exportReports",uri:"/admin/ajax/reports"},{name:"Tables",value:"exportTables",uri:"/admin/ajax/tables"},{name:"Models",value:"exportModels",uri:"/admin/ajax/models",field:"models"},{name:"SQL Editors",value:"exportSQLEditors",uri:"/admin/ajax/sql_editors",field:"sql_editors"},{name:"Remote DataSources",value:"exportRemoteDataSources",uri:"/admin/ajax/ajax/data_sources"}],t.state={elements:[],open:{},props:{},value:{}},t.resourceOut=new K.default({route:"/admin/ajax/downloads/filtered_settings"}),t.submitData=t.submitData.bind((0,l.Z)(t)),t}return(0,i.Z)(h,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n,a,r,o,i,l,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=[],a={},r=qe(this.items),e.prev=4,r.s();case 6:if((o=r.n()).done){e.next=32;break}if(i=o.value,l={},!i.uri){e.next=26;break}return a[i.value]=!1,i.uri?t[i.value]=new K.default({route:i.uri}):t[i.value]=[],l={value:i.value,name:i.name||""},e.prev=13,e.next=16,t[i.value].getAll();case 16:l.items=e.sent,i.field&&l.items[i.field]&&(l.items=l.items[i.field]),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),l.items=[];case 23:"exportMedia"===i.value&&(l.items=l.items.map((function(e){return Ue(Ue({},e),{},{title:e.filename})}))),e.next=29;break;case 26:(l={value:i.value,name:i.name||""}).items=[],"exportSettings"==i.value&&(l.items=[{id:"admin_logo",title:"admin_logo"},{id:"container_width",title:"container_width"}]);case 29:n.push(l);case 30:e.next=6;break;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(4),r.e(e.t1);case 37:return e.prev=37,r.f(),e.finish(37);case 40:s={},n.forEach((function(e){s[e.value]=e.items.map((function(e){return e.id}))})),this.setState((function(e){return Ue(Ue({},e),{},{elements:n,open:a,value:s})}));case 43:case"end":return e.stop()}}),e,this,[[4,34,37,40],[13,20]])}))),function(){return n.apply(this,arguments)})},{key:"changeMainItem",value:function(e,t){console.log(e,t,this);var n=Ue({},this.state.value),a=Ue({},this.state.props);a[t]=!a[t],console.log(a),a[t]?n[t]=[]:n[t]=n[t],this.setState((function(e){return Ue(Ue({},e),{},{props:a,value:n})}))}},{key:"changeItem",value:function(e,t){console.log(e,t);var n=Ue({},this.state.value);-1===n[t].indexOf(e)?n[t].push(e):n[t]=n[t].filter((function(t){return t!==e})),console.log(n),this.setState((function(e){return Ue(Ue({},e),{},{value:n})}))}},{key:"submitData",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.value,e.next=4,fetch("/admin/ajax/downloads/filtered_settings",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8","X-CSRF-TOKEN":_token},body:JSON.stringify(t)}).then((function(e){return e.blob()})).then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=t,n.download="altrp.zip",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t),alert("Export File Downloaded!")})).catch((function(e){return alert("Error! "+e.message)}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.elements,a=t.open,r={dt:{width:"100%",borderBottom:"1px solid #000000"},dd:{width:"100%",borderBottom:"1px solid #cccccc"}},o=[],i=0,l=function(t){var l,s,c,u,m,d=p.createElement(p.Fragment,{key:i},p.createElement("dl",null,p.createElement("dt",{style:r.dt},p.createElement("input",{type:"checkbox",className:"form-check-input mr-1 ml-0 mt-0 position-static",id:t,onChange:function(a){return e.changeMainItem(t,n[t].value)},checked:(null===(l=e.state.value[n[t].value])||void 0===l?void 0:l.length)===(null===(s=n[t])||void 0===s||null===(c=s.items)||void 0===c?void 0:c.length)}),p.createElement("a",{onClick:function(){e.toggleLine(n[t].name)}},n[t].name)),e.state.open[n[t].name]&&(null===(u=n[t])||void 0===u||null===(m=u.items)||void 0===m?void 0:m.map((function(o,i){return p.createElement("dd",{style:r.dd,className:!1===a[t]?"d-none":null,key:i},p.createElement("input",{type:"checkbox",className:"form-check-input mr-1 ml-0 mt-0 position-static",onChange:function(a){return e.changeItem(o.id,n[t].value)},checked:e.state.value[n[t].value]&&-1!==e.state.value[n[t].value].indexOf(o.id)}),o.title)})))));o.push(d),i++};for(var s in n)l(s);return p.createElement("div",{className:"admin-updates p-4"},p.createElement("div",{className:"admin-caption mt-1"},"Export All App Settings in Archive"),p.createElement("div",{className:"mt-1"},o),p.createElement("div",null,p.createElement("button",{className:"btn_success btn",onClick:this.submitData},"Download Filtered ZIP Archive (JSON)")),p.createElement("div",{className:"mt-1"},p.createElement("a",{className:"btn_success btn",href:"/admin/ajax/downloads/settings"},"Download ZIP Archive (JSON)"),p.createElement("a",{className:"btn_success btn ml-3",href:"/admin/ajax/downloads/stream_settings"},"Download ZIP Archive (JSON Stream)")))}}]),h}(p.Component),We=n(77810);var Ye=function(e){(0,s.Z)(p,e);var t,n,a,m=(n=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function p(e){var t;return(0,o.Z)(this,p),(t=m.call(this,e)).submitHandler=function(){var e=(0,r.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new K.default({route:"/admin/ajax/websockets"}),e.next=3,n.getQueried({enabled:t});case 3:(a=e.sent).success&&alert(a.message||"success"),Ee.default.dispatch((0,We.He)(t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.toggle=t.toggle.bind((0,l.Z)(t)),t}return(0,i.Z)(p,[{key:"toggle",value:function(){var e,t=null!==(e=Ee.default.getState().websocketStore)&&void 0!==e&&e.enabled?0:1;this.submitHandler(t)}},{key:"onReset",value:(t=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new K.default({route:"/admin/ajax/websockets"}),e.next=3,t.getQueried({reset:!0});case 3:(n=e.sent).success&&(alert(n.message||"success"),Ee.default.dispatch((0,We.He)(!1)),window.location.reload());case 5:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t,n=this,a=null!==(e=null===(t=Ee.default.getState().websocketStore)||void 0===t?void 0:t.enabled)&&void 0!==e&&e,r="control-switcher control-switcher_".concat(a?"on":"off");return React.createElement("div",{className:"admin_settings_websockets"},React.createElement("div",{className:"admin_settings_websockets_box"},React.createElement("div",{className:"admin_switcher"},React.createElement("div",{className:"admin_switcher__label"},"Websocket Server"),React.createElement("div",{className:r,onClick:this.toggle},React.createElement("div",{className:"control-switcher__on-text"},"ON"),React.createElement("div",{className:"control-switcher__caret"}),React.createElement("div",{className:"control-switcher__off-text"},"OFF"))),React.createElement("div",{className:"admin_input__label",width:"10%"},React.createElement("label",{htmlFor:"websockets-port"},"Port:")),React.createElement("div",{className:"admin_input"},React.createElement(Fe,{type:"number",route:"/admin/ajax/settings",resourceid:"websockets_port",id:"websockets-port",className:"admin_input_port"})),React.createElement("div",{className:"admin_input__label",width:"10%"},React.createElement("label",{htmlFor:"websockets-key"},"Key:")),React.createElement("div",{className:"admin_input"},React.createElement(Fe,{type:"number",route:"/admin/ajax/settings",resourceid:"pusher_app_key",id:"websockets-key",className:"admin_input_key"})),React.createElement("div",{className:"admin_input__label",width:"10%"},React.createElement("label",{htmlFor:"websockets-key"},"Host:")),React.createElement("div",{className:"admin_input"},React.createElement(Fe,{type:"text",route:"/admin/ajax/settings",resourceid:"pusher_host",id:"websockets-host",className:"admin_input_host"})),React.createElement("div",null,React.createElement("button",{className:"btn btn_save",onClick:function(){return n.onReset()}},"Reset"))))}}]),p}(Component);var Ke=function(e){(0,s.Z)(p,e);var t,n,a,m=(n=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function p(e){var t;return(0,o.Z)(this,p),(t=m.call(this,e)).submitHandler=function(){var e=(0,r.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new K.default({route:"/admin/ajax/websockets"}),e.next=3,n.getQueried({enabled:t});case 3:(a=e.sent).success&&alert(a.message||"success"),Ee.default.dispatch(setWebsocketsEnabled(t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.toggle=t.toggle.bind((0,l.Z)(t)),t}return(0,i.Z)(p,[{key:"toggle",value:function(){var e,t=null!==(e=Ee.default.getState().websocketStore)&&void 0!==e&&e.enabled?0:1;this.submitHandler(t)}},{key:"onReset",value:(t=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new K.default({route:"/admin/ajax/websockets"}),e.next=3,t.getQueried({reset:!0});case 3:(n=e.sent).success&&(alert(n.message||"success"),Ee.default.dispatch(setWebsocketsEnabled(!1)),window.location.reload());case 5:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return React.createElement("div",{className:"admin_settings_telegram"},React.createElement("div",{className:"admin_input__label",width:"10%"},React.createElement("label",{htmlFor:"telegram_bot_token"},"Telegram bot key:")),React.createElement("div",{className:"admin_input"},React.createElement(Fe,{type:"text",route:"/admin/ajax/settings",resourceid:"telegram_bot_token",id:"telegram_bot_token",className:"admin_input_key"})),React.createElement("div",null))}}]),p}(Component);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe=React.lazy((function(){return n.e(493).then(n.bind(n,39493))})),$e=React.lazy((function(){return n.e(154).then(n.bind(n,80154))})),Xe=function(e){(0,s.Z)(p,e);var t,n,a,m=(n=p,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function p(e){var t;return(0,o.Z)(this,p),(t=m.call(this,e)).toggleSSREnabled=function(){var e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.checked,e.next=3,new K.default({route:"/admin/ajax/settings"}).put("altrp_ssr_disabled",{value:a});case 3:t.setState((function(e){return Je(Je({},e),{},{SSREnabled:a})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.setSSRPort=function(){var e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.target.value,new K.default({route:"/admin/ajax/settings"}).put("ssr_port",{value:a}),t.setState((function(e){return Je(Je({},e),{},{SSRPort:a})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.setSSRPort=function(){var e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.target.value,new K.default({route:"/admin/ajax/settings"}).put("ssr_port",{value:a}),t.setState((function(e){return Je(Je({},e),{},{SSRPort:a})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.setSSRSettingsAlias=function(){var e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.target.value,new K.default({route:"/admin/ajax/settings"}).put("ssr_settings_alias",{value:a}),t.setState((function(e){return Je(Je({},e),{},{SSRAlias:a})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.generateConfig=function(){var e=(0,r.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new K.default({route:"/admin/ajax/ssr/make"}).post().then((function(e){alert(e.message)}),(function(e){alert(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.restartSSR=function(){var e=(0,r.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new K.default({route:"/admin/ajax/ssr/restart"}).post().then((function(e){alert(e.message)}),(function(e){alert(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.clearProjectCache=function(){var e=(0,r.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new K.default({route:"/admin/ajax/cache/clear"}).post().then((function(e){alert(e.message)}),(function(e){alert(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.switchTab=t.switchTab.bind((0,l.Z)(t)),t.state={SSREnabled:!1,SSRPort:"",SSRAlias:"",SSRConf:!1,activeTab:parseInt(window.location.hash[1])||0},t}return(0,i.Z)(p,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new K.default({route:"/admin/ajax/settings"}).get("altrp_ssr_disabled");case 2:return t=!!e.sent.altrp_ssr_disabled,e.next=5,new K.default({route:"/admin/ajax/settings"}).get("ssr_port");case 5:return n=e.sent.ssr_port,e.next=8,new K.default({route:"/admin/ajax/settings"}).get("ssr_settings_alias");case 8:return a=e.sent.ssr_settings_alias,e.next=11,new K.default({route:"/admin/ajax/ssr/check"}).get("");case 11:r=e.sent.file,console.log(r),this.setState((function(e){return Je(Je({},e),{},{SSREnabled:t,SSRPort:n,SSRAlias:a,SSRConf:r})}));case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"switchTab",value:function(e){window.location.hash=e+"",this.setState((function(t){return Je(Je({},t),{},{activeTab:e})}))}},{key:"render",value:function(){var e=this.state,t=e.SSRPort,n=e.SSRAlias,a=e.SSRConf;return React.createElement("div",{className:"admin-settings admin-page"},React.createElement("div",{className:"admin-heading"},React.createElement("div",{className:"admin-breadcrumbs"},React.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Settings"),React.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),React.createElement("span",{className:"admin-breadcrumbs__current"},"Builder"))),React.createElement("div",{className:"admin-content"},React.createElement(_e.mQ,{selectedIndex:this.state.activeTab,onSelect:this.switchTab},React.createElement(_e.td,{className:"nav nav-pills admin-pills"},React.createElement(_e.OK,null,"GENERAL"),React.createElement(_e.OK,null,"STYLE"),React.createElement(_e.OK,null,"INTEGRATIONS"),React.createElement(_e.OK,null,"ADVANCED"),React.createElement(_e.OK,null,"UPDATES"),React.createElement(_e.OK,null,"EXPORT"),React.createElement(_e.OK,null,"IMPORT"),React.createElement(_e.OK,null,"MAIL")),React.createElement(_e.x4,null,React.createElement("table",null,React.createElement("tbody",{className:"admin-table-body"},React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td row-text"},"SSR"),React.createElement("td",{className:"admin-settings-table__td "},React.createElement("input",{className:"admin-table__td_check",checked:this.state.SSREnabled,onChange:this.toggleSSREnabled,type:"checkbox"}),"Hide Server Side Content")),React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td row-text"},"SSR Port"),React.createElement("td",{className:"admin-settings-table__td "},React.createElement("input",{className:"admin-table__td_check",type:"text",placeholder:"9000",value:t,onChange:this.setSSRPort}))),React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td row-text"},"SSR Settings Alias"),React.createElement("td",{className:"admin-settings-table__td "},React.createElement("input",{className:"admin-table__td_check",type:"text",placeholder:"For ex. yourproject..",value:n,onChange:this.setSSRSettingsAlias}))),(null==n?void 0:n.length)>0&&React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td row-text"},"Make SSR conf"),React.createElement("td",{className:"admin-settings-table__td "},React.createElement("button",{className:"btn btn_success",onClick:this.generateConfig},"Generate"))),a&&React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td row-text"},"Restart SSR"),React.createElement("td",{className:"admin-settings-table__td "},React.createElement("button",{className:"btn btn_success",onClick:this.restartSSR},"Restart"))),React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td row-text"},"Clear project cache"),React.createElement("td",{className:"admin-settings-table__td "},React.createElement("button",{className:"btn btn_success",onClick:this.clearProjectCache},"Clear"))),React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td row-text"},"Disable Default Fonts"),React.createElement("td",{className:"admin-settings-table__td "},React.createElement("input",{className:"admin-table__td_check",type:"checkbox"}),"Checking this box will disable Builder’s Default Fonts, and make Builder inherit the fonts from your CSS file")),React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td header-text"},"Improve builder")),React.createElement("tr",{className:"admin-settings-table-row"},React.createElement("td",{className:"admin-settings-table__td row-text"},"Usage Data Sharing"),React.createElement("td",{className:"admin-settings-table__td "},React.createElement("input",{className:"admin-table__td_check",type:"checkbox"}),"Become a super contributor by opting in to share non-sensitive plugin data and to get our updates. Learn more"))))),React.createElement(_e.x4,null,React.createElement(Be,null)),React.createElement(_e.x4,null,React.createElement(Ye,null),React.createElement(Ke,null)),React.createElement(_e.x4,null,React.createElement(React.Suspense,{fallback:"Loading"},React.createElement(Qe,null))),React.createElement(_e.x4,null,React.createElement(Se,{attr:"attr"})),React.createElement(_e.x4,null,React.createElement(Le,null)),React.createElement(_e.x4,null,React.createElement(ze,null)),React.createElement(_e.x4,null,React.createElement(React.Suspense,{fallback:"Loading"},React.createElement($e,null))))))}}]),p}(Component),et=["styles"],tt=function(e){e.styles;var t=(0,E.Z)(e,et);return p.createElement("svg",(0,y.Z)({width:"31",height:"31",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),p.createElement("path",{d:"M11.124 24.386l-4.415 2.492c-.26.146-.492.325-.709.521C8.574 29.645 11.897 31 15.528 31c3.603 0 6.905-1.335 9.472-3.55a3.911 3.911 0 00-.778-.54l-4.728-2.445a1.873 1.873 0 01-.997-1.67v-1.919a7.36 7.36 0 00.447-.595 11.42 11.42 0 001.47-3.064 1.53 1.53 0 001.053-1.462v-2.049c0-.45-.194-.853-.495-1.135V9.609S21.56 5 15.528 5s-5.444 4.609-5.444 4.609v2.962a1.55 1.55 0 00-.495 1.135v2.049c0 .54.274 1.015.685 1.289.495 2.229 1.79 3.832 1.79 3.832v1.873c0 .681-.361 1.31-.94 1.637z",fill:"#F7F8F9"}),p.createElement("path",{d:"M15.765.002C7.207-.144.15 6.676.002 15.236c-.083 4.853 2.08 9.215 5.524 12.115.226-.196.467-.377.736-.523l4.625-2.523a1.89 1.89 0 00.984-1.658v-1.895s-1.357-1.624-1.875-3.88a1.555 1.555 0 01-.717-1.305v-2.074c0-.456.203-.864.518-1.15V9.346S9.18 4.68 15.5 4.68s5.703 4.666 5.703 4.666v2.999c.316.285.518.693.518 1.15v2.073c0 .698-.468 1.284-1.103 1.48a11.397 11.397 0 01-1.54 3.103c-.17.24-.329.444-.468.602v1.943c0 .715.404 1.37 1.044 1.69l4.953 2.475c.297.149.565.337.813.546a15.46 15.46 0 005.578-11.64C31.145 7.205 24.325.148 15.765.002z",fill:"#8E94AA"}))};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(e){var t;return(0,o.Z)(this,l),(t=a.call(this,e)).getUsers=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resource.getQueried({s:t.state.search});case 2:n=e.sent,t.setState((function(e){return at(at({},e),{},{data:n})}));case 4:case"end":return e.stop()}}),e)}))),t.getUsersEmail=(0,r.Z)(d().mark((function e(){var n,a,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resource.getAuthorList();case 2:for(n=e.sent,a=[],r=0;r<n.length;r++)n[r].email.includes(t.state.search)&&a.push(n[r]);t.setState((function(e){return at(at({},e),{},{data:a})}));case 6:case"end":return e.stop()}}),e)}))),t.state={data:[],roleFilter:null,search:"",currentPage:1,roles:[],sorting:{sortingField:null,order:"ASC"}},t.resource=new K.default({route:"/admin/ajax/users"}),t.itemsPerPage=10,t}return(0,i.Z)(l,[{key:"componentDidMount",value:function(){var e=this;this.getUsers(),new K.default({route:"/admin/ajax/role_options"}).getAll().then((function(t){return e.setState({roles:t})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentPage,a=t.data,r=t.search,o=t.roles,i=t.roleFilter,l=this.state.sorting,s=l.sortingField,c=l.order,u=i?he(a,i):a;return p.createElement("div",{className:"admin-users"},p.createElement("div",{className:"wrapper"},p.createElement("div",{className:"admin-heading-users"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Users"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"All Users")),p.createElement(h.rU,{className:"btn",to:"/admin/users/new/"},"Add New"),p.createElement("div",{className:"admin-filters"},p.createElement("span",{className:"admin-filters__current",onClick:function(){return e.setState({roleFilter:null})}},p.createElement("a",{className:"admin-filters__link"},"All (",a.length,")")),o.map((function(t){var n=he(a,t.value).length;return n?p.createElement(p.Fragment,{key:t.value},p.createElement("span",{className:"admin-filters__separator"},"|"),p.createElement("a",{className:"admin-filters__link",onClick:function(){return e.setState({roleFilter:t.value})}},t.label," (",n,")")):null})))),p.createElement("div",{className:"admin-panel"},p.createElement("form",{className:"admin-users-form form-bulk-left"},p.createElement("select",{className:"form-control input-sm"},p.createElement("option",{value:"1"},"Bulk Actions")),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Apply")),p.createElement("form",{className:"admin-users-form form-bulk-right"},p.createElement("select",{className:"form-control input"},p.createElement("option",{value:"1"},"Change role on...")),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Change")),p.createElement("form",{className:"admin-users-form form-bulk-search"},p.createElement("input",{className:"form-control input-sm",value:r,onChange:function(t){return e.setState({search:t.target.value})}}),p.createElement("button",{type:"button",onClick:this.getUsers,className:"btn btn_bare admin-users-button"},"Search Users"),p.createElement("button",{type:"button",onClick:this.getUsersEmail,className:"btn btn_bare admin-users-button"},"Search Email"))),p.createElement("div",{className:"admin-users-table"},p.createElement("table",{className:"table"},p.createElement("thead",{className:"admin-users-table-head"},p.createElement("tr",{className:"admin-table-row"},p.createElement("td",{className:"admin-table__td admin-table__td_check",onClick:function(){return e.setState({sorting:{sortingField:"name",order:"ASC"===c?"DESC":"ASC"}})}},p.createElement("input",{className:"input-users",type:"checkbox"}),"Username",p.createElement(J,{className:"vector-svg ".concat("DESC"===c?"role-svg":""," ").concat("name"===s?"vector-svg--active":"")})),p.createElement("td",{className:"admin-table__td ",onClick:function(){return e.setState({sorting:{sortingField:"full_name",order:"ASC"===c?"DESC":"ASC"}})}},"Name",p.createElement(J,{className:"vector-svg ".concat("DESC"===c?"role-svg":""," ").concat("full_name"===s?"vector-svg--active":"")})),p.createElement("td",{className:"admin-table__td ",onClick:function(){return e.setState({sorting:{sortingField:"email",order:"ASC"===c?"DESC":"ASC"}})}},"Email",p.createElement(J,{className:"vector-svg ".concat("DESC"===c?"role-svg":""," ").concat("email"===s?"vector-svg--active":"")})),p.createElement("td",{className:"admin-table__td "},"Role"),p.createElement("td",{className:"admin-table__td "},"Post"),p.createElement("td",{className:"admin-table__td ",onClick:function(){return e.setState({sorting:{sortingField:"last_login_at",order:"ASC"===c?"DESC":"ASC"}})}},"Last Enter",p.createElement(J,{className:"vector-svg ".concat("DESC"===c?"role-svg":""," ").concat("last_login_at"===s?"vector-svg--active":"")})),p.createElement("td",{className:"admin-table__td "},"Status"))),p.createElement("tbody",{className:"admin-table-body"},function(e,t,n){var a=e.sort((function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}));return"ASC"===n?a:a.reverse()}(u,s,c).slice(n*this.itemsPerPage-this.itemsPerPage,n*this.itemsPerPage).map((function(t,n){return p.createElement("tr",{className:"admin-table-row",key:t.id},p.createElement("td",{className:"admin-table__td admin-table__td_check "},p.createElement("input",{className:"input-users",type:"checkbox"}),p.createElement(tt,{className:"users-svg"}),p.createElement(h.rU,{to:"/admin/users/user/"+t.id},t.name," ",t.id===e.props.userId&&p.createElement("span",{style:{color:"red"}},"you"))),p.createElement("td",{className:"admin-table__td "},t.full_name),p.createElement("td",{className:"admin-table__td "},p.createElement("a",null,t.email)),p.createElement("td",{className:"admin-table__td "},p.createElement("a",null,t.roles.map((function(e){return e.name})).join(", "))),p.createElement("td",{className:"admin-table__td "},"2"),p.createElement("td",{className:"admin-table__td "},t.last_login_at),p.createElement("td",{className:"admin-table__td "},"Enable"))})))),p.createElement(ne,{pageCount:Math.ceil(u.length/this.itemsPerPage)||1,currentPage:n,changePage:function(t){n!==t&&e.setState({currentPage:t})},itemsCount:u.length}))))}}]),l}(p.Component),ot=(0,g.$j)((function(e){return{userId:e.currentUser.id}}))(rt);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(38908);var st=function(e){(0,s.Z)(f,e);var t,n,m=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t,n;return(0,o.Z)(this,f),(n=m.call(this,e)).getNotices=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.notificationsAll.getAll();case 2:t=e.sent,n.setState((function(e){return lt(lt({},e),{},{notices:t})}));case 4:case"end":return e.stop()}}),e)}))),n.noticesSortingHandler=function(e,t){n.setState({sorting:{order_by:e,order:t}},n.getNotices)},n.searchNotice=function(e){e.preventDefault(),n.getNotices()},n.getArrayForRows=function(e,t,a){return e.slice(t*n.itemsPerPage-n.itemsPerPage,t*n.itemsPerPage).map((function(e){return e.url="/admin/users/user/".concat(e.noticed_id,"/notification/").concat(e.id),e}))},n.state={user_id:null!==(t=n.props.match.params.id)&&void 0!==t?t:"",notices:[],currentPage:1,noticeSearch:"",sorting:{}},n.itemsPerPage=3,n.notificationsAll=new K.default({route:"/admin/ajax/users/".concat(n.state.user_id,"/notifications")}),n.changePage=n.changePage.bind((0,l.Z)(n)),n.generateNoticeJSON=n.generateNoticeJSON.bind((0,l.Z)(n)),n}return(0,i.Z)(f,[{key:"componentDidMount",value:function(){this.getNotices()}},{key:"changePage",value:function(e,t){this.setState((function(n){return lt(lt({},n),{},(0,a.Z)({},t,lt(lt({},n[t]),{},{currentPage:e})))}))}},{key:"generateNoticeJSON",value:function(e){var t=objectDeepCleaning(JSON.parse(e.data));return JSON.stringify({area:this.state.activeresponseArea.name,data:t,title:e.title,name:e.notice_name})}},{key:"downloadJSONFile",value:function(e){}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentPage,a=t.notices,r=t.user_id,o=t.noticeSearch,i=t.sorting;return p.createElement("div",{className:"admin-users-notice"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{to:"/admin/users"},"Users"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},r),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Settings Notifications")),p.createElement(h.rU,{className:"btn",to:"/admin/users/user/".concat(r,"/notification/new")},"Add New"),p.createElement("div",{className:"admin-notifications-table"},p.createElement("form",{className:"admin-panel py-2",onSubmit:this.searchNotice},p.createElement("input",{className:"input-sm mr-2",value:o,onChange:function(t){return e.setState({noticeSearch:t.target.value})}}),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Search")),p.createElement(X,{columns:[{name:"name",title:"Notification Setting:",url:!0}],quickActions:[{tag:"a",props:{href:"/admin/users/user/".concat(r,"/notification/:id")},title:"Edit"},{tag:"button",route:"",method:"delete",title:"Disable"},{tag:"button",route:"/admin/ajax/users/".concat(r,"/notifications/:id"),method:"get",after:function(t){return e.downloadJSONFile(t)},title:"Export"},{tag:"button",route:"/admin/ajax/users/".concat(r,"/notifications/:id"),method:"delete",confirm:"Are You Sure?",after:function(){return e.getNotices()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:this.getArrayForRows(a,n,this.itemsPerPage),sortingHandler:this.noticesSortingHandler,sortingField:i.order_by}),p.createElement(ne,{pageCount:Math.ceil(a.length/this.itemsPerPage)||1,currentPage:n,changePage:function(t){n!==t&&e.setState({currentPage:t})},itemsCount:a.length})))}}]),f}(p.Component),ct=(0,b.EN)(st),ut=n(75429),mt=n(91902);function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=function(e){return p.createElement(v.$B,{autoHeight:!0},e.children)},ht=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).loadOptions=function(){var e=(0,r.Z)(d().mark((function e(n,a){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!t.optionsResource){e.next=5;break}return e.next=4,t.optionsResource.search(n);case 4:r=e.sent;case 5:return t.setState((function(e){return pt(pt({},e),{},{options:r})})),e.abrupt("return",a(r));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.state={options:e.options||[]},e.optionsRoute&&(t.optionsResource=new K.default({route:e.optionsRoute})),t.selectRef=p.createRef(),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"onChange",value:function(){}},{key:"render",value:function(){var e={control:function(e,t){return pt(pt({},e),{},{boxShadow:"none",borderColor:(t.isFocused,"hsl(0,0%,80%)"),"&:hover":{borderColor:"hsl(0,0%,80%)"}})},menuPortal:function(e){return pt(pt({},e),{},{zIndex:99999})}},t={onChange:this.onChange,options:this.state.options||[],placeholder:this.props.placeholder,loadOptions:this.loadOptions,noOptionsMessage:this.props.noOptionsMessage||function(){return"not found"},styles:e,menuPortalTarget:document.body,menuPlacement:"auto",menuPosition:"absolute",onKeyDown:this.onKeyDown,components:{MenusList:ft},captureMenuScroll:!1,isDisabled:this.state.isDisabled,ref:this.selectRef};return _.assign(t,this.props),_.isArray(t.value)&&(t.value=t.value.map((function(e){var n={label:"",value:""};if(_.isString(e)||_.isNumber(e))n.value=e,n.label=e;else if(_.isObject(e))return e;return _.isArray(t.options)&&t.options.forEach((function(e){e.value===n.value&&(n=pt({},e))})),n}))),t.value&&!_.isObject(t.value)&&(t.value=t.options.find((function(e){return e.value==t.value}))),this.optionsResource?p.createElement(ut.ZP,t):p.createElement(mt.ZP,t)}}]),m}(p.Component);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).changeInput=function(e,n){var a,r,o=null!==(a=null===(r=t.state.activeCompare)||void 0===r?void 0:r.id)&&void 0!==a?a:0;t.props.changeInputCompare(e,"compare",o,n)},t.changeSelect=function(e,n){var a,r,o=null!==(a=null===(r=t.state.activeCompare)||void 0===r?void 0:r.id)&&void 0!==a?a:0;t.props.changeSelectCompare(e,n,"compare",o)},t.state={activeCompare:{},isCompareOpened:!1},t.onSave=t.onSave.bind((0,l.Z)(t)),t.onAction=t.onAction.bind((0,l.Z)(t)),t.onActive=t.onActive.bind((0,l.Z)(t)),t.onDisable=t.onDisable.bind((0,l.Z)(t)),t.onExport=t.onExport.bind((0,l.Z)(t)),t.onDelete=t.onDelete.bind((0,l.Z)(t)),t.changeInput=t.changeInput.bind((0,l.Z)(t)),t.changeSelect=t.changeSelect.bind((0,l.Z)(t)),t}return(0,i.Z)(r,[{key:"componentDidUpdate",value:function(){var e,t=this.state,n=t.activeCompare,a=t.isCompareOpened,r=null!==(e=this.props.compares)&&void 0!==e?e:[];0===(r=_.filter(r,(function(e){return e.id===(null==n?void 0:n.id)}))).length&&a&&this.setState((function(e){return vt(vt({},e),{},{isCompareOpened:!1})}))}},{key:"onSave",value:function(){this.props.onSaveCompare("compare")}},{key:"onAction",value:function(e,t){this.props.onActionCompare(e,t,"compare")}},{key:"onActive",value:function(e){this.setState({activeCompare:e,isCompareOpened:!0})}},{key:"onDisable",value:function(e){this.onAction(e,"disable")}},{key:"onExport",value:function(e){}},{key:"onDelete",value:function(e){this.onAction(e,"delete")}},{key:"render",value:function(){var e,t,n,a=this,r=this.state,o=r.isCompareOpened,i=r.activeCompare,l=i.id,s=i.name,c=i.operator,u=i.value,m=(i.enabled,U.sW),d=null!==(e=this.props.compares)&&void 0!==e?e:[];return d.map((function(e){(null==e?void 0:e.id)===l&&(s=e.name,c=e.operator,u=e.value,e.enabled)})),p.createElement("div",{className:"admin-notice-compare-box"},p.createElement("div",{className:"compare-box"},p.createElement("button",{className:"btn btn_save",onClick:function(){return a.onSave()}},"Save and Add New Compare"),p.createElement("ul",null,d.map((function(e,t){var n,r,o;return p.createElement("li",{className:"list-box",key:t},p.createElement("div",{className:"list-item",onClick:function(){return a.onActive(e)}},p.createElement("a",{className:e.enabled?"enabled":"disabled"},null!==(n=e.name)&&void 0!==n?n:""),p.createElement("a",{className:e.enabled?"enabled":"disabled"},null!==(r=e.operator)&&void 0!==r?r:""),p.createElement("a",{className:e.enabled?"enabled":"disabled"},null!==(o=e.value)&&void 0!==o?o:"")),p.createElement("span",{className:"quick-action-menu"},p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{className:"quick-action-menu__item",onClick:function(){return a.onActive(e)}},"Edit")),p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{className:"quick-action-menu__item",onClick:function(){return a.onDisable(e)}},e.enabled?"Disable":"Enable")),p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{className:"quick-action-menu__item",onClick:function(){return a.onExport(e)}},"Export")),p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{className:"quick-action-menu__item quick-action-menu__item_danger",onClick:function(){return a.onDelete(e)}},"Trash"))))})))),o&&p.createElement("div",{className:"admin-notice-box-child-compare"},p.createElement("div",{className:"form-group"},p.createElement("input",{type:"text",id:"compare",name:"name",value:null!==(t=s)&&void 0!==t?t:"",onChange:function(e){a.changeInput(e,"name")},className:"form-control"})),p.createElement(ht,{onChange:this.changeSelect,value:_.filter(m,(function(e){return c===e.value})),options:m}),p.createElement("div",{className:"form-group"},p.createElement("textarea",{type:"text",id:"value",name:"value",value:null!==(n=u)&&void 0!==n?n:"",onChange:function(e){a.changeInput(e,"value")},className:"form-control"}))))}}]),r}(p.Component);function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Et=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).changeInput=function(e){var n,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"condition",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=null!==(n=null===(a=t.state.activeCondition)||void 0===a?void 0:a.id)&&void 0!==n?n:0;l&&t.props.changeInputCondition(e,r,l,o,i)},t.changeSelect=function(e,n){var a,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"condition",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=null!==(a=null===(r=t.state.activeCondition)||void 0===r?void 0:r.id)&&void 0!==a?a:0;l&&t.props.changeSelectCondition(e,n,o,l,i)},t.state={activeCondition:{},isConditionOpened:!1},t.onSave=t.onSave.bind((0,l.Z)(t)),t.onAction=t.onAction.bind((0,l.Z)(t)),t.onActive=t.onActive.bind((0,l.Z)(t)),t.onDisable=t.onDisable.bind((0,l.Z)(t)),t.onExport=t.onExport.bind((0,l.Z)(t)),t.onDelete=t.onDelete.bind((0,l.Z)(t)),t.changeInput=t.changeInput.bind((0,l.Z)(t)),t.changeSelect=t.changeSelect.bind((0,l.Z)(t)),t}return(0,i.Z)(r,[{key:"componentDidUpdate",value:function(){var e,t=this.state,n=t.activeCondition,a=t.isConditionOpened,r=null!==(e=this.props.conditions)&&void 0!==e?e:[];0===(r=_.filter(r,(function(e){return e.id===(null==n?void 0:n.id)}))).length&&a&&this.setState((function(e){return yt(yt({},e),{},{isConditionOpened:!1})}))}},{key:"onSave",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"condition",a=null!==(e=null===(t=this.state.activeCondition)||void 0===t?void 0:t.id)&&void 0!==e?e:0;this.props.onSaveCondition(n,a)}},{key:"onAction",value:function(e,t){var n,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"condition",o=null!==(n=null===(a=this.state.activeCondition)||void 0===a?void 0:a.id)&&void 0!==n?n:0;this.props.onActionCondition(e,t,r,o)}},{key:"onActive",value:function(e){this.setState({activeCondition:e,isConditionOpened:!0})}},{key:"onDisable",value:function(e){this.onAction(e,"disable")}},{key:"onExport",value:function(e){}},{key:"onDelete",value:function(e){this.onAction(e,"delete")}},{key:"render",value:function(){var e,t,n,a=this,r=this.state,o=r.isConditionOpened,i=r.activeCondition,l=i.id,s=i.type,c=i.name,u=i.compares,m=(i.enabled,[{label:"any",value:1},{label:"all",value:2}]),d=null!==(e=this.props.conditions)&&void 0!==e?e:[];return d.map((function(e){(null==e?void 0:e.id)===l&&(s=e.type,c=e.name,u=e.compares,e.enabled)})),p.createElement("div",{className:"admin-notice-condition-box"},p.createElement("div",{className:"condition-box"},p.createElement("button",{className:"btn btn_save",onClick:function(){return a.onSave()}},"Save and Add New Condition"),p.createElement("ul",null,d.map((function(e,t){var n;return p.createElement("li",{className:"list-box",key:t},p.createElement("div",{className:"list-item"},p.createElement("a",{className:e.enabled?"enabled":"disabled",onClick:function(){return a.onActive(e)}},null!==(n=e.name)&&void 0!==n?n:"")),p.createElement("span",{className:"quick-action-menu"},p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{className:"quick-action-menu__item",onClick:function(){return a.onActive(e)}},"Edit")),p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{className:"quick-action-menu__item",onClick:function(){return a.onDisable(e)}},e.enabled?"Disable":"Enable")),p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{className:"quick-action-menu__item",onClick:function(){return a.onExport(e)}},"Export")),p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{className:"quick-action-menu__item quick-action-menu__item_danger",onClick:function(){return a.onDelete(e)}},"Trash"))))})))),o&&p.createElement("div",{className:"admin-notice-box-child"},p.createElement("div",{className:"condition-compare-box"},p.createElement("div",{className:"condition-box-general"},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"condition-input"},"Name"),p.createElement("input",{type:"text",id:"condition-input",name:"name",value:null!==(t=c)&&void 0!==t?t:"",onChange:function(e){a.changeInput(e)},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"condition-select"},"Type"),p.createElement(ht,{id:"condition-select",onChange:this.changeSelect,value:_.filter(m,(function(e){return s===e.label})),options:m}))),p.createElement(gt,{compares:null!==(n=u)&&void 0!==n?n:[],onSaveCompare:this.onSave,onActionCompare:this.onAction,changeInputCompare:this.changeInput,changeSelectCompare:this.changeSelect})),p.createElement("div",{className:"btn-box"},p.createElement("button",{className:"btn btn_save",onClick:function(){return a.onSave("save")}},"Save"),p.createElement("button",{className:"btn btn_cancel",onClick:function(){return a.setState({isConditionOpened:!1,activeCondition:{}})}},"Cancel"))))}}]),r}(p.Component);var xt=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).state={},t}return(0,i.Z)(r,[{key:"render",value:function(){var e,t,n,a=this,r=null!==(e=this.props.data[0])&&void 0!==e?e:[];return p.createElement("div",null,p.createElement("div",{className:"data-box-general"},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"field-input"},"Key"),p.createElement("input",{type:"text",id:"field-input",name:"field",value:null!==(t=null==r?void 0:r.field)&&void 0!==t?t:"",onChange:function(e){a.props.changeInputData(e,"field")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"value-input"},"Value"),p.createElement("input",{type:"text",id:"value-input",name:"value",value:null!==(n=null==r?void 0:r.value)&&void 0!==n?n:"",onChange:function(e){a.props.changeInputData(e,"value")},className:"form-control"}))),p.createElement("div",{className:"btn-box"},p.createElement("button",{className:"btn btn_save",onClick:function(){return a.props.onSaveData("save")}},"Save")))}}]),r}(p.Component);var wt=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).state={},t}return(0,i.Z)(r,[{key:"render",value:function(){var e,t,n,a,r=this,o=null!==(e=this.props.send)&&void 0!==e?e:[];return p.createElement("div",null,p.createElement("div",{className:"send-checkbox-box"},p.createElement("input",{type:"checkbox",id:"front_checkbox",checked:null==o||null===(t=o.front)||void 0===t?void 0:t.enabled,onChange:function(e){return r.props.changeBox(e,"front")}}),p.createElement("label",{htmlFor:"front_checkbox"},"Front"),p.createElement("input",{type:"checkbox",id:"telegram_checkbox",checked:null==o||null===(n=o.telegram)||void 0===n?void 0:n.enabled,onChange:function(e){return r.props.changeBox(e,"telegram")}}),p.createElement("label",{htmlFor:"telegram_checkbox"},"Telegram"),p.createElement("input",{type:"checkbox",id:"email_checkbox",checked:null==o||null===(a=o.email)||void 0===a?void 0:a.enabled,onChange:function(e){return r.props.changeBox(e,"email")}}),p.createElement("label",{htmlFor:"email_checkbox"},"Email")),p.createElement("div",{className:"btn-box"},p.createElement("button",{className:"btn btn_save",onClick:function(){return r.props.onSaveSend("save")}},"Save")))}}]),r}(p.Component);function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot=function(e){(0,s.Z)(f,e);var t,n,a,m=(n=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t,n,a;return(0,o.Z)(this,f),(a=m.call(this,e)).onAction=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(n){case"condition":a.setState((function(n){var a,r;if((null===(a=(n=Nt({},n)).value)||void 0===a||null===(r=a.notice_settings)||void 0===r?void 0:r.conditions)instanceof Array&&("disable"===t&&n.value.notice_settings.conditions.map((function(t){return t.id===e.id&&(t.enabled=!t.enabled),t})),"delete"===t&&confirm("Are you sure?"))){var o=n.value.notice_settings.conditions;o=_.filter(o,(function(t){return e.id!==t.id})),n.value.notice_settings.conditions=o}return n}));break;case"compare":if(!r)return;a.setState((function(n){var a,o;return(null===(a=(n=Nt({},n)).value)||void 0===a||null===(o=a.notice_settings)||void 0===o?void 0:o.conditions)instanceof Array&&n.value.notice_settings.conditions.map((function(n){if((null==n?void 0:n.id)===r&&(null==n?void 0:n.compares)instanceof Array&&("disable"===t&&n.compares.map((function(t){return(null==t?void 0:t.id)===e.id&&(t.enabled=!t.enabled),t})),"delete"===t&&confirm("Are you sure?"))){var a=n.compares;a=_.filter(a,(function(t){return e.id!==t.id})),n.compares=a}return n})),n}))}},a.changeBox=function(e,t){e.persist(),a.setState((function(n){return n.value.notice_settings.send[t].enabled=e.target.checked,n}))},a.changeInput=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=e.target.value;switch(t){case"field":a.setState((function(e){return e.value.notice_settings.data[0].field=i,e}));break;case"value":a.setState((function(e){return e.value.notice_settings.data[0].value=i,e}));break;case"parent":a.setState((function(e){return Nt(Nt({},e),{},{value:Nt(Nt({},e.value),{},{name:i,notice_settings:Nt(Nt({},e.value.notice_settings),{},{notice_name:de(i)})})})}));break;case"notice":a.setState((function(e){return Nt(Nt({},e),{},{value:Nt(Nt({},e.value),{},{notice_settings:Nt(Nt({},e.value.notice_settings),{},{notice_name:de(i)})})})}));break;case"condition":if(!n)return;a.setState((function(e){var t,a;return(null===(t=(e=Nt({},e)).value)||void 0===t||null===(a=t.notice_settings)||void 0===a?void 0:a.conditions)instanceof Array&&e.value.notice_settings.conditions.map((function(e){return e.id===n&&(e.name=i),e})),e}));break;case"compare":if(!n||!r||!o)return;a.setState((function(e){var t,a;return(null===(t=(e=Nt({},e)).value)||void 0===t||null===(a=t.notice_settings)||void 0===a?void 0:a.conditions)instanceof Array&&e.value.notice_settings.conditions.map((function(e){return(null==e?void 0:e.id)===n&&(null==e?void 0:e.compares)instanceof Array&&e.compares.map((function(e){return(null==e?void 0:e.id)===r&&(e[o]=i),e})),e})),e}))}},a.changeSelect=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parent",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];switch(n){case"parent":a.setState({value:Nt(Nt({},a.state.value),{},{sources:e?e.map((function(e){return e.value})):[]})});break;case"condition":if(!r)return;a.setState((function(t){var n,a;return(null===(n=(t=Nt({},t)).value)||void 0===n||null===(a=n.notice_settings)||void 0===a?void 0:a.conditions)instanceof Array&&t.value.notice_settings.conditions.map((function(t){return t.id===r&&(t.type=e.label),t})),t}));break;case"compare":if(!r||!o)return;a.setState((function(t){var n,a;return(null===(n=(t=Nt({},t)).value)||void 0===n||null===(a=n.notice_settings)||void 0===a?void 0:a.conditions)instanceof Array&&t.value.notice_settings.conditions.map((function(t){return(null==t?void 0:t.id)===r&&(null==t?void 0:t.compares)instanceof Array&&t.compares.map((function(t){return(null==t?void 0:t.id)===o&&(t.operator=e.value),t})),t})),t}))}},a.state={user_id:null!==(t=a.props.match.params.id)&&void 0!==t?t:"",notice_id:null!==(n=a.props.match.params.name)&&void 0!==n?n:"",activeTab:parseInt(window.location.hash[1])||0,value:"",sourcesOptions:[]},a.resource=new K.default({route:"/admin/ajax/users/".concat(a.state.user_id,"/notifications/").concat(a.state.notice_id)}),a.resourceEdit=new K.default({route:"/admin/ajax/users/".concat(a.state.user_id,"/notifications")}),a.dataSources=new K.default({route:"/admin/ajax/data_source_options"}),a.switchTab=a.switchTab.bind((0,l.Z)(a)),a.getSourceArray=a.getSourceArray.bind((0,l.Z)(a)),a.onSave=a.onSave.bind((0,l.Z)(a)),a.onAction=a.onAction.bind((0,l.Z)(a)),a.serverUpdate=a.serverUpdate.bind((0,l.Z)(a)),a.getNewValue=a.getNewValue.bind((0,l.Z)(a)),a}return(0,i.Z)(f,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resource.getAll();case 2:return n=e.sent,e.next=5,this.dataSources.getAll();case 5:a=e.sent,0===n.length?this.getNewValue():this.setState({value:n[0]}),this.setState({sourcesOptions:null!==(t=null==a?void 0:a.options)&&void 0!==t?t:[]}),this.getSourceArray();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"switchTab",value:function(e){window.location.hash=e+"",this.setState((function(t){return Nt(Nt({},t),{},{activeTab:e})}))}},{key:"getSourceArray",value:function(){var e;if((null===(e=this.state.value)||void 0===e?void 0:e.sources)instanceof Array){var t=this.state.value.sources.map((function(e){return e.id}));this.setState((function(e){return Nt(Nt({},e),{},{value:Nt(Nt({},e.value),{},{sources:t})})}))}}},{key:"saveNoticeSetting",value:function(){var e=this.state.user_id;this.serverUpdate(),this.props.history.push("/admin/users/user/".concat(e,"/notification/new")),this.getNewValue()}},{key:"getNewValue",value:function(){var e={name:"New Notice Settings",enabled:!0,sources:[],notice_settings:{notice_name:"new_notice_settings",conditions:[{id:1,name:"new condition",enabled:!1,type:"all",compares:[{id:1,name:"title",enabled:!1,operator:"==",value:"value1"}]}],data:[{field:"message",value:"{{altrpdata.text}} added or updated or deleted",type:"content"}],send:{front:{enabled:!0},email:{enabled:!1,template:"template"},telegram:{enabled:!1}}}};this.setState((function(t){return Nt(Nt({},t),{},{value:e,notice_id:"new"})}))}},{key:"serverUpdate",value:function(){var e=this.state,t=e.notice_id,n=e.value;console.log(t),"new"===t?this.resourceEdit.post(n):this.resourceEdit.put(t,n)}},{key:"onSave",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.notice_id;switch(e){case"condition":this.setState((function(e){var t,n;if((null===(t=(e=Nt({},e)).value)||void 0===t||null===(n=t.notice_settings)||void 0===n?void 0:n.conditions)instanceof Array){var a=e.value.notice_settings.conditions;a.push({id:a.length+1,name:"Default New Condition",type:"all",enabled:!1,compares:[]}),e.value.notice_settings.conditions=a}return e}));break;case"compare":if(!t)return;this.setState((function(e){var n,a;return(null===(n=(e=Nt({},e)).value)||void 0===n||null===(a=n.notice_settings)||void 0===a?void 0:a.conditions)instanceof Array&&e.value.notice_settings.conditions.map((function(e){if((null==e?void 0:e.id)===t&&(null==e?void 0:e.compares)instanceof Array){var n=e.compares;n.push({id:n.length+1,name:"Default New Compare",operator:"==",enabled:!1,value:"Default value"}),e.compares=n}return e})),e}));break;case"save":return console.log("SAVE"),void this.serverUpdate()}"new"!==n&&this.serverUpdate()}},{key:"render",value:function(){var e,t,n,a,r,o,i=this,l=this.state,s=l.value,c=l.sourcesOptions,u=l.user_id,m=this.state.value,d=m.sources,f=m.notice_settings;return p.createElement("div",{className:"wrapper"},p.createElement("div",{className:"admin-notice--heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{to:"/admin/users"},"Users"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement(h.rU,{to:"/admin/users/user/".concat(u)},u),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement(h.rU,{to:"/admin/users/user/".concat(u,"#1")},"Settings"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},null!==(e=null==s?void 0:s.notice_name)&&void 0!==e?e:""))),p.createElement("div",{className:"admin-notice-box-parent"},p.createElement("button",{className:"btn btn_save",onClick:function(){return i.saveNoticeSetting()}},"Save and Add New"),p.createElement("div",{className:"admin-notice-general"},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-name"},"Name"),p.createElement("input",{type:"text",id:"name",name:"name",value:null!==(t=null==s?void 0:s.name)&&void 0!==t?t:"",onChange:function(e){i.changeInput(e)},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-name"},"Notice Name"),p.createElement("input",{type:"text",id:"name",name:"name",value:null!==(n=null==f?void 0:f.notice_name)&&void 0!==n?n:"",onChange:function(e){i.changeInput(e,"notice")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"source"},"Data source"),p.createElement(ht,{id:"source",isMulti:!0,value:_.filter(c,(function(e){return d.indexOf(e.value)>=0})),onChange:this.changeSelect,options:c})))),p.createElement(_e.mQ,{selectedIndex:this.state.activeTab,onSelect:this.switchTab},p.createElement(_e.td,{className:"nav nav-pills admin-pills"},p.createElement(_e.OK,null," Conditions "),p.createElement(_e.OK,null," Data "),p.createElement(_e.OK,null," Send to ")),p.createElement(_e.x4,null,p.createElement(Et,{conditions:null!==(a=null==f?void 0:f.conditions)&&void 0!==a?a:[],onSaveCondition:this.onSave,onActionCondition:this.onAction,changeInputCondition:this.changeInput,changeSelectCondition:this.changeSelect})),p.createElement(_e.x4,null,p.createElement(xt,{data:null!==(r=null==f?void 0:f.data)&&void 0!==r?r:[],onSaveData:this.onSave,changeInputData:this.changeInput})),p.createElement(_e.x4,null,p.createElement(wt,{send:null!==(o=null==f?void 0:f.send)&&void 0!==o?o:[],onSaveSend:this.onSave,changeBox:this.changeBox}))))}}]),f}(p.Component),St=(0,b.EN)(Ot);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jt=function(e){(0,s.Z)(h,e);var t,n,a,m,f=(a=h,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(m){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function h(e){var t;return(0,o.Z)(this,h),(t=f.call(this,e)).changeValue=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",a=e.target.name,r=e.target.value;t.setState((function(e){return(e=Zt({},e))[n][a]=r,e}))},t.changeRolesHandler=function(e){t.setState({usermeta:Zt(Zt({},t.state.usermeta),{},{roles:e?e.map((function(e){return e.value})):[]}),user:Zt(Zt({},t.state.user),{},{_roles:e?e.map((function(e){return e.value})):[]})})},t.changePermissionsHandler=function(e){t.setState({usermeta:Zt(Zt({},t.state.usermeta),{},{permissions:e?e.map((function(e){return e.value})):[]}),user:Zt(Zt({},t.state.user),{},{_permissions:e?e.map((function(e){return e.value})):[]})})},t.state={id:t.props.id,user:{},usermeta:{},errors:[],redirectAfterSave:!1,redirectAfterError:!1,redirect_error_url:"/admin/users",rolesOptions:[],permissionsOptions:[],isPasswordChange:!1},t.state.id||console.log(t.props.id),t.resource=new K.default({route:"/admin/ajax/users"}),t.rolesOptions=new K.default({route:"/admin/ajax/role_options"}),t.permissionsOptions=new K.default({route:"/admin/ajax/permissions_options"}),t.saveUser=t.saveUser.bind((0,l.Z)(t)),t}return(0,i.Z)(h,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n,a,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rolesOptions.getAll();case 2:return t=e.sent,this.setState((function(e){return Zt(Zt({},e),{},{rolesOptions:t})})),e.next=6,this.permissionsOptions.getAll();case 6:if(n=e.sent,this.setState((function(e){return Zt(Zt({},e),{},{permissionsOptions:n})})),this.state.id){e.next=10;break}return e.abrupt("return");case 10:if(!this.state.id){e.next=15;break}return e.next=13,this.resource.get(this.state.id);case 13:a=e.sent,this.setState((function(e){return Zt(Zt({},e),{},{user:a})}),(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.resource.get(o.state.id+"/usermeta");case 2:t=e.sent,o.setState((function(e){return Zt(Zt({},e),{},{usermeta:t})}));case 4:case"end":return e.stop()}}),e)}))));case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"saveUser",value:(t=(0,r.Z)(d().mark((function e(t){var n,a,r,o,i,l,s,c=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=this.state,o=r.isPasswordChange,i=r.user,l=i.password,s=i.password_confirmation,!o||l===s){e.next=4;break}return e.abrupt("return",alert("Password doesn't match confirmation"));case 4:if(!this.state.id){e.next=10;break}return e.next=7,this.resource.put(this.state.id,this.state.user);case 7:n=e.sent,e.next=13;break;case 10:return e.next=12,this.resource.post(this.state.user);case 12:n=e.sent;case 13:if(console.log(n),!n){e.next=22;break}return a=new K.default({route:"/admin/ajax/users/"+n.id+"/usermeta"}),e.next=18,a.post(this.state.usermeta);case 18:e.sent?this.setState((function(e){return Zt(Zt({},e),{},{redirectAfterSave:!0})})):this.setState((function(e){return Zt(Zt({},e),{},{redirectAfterError:!0,redirect_error_url:c.state.redirect_error_url+"/user/"+n.id})})),e.next=22;break;case 22:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.rolesOptions,a=t.permissionsOptions,r=t.isPasswordChange,o=this.state.user,i=o._roles,l=void 0===i?[]:i,s=o._permissions,c=void 0===s?[]:s;return this.state.redirectAfterSave?p.createElement(b.l_,{to:this.props.redirect_url}):this.state.redirectAfterError?p.createElement(b.l_,{to:this.state.redirect_error_url}):p.createElement("form",{className:"admin-form",onSubmit:this.saveUser},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-name"},"Name"),p.createElement("input",{type:"text",id:"name",name:"name",required:1,value:this.state.user.name||"",disabled:this.props.id,onChange:function(t){e.changeValue(t)},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-title"},"Email"),p.createElement("input",{type:"email",id:"email",name:"email",required:1,value:this.state.user.email||"",onChange:function(t){e.changeValue(t)},disabled:this.props.id,className:"form-control"})),this.state.id?null:p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-description"},"Password"),p.createElement("input",{type:"password",id:"password",name:"password",required:1,minlength:8,value:this.state.user.password||"",onChange:function(t){e.changeValue(t)},className:"form-control"})),this.state.id?null:p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-description"},"Confirm Password"),p.createElement("input",{type:"password",id:"password_confirmation",name:"password_confirmation",required:1,minlength:8,value:this.state.user.password_confirmation||"",onChange:function(t){e.changeValue(t)},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-description"},"First Name"),p.createElement("input",{type:"text",id:"first_name",name:"first_name",value:this.state.usermeta.first_name||"",onChange:function(t){e.changeValue(t,"usermeta")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-description"},"Second Name"),p.createElement("input",{type:"text",id:"second_name",name:"second_name",value:this.state.usermeta.second_name||"",onChange:function(t){e.changeValue(t,"usermeta")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-description"},"Telegram ID"),p.createElement("input",{type:"text",id:"telegram_user_id",name:"telegram_user_id",value:this.state.user.telegram_user_id||"",onChange:function(t){e.changeValue(t)},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-description"},"Patronymic"),p.createElement("input",{type:"text",id:"patronymic",name:"patronymic",value:this.state.usermeta.patronymic||"",onChange:function(t){e.changeValue(t,"usermeta")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"roles"},"Roles"),p.createElement(ht,{id:"roles",closeMenuOnSelect:!1,value:_.filter(n,(function(e){return l&&l.indexOf(e.value)>=0})),isMulti:!0,onChange:this.changeRolesHandler,options:n})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"permissions"},"Permissions"),p.createElement(ht,{id:"permissions",value:_.filter(a,(function(e){return c&&c.indexOf(e.value)>=0})),closeMenuOnSelect:!1,isMulti:!0,onChange:this.changePermissionsHandler,options:a})),this.state.id&&p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"changePassword",checked:r,onChange:function(t){e.setState({isPasswordChange:t.target.checked})}}),p.createElement("label",{className:"checkbox-label",htmlFor:"changePassword"},"Change Password")),r&&this.state.id&&p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"newPassword"},"New Password"),p.createElement("input",{type:"password",id:"newPassword",name:"password",required:!0,minlength:8,value:this.state.user.password||"",onChange:this.changeValue,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-description"},"Confirm Password"),p.createElement("input",{type:"password",id:"confirmNewPassword",name:"password_confirmation",required:!0,minlength:8,value:this.state.user.password_confirmation||"",onChange:this.changeValue,className:"form-control"}))),p.createElement("button",{className:"btn btn_success"},this.state.id?"Save":"Add"))}}]),h}(p.Component);var Rt=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).state={redirectAfterSave:!1},t.resource=new K.default({route:"/admin/ajax/users"}),t}return(0,i.Z)(r,[{key:"render",value:function(){return this.state.redirectAfterSave?p.createElement(b.l_,{to:"/admin/users"}):p.createElement("div",{className:"admin-users"},p.createElement("div",{className:"wrapper"},p.createElement("div",{className:"admin-heading-users"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/users"},"Users"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Add New Users"))),p.createElement("div",{className:"admin-users-form"},p.createElement(jt,{redirect_url:"/admin/users"}))))}}]),r}(p.Component),Pt=(0,b.EN)(Rt);var At=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).state={user_id:t.props.match.params.id,redirectAfterSave:!1},t.resource=new K.default({route:"/admin/ajax/users/user"}),t}return(0,i.Z)(r,[{key:"render",value:function(){return this.state.redirectAfterSave?p.createElement(b.l_,{to:"/admin/users"}):p.createElement("div",{className:"admin-users"},p.createElement("div",{className:"wrapper"},p.createElement("div",{className:"admin-heading-users"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/users"},"Users"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Add New Users"))),p.createElement("div",{className:"admin-users-form"},p.createElement(jt,{redirect_url:"/admin/users",id:this.state.user_id}))))}}]),r}(p.Component),Dt=(0,b.EN)(At);function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).switchTab=t.switchTab.bind((0,l.Z)(t)),t.state={activeTab:parseInt(window.location.hash[1])||0},t}return(0,i.Z)(r,[{key:"switchTab",value:function(e){window.location.hash=e+"",this.setState((function(t){return Mt(Mt({},t),{},{activeTab:e})}))}},{key:"render",value:function(){return p.createElement("div",{className:"admin-settings admin-page"},p.createElement("div",{className:"admin-content"},p.createElement(_e.mQ,{selectedIndex:this.state.activeTab,onSelect:this.switchTab},p.createElement(_e.td,{className:"nav nav-pills admin-pills"},p.createElement(_e.OK,null,"Edit user"),p.createElement(_e.OK,null,"Notifications")),p.createElement(_e.x4,null,p.createElement(Dt,null)),p.createElement(_e.x4,null,p.createElement(ct,null)))))}}]),r}(p.Component),Ht=(0,b.EN)(Tt);var Bt=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){return p.createElement("div",{id:"content"},p.createElement("div",{className:"admin-heading-users"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Users"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Tools"))),p.createElement("ul",{className:"nav nav-tabs"},p.createElement("li",{className:"nav-item"},p.createElement("a",{className:"nav-link active",href:"#"},"Tools"))),p.createElement("div",{className:"border border-top-0"},p.createElement("div",{className:"row d-flex"},p.createElement("div",{className:"col-sm-8 d-flex change-role"},p.createElement("span",null,"Change role"),p.createElement("select",{className:"form-control form-control-sm"},p.createElement("option",{value:"1"},"Editor"),p.createElement("option",{value:"2"},"Moderator")),p.createElement("div",{className:"form-check form-check-inline"},p.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"checkbox__1"}),p.createElement("label",{className:"form-check-label",htmlFor:"checkbox__1"},"Readable features")))),p.createElement("div",{className:"row group-table border border-bottom-0 border-left-0 border-right-0 no-gutters"},p.createElement("div",{className:"col-3"},p.createElement("span",{className:"text-group"},"Groups"),p.createElement("span",{className:"text-total"},"(Total/Allowed)")),p.createElement("div",{className:"col-6 form-check form-check-inline"},p.createElement("input",{className:"form-check-input",type:"checkbox",id:"checkbox__2"}),p.createElement("label",{className:"form-check-label",htmlFor:"checkbox__2"},"Fast filter:"),p.createElement("input",{type:"search",className:"search-tools form-control-sm",placeholder:"","aria-controls":"example1"}),p.createElement("input",{className:"form-check-input",type:"checkbox",id:"checkbox__3"}),p.createElement("label",{className:"form-check-label",htmlFor:"checkbox__3"},"Only Allowed")),p.createElement("div",{className:"col-3"},p.createElement("form",{action:"#",className:"form-tools"},p.createElement("button",{type:"submit",className:"btn-tools"},"Save Changes")))),p.createElement("div",{className:"row group-table-trees border border-bottom-0 border-left-0 border-right-0 no-gutters"},p.createElement("div",{className:"col-3"},p.createElement("div",{className:"treeview"},p.createElement("ul",null,p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#",className:"core"},"Core (112/2)"))),p.createElement("ul",null,p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Dashboard (10/1)")),p.createElement("p",{className:"form-group-p"},p.createElement("a",{href:"#"},"Rename"),p.createElement("span",null," | "),p.createElement("a",{href:"#"},"Copy"),p.createElement("span",null," | "),p.createElement("a",{href:"#"},"Delete")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Assets (10/1)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Tables (10/1)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Templates (10/1)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Reports (10/1)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Users (10/1)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Plugins (10/1)")))),p.createElement("li",{className:"cl"},p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Setings (42/5)"))),p.createElement("ul",{className:"l"},p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Builder (10/2)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Import/Export (10/2)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Integration (10/2)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Sender (10/2)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Acquiring (10/2)")))),p.createElement("li",null,p.createElement("div",null,p.createElement("p",null,p.createElement("a",{href:"#"},"Tuner (10/2)"))))))))))),p.createElement("div",{className:"col-6 form-check form-check-group"},p.createElement("fieldset",{className:"form-group"},p.createElement("div",{className:"row"},p.createElement("div",{className:"col-sm-10"},p.createElement("div",{className:"form-check"},p.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridRadios1",value:"option1",defaultChecked:!0}),p.createElement("label",{className:"form-check-label",htmlFor:"gridRadios1"},"Create Template"),p.createElement("p",{className:"form-group-p"},p.createElement("a",{href:"#"},"Rename"),p.createElement("span",null," | "),p.createElement("a",{href:"#"},"Copy"),p.createElement("span",null," | "),p.createElement("a",{href:"#"},"Delete"))),p.createElement("div",{className:"form-check"},p.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridRadios2",value:"option2",defaultChecked:!0}),p.createElement("label",{className:"form-check-label",htmlFor:"gridRadios2"},"Duplicate Template")),p.createElement("div",{className:"form-check"},p.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridRadios3",value:"option3"}),p.createElement("label",{className:"form-check-label",htmlFor:"gridRadios3"},"Activate / Deactivate Widgets")),p.createElement("div",{className:"form-check"},p.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridRadios4",value:"option4"}),p.createElement("label",{className:"form-check-label",htmlFor:"gridRadios4"},"Setup Integration")),p.createElement("div",{className:"form-check"},p.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridRadios5",value:"option5"}),p.createElement("label",{className:"form-check-label",htmlFor:"gridRadios5"},"Import / Export Templates")),p.createElement("div",{className:"form-check"},p.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridRadios6",value:"option6"}),p.createElement("label",{className:"form-check-label",htmlFor:"gridRadios6"},"Delete Template")),p.createElement("div",{className:"form-check"},p.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridRadios7",value:"option7",defaultChecked:!0}),p.createElement("label",{className:"form-check-label",htmlFor:"gridRadios7"},"Edit Template")))))),p.createElement("div",{className:"col-3 "},p.createElement("form",{action:"#",className:"group-vertical"},p.createElement("button",{type:"submit",className:"btn btn-outline-dark btn-sm"},"Add New Role"),p.createElement("button",{type:"submit",className:"btn btn-outline-dark btn-sm"},"Rename Role"),p.createElement("button",{type:"submit",className:"btn btn-outline-dark btn-sm"},"Delete Role"),p.createElement("button",{type:"submit",className:"btn btn-outline-dark btn-sm"},"Add New Group"),p.createElement("button",{type:"submit",className:"btn btn-outline-dark btn-sm"},"Add New Permission"),p.createElement("button",{type:"submit",className:"btn btn-outline-dark btn-sm"},"Tools Export"),p.createElement("button",{type:"submit",className:"btn btn-outline-dark btn-sm"},"Tools Import")),p.createElement("form",{action:"#",className:"dangerous"},p.createElement("span",null,"Warning! that “Reset” action could be dangerous"),p.createElement("button",{type:"submit",className:"btn-danger"},"RESET"))))))}}]),r}(p.Component),zt=n(87329),qt=n(52769),It=n(71843),Vt=n(1197),Ut=n(80366),Lt=n(19359),Wt=n.n(Lt);var Yt,Kt=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(e){var t;return(0,o.Z)(this,l),(t=a.call(this,e)).save=(0,r.Z)(d().mark((function e(){var n,a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.promise){e.next=3;break}return e.next=3,t.promise;case 3:if(n=t.props,a=n.values,r=n.save,o=Wt()(t.state.values,a),!Object.keys(o).length){e.next=13;break}return t.setState({submitting:!0,values:a}),t.promise=r(o),e.next=10,t.promise;case 10:delete t.promise,t.props.updateAsset(t.state.values.id,t.state.values),t.setState({submitting:!1});case 13:case"end":return e.stop()}}),e)}))),t.state={values:e.values,submitting:!1},t}return(0,i.Z)(l,[{key:"componentWillReceiveProps",value:function(e){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.save,this.props.debounce)}},{key:"render",value:function(){return this.state.submitting&&p.createElement("div",{className:"document-detail__save-notification"},"Saved.")}}]),l}(p.Component),Gt=function(e){return p.createElement(qt.lP,(0,y.Z)({},e,{subscription:{values:!0},component:Kt}))},Jt=n(74855);var Qt,$t=(0,Ze.vJ)(Yt||(Yt=(0,Ce.Z)(["\n  #admin {\n    overflow: hidden;\n  }\n"]))),Xt=function(e){return new Promise((function(t){return setTimeout(t,e)}))},en=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(){var e;(0,o.Z)(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={},e.getAuthorList=function(t){e.props.getAuthorList().then((function(n){var a=n.find((function(e){return e.id==t}));e.setState({authorName:a.name})}))},e.save=function(){var t=(0,r.Z)(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0!==n.width&&e.setState({width:n.width}),void 0!==n.height&&e.setState({height:n.height}),t.next=4,Xt(1e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,i.Z)(l,[{key:"componentDidUpdate",value:function(e){var t=this;e.imageId!==this.props.imageId&&null!==this.props.imageId&&this.props.getAsset(this.props.imageId).then((function(e){return t.setState(e,(function(){t.getAuthorList(t.state.author)}))}))}},{key:"deleteAsset",value:function(e){this.props.deleteAsset(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.authorName,a=t.url,r=t.created_at,o=t.filename,i=t.media_type,l=t.height,s=t.width;return this.props.imageId?p.createElement("div",null,p.createElement($t,null),p.createElement("div",{onClick:this.props.closeImageDetail,className:"document-detail_opacity-background"}),p.createElement("div",{className:"document-detail"},p.createElement("div",{className:"document-detail_header"},p.createElement("div",{className:"document-detail__title"},"Attachment details"),p.createElement("div",{className:"document-detail__btn-nav-group"},this.props.havePreviousImage?p.createElement("button",{onClick:this.props.prevImageDetail,className:"document-detail__btn-nav"},p.createElement(It.Z,{fontSize:"small"})):p.createElement("button",{onClick:this.props.prevImageDetail,disabled:!0,className:"document-detail__btn-nav"},p.createElement(It.Z,{fontSize:"small"})),this.props.haveNextImage?p.createElement("button",{onClick:this.props.nextImageDetail,className:"document-detail__btn-nav"},p.createElement(Vt.Z,{fontSize:"small"})):p.createElement("button",{onClick:this.props.nextImageDetail,disabled:!0,className:"document-detail__btn-nav"},p.createElement(Vt.Z,{fontSize:"small"})),p.createElement("button",{onClick:this.props.closeImageDetail,className:"document-detail__btn-nav"},p.createElement(Ut.Z,{fontSize:"small"})))),p.createElement("div",{className:"document-detail__content"},p.createElement("div",{className:"document-detail__display"},p.createElement("img",{className:"document-detail__image",width:s,height:l,src:a,draggable:"false",alt:""}),p.createElement("button",{className:"document-detail__btn document-detail__btn-edit-image"},"Edit image")),p.createElement("div",{className:"document-detail__editing-section"},p.createElement("div",{className:"document-detail__data-wrap"},p.createElement("div",{className:"document-detail__data"},p.createElement("div",null,"Uploaded on: ",p.createElement("span",{className:"document-detail__data-result"},r)),p.createElement("div",null,"Uploaded by: ",p.createElement("span",{className:"document-detail__data-result"},n)),p.createElement("div",null,"File name: ",p.createElement("span",{className:"document-detail__data-result"},o)),p.createElement("div",null,"File type: ",p.createElement("span",{className:"document-detail__data-result"},i)),p.createElement("div",null,"File size: ",p.createElement("span",{className:"document-detail__data-result"},"7 KB")),p.createElement("div",null,"Dimensions: ",p.createElement("span",{className:"document-detail__data-result"},l," by ",s," pixels")))),p.createElement(qt.l0,{initialValues:this.state,onSubmit:this.save},(function(t){return p.createElement("form",{onSubmit:t.handleSubmit},p.createElement(Gt,{updateAsset:e.props.updateAsset,debounce:1e3,save:e.save}),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"Alternative Text"),p.createElement(qt.gN,{name:"alternate_text",label:"Alt",component:"input",type:"text",className:"document-detail__input"})),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"Title"),p.createElement(qt.gN,{name:"title",label:"Title",component:"input",type:"text",className:"document-detail__input"})),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"Caption"),p.createElement(qt.gN,{name:"caption",label:"Caption",component:"textarea",type:"text",className:"document-detail__textarea"})),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"Description"),p.createElement(qt.gN,{name:"description",label:"Description",component:"textarea",type:"text",className:"document-detail__textarea"})),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"Width"),p.createElement(qt.gN,{name:"width",label:"Width",component:"input",type:"text",className:"document-detail__input"})),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"Height"),p.createElement(qt.gN,{name:"height",label:"Height",component:"input",type:"text",className:"document-detail__input"})),p.createElement("div",{className:"document-detail__line-to-change_uploated-by"},"Uploated By",p.createElement("span",{className:"document-detail__name-of-changes__uploated-by"},n)),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"File URL:"),p.createElement(qt.gN,{name:"url",label:"File URL",component:"input",type:"text",className:"document-detail__input"})),p.createElement("div",null,p.createElement(Jt.CopyToClipboard,{text:t.values.url},p.createElement("button",{className:"document-detail__btn document-detail__btn-copy-url"},"Copy URL to clipboard"))),p.createElement("div",{className:"document-detail__btn-delete-wrap"},p.createElement("button",{onClick:function(){return e.deleteAsset(t.values.id)},className:"document-detail__btn-delete"},"Delete permanently")))})))))):null}}]),l}(p.Component);var tn=(0,Ze.vJ)(Qt||(Qt=(0,Ce.Z)(["\n  #admin {\n    overflow: hidden;\n  }\n"]))),nn=function(e){return new Promise((function(t){return setTimeout(t,e)}))},an=function(){var e=(0,r.Z)(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nn(1e3);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rn=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={},e.getAuthorList=function(t){e.props.getAuthorList().then((function(n){var a=n.find((function(e){return e.id==t}));e.setState({authorName:a.name})}))},e}return(0,i.Z)(r,[{key:"componentDidUpdate",value:function(e){var t=this;e.fontId!==this.props.fontId&&null!==this.props.fontId&&this.props.getAsset(this.props.fontId).then((function(e){return t.setState(e,(function(){t.getAuthorList(t.state.author)}))}))}},{key:"deleteAsset",value:function(e){this.props.deleteAsset(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.authorName,a=t.created_at,r=t.filename,o=t.media_type;return this.props.fontId?p.createElement("div",null,p.createElement(tn,null),p.createElement("div",{onClick:this.props.closeFontDetail,className:"document-detail_opacity-background"}),p.createElement("div",{className:"document-detail"},p.createElement("div",{className:"document-detail_header"},p.createElement("div",{className:"document-detail__title"},"Attachment details"),p.createElement("div",{className:"document-detail__btn-nav-group"},this.props.havePreviousImage?p.createElement("button",{onClick:this.props.prevFontDetail,className:"document-detail__btn-nav"},p.createElement(It.Z,{fontSize:"small"})):p.createElement("button",{onClick:this.props.prevFontDetail,disabled:!0,className:"document-detail__btn-nav"},p.createElement(It.Z,{fontSize:"small"})),this.props.haveNextImage?p.createElement("button",{onClick:this.props.nextFontDetail,className:"document-detail__btn-nav"},p.createElement(Vt.Z,{fontSize:"small"})):p.createElement("button",{onClick:this.props.nextFontDetail,disabled:!0,className:"document-detail__btn-nav"},p.createElement(Vt.Z,{fontSize:"small"})),p.createElement("button",{onClick:this.props.closeFontDetail,className:"document-detail__btn-nav"},p.createElement(Ut.Z,{fontSize:"small"})))),p.createElement("div",{className:"document-detail__content"},p.createElement("div",{className:"document-detail__display"}),p.createElement("div",{className:"document-detail__editing-section"},p.createElement("div",{className:"document-detail__data-wrap"},p.createElement("div",{className:"document-detail__data"},p.createElement("div",null,"Uploaded on: ",p.createElement("span",{className:"document-detail__data-result"},a)),p.createElement("div",null,"Uploaded by: ",p.createElement("span",{className:"document-detail__data-result"},n)),p.createElement("div",null,"File name: ",p.createElement("span",{className:"document-detail__data-result"},r)),p.createElement("div",null,"File type: ",p.createElement("span",{className:"document-detail__data-result"},o)),p.createElement("div",null,"File size: ",p.createElement("span",{className:"document-detail__data-result"},"7 KB")))),p.createElement(qt.l0,{initialValues:this.state,onSubmit:an},(function(t){return p.createElement("form",{onSubmit:t.handleSubmit},p.createElement(Gt,{updateAsset:e.props.updateAsset,debounce:1e3,save:an}),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"Font Family"),p.createElement(qt.gN,{name:"font_family",component:"input",type:"text",className:"document-detail__input"})),p.createElement("div",{className:"document-detail__line-to-change"},p.createElement("span",{className:"document-detail__name-of-changes"},"Font Name"),p.createElement(qt.gN,{name:"font_name",component:"input",type:"text",className:"document-detail__input"})),p.createElement("div",{className:"document-detail__btn-delete-wrap"},p.createElement("button",{onClick:function(){return e.deleteAsset(t.values.id)},className:"document-detail__btn-delete"},"Delete permanently")))})))))):null}}]),r}(p.Component);function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sn=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).getAsset=function(e){return t.resource.get(e)},t.getAuthorList=function(){return t.resource.getAuthorList()},t.updateAsset=function(e,n){return t.resource.put(e,n)},t.deleteAsset=function(e){t.setState((function(e){return ln(ln({},e),{},{itemDeleteClasses:"item__delete altrp-disabled"})})),t.resource.delete(e).then((function(n){if(n.success){var a=(0,zt.Z)(t.state.assets);a=_.filter(a,(function(t){return!(t.id===Number(e))})),t.setState((function(e){return ln(ln({},e),{},{assets:a,itemDeleteClasses:"item__delete",imageId:null,fontId:null})}))}}))},t.nextImageDetail=function(){var e=t.state.assets.findIndex((function(e){return e.id==t.state.imageId}))+1;t.checkingFirstOrLastDocument(t.state.assets[e].id),t.setState({imageId:t.state.assets[e].id})},t.prevImageDetail=function(){var e=t.state.assets.findIndex((function(e){return e.id==t.state.imageId}))-1;t.checkingFirstOrLastDocument(t.state.assets[e].id),t.setState({imageId:t.state.assets[e].id})},t.closeImageDetail=function(){t.setState({imageId:null,haveNextImage:!0,havePreviousImage:!0})},t.nextFontDetail=function(){var e=t.state.assets.findIndex((function(e){return e.id==t.state.fontId}))+1;t.checkingFirstOrLastDocument(t.state.assets[e].id),t.setState({fontId:t.state.assets[e].id})},t.prevFontDetail=function(){var e=t.state.assets.findIndex((function(e){return e.id==t.state.fontId}))-1;t.checkingFirstOrLastDocument(t.state.assets[e].id),t.setState({fontId:t.state.assets[e].id})},t.closeFontDetail=function(){t.setState({fontId:null,haveNextFont:!0,havePreviousFont:!0})},t.onDragOver=t.onDragOver.bind((0,l.Z)(t)),t.onDragLeave=t.onDragLeave.bind((0,l.Z)(t)),t.onDrop=t.onDrop.bind((0,l.Z)(t)),t.onChange=t.onChange.bind((0,l.Z)(t)),t.deleteClick=t.deleteClick.bind((0,l.Z)(t)),t.isActiveLink=t.isActiveLink.bind((0,l.Z)(t)),t.changeUrlForTab=t.changeUrlForTab.bind((0,l.Z)(t)),t.state={uploaderClasses:"admin-assets__uploader uploader",assets:[],acceptInput:"",itemDeleteClasses:"item__delete",activeLink:"",imageId:null,fontId:null,havePreviousImage:!0,haveNextImage:!0,haveNextFont:!0,havePreviousFont:!0},t.typesFiles={images:["png","gif","jpg","jpeg","webp"],svgs:["svg"],fonts:["ttf","otf","woff","woff2","eot"],archives:["zip","rar"],documents:["doc","docx","xls","xlsx","ppt","odt","ods","odp"],medias:["wav","mp3","mp4","avi","webm"],others:[""]},t.resource=new K.default({route:"/admin/ajax/media"}),t}return(0,i.Z)(r,[{key:"deleteClick",value:function(e){var t=this,n=e.currentTarget.dataset.assetid;this.setState((function(e){return ln(ln({},e),{},{itemDeleteClasses:"item__delete altrp-disabled"})})),this.resource.delete(n).then((function(e){if(e.success){var a=(0,zt.Z)(t.state.assets);a=_.filter(a,(function(e){return!(e.id===Number(n))})),t.setState((function(e){return ln(ln({},e),{},{assets:a,itemDeleteClasses:"item__delete"})}))}}))}},{key:"updateAssets",value:function(e){var t=this;this.resource.postFiles(e).then((function(e){if(e.length){var n=t.changeUrlForTab();t.filterAssets(n)}}))}},{key:"onDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.updateAssets(e.dataTransfer.files),this.setState((function(e){return ln(ln({},e),{},{uploaderClasses:"admin-assets__uploader uploader"})}))}},{key:"componentDidMount",value:function(){var e=this.changeUrlForTab();this.filterAssets(e)}},{key:"componentDidUpdate",value:function(){this.changeUrlForTab()}},{key:"onChange",value:function(e){this.updateAssets(e.target.files)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState((function(e){return ln(ln({},e),{},{uploaderClasses:"admin-assets__uploader uploader uploader_drag-over"})}))}},{key:"onDragLeave",value:function(){this.setState((function(e){return ln(ln({},e),{},{uploaderClasses:"admin-assets__uploader uploader"})}))}},{key:"isActiveLink",value:function(e){return function(t,n){var a=n.pathname.split("/");return a[a.length-1]===e}}},{key:"onFilterAssets",value:function(e){var t=this;return function(){return t.filterAssets(e)}}},{key:"filterAssets",value:function(e){var t=this;this.setState((function(n){return ln(ln({},n),{},{acceptInput:".".concat(t.typesFiles[e].join(", ."))})})),new K.default({route:"/admin/ajax/media?type=".concat(e.slice(0,-1))}).getAll().then((function(e){t.setState((function(t){return ln(ln({},t),{},{assets:e})}))})),this.setState((function(t){return ln(ln({},t),{},{activeLink:e})}))}},{key:"changeUrlForTab",value:function(){var e=this.props,t=e.location,n=e.history;this.path=t.pathname;var a=t.pathname.split("/");if("assets"===a[a.length-1])return n.push("".concat(this.path,"/images")),"images";var r=a.pop();return this.path=a.join("/"),r}},{key:"checkingFirstOrLastDocument",value:function(e){var t=this.state.assets.findIndex((function(t){return t.id==e}));0===t?this.setState({havePreviousImage:!1}):t===this.state.assets.length-1?this.setState({haveNextImage:!1}):this.setState({haveNextImage:!0,havePreviousImage:!0})}},{key:"openImageDetail",value:function(e){this.checkingFirstOrLastDocument(e),this.setState({imageId:e})}},{key:"openDocumentDetail",value:function(e){this.checkingFirstOrLastDocument(e),this.setState({fontId:e})}},{key:"render",value:function(){var e=this,t=ie().getIconComponent("upload"),n=ie().getIconComponent("close");return ie().getIconComponent("avi"),p.createElement("div",{className:"admin-assets admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Assets"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"All Assets"))),p.createElement("div",{className:"admin-content"},p.createElement("div",{className:this.state.uploaderClasses,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onDragOver:this.onDragOver},p.createElement("label",{className:"uploader__label d-flex flex-column align-items-center"},p.createElement(t,{width:100,height:100,className:"icon"}),p.createElement("input",{type:"file",accept:this.state.acceptInput,multiple:!0,onChange:this.onChange,className:"uploader__input"}),p.createElement("span",{className:"uploader__text text text_bold"},"Drag or Choose File"))),p.createElement("div",{className:"custom-tab__tabs mt-4"},p.createElement(h.OL,{className:"custom-tab__tab",activeClassName:"custom-tab__tab--selected",to:"".concat(this.path,"/images"),isActive:this.isActiveLink("images"),onClick:this.onFilterAssets("images")},"IMAGES"),p.createElement(h.OL,{className:"custom-tab__tab",activeClassName:"custom-tab__tab--selected",to:"".concat(this.path,"/documents"),isActive:this.isActiveLink("documents"),onClick:this.onFilterAssets("documents")},"DOCUMENTS"),p.createElement(h.OL,{className:"custom-tab__tab",activeClassName:"custom-tab__tab--selected",to:"".concat(this.path,"/fonts"),isActive:this.isActiveLink("fonts"),onClick:this.onFilterAssets("fonts")},"FONTS"),p.createElement(h.OL,{className:"custom-tab__tab",activeClassName:"custom-tab__tab--selected",to:"".concat(this.path,"/svgs"),isActive:this.isActiveLink("svgs"),onClick:this.onFilterAssets("svgs")},"SVGS"),p.createElement(h.OL,{className:"custom-tab__tab",activeClassName:"custom-tab__tab--selected",to:"".concat(this.path,"/archives"),isActive:this.isActiveLink("archives"),onClick:this.onFilterAssets("archives")},"ARCHIVES"),p.createElement(h.OL,{className:"custom-tab__tab",activeClassName:"custom-tab__tab--selected",to:"".concat(this.path,"/medias"),isActive:this.isActiveLink("medias"),onClick:this.onFilterAssets("medias")},"MEDIAS"),p.createElement(h.OL,{className:"custom-tab__tab",activeClassName:"custom-tab__tab--selected",to:"".concat(this.path,"/others"),isActive:this.isActiveLink("others"),onClick:this.onFilterAssets("others")},"OTHERS")),p.createElement("div",{className:"admin-assets__list custom-tab__tab-panel p-4 assets-list d-flex flex-wrap"},this.state.assets.map((function(t){return p.createElement("div",{className:"assets-list__item item col-1",key:t.id},function(){if("images"===e.state.activeLink||"svgs"===e.state.activeLink)return p.createElement("div",{onClick:function(){return e.openImageDetail(t.id)},className:"item__background",style:{backgroundImage:"url('".concat(t.url,"')")}});var n=t.url.split(".").pop(),a=ie().getIconComponent("file");return e.typesFiles[e.state.activeLink].forEach((function(e){if(n===e)return a=ie().getIconComponent(n),p.createElement(a,{className:"item__icon-background"})})),p.createElement(a,{onClick:function(){return e.openDocumentDetail(t.id)},className:"item__icon-background"})}(),p.createElement("button",{className:e.state.itemDeleteClasses,"data-assetid":t.id,title:"Delete",onClick:e.deleteClick},p.createElement(n,{className:"item__delete-icon"})))})))),p.createElement("div",null,p.createElement(en,{getAuthorList:this.getAuthorList,havePreviousImage:this.state.havePreviousImage,haveNextImage:this.state.haveNextImage,updateAsset:this.updateAsset,getAsset:this.getAsset,deleteAsset:this.deleteAsset,imageId:this.state.imageId,closeImageDetail:this.closeImageDetail,nextImageDetail:this.nextImageDetail,prevImageDetail:this.prevImageDetail}),p.createElement(rn,{nextFontDetail:this.nextFontDetail,prevFontDetail:this.prevFontDetail,closeFontDetail:this.closeFontDetail,getAuthorList:this.getAuthorList,getAsset:this.getAsset,fontId:this.state.fontId,deleteAsset:this.deleteAsset})))}}]),r}(p.Component),cn=(0,b.EN)(sn),un=n(34699),mn=n(50274),dn=n(9669),pn=n.n(dn),fn=n(77932),hn=n(50317),bn="CHART/BAR",vn="CHART/PIE",gn="CHART/LINE",_n="CHART/TABLE",yn="CHART/POINT",En=[{name:"Столбцы",value:bn},{name:"Круговая",value:vn},{name:"Графики",value:gn},{name:"Таблица",value:_n},{name:"Точечная",value:yn}],xn=function(){return p.createElement("div",{className:"spinner-container"},p.createElement("div",{className:"spinner-border",style:{width:"3rem",height:"3rem"},role:"status"},p.createElement("span",{className:"sr-only"},"Загрузка...")))},wn=function(e){var t=e.text;return p.createElement("div",{className:"spinner-container"},p.createElement("div",{className:"spinner-container__text"},t||"Данные обрабатываются"))},kn=[{label:"Regagro",value:"regagro",colors:["#FFEC00","#6F6E6E","#F6E36A","#979797","#FEF367","#979678","#CFBF00","#706B46","#A59103","#444444"]},{label:"nivo",value:"nivo",colors:["#e8c1a0","#f47560","#f1e15b","#e8a838","#61cdbb","#97e3d5"]},{label:"category10",value:"category10",colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]},{label:"accent",value:"accent",colors:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},{label:"dark2",value:"dark2",colors:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},{label:"paired",value:"paired",colors:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},{label:"pastel1",value:"pastel1",colors:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},{label:"pastel2",value:"pastel2",colors:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},{label:"set1",value:"set1",colors:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},{label:"set2",value:"set2",colors:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},{label:"set3",value:"set3",colors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]},{label:"brown_blueGreen",value:"brown_blueGreen",colors:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},{label:"purpleRed_green",value:"purpleRed_green",colors:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},{label:"pink_yellowGreen",value:"pink_yellowGreen",colors:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},{label:"purple_orange",value:"purple_orange",colors:["#2d004b","#542788","#8073ac","#b2abd2","#d8daeb","#f7f7f7","#fee0b6","#fdb863","#e08214","#b35806","#7f3b08"]},{label:"red_blue",value:"red_blue",colors:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},{label:"regagro",value:"red_grey",colors:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},{label:"red_yellow_blue",value:"red_yellow_blue",colors:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},{label:"red_yellow_green",value:"red_yellow_green",colors:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},{label:"spectral",value:"spectral",colors:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},{label:"blues",value:"blues",colors:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},{label:"greens",value:"greens",colors:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},{label:"greys",value:"greys",colors:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},{label:"oranges",value:"oranges",colors:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},{label:"purples",value:"purples",colors:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},{label:"reds",value:"reds",colors:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},{label:"blue_green",value:"blue_green",colors:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},{label:"blue_purple",value:"blue_purple",colors:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},{label:"green_blue",value:"green_blue",colors:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},{label:"orange_red",value:"orange_red",colors:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},{label:"purple_blue_green",value:"purple_blue_green",colors:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},{label:"purple_blue",value:"purple_blue",colors:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},{label:"purple_red",value:"purple_red",colors:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},{label:"red_purple",value:"red_purple",colors:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},{label:"yellow_green_blue",value:"yellow_green_blue",colors:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},{label:"yellow_green",value:"yellow_green",colors:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},{label:"yellow_orange_brown",value:"yellow_orange_brown",colors:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},{label:"yellow_orange_red",value:"yellow_orange_red",colors:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},{label:"Milk",value:"milk",colors:["#797979","#042D5B","#536DFE","#7C4DFF","#AA8D52","#448AFF","#A52A2A","#FF6347","#EE82EE","#BDB76B"]},{label:"Milk2",value:"milk2",colors:["#004B9C","#6F2700","#FF6600","#005800"]}],Nn=n(58965),On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).reduce((function(t,n,a){return[t,0===a?"?":"&",n=encodeURIComponent(n),"=",encodeURIComponent(e[n])].join("")}),"");return console.log("RESULT ==>",t),t},Sn=function(){var e=(0,r.Z)(d().mark((function e(t,n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="","object"===(0,Y.Z)(n)?a=On(n):void 0!==n&&(a=On(JSON.parse(n))),e.prev=2,e.next=5,pn()(t+a,{});case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",{status:500});case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,n){return e.apply(this,arguments)}}();function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jn=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t,n,i,l;return(0,o.Z)(this,r),(l=a.call(this,e)).state={indexValue:null===(t=e.datum)||void 0===t?void 0:t.indexValue,value:null===(n=e.datum)||void 0===n?void 0:n.value,color:null===(i=e.datum)||void 0===i?void 0:i.color,enable:null==e?void 0:e.enable,settings:null==e?void 0:e.settings},l}return(0,i.Z)(r,[{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.enable,this.props.enable)||this.setState((function(e){var t;return Zn(Zn({},e),{},{enable:null===(t=n.props)||void 0===t?void 0:t.enable})}))}},{key:"customTooltip",value:function(){var e,t,n,a,r;return p.createElement(p.Fragment,null,p.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font altrp-dashboard__tooltip--label-background altrp-dashboard__tooltip--width altrp-dashboard__tooltip--label-background-shadow altrp-dashboard__tooltip--border-type altrp-dashboard__tooltip--border-width altrp-dashboard__tooltip--border-color  col-12"),style:{padding:"5px 9px"}},p.createElement("div",null,void 0===(null===(e=this.props.datum)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.tooltip)&&p.createElement("div",{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},p.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:this.props.datum.color,marginRight:"7px"}}),p.createElement("div",{className:"".concat(this.props.widgetID," col px-0")},this.props.datum.data.key,":"," ",p.createElement("strong",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font col px-0")},this.props.datum.data.value))),null===(n=this.props.datum)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.tooltip)||void 0===r?void 0:r.map((function(e,t){return p.createElement("div",{style:{color:(null==e?void 0:e.color)||"#000000"},key:t},"".concat(null==e?void 0:e.label,":"),p.createElement("strong",null,e.value))})))))}},{key:"render",value:function(){return this.state.enable?this.customTooltip():p.createElement(p.Fragment,null,p.createElement("div",{style:{color:"inherit",fontSize:"{{SIZE}}px",borderRadius:"2px",padding:"3px 9px"}},p.createElement("div",{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},p.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:this.props.datum.color,marginRight:"7px"}}),p.createElement("span",null,this.props.datum.data.key,":"," ",p.createElement("strong",null,this.props.datum.data.value)))))}}]),r}(p.PureComponent),Rn=_.find(kn,{value:"regagro"}).colors,Pn=_.find(kn,{value:"milk"}).colors,An=_.find(kn,{value:"milk2"}).colors,Dn=function(e){var t=e.widget,n=(e.width,e.height),o=void 0===n?450:n,i=e.dataSource,l=void 0===i?[]:i,s=e.groupMode,c=void 0===s?"stacked":s,u=e.layout,m=void 0===u?"vertical":u,f=e.colorScheme,h=void 0===f?"regagro":f,b=e.reverse,v=void 0!==b&&b,g=e.enableLabel,y=void 0!==g&&g,E=e.padding,x=void 0===E?.1:E,w=e.innerPadding,k=void 0===w?0:w,N=e.borderRadius,O=void 0===N?0:N,S=e.borderWidth,C=void 0===S?0:S,Z=e.sort,j=void 0===Z?"":Z,R=e.tickRotation,P=void 0===R?0:R,A=e.bottomAxis,D=void 0===A||A,F=e.enableGridX,M=void 0===F||F,T=e.enableGridY,H=void 0===T||T,B=e.customColorSchemeChecker,z=void 0!==B&&B,q=e.customColors,I=void 0===q?[]:q,V=(e.yScaleMax,e.widgetID),U=e.useCustomTooltips,L=(0,p.useState)(!1),W=(0,un.Z)(L,2),Y=W[0],K=W[1],G=(0,p.useState)([]),J=(0,un.Z)(G,2),Q=J[0],$=J[1],X=(0,p.useCallback)((0,r.Z)(d().mark((function e(){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K(!0),0!=l.length){e.next=8;break}return e.next=4,Sn(t.source,t.filter);case 4:200===(n=e.sent).status&&(r=n.data.data.map((function(e,t){var n;return n={},(0,a.Z)(n,e.key,Number(e.data)),(0,a.Z)(n,"key",e.key),(0,a.Z)(n,"value",Number(e.data)),n})),$(r||[]),K(!1)),e.next=20;break;case 8:if(null==j||void 0===l){e.next=18;break}e.t0=j,e.next="value"===e.t0?12:"key"===e.t0?14:16;break;case 12:return l=_.sortBy(l,["value"]),e.abrupt("break",18);case 14:return l=_.sortBy(l,["key"]),e.abrupt("break",18);case 16:return l=l,e.abrupt("break",18);case 18:$(l||[]),K(!1);case 20:case"end":return e.stop()}}),e)}))),[t]);return(0,p.useEffect)((function(){X()}),[X]),Y?p.createElement(xn,null):0===Q.length?p.createElement(wn,null):(console.log("===================================="),console.log(h),console.log("===================================="),p.createElement(p.Fragment,null,p.createElement("div",{style:{height:"".concat(o,"px")}},p.createElement(Nn.jM,(0,a.Z)({data:Q,margin:{top:30,right:30,bottom:30,left:30},indexBy:"key",colors:z&&I.length>0?I:"regagro"===h?Rn:"milk"===h?Pn:"milk2"===h?An:{scheme:h},colorBy:"index",layout:m,axisBottom:D&&{tickRotation:P},tooltip:function(e){return p.createElement(jn,{enable:U,datum:e,widgetID:V})},enableGridX:M,enableGridY:H,enableLabel:y,reverse:v,groupMode:c,padding:x,innerPadding:k,borderRadius:O,borderWidth:C},"axisBottom",{tickSize:5,tickPadding:5,tickRotation:0,legend:"key",legendOffset:32})))))},Fn=n(73445),Mn=n(30381),Tn=n.n(Mn);function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zn=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t,n,i,l;return(0,o.Z)(this,r),console.log(e.datum),(l=a.call(this,e)).state={indexValue:null===(t=e.datum)||void 0===t?void 0:t.indexValue,value:null===(n=e.datum)||void 0===n?void 0:n.value,color:null===(i=e.datum)||void 0===i?void 0:i.color,enable:null==e?void 0:e.enable,settings:null==e?void 0:e.settings},l}return(0,i.Z)(r,[{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.enable,this.props.enable)||this.setState((function(e){var t;return Bn(Bn({},e),{},{enable:null===(t=n.props)||void 0===t?void 0:t.enable})}))}},{key:"customTooltip",value:function(){var e,t,n,a,r,o,i;return p.createElement(p.Fragment,null,p.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font altrp-dashboard__tooltip--label-background altrp-dashboard__tooltip--width altrp-dashboard__tooltip--label-background-shadow altrp-dashboard__tooltip--border-type altrp-dashboard__tooltip--border-width altrp-dashboard__tooltip--border-color col-12"),style:{padding:"5px 9px"}},p.createElement("div",null,void 0===(null===(e=this.props.datum)||void 0===e||null===(t=e.datum)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.tooltip)&&p.createElement("div",{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},p.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:this.props.datum.datum.color,marginRight:"7px"}}),p.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font col px-0")},this.props.datum.datum.label,":"," ",p.createElement("strong",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font col px-0")},this.props.datum.datum.value))),null===(a=this.props.datum)||void 0===a||null===(r=a.datum)||void 0===r||null===(o=r.data)||void 0===o||null===(i=o.tooltip)||void 0===i?void 0:i.map((function(e,t){return p.createElement("div",{style:{color:(null==e?void 0:e.color)||"#000000"},key:t},"".concat(null==e?void 0:e.label,":"),p.createElement("strong",null,e.value))})))))}},{key:"render",value:function(){return this.state.enable?this.customTooltip():p.createElement(p.Fragment,null,p.createElement("div",{style:{background:"white",color:"inherit",fontSize:"{{SIZE}}px",borderRadius:"2px",boxShadow:"rgba(0, 0, 0, 0.25) 0px 1px 2px",padding:"5px 9px"}},p.createElement("div",{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},p.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:this.props.datum.datum.color,marginRight:"7px"}}),p.createElement("span",null,this.props.datum.datum.label,":"," ",p.createElement("strong",null,this.props.datum.datum.value)))))}}]),r}(p.PureComponent),qn=_.find(kn,{value:"regagro"}).colors,In=_.find(kn,{value:"milk"}).colors,Vn=_.find(kn,{value:"milk2"}).colors,Un=function(e){var t,n=e.widget,o=e.width,i=void 0===o?"300px":o,l=e.height,s=void 0===l?"450px":l,c=e.dataSource,u=void 0===c?[]:c,m=e.colorScheme,f=void 0===m?"red_grey":m,h=e.enableSliceLabels,b=void 0!==h&&h,v=e.innerRadius,g=void 0===v?0:v,y=e.padAngle,E=void 0===y?0:y,x=e.cornerRadius,w=void 0===x?0:x,k=e.sortByValue,N=void 0===k?0:k,O=e.enableRadialLabels,S=void 0===O||O,C=e.sort,Z=void 0===C?"":C,j=e.tickRotation,R=void 0===j?0:j,P=e.bottomAxis,A=void 0===P||P,D=e.keyIsDate,F=void 0!==D&&D,M=(e.isDashboard,e.customColorSchemeChecker),T=void 0!==M&&M,H=e.customColors,B=void 0===H?[]:H,z=(e.yScaleMax,e.widgetID),q=e.useCustomTooltips,I=e.margin,V=(0,p.useState)(!1),U=(0,un.Z)(V,2),L=U[0],W=U[1],Y=(0,p.useState)([]),K=(0,un.Z)(Y,2),G=K[0],J=K[1],Q=(0,p.useCallback)((0,r.Z)(d().mark((function e(){var t,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W(!0),0!=u.length){e.next=8;break}return e.next=4,Sn(n.source,n.filter);case 4:200===(t=e.sent).status&&(a=t.data.data.map((function(e){var t=e.key,n=Tn()(t).isValid()?Tn()(t).format("DD.MM.YYYY"):t;return{value:Number(e.data),id:F?n:t}})),J(a||[]),W(!1)),e.next=20;break;case 8:if(null===Z||"undefined"===Z||void 0===u){e.next=18;break}e.t0=Z,e.next="value"===e.t0?12:"key"===e.t0?14:16;break;case 12:return u=_.sortBy(u,["value"]),e.abrupt("break",18);case 14:return u=_.sortBy(u,["id"]),e.abrupt("break",18);case 16:return u=u,e.abrupt("break",18);case 18:J(u||[]),W(!1);case 20:case"end":return e.stop()}}),e)}))),[n]);return(0,p.useEffect)((function(){Q()}),[Q]),L?p.createElement(xn,null):G&&0!==G.length?p.createElement(p.Fragment,null,p.createElement("div",{style:{height:s,width:i}},p.createElement(Fn.Y2,(t={data:G,colors:{scheme:f},margin:{top:(null==I?void 0:I.top)||30,right:(null==I?void 0:I.right)||30,bottom:(null==I?void 0:I.bottom)||30,left:(null==I?void 0:I.left)||30}},(0,a.Z)(t,"colors",T&&B.length>0?B:"regagro"===f?qn:"milk"===f?In:"milk2"===f?Vn:{scheme:f}),(0,a.Z)(t,"tooltip",(function(e){return p.createElement(zn,{enable:q,datum:e,widgetID:z})})),(0,a.Z)(t,"innerRadius",g),(0,a.Z)(t,"enableSliceLabels",b),(0,a.Z)(t,"padAngle",E),(0,a.Z)(t,"cornerRadius",w),(0,a.Z)(t,"sortByValue",N),(0,a.Z)(t,"axisBottom",A&&{tickRotation:R}),(0,a.Z)(t,"colors","regagro"===f?qn:"milk"===f?In:"milk2"===f?Vn:{scheme:f}),(0,a.Z)(t,"enableRadialLabels",S),t)))):p.createElement(wn,null)},Ln=n(24549);function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kn=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).state={enablebar:e.datum.enable,enable:e.enable,point:e.datum.point,data:e.datum.point.data,settings:null==e?void 0:e.settings,keyIsDate:null==e?void 0:e.keyIsDate},console.log("===================================="),console.log(t.state.data),console.log("===================================="),t.containerSettings=t.containerSettings.bind((0,l.Z)(t)),t}return(0,i.Z)(r,[{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.datum.point,this.props.datum.point)||this.setState((function(e){return Yn(Yn({},e),{},{point:n.props.datum.point,data:n.props.datum.point.data})})),_.isEqual(e.settings,this.props.settings)||this.setState((function(e){var t;return Yn(Yn({},e),{},{settings:null===(t=n.props)||void 0===t?void 0:t.settings})})),_.isEqual(e.enable,this.props.enable)||this.setState((function(e){var t;return Yn(Yn({},e),{},{settenableings:null===(t=n.props)||void 0===t?void 0:t.enable})}))}},{key:"containerSettings",value:function(){var e,t,n,a,r,o=(null===(e=this.state)||void 0===e?void 0:e.settings)||{};return console.log("===================================="),console.log(o),console.log("===================================="),{padding:"".concat((null==o||null===(t=o.padding)||void 0===t?void 0:t.top)||5,"px ").concat((null==o||null===(n=o.padding)||void 0===n?void 0:n.right)||5,"px ").concat((null==o||null===(a=o.padding)||void 0===a?void 0:a.bottom)||5,"px ").concat((null==o||null===(r=o.padding)||void 0===r?void 0:r.left)||5,"px"),borderStyle:"".concat((null==o?void 0:o.borderStyle)||"solid"),borderRadius:"".concat((null==o?void 0:o.borderRadius)||"4px"),borderColor:"".concat((null==o?void 0:o.borderColor)||"black"),borderWidth:"".concat((null==o?void 0:o.borderWidth)||"1px"),backgroundColor:"".concat((null==o?void 0:o.backgroundColor)||"red"),color:"white",width:"fit-content",flexDirection:"column-reverse"}}},{key:"render",value:function(){var e,t,n;if(this.state.enable)return React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--label-background altrp-dashboard__tooltip--width altrp-dashboard__tooltip--label-background-shadow altrp-dashboard__tooltip--border-type altrp-dashboard__tooltip--border-width altrp-dashboard__tooltip--border-color col-12"),style:{padding:"5px 9px"}},React.createElement("div",null,void 0===(null===(e=this.state.data)||void 0===e?void 0:e.tooltip)&&React.createElement("div",{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},React.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:this.state.point.color,marginRight:"7px"}}),React.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font col px-0")},this.props.keyIsDate?this.state.data.xFormatted:this.state.data.x,":",React.createElement("strong",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font col px-0")},this.state.data.y))),null===(t=this.state.data)||void 0===t||null===(n=t.tooltip)||void 0===n?void 0:n.map((function(e,t){return React.createElement(React.Fragment,null,React.createElement("div",{style:{color:(null==e?void 0:e.color)||"#000000"},key:t},"".concat(null==e?void 0:e.label,":"),React.createElement("strong",null,e.value)))})))));var a=this.state.data,r=a.xFormatted,o=a.yFormatted;return React.createElement(React.Fragment,null,React.createElement("div",{style:{background:"white",color:"inherit",fontSize:"{{SIZE}}px",borderRadius:"2px",boxShadow:"rgba(0, 0, 0, 0.25) 0px 1px 2px",padding:"5px 9px"}},React.createElement("div",{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},React.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:this.state.point.color,marginRight:"7px"}}),React.createElement("span",null,r,": ",React.createElement("strong",null,o)))))}}]),r}(p.PureComponent),Gn=_.find(kn,{value:"regagro"}).colors,Jn=_.find(kn,{value:"milk"}).colors,Qn=_.find(kn,{value:"milk2"}).colors,$n="%d.%m.%Y",Xn=function(e){var t=e.widget,n=e.width,a=void 0===n?"300px":n,o=e.height,i=void 0===o?"450px":o,l=e.margin,s=e.keyIsDate,c=e.dataSource,u=void 0===c?[]:c,m=e.lineWidth,f=void 0===m?2:m,h=e.pointSize,b=void 0===h?10:h,v=e.xScaleType,g=void 0===v?"point":v,y=e.precision,E=void 0===y?"month":y,x=e.colorScheme,w=void 0===x?"red_grey":x,k=e.curve,N=void 0===k?"linear":k,O=e.enableArea,S=void 0!==O&&O,C=e.enablePoints,Z=void 0===C||C,j=e.pointColor,R=(e.yMarker,e.yMarkerValue,e.yMarkerOrientation,e.yMarkerColor,e.yMarkerLabel,e.yMarkerWidth,e.xMarker,e.xMarkerValue,e.xMarkerOrientation,e.xMarkerColor,e.xMarkerLabel,e.xMarkerWidth,e.yMarkerLabelColor,e.xMarkerLabelColor,e.sort),P=void 0===R?"":R,A=e.tickRotation,D=void 0===A?0:A,F=e.bottomAxis,M=void 0===F||F,T=e.enableGridX,H=void 0===T||T,B=e.enableGridY,z=void 0===B||B,q=e.customColorSchemeChecker,I=void 0!==q&&q,V=e.customColors,U=void 0===V?[]:V,L=e.constantsAxises,W=void 0===L?[]:L,Y=e.yScaleMax,K=e.widgetID,G=e.useCustomTooltips,J=(0,p.useState)(!1),Q=(0,un.Z)(J,2),$=Q[0],X=Q[1],ee=(0,p.useState)([]),te=(0,un.Z)(ee,2),ne=te[0],ae=te[1],re=(0,p.useCallback)((0,r.Z)(d().mark((function e(){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X(!0),0!=u.length){e.next=8;break}return e.next=4,Sn(t.source,t.filter);case 4:200===(n=e.sent).status&&(a=n.data.data.map((function(e){var t=e.key,n=Tn()(t).isValid()?Tn()(t).format("DD.MM.YYYY"):t;return{y:Number(e.data),x:s?n:t}})),ae([{id:"",data:a}]||[]),X(!1)),e.next=19;break;case 8:if(null===P||"undefined"===P||void 0===u){e.next=17;break}e.t0=P,e.next="value"===e.t0?12:"key"===e.t0?14:16;break;case 12:return u.forEach((function(e,t){e.data.length>0&&(u[t].data=_.sortBy(e.data,["y"]))})),e.abrupt("break",17);case 14:return ne.forEach((function(e,t){e.data.length>0&&(u[t].data=_.sortBy(e.data,["x"]))})),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:ae(u||[]),X(!1);case 19:case"end":return e.stop()}}),e)}))),[t]);return(0,p.useEffect)((function(){re()}),[re]),$?p.createElement(xn,null):_.uniq(ne.map((function(e){return e.data.length>0}))).includes(!0)?p.createElement(p.Fragment,null,p.createElement("div",{style:{width:a,height:i}},p.createElement(Ln.fH,{data:ne,margin:{top:(null==l?void 0:l.top)||30,right:(null==l?void 0:l.right)||30,bottom:(null==l?void 0:l.bottom)||30,left:(null==l?void 0:l.left)||30},xFormat:"time"===g&&"time:%d.%m.%Y",yScale:Y?{max:Y,type:"linear"}:{type:"linear"},xScale:"time"===g?{type:g,format:$n,precision:E}:{type:g},lineWidth:f,markers:W,enableGridX:H,enableGridY:z,axisBottom:M&&("time"===g?{format:$n,tickRotation:D}:{tickRotation:D}),useMesh:!0,enableArea:S,enablePoints:Z,tooltip:function(e){return console.log("===================================="),console.log(e),console.log("===================================="),p.createElement(Kn,{keyIsDate:s,datum:e,enable:G,widgetID:K})},pointSize:b,curve:N,colors:I&&U.length>0?U:"regagro"===w?Gn:"milk"===w?Jn:"milk2"===w?Qn:{scheme:w},pointColor:null!=j?j.colorPickedHex:{from:"color",modifiers:[]}}))):p.createElement(wn,null)},ea=function(e){var t=e.widget,n=(e.width,e.keyIsDate),a=e.dataSource,o=void 0===a?[]:a,i=e.height,l=void 0===i?450:i,s=e.sort,c=void 0===s?"":s,u=(e.tickRotation,(0,p.useState)([])),m=(0,un.Z)(u,2),f=m[0],h=m[1],b=(0,p.useState)(!1),v=(0,un.Z)(b,2),g=v[0],y=v[1],E=(0,p.useCallback)((0,r.Z)(d().mark((function e(){var a,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),0!=o.length){e.next=8;break}return e.next=4,Sn(t.source,t.filter);case 4:200===(a=e.sent).status&&"string"!=typeof a.data&&(r=a.data.data.map((function(e){var t=e.key,a=Tn()(t).isValid()?Tn()(t).format("DD.MM.YYYY"):t;return{y:Number(e.data),x:n?a:t}})),h([{id:"",data:r}]),y(!1)),e.next=19;break;case 8:if(null===c||"undefined"===c||void 0===o){e.next=17;break}e.t0=c,e.next="value"===e.t0?12:"key"===e.t0?14:16;break;case 12:return o.forEach((function(e,t){e.data.length>0&&(o[t].data=_.sortBy(e.data,["y"]))})),e.abrupt("break",17);case 14:return f.forEach((function(e,t){e.data.length>0&&(o[t].data=_.sortBy(e.data,["x"]))})),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:h(o||[]),y(!1);case 19:case"end":return e.stop()}}),e)}))),[t]),x=(0,p.useMemo)((function(){return f.map((function(e){return e.data.reduce((function(e,t){return e+t.y}),0)})).reduce((function(e,t){return e+t}),0)}),[f]);return(0,p.useEffect)((function(){E()}),[E]),g?p.createElement(xn,null):_.uniq(f.map((function(e){return e.data.length>0}))).includes(!0)?p.createElement("div",{className:"widget-table",style:{maxHeight:"".concat(l,"px")}},p.createElement("table",{className:"vertical-table"},p.createElement("tbody",null,f.map((function(e,t){var n=e.data.map((function(e,n){return p.createElement("tr",{key:"".concat(t).concat(n)},p.createElement("td",null,e.x),p.createElement("td",null,e.y))}));return p.createElement(p.Fragment,{key:t},p.createElement("tr",{key:t,style:{textAlign:"center"}},p.createElement("td",{colSpan:2},e.id)),n)})),p.createElement("tr",null,p.createElement("td",null,"ИТОГО"),p.createElement("td",null,x))))):p.createElement(wn,null)},ta=n(33125),na=n(38460);function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oa=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t,n,i,l,s,c;return(0,o.Z)(this,r),(c=a.call(this,e)).state={indexValue:null===(t=e.datum)||void 0===t?void 0:t.indexValue,value:null===(n=e.datum)||void 0===n?void 0:n.value,color:null===(i=e.datum)||void 0===i?void 0:i.color,enable:null==e?void 0:e.enable,settings:null==e?void 0:e.settings,data:null===(l=e.datum)||void 0===l||null===(s=l.node)||void 0===s?void 0:s.data},c}return(0,i.Z)(r,[{key:"componentDidUpdate",value:function(e,t){var n=this;_.isEqual(e.enable,this.props.enable)||this.setState((function(e){var t;return ra(ra({},e),{},{enable:null===(t=n.props)||void 0===t?void 0:t.enable})}))}},{key:"customTooltip",value:function(){var e,t,n;return p.createElement(p.Fragment,null,p.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--label-background altrp-dashboard__tooltip--width altrp-dashboard__tooltip--label-background-shadow altrp-dashboard__tooltip--border-type altrp-dashboard__tooltip--border-width altrp-dashboard__tooltip--border-color col-12"),style:{padding:"5px 9px"}},p.createElement("div",null,void 0===(null===(e=this.props.datum.node.data)||void 0===e?void 0:e.tooltip)&&p.createElement("div",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font col px-0"),style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},p.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:this.props.datum.node.style.color,marginRight:"7px"}}),this.props.datum.node.data.formattedX,":"," ",p.createElement("strong",{className:"".concat(this.props.widgetID," altrp-dashboard__tooltip--font col px-0")},this.props.datum.node.data.formattedY)),null===(t=this.props.datum.node.data)||void 0===t||null===(n=t.tooltip)||void 0===n?void 0:n.map((function(e,t){return p.createElement("div",{style:{color:(null==e?void 0:e.color)||"#000000"},key:t},"".concat(null==e?void 0:e.label,":"),p.createElement("strong",null,e.value))})))))}},{key:"render",value:function(){return this.state.enable?this.customTooltip():p.createElement(p.Fragment,null,p.createElement("div",{style:{background:"white",color:"inherit",fontSize:"{{SIZE}}px",borderRadius:"2px",boxShadow:"rgba(0, 0, 0, 0.25) 0px 1px 2px",padding:"5px 9px"}},p.createElement("div",{style:{whiteSpace:"pre",display:"flex",alignItems:"center"}},p.createElement("span",{style:{display:"block",width:"12px",height:"12px",background:this.props.datum.node.style.color,marginRight:"7px"}}),p.createElement("span",null,this.props.datum.node.data.formattedX,":"," ",p.createElement("strong",null,this.props.datum.node.data.formattedY)))))}}]),r}(p.PureComponent),ia=_.find(kn,{value:"regagro"}).colors,la=_.find(kn,{value:"milk"}).colors,sa=_.find(kn,{value:"milk2"}).colors,ca="%d.%m.%Y",ua=function(e){var t=e.widget,n=e.width,o=void 0===n?"300px":n,i=e.height,l=void 0===i?"450px":i,s=e.dataSource,c=void 0===s?[]:s,u=e.xScaleType,m=void 0===u?"point":u,f=e.colorScheme,h=void 0===f?"red_grey":f,b=e.nodeSize,v=void 0===b?6:b,g=e.sort,y=void 0===g?"":g,E=e.tickRotation,x=void 0===E?0:E,w=e.bottomAxis,k=void 0===w||w,N=e.precision,O=e.enableGridX,S=void 0===O||O,C=e.enableGridY,Z=void 0===C||C,j=e.keyIsDate,R=void 0!==j&&j,P=e.customColorSchemeChecker,A=void 0!==P&&P,D=e.customColors,F=void 0===D?[]:D,M=e.constantsAxises,T=void 0===M?[]:M,H=e.yScaleMax,B=e.widgetID,z=e.useCustomTooltips,q=e.margin,I=(0,p.useState)(!1),V=(0,un.Z)(I,2),U=V[0],L=V[1],W=(0,p.useState)([]),Y=(0,un.Z)(W,2),K=Y[0],G=Y[1],J=(0,p.useCallback)((0,r.Z)(d().mark((function e(){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!0),0!=c.length){e.next=8;break}return e.next=4,Sn(t.source,t.filter);case 4:200===(n=e.sent).status&&"string"!=typeof n.data&&(a=n.data.data.map((function(e){var t=e.key,n=Tn()(t).isValid()?Tn()(t).format("DD.MM.YYYY"):t;return{y:Number(e.data),x:R?n:t}})),G([{id:"",data:a}]),L(!1)),e.next=19;break;case 8:if(null===y||"undefined"===y||void 0===c){e.next=17;break}e.t0=y,e.next="value"===e.t0?12:"key"===e.t0?14:16;break;case 12:return c.forEach((function(e,t){e.data.length>0&&(c[t].data=_.sortBy(e.data,["y"]))})),e.abrupt("break",17);case 14:return K.forEach((function(e,t){e.data.length>0&&(c[t].data=_.sortBy(e.data,["x"]))})),e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:G(c||[]),L(!1);case 19:case"end":return e.stop()}}),e)}))),[t]);return(0,p.useEffect)((function(){J()}),[J]),U?p.createElement(na.Z,null):_.uniq(K.map((function(e){return e.data.length>0}))).includes(!0)?p.createElement(p.Fragment,null,p.createElement("div",{style:{width:o,height:l}},p.createElement(ta.IG,(0,a.Z)({data:K,colors:A&&F.length>0?F:"regagro"===h?ia:"milk"===h?la:"milk2"===h?sa:{scheme:h},yScale:H?{max:H,type:"linear"}:{type:"linear"},markers:T,margin:{top:(null==q?void 0:q.top)||30,right:(null==q?void 0:q.right)||30,bottom:(null==q?void 0:q.bottom)||30,left:(null==q?void 0:q.left)||30},xFormat:"time"===m&&"time:%d.%m.%Y",nodeSize:v,xScale:"time"===m?{type:m,format:ca,precision:N}:{type:m},tooltip:function(e){return p.createElement(oa,{datum:e,enable:z,widgetID:B})},enableGridX:S,enableGridY:Z,axisBottom:k&&("time"===m?{format:ca,tickRotation:x}:{tickRotation:x})},"colors",A&&F.length>0?F:"regagro"===h?ia:"milk"===h?la:"milk2"===h?sa:{scheme:h})))):p.createElement(wn,null)},ma=function(e){var t=e.widget,n=e.width,a=void 0===n?350:n,r=e.height,o=void 0===r?450:r;switch(t.type){case bn:return p.createElement(Dn,{width:a,height:o,widget:t,isDashboard:!0});case vn:return p.createElement(Un,{width:a,height:o,widget:t,isDashboard:!0});case gn:return p.createElement(Xn,{width:a,height:o,widget:t,isDashboard:!0});case _n:return p.createElement(ea,{width:a,height:o,widget:t,isDashboard:!0});case yn:return p.createElement(ua,{width:a,height:o,widget:t,isDashboard:!0});default:return p.createElement(p.Fragment,null)}},da=n(31555),pa=n(34051),fa=n(2151),ha=n(7441),ba=n(3754),va=[{name:"Информация о шаблонах",url:"/admin/ajax/analytics"},{name:"Пустые данные",url:"/admin/ajax/analytics/none"}];function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ya=function(e){var t=e.diagram,n=e.onSave,a=e.show,r=e.setShow,o=(0,p.useState)(t),i=(0,un.Z)(o,2),l=i[0],s=i[1];return p.createElement(ha.Z,{show:a,onHide:function(){return r(!1)},animation:!1,size:"lg",centered:!0},p.createElement(ha.Z.Header,{closeButton:!0},p.createElement(ha.Z.Title,null,"Редактировать виджет #",l.id)),p.createElement(ha.Z.Body,null,p.createElement(pa.Z,null,p.createElement(da.Z,null,p.createElement(fa.Z,null,p.createElement(fa.Z.Group,{controlId:"formGroupEmail"},p.createElement(fa.Z.Label,null,"Название виджета"),p.createElement(fa.Z.Control,{type:"text",value:l.name,onChange:function(e){return s(_a(_a({},l),{},{name:e.target.value}))},required:!0})),p.createElement(fa.Z.Group,null,p.createElement(fa.Z.Label,null,"Тип виджета"),p.createElement(fa.Z.Control,{as:"select",custom:!0,value:l.type,onChange:function(e){return s(_a(_a({},l),{},{type:e.target.value}))}},En.map((function(e,t){var n=e.name,a=e.value;return p.createElement("option",{key:t,value:a},n)})))),p.createElement(fa.Z.Group,null,p.createElement(fa.Z.Label,null,"Цветовая схема"),p.createElement(fa.Z.Control,{as:"select",custom:!0,value:l.options.colorScheme,onChange:function(e){return s(_a(_a({},l),{},{options:_a(_a({},l.options),{},{colorScheme:e.target.value})}))}},Object.keys(mn.schemes).map((function(e,t){return p.createElement("option",{key:t},e)})))),p.createElement(fa.Z.Group,null,p.createElement(fa.Z.Label,null,"Источник данных"),p.createElement(fa.Z.Control,{as:"select",custom:!0,value:l.source,onChange:function(e){return s(_a(_a({},l),{},{source:e.target.value}))},required:!0},p.createElement("option",{value:""},"Выберите источник"),va.map((function(e,t){var n=e.name,a=e.url;return p.createElement("option",{key:t,value:a},n)})))),l.type===_n&&p.createElement(fa.Z.Group,null,p.createElement(fa.Z.Check,{type:"checkbox",checked:l.options.isVertical,label:"Вертикальная таблица",onChange:function(e){return s(_a(_a({},l),{},{options:_a(_a({},l.options),{},{isVertical:e.target.checked})}))}})))),p.createElement(da.Z,null,p.createElement(pa.Z,null,p.createElement("div",{className:"widget-placeholder"},l&&p.createElement(ma,{widget:l,width:400})))))),p.createElement(ha.Z.Footer,null,p.createElement(ba.Z,{variant:"secondary",onClick:function(){return r(!1)}},"Закрыть"),p.createElement(ba.Z,{variant:"warning",onClick:function(){n(l),r(!1)},disabled:""===l.name},"Сохранить изменения")))};function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wa=function(e){var t,n=e.show,a=e.setShow,r=e.onSave,o=(0,p.useState)({name:"",source:"",type:_n,options:{colorScheme:"Set1"}}),i=(0,un.Z)(o,2),l=i[0],s=i[1];return p.createElement(ha.Z,{show:n,onHide:function(){return a(!1)},animation:!1,size:"lg",centered:!0},p.createElement(ha.Z.Header,{closeButton:!0},p.createElement(ha.Z.Title,null,"Добавить виджет")),p.createElement(ha.Z.Body,null,p.createElement(pa.Z,null,p.createElement(da.Z,null,p.createElement(fa.Z,null,p.createElement(fa.Z.Group,{controlId:"formGroupEmail"},p.createElement(fa.Z.Label,null,"Название виджета"),p.createElement(fa.Z.Control,{type:"text",value:l.name,onChange:function(e){return s(xa(xa({},l),{},{name:e.target.value}))},required:!0})),p.createElement(fa.Z.Group,null,p.createElement(fa.Z.Label,null,"Тип виджета"),p.createElement(fa.Z.Control,{as:"select",custom:!0,value:l.type,onChange:function(e){return s(xa(xa({},l),{},{type:e.target.value}))}},En.map((function(e,t){var n=e.name,a=e.value;return p.createElement("option",{key:t,value:a},n)})))),p.createElement(fa.Z.Group,null,p.createElement(fa.Z.Label,null,"Цветовая схема"),p.createElement(fa.Z.Control,{as:"select",custom:!0,value:l.options.colorScheme,onChange:function(e){return s(xa(xa({},l),{},{options:xa(xa({},l.options),{},{colorScheme:e.target.value})}))}},Object.keys(mn.schemes).map((function(e,t){return p.createElement("option",{key:t},e)})))),p.createElement(fa.Z.Group,null,p.createElement(fa.Z.Label,null,"Источник данных"),p.createElement(fa.Z.Control,{as:"select",custom:!0,value:l.source,onChange:function(e){return s(xa(xa({},l),{},{source:e.target.value}))},required:!0},p.createElement("option",{value:""},"Выберите источник"),va.map((function(e,t){var n=e.name,a=e.url;return p.createElement("option",{key:t,value:a},n)})))),l.type===_n&&p.createElement(fa.Z.Group,null,p.createElement(fa.Z.Check,{type:"checkbox",checked:null===(t=l.options)||void 0===t?void 0:t.isVertical,label:"Вертикальная таблица",onChange:function(e){return s(xa(xa({},l),{},{options:xa(xa({},l.options),{},{isVertical:e.target.checked})}))}})))),p.createElement(da.Z,null,p.createElement(pa.Z,null,p.createElement("div",{className:"widget-placeholder"},l.source&&p.createElement(ma,{widget:l,width:400})))))),p.createElement(ha.Z.Footer,null,p.createElement(ba.Z,{variant:"secondary",onClick:function(){return a(!1)}},"Закрыть"),p.createElement(ba.Z,{variant:"warning",onClick:function(){a(!1),r(l)},disabled:""===l.name},"Сохранить изменения")))};function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oa=function(){var e=(0,p.useState)([]),t=(0,un.Z)(e,2),n=t[0],a=t[1],o=(0,p.useState)(!1),i=(0,un.Z)(o,2),l=i[0],s=i[1],c=(0,p.useState)(!1),u=(0,un.Z)(c,2),m=u[0],f=u[1],b=(0,p.useState)({}),v=(0,un.Z)(b,2),g=v[0],_=v[1],y=function(){var e=(0,r.Z)(d().mark((function e(t){var r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={title:t.name,settings:JSON.stringify(Na({},t))},e.next=3,pn().post("/admin/ajax/diagrams",r);case 3:200===(o=e.sent).status&&"string"!=typeof o.data&&a([].concat((0,zt.Z)(n),[Na(Na({},t),{},{id:o.data.id})]));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=(0,p.useCallback)((0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn()("/admin/ajax/diagrams");case 2:200===(t=e.sent).status&&"string"!=typeof t.data&&(n=t.data.map((function(e){var t=JSON.parse(e.settings);return Na({id:e.id},t)})),a(n));case 4:case"end":return e.stop()}}),e)}))),[a]);return(0,p.useEffect)((function(){E()}),[E]),p.createElement("div",{className:"admin-templates admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Analytics")),p.createElement("button",{onClick:function(){return f(!0)},className:"btn"},"Add Widget"),p.createElement(h.rU,{className:"btn",to:"/admin/dashboard/colors"},"Color Schemes")),p.createElement("div",{className:"admin-content"},p.createElement("div",{className:"charts"},n.map((function(e){return p.createElement("div",{key:e.id,className:"card",style:{width:e.width}},p.createElement("div",{className:"card-header"},p.createElement("div",{className:"card-header__name"},e.name),p.createElement("div",{className:"card-header__buttons d-print-none"},p.createElement("button",{className:"d-none d-sm-inline-block",type:"button",title:"Настроить виджет",onClick:function(){return function(e){_(e),s(!0)}(e)}},p.createElement(fn.Z,{color:"#8E94AA"})),p.createElement("button",{className:"d-none d-sm-inline-block",type:"button",title:"Удалить виджет",onClick:function(){return t=e.id,r=n.findIndex((function(e){return e.id===t})),a(n.filter((function(e,t){return t!==r?e:null}))),void pn().delete("/admin/ajax/diagrams/"+t);var t,r}},p.createElement(hn.Z,{color:"#8E94AA"})))),p.createElement("div",{className:"card-body"},p.createElement(ma,{widget:e,width:360})))}))),l&&p.createElement(ya,{show:l,setShow:s,diagram:g,onSave:function(e){var t=n.findIndex((function(t){return t.id===e.id}));a(n.map((function(n,a){return t===a?e:n})));var r={title:e.name,settings:JSON.stringify(Na({},e))};pn().put("/admin/ajax/diagrams/"+e.id,r)}}),m&&p.createElement(wa,{show:m,setShow:f,onSave:y})))};var Sa=function(e){(0,s.Z)(f,e);var t,n,a,l,m=(a=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(l){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t;return(0,o.Z)(this,f),(t=m.call(this,e)).state={plugins:[]},t}return(0,i.Z)(f,[{key:"componentWillMount",value:(n=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn().get("/admin/ajax/plugins");case 2:t=e.sent,this.setState({plugins:t.data});case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"updateChange",value:(t=(0,r.Z)(d().mark((function e(t,n){var a,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.plugins[n].enabled=t.target.checked,a=this.state.plugins[n].name,r=t.target.checked,e.next=5,pn().post("/admin/ajax/plugins/switch",{name:a,value:r});case 5:e.sent,this.setState({plugins:this.state.plugins});case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Plugins"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"All Plugins"))),p.createElement("div",{className:"admin-content"},p.createElement("div",{className:"row"},this.state.plugins.map((function(t,n){return p.createElement("div",{className:"col-3 text-center border rounded mx-2"},p.createElement("div",{className:"mb-2"},t.name),p.createElement("a",{href:t.url},p.createElement("img",{className:"mb-2",src:t.image,style:{maxWidth:"150px"},alt:""})),p.createElement("div",{class:"custom-control custom-switch"},p.createElement("input",{type:"checkbox",className:"custom-control-input",id:"switch".concat(n),checked:t.enabled,onChange:function(t){return e.updateChange(t,n)}}),p.createElement("label",{className:"custom-control-label",for:"switch".concat(n)},1==t.enabled?"Plugin enabled":"Plugin disabled")))})))))}}]),f}(p.Component);function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ja=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(e){var t;return(0,o.Z)(this,l),(t=a.call(this,e)).getPages=function(){var e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resource.getQueried({s:n});case 2:a=e.sent,t.setState((function(e){return Za(Za({},e),{},{pages:a,pagesSearch:n})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.changeSearchHandler=function(e){t.getPages(e.target.value)},t.state={pages:[],currentPage:1,pagesSearch:""},t.resource=new K.default({route:"/admin/ajax/reports"}),t.itemsPerPage=20,t}return(0,i.Z)(l,[{key:"componentDidMount",value:function(){this.getPages()}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentPage,a=t.pages,r=t.pagesSearch;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Reports"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"All Reports")),p.createElement(h.rU,{className:"btn",to:"/admin/reports/add"},"Add New Report"),p.createElement("div",{className:"admin-filters"},p.createElement("span",{className:"admin-filters__current"},"All (",this.state.pages.length||"0",")"))),p.createElement("div",{className:"admin-content"},p.createElement(X,{columns:[{name:"title",title:"Title",editUrl:!0,tag:"Link"},{name:"author",title:"Author"},{name:"path",title:"Path",url:!0,target:"_blank"}],quickActions:[{tag:"button",route:"/admin/ajax/pages/:id",method:"delete",confirm:"Are You Sure?",after:this.getPages,className:"quick-action-menu__item_danger",title:"Trash"}],rows:fe(a).slice(n*this.itemsPerPage-this.itemsPerPage,n*this.itemsPerPage),search:{value:r||"",changeHandler:this.changeSearchHandler}}),p.createElement(ne,{pageCount:Math.ceil(a.length/this.itemsPerPage)||1,currentPage:n,changePage:function(t){n!==t&&e.setState({currentPage:t})},itemsCount:a.length})))}}]),l}(p.Component);var Ra=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).state={editUrl:"/admin/tables",tag:"Link",modules:[],columns:[{name:"title",title:"Title",url:!0,editUrl:!0,tag:"Link"},{name:"name",title:"Name",url:!0,editUrl:!0,tag:"Link"},{name:"description",title:"Description"},{name:"setting",title:"Setting",url:!0},{name:"updated_at",title:"Updated At"}]},t.resource=new K.default({route:"/admin/ajax/tables"}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.resource.getAll().then((function(e){t.setModules(e)}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setModules",value:function(e){var t=e.map((function(e){return e.editUrl="/admin/tables/edit/"+e.id,e}));console.log(t),this.setState((function(e){return{modules:t}}))}},{key:"render",value:function(){return p.createElement("div",{className:"admin-tables admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Tables"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"All Tables")),p.createElement(h.rU,{className:"btn",to:"/admin/tables/add"},"Add New"),p.createElement("div",{className:"admin-filters"},p.createElement("span",{className:"admin-filters__current"},"All (",this.state.modules.length||"0",")"))),p.createElement("div",{className:"admin-content"},p.createElement(X,{columns:this.state.columns,rows:this.state.modules})))}}]),m}(p.Component),Pa=n(74604);function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fa=function(e){(0,s.Z)(f,e);var t,n,a,m=(n=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t;return(0,o.Z)(this,f),(t=m.call(this,e)).updateTemplates=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.state.currentPage,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.state.activeTemplateArea;t.resource.getQueried(Da({area:n.name,page:e,pageSize:10,s:t.state.templateSearch},t.state.sorting)).then((function(e){t.setState((function(t){return Da(Da({},t),{},{pageCount:e.pageCount,templates:e.templates})}))}))},t.toggleImportForm=function(){t.setState((function(e){return Da(Da({},e),{},{showImportForm:!t.state.showImportForm})}))},t.importTemplate=function(e){e.preventDefault();var n=_.get(e,"target.files.files",[]);n.length&&_.forEach(n,(function(e){var n=new FileReader;n.onload=function(){var e=(0,r.Z)(d().mark((function e(n){var a,r,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_.get(n,"target.result","{}"),(a=JSON.parse(a)).isImported=!0,r=!1,t.state.templateAreas.forEach((function(e){e.name===a.area&&(a.area=e.id,r=!0)})),r||(a.area=_.filter(t.state.templateAreas,(function(e){return"content"===e.name}))),e.prev=6,e.next=9,t.resource.post(a);case 9:(o=e.sent).redirect&&o.url&&((i=document.createElement("a")).href=o.url,i.setAttribute("target","_blank"),i.click()),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0);case 16:t.updateTemplates(t.state.currentPage);case 17:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(e)}))},t.sortingHandler=function(e,n){t.setState({sorting:{order_by:e,order:n}},t.updateTemplates)},t.searchTemplates=function(e){e.preventDefault(),t.updateTemplates()},t.state={templates:[],allTemplates:[],templateAreas:[],activeTemplateArea:{},pageCount:1,currentPage:1,templateSearch:"",sorting:{}},t.resource=new K.default({route:"/admin/ajax/templates"}),t.templateTypesResource=new K.default({route:"/admin/ajax/areas"}),t.onClick=t.onClick.bind((0,l.Z)(t)),t.changePage=t.changePage.bind((0,l.Z)(t)),t.changeActiveArea=t.changeActiveArea.bind((0,l.Z)(t)),t.generateTemplateJSON=t.generateTemplateJSON.bind((0,l.Z)(t)),t}return(0,i.Z)(f,[{key:"changeActiveArea",value:function(e){var t=parseInt(e.target.dataset.area),n={};this.state.templateAreas.forEach((function(e){e.id===t&&(n=e)})),this.setActiveArea(n)}},{key:"changePage",value:function(e){this.updateTemplates(e,this.state.activeTemplateArea),this.setState((function(t){return Da(Da({},t),{},{currentPage:e})}))}},{key:"setActiveArea",value:function(e){this.updateTemplates(1,e),this.setState((function(t){return Da(Da({},t),{},{activeTemplateArea:e})}))}},{key:"generateTemplateJSON",value:function(e){var t=JSON.parse(e.data);return JSON.stringify({area:this.state.activeTemplateArea.name,data:t,title:e.title,name:e.name,__exported_metas__:e.__exported_metas__})}},{key:"downloadJSONFile",value:function(e){var t=document.createElement("a"),n=new Blob([this.generateTemplateJSON(e)],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="".concat(e.name,".json"),document.body.appendChild(t),t.click()}},{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.templateTypesResource.getAll();case 2:t=e.sent,this.setActiveArea(t[0]),this.setState((function(e){return Da(Da({},e),{},{templateAreas:t})})),this.updateTemplates(this.state.currentPage,this.state.activeTemplateArea);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onClick",value:function(){var e={title:"Add New Template",submitButton:"Add",submit:function(e){var t={name:e.title,title:e.title,area:e.area,data:{children:[],id:oe(),name:"root-element",settings:{},type:"root-element"}};return new K.default({route:"/admin/ajax/templates"}).post(t)},fields:[{name:"title",label:"Template Name",required:!0},{name:"area",label:"Area Name",required:!0,type:"select",options:this.getAreasOptions(),defaultValue:this.state.activeTemplateArea.id}],success:function(e){e.redirect&&e.url&&re(e.url)},active:!0};Ee.default.dispatch((0,Pa.tn)(e))}},{key:"getAreasOptions",value:function(){return this.state.templateAreas}},{key:"setTemplates",value:function(e){var t=this,n=e;e=e.filter((function(e){return e.area===t.state.activeTemplateArea.name})),this.setState((function(t){return Da(Da({},t),{},{templates:e,allTemplates:n})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.templateSearch,a=t.sorting;return p.createElement("div",{className:"admin-templates admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Templates"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"All Templates")),p.createElement("button",{onClick:this.onClick,className:"btn"},"Add New"),p.createElement("button",{onClick:this.toggleImportForm,className:"btn ml-3"},"Import Template"),p.createElement("div",{className:"admin-filters"},p.createElement("span",{className:"admin-filters__current"},"All (",this.state.allTemplates.length||"",")"))),p.createElement("div",{className:"admin-content"},this.state.showImportForm&&p.createElement("form",{className:"admin-form justify-content-center"+(this.state.showImportForm?" d-flex":" d-none"),onSubmit:this.importTemplate},p.createElement("input",{type:"file",name:"files",multiple:!0,required:!0,accept:"application/json",className:"form__input"}),p.createElement("button",{className:"btn"},"Import")),p.createElement("ul",{className:"nav nav-pills admin-pills"},this.state.templateAreas.map((function(t){var n=["nav-link"];return e.state.activeTemplateArea.name===t.name&&n.push("active"),p.createElement("li",{className:"nav-item",key:t.id},p.createElement("button",{className:n.join(" "),onClick:e.changeActiveArea,"data-area":t.id},t.title))}))),p.createElement("form",{className:"admin-panel py-2",onSubmit:this.searchTemplates},p.createElement("input",{className:"input-sm mr-2",value:n,onChange:function(t){return e.setState({templateSearch:t.target.value})}}),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Search")),p.createElement(X,{columns:[{name:"title",title:"Title",url:!0,target:"_blank"},{name:"author",title:"Author"}],rows:this.state.templates,quickActions:[{tag:"a",props:{href:"/admin/editor?template_id=:id",target:"_blank"},title:"Edit"},{tag:"button",route:"/admin/ajax/templates/:id/reviews",method:"delete",title:"Clear History"},{tag:"button",route:"/admin/ajax/exports/templates",method:"get",after:function(t){return e.downloadJSONFile(t)},title:"Export"},{tag:"button",route:"/admin/ajax/templates/:id",method:"delete",confirm:"Are You Sure?",after:function(){return e.updateTemplates(e.state.currentPage,e.state.activeTemplateArea)},className:"quick-action-menu__item_danger",title:"Trash"}],sortingHandler:this.sortingHandler,sortingField:a.order_by}),p.createElement(ne,{pageCount:this.state.pageCount||1,currentPage:this.state.currentPage,changePage:this.changePage,itemsCount:this.state.templates.length})))}}]),f}(p.Component);function Ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ma(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ha=function(e){(0,s.Z)(h,e);var t,n,a,m,f=(a=h,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(m){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function h(e){var t;return(0,o.Z)(this,h),(t=f.call(this,e)).state={robots:[],model_id:!1},t.resource=new K.default({route:"ajax/robots"}),t.addNew=t.addNew.bind((0,l.Z)(t)),t}return(0,i.Z)(h,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData();case 2:console.log(this.state);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fetchData",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resource.getAll();case 2:t=e.sent,_.isArray(t)&&t.map((function(e){return e.url="/admin/robots-editor?robot_id=".concat(e.id),e})),console.log(t),this.setState((function(e){return Ta(Ta({},e),{},{robots:t})}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"goToRobotsEditor",value:function(){window.location.href="/admin/robots-editor"}},{key:"addNew",value:function(){var e=this,t={title:"Add new Robot",submitButton:"Add",submit:function(t){return e.resource.post({name:t.name})},fields:[{name:"name",label:"Robot name",required:!0}],active:!0,success:function(e){e.redirect_route&&re(e.redirect_route)}};Ee.default.dispatch((0,Pa.tn)(t))}},{key:"render",value:function(){var e=this;return p.createElement("div",{className:"admin-templates admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Robots"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"All Robots")),p.createElement("button",{onClick:this.addNew,className:"btn"},"Add New"),p.createElement("div",{className:"admin-filters"},p.createElement("span",{className:"admin-filters__current"}))),p.createElement("div",{className:"admin-content"},p.createElement(X,{columns:[{name:"name",title:"Name",url:!0,target:"_blank"},{name:"author",title:"Author"},{name:"model_id",title:"Model"},{name:"start_condition",title:"Start Condition"},{name:"enabled",title:"Enabled"}],rows:this.state.robots,quickActions:[{tag:"a",props:{href:"/admin/robots-editor?robot_id=:id",target:"_blank"},title:"Edit"},{tag:"button",route:"/admin/ajax/robots",method:"put",data:{power:1},after:function(){return e.fetchData()},title:"Enable"},{tag:"button",route:"/admin/ajax/robots/:id",method:"delete",confirm:"Are You Sure?",after:function(){return e.fetchData()},className:"quick-action-menu__item_danger",title:"Trash"}]})))}}]),h}(p.Component),Ba=["styles"],za=function(e){e.styles;var t=(0,E.Z)(e,Ba);return p.createElement("svg",(0,y.Z)({width:"10",height:"11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.583 5.354L9.23 1.707 8.523 1 4.9 4.622 1.753 1.024 1 1.683l3.212 3.67L1 9.025l.753.659L4.9 6.085l3.622 3.622L9.23 9 5.583 5.354z",fill:"#343B4C"}),p.createElement("path",{d:"M9.23 1.707l.177.177.176-.177-.176-.177-.177.177zM5.583 5.354l-.176-.177-.177.177.177.176.176-.176zM8.523 1L8.7.823 8.523.646l-.177.177.177.177zM4.9 4.622l-.188.165.175.2.19-.188-.177-.177zM1.753 1.024L1.94.86 1.776.672l-.188.164.165.188zM1 1.683l-.165-.188-.188.164.165.188L1 1.683zm3.212 3.67l.188.165.144-.164-.144-.165-.188.165zM1 9.025L.812 8.86l-.165.188.188.164L1 9.024zm.753.659l-.165.188.188.165.165-.189-.188-.164zM4.9 6.085l.176-.177-.189-.189-.175.201.188.165zm3.622 3.622l-.177.177.177.177.177-.177-.177-.177zM9.23 9l.177.177L9.583 9l-.176-.177L9.23 9zm-.177-7.47L5.407 5.177l.353.353 3.647-3.646-.354-.354zm-.707-.353l.707.707.354-.354L8.7.823l-.354.354zM5.077 4.799L8.7 1.177 8.346.823 4.724 4.445l.353.354zm-3.513-3.61l3.149 3.598.376-.33L1.94.86l-.377.329zm-.4.682l.753-.659-.33-.376-.752.659.33.376zM4.4 5.189l-3.212-3.67-.376.328 3.212 3.671.376-.33zm-.376 0L.812 8.859l.376.33L4.4 5.519l-.376-.33zM.835 9.212l.753.659.33-.376-.753-.659-.33.376zm1.106.635L5.089 6.25l-.377-.33-3.148 3.598.377.33zm2.783-3.585l3.622 3.622.354-.354-3.623-3.622-.353.354zM8.7 9.884l.707-.707-.354-.354-.707.707.354.354zm.707-1.06L5.76 5.176l-.353.353 3.646 3.647.354-.354z",fill:"#000"}))};function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Va=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).toggleModal=t.toggleModal.bind((0,l.Z)(t)),t.changeValue=t.changeValue.bind((0,l.Z)(t)),t.storeSubscribe=t.storeSubscribe.bind((0,l.Z)(t)),t.submit=t.submit.bind((0,l.Z)(t)),t.formData={},e.fields.forEach((function(e){e.defaultValue&&(t.formData[e.name]=e.defaultValue)})),t.state={errors:[]},Ee.default.subscribe(t.storeSubscribe),t}return(0,i.Z)(r,[{key:"storeSubscribe",value:function(){var e=this;Ee.default.getState().modalSettings.fields.forEach((function(t){t.defaultValue&&(e.formData[t.name]=t.defaultValue)}))}},{key:"submit",value:function(){var e=this,t=!0,n=this.props.fields.map((function(n){if(n.required&&!e.formData[n.name])return t=!1,n.errorMessage||"Need complete this field"}));t?this.props.submit(this.formData).then(this.props.success):this.setState((function(e){return Ia(Ia({},e),{},{errors:n})}))}},{key:"changeValue",value:function(e){var t=e.target;this.formData[t.dataset.field]=t.value;var n=(0,zt.Z)(this.state.errors);n[t.dataset.error]="",this.setState((function(e){return Ia(Ia({},e),{},{errors:n})}))}},{key:"toggleModal",value:function(){Ee.default.dispatch((0,Pa.$J)())}},{key:"render",value:function(){var e=this,t="admin-modal";return this.props.active&&(t+=" admin-modal_active"),p.createElement("div",{className:t},p.createElement("div",{className:"admin-modal__bg",onClick:this.toggleModal}),p.createElement("div",{className:"admin-modal-content"},p.createElement("button",{className:"admin-modal__close",onClick:this.toggleModal},p.createElement(za,{className:"icon"})),p.createElement("div",{className:"admin-caption"},this.props.title),p.createElement("div",{className:"admin-modal-form form"},this.props.fields.map((function(t,n){return p.createElement("label",{className:"form-label","data-field":t.name,key:t.name},t.label,"select"!==t.type?p.createElement("input",{type:t.type||"text",className:"form__input","data-field":t.name,"data-error":n,defaultValue:t.defaultValue||"",onChange:e.changeValue}):p.createElement("select",{className:"form__input","data-field":t.name,"data-error":n,defaultValue:t.defaultValue||"",onChange:e.changeValue},p.createElement("option",{value:""}),t.options.map((function(e){return p.createElement("option",{key:e.id,value:e.id,children:e.title||e.name})}))),e.state.errors[n]?p.createElement("span",{className:"form-label__error"},e.state.errors[n]):"")})),p.createElement("div",{className:"form-bottom"},p.createElement("button",{className:"btn btn_success",onClick:this.submit},this.props.submitButton)))))}}]),r}(p.Component),Ua=(0,g.$j)((function(e){return Ia({},e.modalSettings)}))(Va);var La=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.closeHandler,n=e.children;return ReactDOM.createPortal(p.createElement("div",{className:"admin-modal admin-modal_active"},p.createElement("div",{className:"admin-modal__bg",onClick:t}),p.createElement("div",{className:"admin-modal-content"},p.createElement("button",{className:"admin-modal__close",onClick:t},p.createElement(za,{className:"icon"})),n)),document.body)}}]),r}(p.Component);function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ka=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).changeValue=function(t){var n=Ya(Ya({},e.props.param),{},{paramValue:t.target.value||""});e.props.onChange(n)},e.changeName=function(t){var n=Ya(Ya({},e.props.param),{},{paramName:t.target.value||""});e.props.onChange(n)},e.changeRequired=function(t){var n=Ya(Ya({},e.props.param),{},{required:t.target.checked});e.props.onChange(n)},e}return(0,i.Z)(r,[{key:"render",value:function(){return p.createElement("div",{className:"param-item pb-2"},p.createElement("button",{type:"button",className:"close","aria-label":"Delete",onClick:this.props.onDelete},p.createElement(za,null)),p.createElement("input",{type:"text",className:"form-control form-control-sm ml-0 mb-1",onChange:this.changeName,value:this.props.param.paramName||"",placeholder:"Parameter Name"}),p.createElement("input",{type:"text",className:"form-control  form-control-sm ml-0",onChange:this.changeValue,value:this.props.param.paramValue||"",placeholder:"Parameter Value"}),p.createElement("div",{className:"d-flex mt-1 align-items-center"},p.createElement("input",{type:"checkbox",className:"form-check-input mr-1 ml-0 mt-0 position-static",id:this.props.param.key,onChange:this.changeRequired,checked:this.props.param.required}),p.createElement("label",{htmlFor:this.props.param.key,className:"form-check-label"},"Required")))}}]),r}(p.Component);var Ga=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).addItem=function(){var t=(0,U.hB)(e.props.parameters,[]);t.push({required:!1,paramName:"",paramValue:"",key:(0,U.D$)()}),e.props.onChange(t)},e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this,t=(0,U.hB)(this.props.parameters,[]);return p.createElement("div",{className:"page-data-source-params"},t.map((function(n,a){return p.createElement(Ka,{param:n,onChange:function(n){var r=(0,zt.Z)(t);r[a]=n,e.props.onChange(r)},onDelete:function(){var n=(0,zt.Z)(t);n.splice(a,1),e.props.onChange(n)},key:n.key})})),p.createElement("div",{className:"d-flex justify-content-end"},p.createElement("button",{className:"btn btn_success",onClick:this.addItem,type:"button"},"+")))}}]),r}(p.Component);function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $a,Xa=function(e){(0,s.Z)(f,e);var t,n,l,m=(n=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(l){var a=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(){var e;(0,o.Z)(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=m.call.apply(m,[this].concat(n))).state=Qa({source_id:"",alias:"",priority:100,parameters:"",dataSourceOptions:[],autoload:!0,isExtendedSettings:(0,U.pM)(_.get(e.props,"dataSource.parameters"))},e.props.dataSource),e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name,i=n.checked;"autoload"!==o&&"server_side"!==o||(r=i),e.setState((0,a.Z)({},o,r))},e.submitHandler=function(t){t.preventDefault();var n=e.props.match.params.id,a=new K.default({route:"/admin/ajax/page_data_sources"}),r=Qa({},e.state);delete r.dataSourceOptions,e.props.dataSource?a.put(r.id,r):a.post(Qa({page_id:n},r)),e.props.updateHandler()},e.toggleParamsSettings=function(){var t,n=!e.state.isExtendedSettings;if(n)t=(0,U.DG)(e.state.parameters,{},!1,!1,!1),t=_.map(t,(function(e,t){return{paramValue:e,paramName:t,key:(0,U.D$)(),required:!1}})),t=JSON.stringify(t);else{t=(0,U.hB)(e.state.parameters)||[];var a="";t.forEach((function(e){a+="".concat(e.paramName||""," | ").concat(e.paramValue||"","\n")})),t=a}e.setState((function(e){return Qa(Qa({},e),{},{isExtendedSettings:n,parameters:t})}))},e}return(0,i.Z)(f,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new K.default({route:"/admin/ajax/data_sources"}),e.next=3,t.getAll();case 3:n=e.sent,a=n.data_sources,this.setState({dataSourceOptions:a});case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.source_id,a=t.alias,r=t.priority,o=t.parameters,i=t.dataSourceOptions,l=t.autoload,s=t.isExtendedSettings,c=t.server_side;return i=i.map((function(e){return{value:e.id,label:e.title||e.name}})),p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"source_id"},"Data Source"),p.createElement(ht,{options:i,onChange:function(t){var n=t.value;e.setState((function(e){return Qa(Qa({},e),{},{source_id:n})}))},value:i.find((function(e){return e.value===n}))})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"alias"},"Alias"),p.createElement("input",{type:"text",id:"alias",required:!0,name:"alias",value:a,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"priority"},"Priority"),p.createElement("input",{type:"number",id:"priority",required:!0,name:"priority",value:r,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"autoload"},"Autoload"),p.createElement("input",{type:"checkbox",id:"autoload",name:"autoload",checked:l,onChange:this.changeHandler,className:"form-check-input position-static ml-2"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"server_side"},"Server Side"),p.createElement("input",{type:"checkbox",id:"server_side",name:"server_side",checked:c,onChange:this.changeHandler,className:"form-check-input position-static ml-2"})),p.createElement("div",{className:"admin_switcher"},p.createElement("div",{className:"admin_switcher__label"},"Extended Params Settings"),p.createElement("div",{className:"control-switcher ".concat(s?"control-switcher_on":"control-switcher_off"),onClick:this.toggleParamsSettings},p.createElement("div",{className:"control-switcher__on-text"},"ON"),p.createElement("div",{className:"control-switcher__caret"}),p.createElement("div",{className:"control-switcher__off-text"},"OFF"))),!s&&p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"parameters"},"Parameters:"),p.createElement("textarea",{name:"parameters",id:"parameters",value:o||"",onChange:this.changeHandler,className:"form-control"})),s&&p.createElement(Ga,{parameters:o||"",onChange:function(t){e.setState((function(e){return Qa(Qa({},e),{},{parameters:JSON.stringify(t)})}))}}),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Add")))}}]),f}(p.Component),er=(0,b.EN)(Xa),tr=n(19776);function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rr=Ze.ZP.div($a||($a=(0,Ce.Z)(["\n  & svg{\n    max-width: ",";\n    max-height: ",";\n  }\n  & .altrp-icon-select__content{\n    padding: 20px;\n    background-color: #F7F8F9;\n    display: flex;\n    justify-content: center;\n  }\n"])),(function(e){return e.maxWidth||"200px"}),(function(e){return e.maxHeight||"200px"})),or=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(e){var t;return(0,o.Z)(this,l),(t=a.call(this,e)).openAssetsBrowser=function(){var e,n={tabs:["icons"],onChoose:(e=(0,r.Z)(d().mark((function e(n){var a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.props.returnType)||(a="object"),e.t0=a,e.next="object"===e.t0?5:"text"===e.t0?7:9;break;case 5:return t.props.onChange&&t.props.onChange(n),e.abrupt("break",9);case 7:try{fetch(n.url).then((function(e){return e.text()})).then((function(e){t.props.onChange&&t.props.onChange(e)}))}catch(e){console.error(e),t.props.onChange&&t.props.onChange("")}return e.abrupt("break",9);case 9:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};Ee.default.dispatch((0,tr.jX)(n))},t.state={value:e.value},t}return(0,i.Z)(l,[{key:"updateValue",value:function(){var e=this;this.state.value&&!_.isString(this.state.value)&&fetch(icon.url).then((function(e){return e.text()})).then((function(t){e.setState((function(e){return ar(ar({},e),{},{value:t})}))}))}},{key:"componentDidMount",value:function(){this.updateValue()}},{key:"componentDidUpdate",value:function(e,t){var n=this;this.props.value!==e.value&&this.setState((function(e){return ar(ar({},e),{},{value:n.props.value})}),(function(){n.updateValue()}))}},{key:"render",value:function(){return p.createElement(rr,(0,y.Z)({className:"altrp-icon-select "+this.props.className||0,id:this.props.id,onClick:this.openAssetsBrowser},this.props),this.props.value?p.createElement("div",{className:"altrp-icon-select__content ",dangerouslySetInnerHTML:{__html:this.props.value}}):ie().renderIcon("add"))}}]),l}(p.Component),ir=n(69852),lr=n.n(ir);function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ur=[{name:"source.name",title:"Datasource",url:!0},{name:"alias",title:"Alias"},{name:"priority",title:"Priority"},{name:"server_side",title:"Server Side"}],mr=function(e){(0,s.Z)(b,e);var t,n,a,m,f=(a=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(m){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(e){var t;return(0,o.Z)(this,b),(t=f.call(this,e)).getDataSources=(0,r.Z)(d().mark((function e(){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.match.params.id,e.next=3,t.dataSourceResource.get(n);case 3:a=e.sent,t.setState({dataSources:a}),t.setState({isModalOpened:!1,editingDataSource:null});case 6:case"end":return e.stop()}}),e)}))),t.editHandler=function(e){t.setState({editingDataSource:e,isModalOpened:!0})},t.parentChangeHandler=function(e){"root"===e?t.setState({value:cr(cr({},t.state.value),{},{parent_page_id:e,path:"/"})}):t.resource.get(e).then((function(n){var a=n.path;return t.setState({value:cr(cr({},t.state.value),{},{parent_page_id:e,path:a+(a.endsWith("/")?"":"/")+pe(t.state.value.title)})})}))},t.state={page:{},value:{},redirectAfterSave:!1,templates:[],models:[],isModalOpened:!1,dataSources:[],editingDataSource:null,pagesOptions:[],currentTab:"content"},t.resource=new K.default({route:"/admin/ajax/pages"}),t.pagesOptionsResource=new K.default({route:"/admin/ajax/pages_options"}),t.model_resource=new K.default({route:"/admin/ajax/models_options"}),t.templateResource=new K.default({route:"/admin/ajax/templates"}),t.dataSourceResource=new K.default({route:"/admin/ajax/page_data_sources/pages"}),t.savePage=t.savePage.bind((0,l.Z)(t)),t}return(0,i.Z)(b,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n,a,r,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pagesOptionsResource.getAll().then((function(e){return o.setState({pagesOptions:e})})),e.next=3,this.templateResource.getOptions();case 3:return t=e.sent,this.setState((function(e){return cr(cr({},e),{},{templates:t})})),e.next=7,this.model_resource.getAll();case 7:if(n=e.sent,this.setState((function(e){return cr(cr({},e),{},{models:n})})),a=this.props.match.params.id,!(a=parseInt(a))){e.next=17;break}return this.getDataSources(),e.next=15,this.resource.get(a);case 15:r=e.sent,this.setState((function(e){return cr(cr({},e),{},{value:r,id:a})}));case 17:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"savePage",value:(t=(0,r.Z)(d().mark((function e(t){var n,a,r,o,i=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.state.value.path&&""!==this.state.value.path&&void 0!==this.state.value.title&&""!==this.state.value.title){e.next=3;break}return this.setState((function(e){return cr(cr({},e),{},{currentTab:"content"})})),e.abrupt("return");case 3:if(t.preventDefault(),a=this.state.value.parent_page_id,r="/"!==(r=(r=this.state.value.path).split("\\").join("/"))[0]?"/".concat(r):r,(o=((o=this.state.value.redirect)||"").split("\\").join("/"))&&(o="/"!==o[0]?"/".concat(o):o),this.state.value.redirect=o,this.state.value.path=r,!this.state.id){e.next=19;break}return e.next=16,this.resource.put(this.state.id,cr(cr({},this.state.value),{},{parent_page_id:"root"===a?null:a}));case 16:n=e.sent,e.next=22;break;case 19:return e.next=21,this.resource.post(cr(cr({},this.state.value),{},{parent_page_id:"root"===a?null:a}));case 21:n=e.sent;case 22:n.success?this.setState((function(e){return cr(cr({},e),{},{redirectAfterSave:!0})}),(function(){i.props.history.push("/admin/pages")})):this.setState((function(e){return cr(cr({},e),{},{value:{}})}));case 23:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"changeValue",value:function(e,t){"path"===t&&(e="/"!==(e=e.split("\\").join("/"))[0]?"/".concat(e):e),"redirect"===t&&(e=e.split("\\").join("/"))&&(e="/"!==e[0]?"/".concat(e):e),this.setState((function(n){var a=_.cloneDeep(n);return a.value[t]=e,a}))}},{key:"changeCurrentTab",value:function(e){var t=this;return function(){return t.setState((function(t){return cr(cr({},t),{},{currentTab:e})}))}}},{key:"render",value:function(){var e=this,t=this.state,n=t.isModalOpened,a=t.editingDataSource,r=this.state.dataSources;return r=_.sortBy(r,(function(e){return e.priority})),p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/pages"},"Pages"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},this.state.value.title||"Add New Page"))),p.createElement("div",{className:"admin-content"},p.createElement("div",{className:"custom-tab__tabs"},p.createElement("button",{className:"content"===this.state.currentTab?"custom-tab__tab custom-tab__tab--selected":"custom-tab__tab",onClick:this.changeCurrentTab("content")},"content"),p.createElement("button",{className:"SEO"===this.state.currentTab?"custom-tab__tab custom-tab__tab--selected":"custom-tab__tab",onClick:this.changeCurrentTab("SEO")},"SEO")),p.createElement("div",{className:"custom-tab__tab-panel"},p.createElement("form",{className:"admin-form mb-2",onSubmit:this.savePage},"content"===e.state.currentTab?p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-title"},"Title"),p.createElement("input",{type:"text",id:"page-title",required:1,value:e.state.value.title||"",onChange:function(t){e.changeValue(t.target.value,"title")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"parent_page_id"},"Parent Page"),p.createElement("select",{id:"parent_page_id",value:e.state.value.parent_page_id||"",onChange:function(t){e.parentChangeHandler(t.target.value)},className:"form-control"},p.createElement("option",{value:"",disabled:!0}),p.createElement("option",{value:"root"},"Root"),e.state.pagesOptions.map((function(e){return p.createElement("option",{value:e.value,key:e.value},e.label)})))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-path"},"Path"),p.createElement("input",{type:"text",id:"page-path",required:1,value:e.state.value.path||"",onChange:function(t){e.changeValue(t.target.value,"path")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-model"},"Model"),p.createElement("select",{id:"page-model",value:e.state.value.model_id||"",onChange:function(t){e.changeValue(t.target.value,"model_id")},className:"form-control"},p.createElement("option",{value:""}),e.state.models.map((function(e){return p.createElement("option",{value:e.value,key:e.value},e.label)})))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-roles"},"Roles"),p.createElement(ht,{id:"page-roles",isMulti:!0,optionsRoute:"/admin/ajax/role_options",placeholder:"All",defaultOptions:[{value:"guest",label:"Guest"}],value:e.state.value.roles,onChange:function(t){e.changeValue(t,"roles")}})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"redirect"},"Redirect"),p.createElement("input",{type:"text",id:"redirect",value:e.state.value.redirect||"",onChange:function(t){e.changeValue(t.target.value,"redirect")},className:"form-control"})),p.createElement("div",{className:"row col-12"},p.createElement("div",{className:"form-group col-3 position-static ml-0 align-self-start"},p.createElement("input",{type:"checkbox",id:"caching",checked:e.state.value.is_cached||"",onChange:function(t){e.changeValue(t.target.checked,"is_cached")},className:"form-check-input mr-1 form-check-input_inline"}),p.createElement("label",{htmlFor:"caching",className:"label_checkbox"},"Сaching (Only for Static Pages)")),p.createElement("div",{className:"form-group col-1 position-static ml-0 align-self-start"},p.createElement("input",{type:"checkbox",id:"404",checked:e.state.value.not_found||"",onChange:function(t){e.changeValue(t.target.checked,"not_found")},className:"form-check-input mr-1 form-check-input_inline"}),p.createElement("label",{htmlFor:"404",className:"label_checkbox"},"404")),p.createElement("div",{className:"form-group col-5 position-static ml-0 align-self-start"},p.createElement("label",{htmlFor:"icon",className:"label_checkbox"},"Page Icon"),p.createElement(or,{id:"icon",returnType:"text",value:e.state.value.icon,maxWidth:"50px",maxHeight:"50px",className:"col-4",onChange:function(t){var n=lr().set(e.state.value,"icon",t);e.setState((function(e){return cr(cr({},e),{},{value:n})}))}})))):"SEO"===e.state.currentTab?p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"seo-title"},"Title"),p.createElement("input",{type:"text",id:"seo-title",value:e.state.value.seo_title||"",onChange:function(t){e.changeValue(t.target.value,"seo_title")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"seo-keywords"},"Keywords"),p.createElement("input",{type:"text",id:"seo-keywords",value:e.state.value.seo_keywords||"",onChange:function(t){e.changeValue(t.target.value,"seo_keywords")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"seo_description"},"Description"),p.createElement("textarea",{id:"seo_description",value:e.state.value.seo_description||"",onChange:function(t){e.changeValue(t.target.value,"seo_description")},className:"form-control"}))):void 0,p.createElement("button",{className:this.state.value.path?"btn btn_success":"btn btn_disable"},this.state.id?"Save":"Add"))),Boolean(r.length)&&p.createElement(X,{columns:ur,quickActions:[{callBack:function(t){return e.editHandler(t)},title:"Edit"},{tag:"button",route:"/admin/ajax/page_data_sources/:id",method:"delete",confirm:"Are You Sure?",after:function(){return e.getDataSources()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:r}),this.props.match.params.id&&p.createElement("button",{onClick:function(){return e.setState({isModalOpened:!0})},className:"btn btn_add"},"Add Data Source"),n&&p.createElement(La,{closeHandler:function(){return e.setState({isModalOpened:!1,editingDataSource:null})}},p.createElement(er,{updateHandler:this.getDataSources,dataSource:a}))))}}]),b}(p.Component),dr=(0,b.EN)(mr);function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr=[{name:"source.name",title:"Datasource",url:!0},{name:"alias",title:"Alias"},{name:"priority",title:"Priority"},{name:"parameters",title:"Parameters"}],br=function(e){(0,s.Z)(g,e);var t,n,m,f,v=(m=g,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(m);if(f){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function g(e){var t;return(0,o.Z)(this,g),(t=v.call(this,e)).getDataSources=(0,r.Z)(d().mark((function e(){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.match.params.id,e.next=3,t.dataSourceResource.get(n);case 3:a=e.sent,t.setState({dataSources:a}),t.setState({isModalOpened:!1,editingDataSource:null});case 6:case"end":return e.stop()}}),e)}))),t.editHandler=function(e){t.setState({editingDataSource:e,isModalOpened:!0})},t.parentChangeHandler=function(e){"root"===e?t.setState({value:fr(fr({},t.state.value),{},{parent_page_id:e,path:"/"})}):t.resource.get(e).then((function(n){var a=n.path;return t.setState({value:fr(fr({},t.state.value),{},{parent_page_id:e,path:a+(a.endsWith("/")?"":"/")+pe(t.state.value.title)})})}))},t.state={page:{},value:{},redirectAfterSave:!1,templates:[],models:[],isModalOpened:!1,dataSources:[],editingDataSource:null,pagesOptions:[]},t.resource=new K.default({route:"/admin/ajax/reports"}),t.pagesOptionsResource=new K.default({route:"/admin/ajax/reports_options"}),t.model_resource=new K.default({route:"/admin/ajax/models_options"}),t.templateResource=new K.default({route:"/admin/ajax/templates"}),t.dataSourceResource=new K.default({route:"/admin/ajax/page_data_sources/pages"}),t.savePage=t.savePage.bind((0,l.Z)(t)),t}return(0,i.Z)(g,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n,a,r,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pagesOptionsResource.getAll().then((function(e){return o.setState({pagesOptions:e})})),e.next=3,this.templateResource.getOptions();case 3:return t=e.sent,this.setState((function(e){return fr(fr({},e),{},{templates:t})})),e.next=7,this.model_resource.getAll();case 7:if(n=e.sent,this.setState((function(e){return fr(fr({},e),{},{models:n})})),a=this.props.match.params.id,!(a=parseInt(a))){e.next=17;break}return this.getDataSources(),e.next=15,this.resource.get(a);case 15:r=e.sent,this.setState((function(e){return fr(fr({},e),{},{value:r,id:a})}));case 17:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"savePage",value:(t=(0,r.Z)(d().mark((function e(t){var n,a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.value.parent_page_id,r="/"!==(r=(r=this.state.value.path).split("\\").join("/"))[0]?"/".concat(r):r,(o=((o=this.state.value.redirect)||"").split("\\").join("/"))&&(o="/"!==o[0]?"/".concat(o):o),this.state.value.redirect=o,this.state.value.path="/reports".concat(r),this.state.value.type="report",!this.state.id){e.next=17;break}return e.next=14,this.resource.put(this.state.id,fr(fr({},this.state.value),{},{parent_page_id:"root"===a?null:a}));case 14:n=e.sent,e.next=20;break;case 17:return e.next=19,this.resource.post(fr(fr({},this.state.value),{},{parent_page_id:"root"===a?null:a}));case 19:n=e.sent;case 20:n.success?this.setState((function(e){return fr(fr({},e),{},{redirectAfterSave:!0})})):this.setState((function(e){return fr(fr({},e),{},{value:{}})}));case 21:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"changeValue",value:function(e,t){"path"===t&&(e="/"!==(e=e.split("\\").join("/"))[0]?"/".concat(e):e),"redirect"===t&&(e=e.split("\\").join("/"))&&(e="/"!==e[0]?"/".concat(e):e),this.setState((function(n){var a=_.cloneDeep(n);return a.value[t]=e,a}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isModalOpened,r=t.editingDataSource;if(this.state.redirectAfterSave)return p.createElement(b.l_,{to:"/admin/pages"});var o=this.state.dataSources;return o=_.sortBy(o,(function(e){return e.priority})),p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/reports"},"Reports"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},this.state.value.title||"Add New Page"))),p.createElement("div",{className:"admin-content"},p.createElement("form",(0,a.Z)({className:"admin-form",onSubmit:this.savePage},"className","mb-2"),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-title"},"Title"),p.createElement("input",{type:"text",id:"page-title",required:1,value:this.state.value.title||"",onChange:function(t){e.changeValue(t.target.value,"title")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-path"},"Path"),p.createElement("input",{type:"text",id:"page-path",required:1,value:this.state.value.path||"",onChange:function(t){e.changeValue(t.target.value,"path")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-model"},"Model"),p.createElement("select",{id:"page-model",value:this.state.value.model_id||"",onChange:function(t){e.changeValue(t.target.value,"model_id")},className:"form-control"},p.createElement("option",{value:""}),this.state.models.map((function(e){return p.createElement("option",{value:e.value,key:e.value},e.label)})))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-roles"},"Roles"),p.createElement(ht,{id:"page-roles",isMulti:!0,optionsRoute:"/admin/ajax/role_options",placeholder:"All",defaultOptions:[{value:"guest",label:"Guest"}],value:this.state.value.roles,onChange:function(t){e.changeValue(t,"roles")}})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"redirect"},"Redirect"),p.createElement("input",{type:"text",id:"redirect",value:this.state.value.redirect||"",onChange:function(t){e.changeValue(t.target.value,"redirect")},className:"form-control"})),p.createElement("button",{className:"btn btn_success"},this.state.id?"Save":"Add")),Boolean(o.length)&&p.createElement(X,{columns:hr,quickActions:[{callBack:function(t){return e.editHandler(t)},title:"Edit"},{tag:"button",route:"/admin/ajax/page_data_sources/:id",method:"delete",confirm:"Are You Sure?",after:function(){return e.getDataSources()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:o.map((function(e){return fr({},e)}))}),this.props.match.params.id&&p.createElement("button",{onClick:function(){return e.setState({isModalOpened:!0})},className:"btn btn_add"},"Add Data Source"),n&&p.createElement(La,{closeHandler:function(){return e.setState({isModalOpened:!1,editingDataSource:null})}},p.createElement(er,{updateHandler:this.getDataSources,dataSource:r}))))}}]),g}(p.Component),vr=(0,b.EN)(br),gr=["styles"],_r=function(e){e.styles;var t=(0,E.Z)(e,gr);return p.createElement("svg",(0,y.Z)({width:"20",height:"22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),p.createElement("path",{d:"M10 22a2.75 2.75 0 002.749-2.75H7.25A2.75 2.75 0 0010 22zm9.255-6.433c-.83-.892-2.383-2.234-2.383-6.63 0-3.338-2.341-6.01-5.498-6.667v-.895a1.375 1.375 0 10-2.748 0v.895C5.469 2.926 3.128 5.6 3.128 8.938c0 4.395-1.553 5.737-2.383 6.63a1.343 1.343 0 00-.37.932 1.376 1.376 0 001.38 1.375h16.49c.822 0 1.376-.67 1.38-1.375a1.342 1.342 0 00-.37-.933z",fill:"#8E94AA"}))},yr=["styles"],Er=function(e){e.styles;var t=(0,E.Z)(e,yr);return p.createElement("svg",(0,y.Z)({width:"18",height:"18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),p.createElement("path",{d:"M11.625 13.5h-.75a.375.375 0 00-.375.375V16.5h-9v-15h9v2.625c0 .207.168.375.375.375h.75A.375.375 0 0012 4.125V1.5A1.5 1.5 0 0010.5 0h-9A1.5 1.5 0 000 1.5v15A1.5 1.5 0 001.5 18h9a1.5 1.5 0 001.5-1.5v-2.625a.375.375 0 00-.375-.375z",fill:"#8E94AA"}),p.createElement("path",{d:"M17.878 8.724l-4.5-4.125a.374.374 0 00-.628.276v.75c0 .106.045.208.124.279l2.607 2.346H4.875a.375.375 0 00-.375.375v.75c0 .208.168.375.375.375h10.606l-2.607 2.347a.375.375 0 00-.124.278v.75a.375.375 0 00.628.277l4.5-4.125a.374.374 0 000-.553z",fill:"#8E94AA"}))};var xr=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){return p.createElement("div",{className:"admin-user-top-panel top-panel d-flex align-items-center"},p.createElement("a",{href:"#",className:"top-panel-notification notification"},p.createElement(_r,{className:"notification__icon"})),p.createElement(tt,{className:"top-panel__portrait"}),p.createElement("div",{className:"top-panel__greeting"},"Hello, ",this.props.userName||"administrator"),p.createElement("button",{className:"top-panel-logout logout",onClick:le},p.createElement(Er,{className:"logout__icon"})))}}]),r}(p.Component),wr=(0,g.$j)((function(e){return{userName:e.currentUser.name}}))(xr);function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Or=[{name:"title",title:"Title",url:!0,editUrl:!0,tag:"Link"},{name:"name",title:"Name"},{name:"description",title:"Description"},{name:"updated_at",title:"Updated At"}],Sr=[{name:"name",title:"Name",url:!0,editUrl:!0,tag:"Link"},{name:"model.title",title:"Model"},{name:"route",title:"Route"},{name:"type",title:"Type"}],Cr=function(e){(0,s.Z)(b,e);var t,n,m,f=(n=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(m){var a=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(e){var t;return(0,o.Z)(this,b),(t=f.call(this,e)).getDataSources=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dataSourcesResource.getQueried(Nr({page:t.state.dataSourcesCurrentPage,pageSize:t.itemsPerPage,preset:!1,s:t.state.dataSourcesSearch},t.state.dataSourcesSorting));case 2:n=e.sent,t.setState((function(e){return Nr(Nr({},e),{},{dataSources:n.data_sources,dataSourcesPageCount:n.pageCount||1})}));case 4:case"end":return e.stop()}}),e)}))),t.getModels=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.modelsResource.getQueried(Nr({page:t.state.modelsCurrentPage,pageSize:t.itemsPerPage,preset:!1,s:t.state.modelsSearch},t.state.modelsSorting));case 2:n=e.sent,t.setState((function(e){return Nr(Nr({},e),{},{models:n.models,modelsPageCount:n.pageCount})}));case 4:case"end":return e.stop()}}),e)}))),t.modelsSortingHandler=function(e,n){t.setState({modelsSorting:{order_by:e,order:n}},t.getModels)},t.dataSourcesSortingHandler=function(e,n){t.setState({dataSourcesSorting:{order_by:e,order:n}},t.getDataSources)},t.searchModel=function(e){e.preventDefault(),t.getModels()},t.searchDataSources=function(e){e.preventDefault(),t.getDataSources()},t.state={activeTab:0,modelsCurrentPage:1,dataSourcesCurrentPage:1,models:[],modelsSearch:"",modelsPageCount:1,modelsCount:0,modelsSorting:{},dataSources:[],dataSourcesSearch:"",dataSourcesPageCount:1,dataSourcesCount:0,dataSourcesSorting:{}},t.switchTab=t.switchTab.bind((0,l.Z)(t)),t.changePage=t.changePage.bind((0,l.Z)(t)),t.modelsResource=new K.default({route:"/admin/ajax/models"}),t.dataSourcesResource=new K.default({route:"/admin/ajax/data_sources"}),t.itemsPerPage=10,t}return(0,i.Z)(b,[{key:"switchTab",value:function(e){this.setState((function(t){return Nr(Nr({},t),{},{activeTab:e})}))}},{key:"changePage",value:function(e,t){this.setState((function(n){return Nr(Nr({},n),{},(0,a.Z)({},t,Nr(Nr({},n[t]),{},{currentPage:e})))}))}},{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getModels(),this.getDataSources();case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.activeTab,a=t.models,r=t.dataSources,o=t.modelsCurrentPage,i=t.dataSourcesCurrentPage,l=t.modelsSearch,s=t.dataSourcesSearch,c=t.modelsPageCount,u=t.dataSourcesPageCount,m=t.modelsCount,d=t.dataSourcesCount,f=t.modelsSorting,b=t.dataSourcesSorting;return p.createElement("div",{className:"admin-settings admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Tables"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},0===n?"All Models":"All Data Sources")),p.createElement(h.rU,{className:"btn",to:"/admin/tables/".concat(0===n?"models":"data-sources","/add")},"Add New")),p.createElement("div",{className:"admin-content"},p.createElement(_e.mQ,{selectedIndex:n,onSelect:this.switchTab},p.createElement(_e.td,{className:"nav nav-pills admin-pills"},p.createElement(_e.OK,null,"Models"),p.createElement(_e.OK,null,"Data Sources")),p.createElement(_e.x4,null,p.createElement("form",{className:"admin-panel py-2",onSubmit:this.searchModel},p.createElement("input",{className:"input-sm mr-2",value:l,onChange:function(t){return e.setState({modelsSearch:t.target.value})}}),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Search")),p.createElement(X,{columns:Or,quickActions:[{tag:"Link",props:{href:"/admin/tables/models/edit/:id"},title:"Edit"},{tag:"button",route:"/admin/ajax/models/:id",method:"delete",confirm:"Are You Sure?",after:function(){e.getModels()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:a.map((function(e){return Nr(Nr({},e),{},{editUrl:"/admin/tables/models/edit/"+e.id})})),sortingHandler:this.modelsSortingHandler,sortingField:f.order_by}),p.createElement(ne,{pageCount:c||1,currentPage:o||1,changePage:function(t){e.state.modelsCurrentPage!==t&&e.setState({modelsCurrentPage:t},e.getModels)},itemsCount:m})),p.createElement(_e.x4,null,p.createElement("form",{className:"admin-panel py-2",onSubmit:this.searchDataSources},p.createElement("input",{className:"input-sm mr-2",value:s,onChange:function(t){return e.setState({dataSourcesSearch:t.target.value})}}),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Search")),p.createElement(X,{columns:Sr,quickActions:[{tag:"Link",props:{href:"/admin/tables/data-sources/edit/:id"},title:"Edit"},{tag:"button",route:"/admin/ajax/data_sources/:id",method:"delete",confirm:"Are You Sure?",after:function(){e.getDataSources()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:r.map((function(e){return Nr(Nr({},e),{},{editUrl:"/admin/tables/data-sources/edit/"+e.id})})),sortingHandler:this.dataSourcesSortingHandler,sortingField:b.order_by}),p.createElement(ne,{pageCount:u,currentPage:i,changePage:function(t){return e.setState({dataSourcesCurrentPage:t},e.getDataSources)},itemsCount:d})))))}}]),b}(p.Component);function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rr=function(e){(0,s.Z)(f,e);var t,n,a,m=(n=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t;return(0,o.Z)(this,f),(t=m.call(this,e)).state={value:jr({},t.props.model)},t.submitHandler=t.submitHandler.bind((0,l.Z)(t)),t.deleteHandler=t.deleteHandler.bind((0,l.Z)(t)),t.titleChangeHandler=t.titleChangeHandler.bind((0,l.Z)(t)),t}return(0,i.Z)(f,[{key:"changeValue",value:function(e,t){this.setState((function(n){return(n=jr({},n)).value[t]=e,n}))}},{key:"titleChangeHandler",value:function(e){e.persist(),this.setState((function(t){return jr(jr({},t),{},{value:jr(jr({},t.value),{},{title:e.target.value,name:de(e.target.value)})})}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props!==e&&this.setState((function(e){return(e=jr({},e)).value=jr({},t.props.model),e}))}},{key:"submitHandler",value:function(e){e.preventDefault(),_.isFunction(this.props.onSubmit)?(delete this.state.value.created_at,delete this.state.value.updated_at,this.props.onSubmit(this.state.value)):console.log(this.state.value)}},{key:"deleteHandler",value:(t=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new K.default({route:"/admin/ajax/models"}).delete(this.props.model.id);case 2:e.sent,this.setState((function(e){return jr(jr({},e),{},{redirect:"/admin/tables/models/"})}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state.value;return this.state.redirect?p.createElement(b.l_,{to:this.state.redirect,push:!0}):p.createElement("form",{className:"admin-form row",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group col-12"},p.createElement("label",{htmlFor:"page-title"},"Model Title"),p.createElement("input",{type:"text",id:"page-title",required:!0,value:t.title||"",onChange:this.titleChangeHandler,className:"form-control"})),p.createElement("div",{className:"form-group col-4"},p.createElement("label",{htmlFor:"page-name"},"Model Name"),p.createElement("input",{type:"text",id:"page-name",required:!0,value:t.name||"",onChange:function(t){e.changeValue(t.target.value,"name")},className:"form-control"})),p.createElement("div",{className:"form-group col-4"},p.createElement("label",{htmlFor:"page-description"},"Parent Model"),p.createElement("input",{type:"text",id:"page-description",value:t.parent_model_id||"",onChange:function(t){e.changeValue(t.target.value,"parent_model_id")},className:"form-control"})),p.createElement("div",{className:"form-group col-4"},p.createElement("label",{htmlFor:"page-description"},"Model Description"),p.createElement("input",{type:"text",id:"page-description",value:t.description||"",onChange:function(t){e.changeValue(t.target.value,"description")},className:"form-control"})),t.id?"":p.createElement("div",{className:"form-group col-12 "},p.createElement("label",{htmlFor:"model-table_id",className:"label_checkbox"},"Table"),p.createElement(ht,{id:"model-table_id",defaultOptions:[{value:"",label:" "}],value:this.state.value.table_id||"",isDisabled:t.id,onChange:function(t){e.changeValue(t,"table_id")},optionsRoute:"/admin/ajax/tables/options"})),p.createElement("div",{className:"row col-12"},p.createElement("div",{className:"form-group col-6 form-check-inline"},p.createElement("input",{type:"checkbox",id:"page-soft_deletes",checked:t.soft_deletes,onChange:function(t){e.changeValue(t.target.checked,"soft_deletes")},className:"form-check-input form-check-input"}),p.createElement("label",{htmlFor:"page-soft_deletes",className:"label_checkbox"},"Soft Deletes")),p.createElement("div",{className:"form-group col-6 form-check-inline"},p.createElement("input",{type:"checkbox",id:"page-time_stamps",checked:t.time_stamps,onChange:function(t){e.changeValue(t.target.checked,"time_stamps")},className:"form-check-input form-check-input_inline"}),p.createElement("label",{htmlFor:"page-time_stamps",className:"label_checkbox"},"Time Stamps"))),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},this.props.submitText),p.createElement(h.rU,{to:"/admin/tables/models"},p.createElement("button",{className:"btn"},"Cancel")),this.props.edit?p.createElement("button",{className:"btn btn_failure",type:"button",onClick:this.deleteHandler},"Delete"):""))}}]),f}(p.Component);function Pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dr=function(e){(0,s.Z)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(){var e;(0,o.Z)(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).state=Ar({name:"",column_id:"",column_name:"",is_created:!1,is_updated:!1,source_id:""},e.props.field),e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.submitHandler=function(t){t.preventDefault();var n=e.props.match.params.id;e.props.field?e.props.validationsResource.put(e.props.field.id,Ar(Ar({},e.state),{},{model_id:n})):e.props.validationsResource.post(Ar(Ar({},e.state),{},{model_id:n})),e.props.updateValidations()},e}return(0,i.Z)(l,[{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.column_id,r=t.column_name,o=t.is_created,i=t.is_updated,l=t.source_id,s=this.props,c=s.fieldsOptions,u=s.data_source_options;return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"name"},"Name"),p.createElement("input",{type:"text",id:"name",required:!0,name:"name",value:n,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"column_id"},"Column"),p.createElement("select",{id:"column_id",required:!0,name:"column_id",value:a,onChange:this.changeHandler,className:"form-control"},p.createElement("option",{value:""}),c.map((function(e){var t=e.id,n=e.name;return p.createElement("option",{value:t,key:t},n)})))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"source_id"},"Data Source"),p.createElement("select",{id:"source_id",required:!0,name:"source_id",value:l,onChange:this.changeHandler,className:"form-control"},p.createElement("option",{value:""}),u.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{value:t,key:t},n)})))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"column_name"},"Column Name"),p.createElement("input",{type:"text",id:"column_name",name:"column_name",value:r,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"is_created",checked:o,onChange:function(t){return e.setState({is_created:t.target.checked})}}),p.createElement("label",{className:"checkbox-label",htmlFor:"is_created"},"is Created")),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"is_updated",checked:i,onChange:function(t){return e.setState({is_updated:t.target.checked})}}),p.createElement("label",{className:"checkbox-label",htmlFor:"is_updated"},"is Updated")),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Submit")))}}]),l}(p.Component),Fr=(0,b.EN)(Dr);function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hr=function(e){(0,s.Z)(m,e);var t,n,l=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).state={rule:e.props.editingRule?e.props.editingRule.rule:""},e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.submitHandler=function(){var t=(0,r.Z)(d().mark((function t(n){var a,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.props.validation_field_id,r=new K.default({route:"/admin/ajax/models/".concat(e.props.match.params.id,"/validations/").concat(a,"/validation_rules")}),!e.props.editingRule){t.next=8;break}return t.next=6,r.put(e.props.editingRule.id,Tr(Tr({},e.state),{},{validation_field_id:a}));case 6:t.next=10;break;case 8:return t.next=10,r.post(Tr(Tr({},e.state),{},{validation_field_id:a}));case 10:e.props.submitHandler();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,i.Z)(m,[{key:"render",value:function(){var e=this.state.rule;return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"rule"},"Rule"),p.createElement("input",{type:"text",id:"rule",required:!0,name:"rule",value:e,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Submit")))}}]),m}(p.Component),Br=(0,b.EN)(Hr);var zr=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={isRowExpanded:!1,isRuleModalOpened:!1,editingRule:null,isFieldModalOpened:!1},e.submitRuleHandler=function(){e.props.updateValidations(),e.setState({isRuleModalOpened:!1})},e.deleteRuleHandler=function(t){new K.default({route:"/admin/ajax/models/".concat(e.props.match.params.id,"/validations/").concat(e.props.field.id,"/validation_rules")}).delete(t).then((function(){return e.props.updateValidations()}))},e.deleteFieldHandler=function(t){t.stopPropagation();var n=e.props,a=n.field,r=n.validationsResource;confirm("Are you sure?")&&(r.delete(a.id),e.props.updateValidations())},e.editFieldHandler=function(t){t.stopPropagation(),e.setState({isFieldModalOpened:!0})},e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this,t=this.props,n=t.field,a=t.fieldsOptions,r=t.validationsResource,o=t.data_source_options,i=t.updateValidations,l=this.state,s=l.isRowExpanded,c=l.isRuleModalOpened,u=l.isFieldModalOpened,m=l.editingRule;return p.createElement(p.Fragment,null,p.createElement("tr",{className:"admin-table-row",onClick:function(){return e.setState({isRowExpanded:!s})}},p.createElement("td",{className:"admin-table__td"},s?"➖":"➕"),p.createElement("td",{className:"admin-table__td"},n.name,p.createElement("span",{className:"quick-action-menu"},p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{onClick:this.editFieldHandler,className:"quick-action-menu__item"},"Edit")),p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{onClick:this.deleteFieldHandler,className:"quick-action-menu__item quick-action-menu__item_danger"}," Delete")))),p.createElement("td",{className:"admin-table__td"},n.column_name||n.column.name)),s&&p.createElement("tr",{className:"admin-table-row"},p.createElement("td",{className:"admin-table__td",colSpan:3},p.createElement("ol",null,n.rules.map((function(t){return p.createElement("li",{key:t.id},t.rule,p.createElement("span",{className:"quick-action-menu quick-action-menu--li"},p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{onClick:function(){return e.setState({isRuleModalOpened:!0,editingRule:t})},className:"quick-action-menu__item"},"Edit")),p.createElement("span",{className:"quick-action-menu__item_wrapper"},p.createElement("button",{onClick:function(){return e.deleteRuleHandler(t.id)},className:"quick-action-menu__item quick-action-menu__item_danger"}," Delete"))))}))),p.createElement("button",{onClick:function(){return e.setState({isRuleModalOpened:!0,editingRule:null})},className:"btn btn_add"},"Add Rule"))),c&&p.createElement(La,{closeHandler:function(){return e.setState({isRuleModalOpened:!1})}},p.createElement(Br,{validation_field_id:n.id,submitHandler:this.submitRuleHandler,editingRule:m})),u&&p.createElement(La,{closeHandler:function(){return e.setState({isFieldModalOpened:!1})}},p.createElement(Fr,{fieldsOptions:a,validationsResource:r,data_source_options:o,updateValidations:function(){i(),e.setState({isFieldModalOpened:!1})},field:n})))}}]),r}(p.Component),qr=(0,b.EN)(zr);var Ir=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.validations,n=e.updateValidations,a=e.fieldsOptions,r=e.validationsResource,o=e.data_source_options;return p.createElement("table",{className:"admin-table"},p.createElement("thead",{className:"admin-table-head"},p.createElement("tr",{className:"admin-table-row"},p.createElement("th",{className:"admin-table__td"}),p.createElement("th",{className:"admin-table__td"},"Title"),p.createElement("th",{className:"admin-table__td"},"Field Name"))),p.createElement("tbody",{className:"admin-table-body"},t.map((function(e){return p.createElement(qr,{key:e.id,field:e,fieldsOptions:a,validationsResource:r,data_source_options:o,updateValidations:n})}))))}}]),r}(p.Component);function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lr=function(e){(0,s.Z)(f,e);var t,n,l,m=(n=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(l){var a=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(){var e;(0,o.Z)(this,f);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=m.call.apply(m,[this].concat(n))).state=Ur({name:"",column_id:"",remote_find_column:"",remote_need_column:"",as_object:!0,single_source_id:"",list_source_id:"",enabled:!0,dataSourceOptions:[]},e.props.field),e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.submitHandler=function(){var t=(0,r.Z)(d().mark((function t(n){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.props.match.params.id,!e.props.field){t.next=7;break}return t.next=5,e.props.remoteFieldsResource.put(e.props.field.id,Ur(Ur({},e.state),{},{model_id:a}));case 5:t.next=9;break;case 7:return t.next=9,e.props.remoteFieldsResource.post(Ur(Ur({},e.state),{},{model_id:a}));case 9:e.props.updateRemoteFields();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,i.Z)(f,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new K.default({route:"/admin/ajax/data_source_options"}),e.next=3,t.getAll();case 3:n=e.sent,a=n.options,this.setState({dataSourceOptions:a});case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.column_id,r=t.remote_find_column,o=t.remote_need_column,i=t.as_object,l=t.single_source_id,s=t.list_source_id,c=t.enabled,u=t.dataSourceOptions,m=this.props.fieldsOptions;return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"name"},"Name"),p.createElement("input",{type:"text",id:"name",required:!0,name:"name",value:n,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"column_id"},"Column"),p.createElement("select",{id:"column_id",name:"column_id",value:a,onChange:this.changeHandler,className:"form-control"},p.createElement("option",{value:""}),m.map((function(e){var t=e.id,n=e.name;return p.createElement("option",{value:t,key:t},n)})))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"remote_find_column"},"Remote Find Column"),p.createElement("input",{type:"text",id:"remote_find_column",required:!0,name:"remote_find_column",value:r,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"remote_need_column"},"Remote Need Column"),p.createElement("input",{type:"text",id:"remote_need_column",required:!0,name:"remote_need_column",value:o,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"as_object",checked:i,onChange:function(t){return e.setState({as_object:t.target.checked})}}),p.createElement("label",{className:"checkbox-label",htmlFor:"as_object"},"As Object")),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"single_source_id"},"Single Source"),p.createElement(ht,{options:u,onChange:function(t){var n=t.value;e.setState((function(e){return Ur(Ur({},e),{},{single_source_id:n})}))},value:u.find((function(e){return e.value===l}))})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"list_source_id"},"List Source"),p.createElement(ht,{options:u,onChange:function(t){var n=t.value;e.setState((function(e){return Ur(Ur({},e),{},{list_source_id:n})}))},value:u.find((function(e){return e.value===s}))})),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"enabled",checked:c,onChange:function(t){return e.setState({enabled:t.target.checked})}}),p.createElement("label",{className:"checkbox-label",htmlFor:"enabled"},"Enabled")),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Submit")))}}]),f}(p.Component),Wr=(0,b.EN)(Lr);function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gr=[{name:"title",title:"Title",url:!0,editUrl:!0,tag:"Link"},{name:"name",title:"Name"},{name:"description",title:"Description"}],Jr=[{name:"name",title:"Name"},{name:"remote_find_column",title:"Remote Find Column"},{name:"remote_need_column",title:"Remote Need Column"}],Qr=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;(0,o.Z)(this,m),(t=l.call(this,e)).updateFields=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fieldsResource.getAll();case 2:n=(n=e.sent).filter((function(e){return"id"!==e.name})),t.setState((function(e){return Kr(Kr({},e),{},{fields:n})}));case 5:case"end":return e.stop()}}),e)}))),t.updateRelations=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.relationsResource.getAll();case 2:n=e.sent,t.setState((function(e){return Kr(Kr({},e),{},{relations:n})}));case 4:case"end":return e.stop()}}),e)}))),t.updateQueries=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.queriesResource.getAll();case 2:n=e.sent,t.setState((function(e){return Kr(Kr({},e),{},{queries:n})}));case 4:case"end":return e.stop()}}),e)}))),t.updateAccessors=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.accessorsResource.getAll();case 2:n=e.sent,t.setState((function(e){return Kr(Kr({},e),{},{accessors:n})}));case 4:case"end":return e.stop()}}),e)}))),t.updateValidations=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validationsResource.getAll();case 2:n=e.sent,t.setState((function(e){return Kr(Kr({},e),{},{validations:n,isModalOpened:!1})}));case 4:case"end":return e.stop()}}),e)}))),t.updateRemoteFields=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.remoteFieldsResource.getAll();case 2:n=e.sent,t.setState((function(e){return Kr(Kr({},e),{},{remoteFields:n,isFieldRemoteModalOpened:!1,editingRemoteField:null})}));case 4:case"end":return e.stop()}}),e)}))),t.onSubmit=function(){var e=(0,r.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state.id&&t.modelName===n.name){e.next=6;break}return e.next=3,fetch("/admin/ajax/model_name_is_free/?name=".concat(n.name)).then((function(e){return e.json()})).then((function(e){return!e.taken}));case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:if(!e.t0){e.next=10;break}return e.abrupt("return",alert("Name ".concat(n.name," is already taken. Use another one.")));case 10:if(!t.state.id){e.next=16;break}return e.next=13,t.modelsResource.put(t.state.id,n);case 13:e.sent,e.next=19;break;case 16:return e.next=18,t.modelsResource.post(n);case 18:e.sent;case 19:t.props.history.push("/admin/tables/models");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var n=t.props.match.params.id;return t.state={model:{name:"",title:"",description:"",bounded_model:"",soft_deletes:!1,time_stamps:!1},fields:[],remoteFields:[],relations:null,accessors:[],id:n,queries:[],validations:[],data_source_options:[],isModalOpened:!1,isFieldRemoteModalOpened:!1,editingRemoteField:null},t.modelsResource=new K.default({route:"/admin/ajax/models"}),n&&(t.fieldsResource=new K.default({route:"/admin/ajax/models/".concat(n,"/fields")}),t.remoteFieldsResource=new K.default({route:"/admin/ajax/remote_data/model/".concat(n)}),t.relationsResource=new K.default({route:"/admin/ajax/models/".concat(n,"/relations")}),t.queriesResource=new K.default({route:"/admin/ajax/models/".concat(n,"/queries")}),t.accessorsResource=new K.default({route:"/admin/ajax/models/".concat(n,"/accessors")}),t.validationsResource=new K.default({route:"/admin/ajax/models/".concat(n,"/validations")}),t.data_source_optionsResource=new K.default({route:"/admin/ajax/models/".concat(n,"/data_source_options")})),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.id&&(this.modelsResource.get(this.state.id).then((function(e){t.setState({model:e}),t.modelName=e.name})),this.fieldsResource.getAll().then((function(e){return t.setState({fields:e.filter((function(e){return"id"!==e.name}))})})),this.remoteFieldsResource.getAll().then((function(e){return t.setState({remoteFields:e})})),this.relationsResource.getAll().then((function(e){return t.setState({relations:e})})),this.queriesResource.getAll().then((function(e){return t.setState({queries:e})})),this.accessorsResource.getAll().then((function(e){return t.setState({accessors:e})})),this.validationsResource.getAll().then((function(e){return t.setState({validations:e})})),this.data_source_optionsResource.getAll().then((function(e){return t.setState({data_source_options:e})})));case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.model,a=t.fields,r=t.remoteFields,o=t.relations,i=t.queries,l=t.sql_editors,s=t.accessors,c=t.isModalOpened,u=t.isFieldRemoteModalOpened,m=t.editingRemoteField,d=t.data_source_options,f=t.validations,b=this.props.match.params.id;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/models"},"Tables / All Models"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},this.state.id?"Edit Model":"Add Model"))),p.createElement("div",{className:"admin-content"},p.createElement(Rr,{model:n,submitText:n.id?"Save":"Add",edit:n.id,onSubmit:this.onSubmit}),a?p.createElement(p.Fragment,null,p.createElement("h2",{className:"sub-header"},"Fields"),p.createElement(X,{columns:Gr,quickActions:[{tag:"Link",props:{href:"/admin/tables/models/".concat(b,"/fields/edit/:id")},title:"Edit"},{tag:"button",route:"/admin/ajax/models/".concat(b,"/fields/:id"),method:"delete",confirm:"Are You Sure?",after:function(){return e.updateFields()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:a.map((function(e){return Kr(Kr({},e),{},{editUrl:"/admin/tables/models/".concat(n.id,"/fields/edit/").concat(e.id)})}))}),p.createElement(h.rU,{className:"btn btn_add",to:"/admin/tables/models/".concat(n.id,"/fields/add")},"Add Field")):"",p.createElement("h2",{className:"sub-header"},"Remote Fields"),p.createElement(X,{columns:Jr,quickActions:[{callBack:function(t){return e.setState({isFieldRemoteModalOpened:!0,editingRemoteField:t})},title:"Edit"},{tag:"button",route:"/admin/ajax/remote_data/:id",method:"delete",confirm:"Are You Sure?",after:function(){return e.updateRemoteFields()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:r}),p.createElement("button",{onClick:function(){return e.setState({isFieldRemoteModalOpened:!0,editingRemoteField:null})},className:"btn btn_add"},"Add Remote Field"),u&&p.createElement(La,{closeHandler:function(){return e.setState({isFieldRemoteModalOpened:!1,editingRemoteField:null})}},p.createElement(Wr,{fieldsOptions:a,remoteFieldsResource:this.remoteFieldsResource,updateRemoteFields:this.updateRemoteFields,field:m})),o?p.createElement(p.Fragment,null,p.createElement("h2",{className:"sub-header"},"Relations"),p.createElement(X,{columns:Gr,quickActions:[{tag:"Link",props:{href:"/admin/tables/models/".concat(b,"/relations/edit/:id")},title:"Edit"},{tag:"button",route:"/admin/ajax/models/".concat(b,"/relations/:id"),method:"delete",confirm:"Are You Sure?",after:function(){return e.updateRelations()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:o.map((function(e){return Kr(Kr({},e),{},{editUrl:"/admin/tables/models/".concat(n.id,"/relations/edit/").concat(e.id)})}))}),p.createElement(h.rU,{className:"btn btn_add",to:"/admin/tables/models/".concat(n.id,"/relations/add")},"Add Relation")):"",s?p.createElement(p.Fragment,null,p.createElement("h2",{className:"sub-header"},"Accessors"),p.createElement(X,{columns:Gr,quickActions:[{tag:"Link",props:{href:"/admin/tables/models/".concat(b,"/accessors/edit/:id")},title:"Edit"},{tag:"button",route:"/admin/ajax/models/".concat(b,"/accessors/:id"),method:"delete",confirm:"Are You Sure?",after:function(){return e.updateAccessors()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:s.map((function(e){return Kr(Kr({},e),{},{editUrl:"/admin/tables/models/".concat(n.id,"/accessors/edit/").concat(e.id)})}))}),p.createElement(h.rU,{className:"btn btn_add",to:"/admin/tables/models/".concat(n.id,"/accessors/add")},"Add Accessor")):"",i?p.createElement(p.Fragment,null,p.createElement("h2",{className:"sub-header"},"Queries"),p.createElement(X,{columns:Gr,rows:i.map((function(e){return Kr(Kr({},e),{},{editUrl:"/admin/tables/models/".concat(n.id,"/queries/edit/").concat(e.id)})})),quickActions:[{tag:"Link",props:{href:"/admin/tables/models/".concat(n.id,"/queries/edit/:id")},title:"Edit"},{tag:"button",route:"/admin/ajax/models/".concat(n.id,"/queries/:id"),method:"delete",confirm:"Are You Sure?",after:function(){return e.updateQueries()},className:"quick-action-menu__item_danger",title:"Trash"}]}),p.createElement(h.rU,{className:"btn btn_add",to:"/admin/tables/models/".concat(n.id,"/queries/add")},"Add Query")):"",l?p.createElement(p.Fragment,null,p.createElement("h2",{className:"sub-header"},"SQL Editors"),p.createElement(X,{columns:Gr,rows:l.map((function(e){return Kr(Kr({},e),{},{editUrl:"/admin/tables/models/".concat(n.id,"/sql_editors/edit/").concat(e.id)})}))}),p.createElement(h.rU,{className:"btn btn_add",to:"/admin/tables/models/".concat(n.id,"/sql_editors/add")},"Add Editor")):"",p.createElement("h2",{className:"sub-header"},"Validation"),b&&p.createElement(p.Fragment,null,p.createElement(Ir,{validations:f,updateValidations:this.updateValidations,fieldsOptions:a,validationsResource:this.validationsResource,data_source_options:d}),p.createElement("button",{onClick:function(){return e.setState({isModalOpened:!0})},className:"btn btn_add"},"Add Field")),c&&p.createElement(La,{closeHandler:function(){return e.setState({isModalOpened:!1})}},p.createElement(Fr,{fieldsOptions:a,validationsResource:this.validationsResource,data_source_options:d,updateValidations:this.updateValidations}))))}}]),m}(p.Component),$r=(0,b.EN)(Qr),Xr=n(57925);function eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function to(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var no=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).state={rightType:"string",is1stString:!0,is2ndString:!0,right:{string:"",fieldId:"",string_1:"",fieldId_1:"",string_2:"",fieldId_2:""}},t.rightTypeHandler=t.rightTypeHandler.bind((0,l.Z)(t)),t.rightChangeHandler=t.rightChangeHandler.bind((0,l.Z)(t)),t.setRight=t.setRight.bind((0,l.Z)(t)),t}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props.item.right;e&&("string"==typeof this.props.item.right?this.setState({rightType:"string",right:to(to({},this.state.right),{},{string:e})}):this.setState({rightType:"object",right:to(to({},this.state.right),{},{fieldId:e.id})}))}},{key:"rightTypeHandler",value:function(e){this.setState((function(t){return{rightType:e}}),this.setRight)}},{key:"rightChangeHandler",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState((function(e){return e.right[a]=n,e}),this.setRight)}},{key:"operatorChangeHandler",value:function(e){switch(e){case"not-null":case"null":this.rightTypeHandler("null");break;case"between":this.rightTypeHandler("array");break;default:this.rightTypeHandler("string")}this.props.changeHandler({value:e,name:"operator"})}},{key:"setRight",value:function(){var e,t=this.state,n=t.rightType,a=t.is1stString,r=t.is2ndString,o=t.right;switch(n){case"string":e=o.string;break;case"object":e={id:o.fieldId};break;case"null":e=null;break;case"array":e=[a?o.string_1:{id:o.fieldId_1},r?o.string_2:{id:o.fieldId_2}]}this.props.changeHandler({name:"right",value:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.item,a=t.index,r=t.fieldsOptions,o=t.changeHandler,i=t.deleteItemHandler,l=this.state,s=l.rightType,c=l.right,u=l.is1stString,m=l.is2ndString;return p.createElement(p.Fragment,null,p.createElement("div",{className:"flex-container"},p.createElement("p",null,"if"),p.createElement("button",{className:"btn btn_failure",type:"button",onClick:i},"Delete")),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"left"+a},"Field Name"),p.createElement("select",{className:"form-control",id:"left"+a,name:"left",required:!0,value:n.left,onChange:function(e){var t=e.target,n=t.value,a=t.name;return o({value:n,name:a})}},p.createElement("option",{disabled:!0,value:""}),r.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{value:t,key:t},n)})))),p.createElement("p",null,"Comparison Operators"),p.createElement("div",{className:"form-group"},p.createElement("select",{className:"form-control",name:"operator",required:!0,value:n.operator,onChange:function(t){var n=t.target.value;return e.operatorChangeHandler(n)}},p.createElement("option",{value:"",disabled:!0}),p.createElement("option",{value:"=="},"Equals"),p.createElement("option",{value:"<>"},"Not Equals"),p.createElement("option",{value:">"},">"),p.createElement("option",{value:">="},">="),p.createElement("option",{value:"<"},"<"),p.createElement("option",{value:"<="},"<="))),["string","object"].includes(s)&&p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Value",p.createElement("input",{type:"radio",className:"disabling-radio",checked:"string"===s,onChange:function(){return e.rightTypeHandler("string")}})),p.createElement("input",{type:"text",className:"form-control",name:"string",required:"string"===s,value:c.string,disabled:"string"!==s,onChange:this.rightChangeHandler})),p.createElement("p",{className:"form-group__inline-wrapper__divider"},"or"),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"right"+a},"Field Name",p.createElement("input",{type:"radio",className:"disabling-radio",checked:"object"===s,onChange:function(){return e.rightTypeHandler("object")}})),p.createElement("select",{className:"form-control",id:"right"+a,name:"fieldId",required:"object"===s,value:c.fieldId,disabled:"object"!==s,onChange:this.rightChangeHandler},p.createElement("option",{disabled:!0,value:""}),r.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{value:t,key:t},n)}))))),"array"===s&&p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Value",p.createElement("input",{type:"radio",className:"disabling-radio",checked:u,onChange:function(){return e.setState({is1stString:!0},e.setRight)}})),p.createElement("input",{type:"text",className:"form-control",name:"string_1",required:u,value:c.string_1,disabled:!u,onChange:this.rightChangeHandler})),p.createElement("p",{className:"form-group__inline-wrapper__divider"},"or"),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"right"+a},"Field Name",p.createElement("input",{type:"radio",className:"disabling-radio",checked:!u,onChange:function(){return e.setState({is1stString:!1},e.setRight)}})),p.createElement("select",{className:"form-control",id:"right"+a,name:"fieldId_1",required:!u,value:c.fieldId_1,disabled:u,onChange:this.rightChangeHandler},p.createElement("option",{disabled:!0,value:""}),r.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{value:t,key:t},n)}))))),p.createElement("p",{className:"centred"},"and"),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Value",p.createElement("input",{type:"radio",className:"disabling-radio",checked:m,onChange:function(){return e.setState({is2ndString:!0},e.setRight)}})),p.createElement("input",{type:"text",className:"form-control",name:"string_2",required:m,value:c.string_2,disabled:!m,onChange:this.rightChangeHandler})),p.createElement("p",{className:"form-group__inline-wrapper__divider"},"or"),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"right"+a},"Field Name",p.createElement("input",{type:"radio",className:"disabling-radio",checked:!m,onChange:function(){return e.setState({is2ndString:!1},e.setRight)}})),p.createElement("select",{className:"form-control",id:"right"+a,name:"fieldId_2",required:!m,value:c.fieldId_2,disabled:m,onChange:this.rightChangeHandler},p.createElement("option",{disabled:!0,value:""}),r.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{value:t,key:t},n)})))))),p.createElement("p",null,"Then = "),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"result"+a},"Value"),p.createElement("input",{type:"text",className:"form-control",id:"result"+a,name:"result",required:!0,value:n.result,onChange:function(e){var t=e.target,n=t.value,a=t.name;return o({value:n,name:a})}}),p.createElement(Xr.Z,{value:n.result,onChange:function(e){o({value:e,name:"result"})},mode:"wrapped json"})),p.createElement("p",null,"E.g. [field_name]*[field_name] + 10"))}}]),r}(p.Component);function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oo=[{value:"string",label:"String"},{value:"integer",label:"integer"},{value:"bigInteger",label:"Big Integer"},{value:"float",label:"Float"},{value:"boolean",label:"Boolean"},{value:"text",label:"Text"},{value:"longText",label:"Long Text"},{value:"calculated",label:"Calculated"},{value:"date",label:"Date"},{value:"time",label:"Time"},{value:"year",label:"Year"},{value:"dateTime",label:"Datetime"},{value:"geometry",label:"Geometry"},{value:"json",label:"JSON"},{value:"binary",label:"Binary"}],io=[{value:"unsigned",label:"UNSIGNED"}],lo=["textarea","text","number","slider","WYSIWYG","color","select","checkbox","radio button"],so=function(e){(0,s.Z)(f,e);var t,n,a,m=(n=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t;return(0,o.Z)(this,f),(t=m.call(this,e)).state={isAlways:!1,fieldsOptions:[],value:{name:"",title:"",description:"",is_label:!1,is_title:!1,is_auth:!1,type:"string",length_value:"",default:"",attribute:"",input_type:"text",options:"",null:!1,indexed:!1,editable:!0,calculation:"",calculation_logic:[{left:"",operator:"",result:"",right:""}]}},t.submitHandler=t.submitHandler.bind((0,l.Z)(t)),t.itemChangeHandler=t.itemChangeHandler.bind((0,l.Z)(t)),t.addItemHandler=t.addItemHandler.bind((0,l.Z)(t)),t.deleteItemHandler=t.deleteItemHandler.bind((0,l.Z)(t)),t.titleChangeHandler=t.titleChangeHandler.bind((0,l.Z)(t)),t.filedsResource=new K.default({route:"/admin/ajax/models/".concat(t.props.match.params.modelId,"/fields")}),t.fieldsOptionsResource=new K.default({route:"/admin/ajax/models/".concat(t.props.match.params.modelId,"/field_options")}),t}return(0,i.Z)(f,[{key:"changeValue",value:function(e,t){this.setState((function(n){if(n=ro({},n),"default"===t)switch(n.value.size&&e.length>n.value.size&&(e=e.substring(0,parseInt(n.value.size))),n.value.type){case"boolean":""===e?e=null:"0"!=e&&"1"!=e&&(e=1);break;case"bigInteger":case"integer":e=isNaN(e)||"0"===e?""===e?null:"0":parseInt(e)}return n.value[t]=e,n}))}},{key:"titleChangeHandler",value:function(e){var t=this;e.persist(),this.setState((function(n){return ro(ro({},n),{},{value:ro(ro({},n.value),{},{title:e.target.value,name:t.props.match.params.id?n.value.name:de(e.target.value)})})}))}},{key:"submitHandler",value:function(e){e.preventDefault();var t=this.props,n=(t.history,t.match,this.state.value),a=n.name,r=n.title,o=n.description,i=n.is_label,l=n.is_title,s=n.is_auth,c=n.type,u=n.size,m=n.default,d=n.attribute,p=n.input_type,f=n.options,h=n.null,b=n.indexed,v=n.editable,g=n.calculation,y=n.calculation_logic,E={};if("calculated"===c?E=this.state.isAlways?{title:r,description:o,type:c,calculation:g,name:a}:{title:r,description:o,type:c,calculation_logic:y,name:a}:(E={name:a,title:r,description:o,is_label:i,is_title:l,is_auth:s,type:c,size:u,default:m,attribute:d,input_type:p,null:h,indexed:b,editable:v},["select","checkbox","radio button"].includes(p)&&(E=ro(ro({},E),{},{options:f})),console.log(m),["integer","bigInteger"].includes(c)&&(E.default=m)),_.isFunction(this.props.onSubmit)){var x=this.fieldName&&this.fieldName!==E.name;this.props.onSubmit(E,x)}}},{key:"addItemHandler",value:function(){this.setState((function(e){return e.value.calculation_logic.push({left:"",operator:"",result:"",right:""}),e}))}},{key:"deleteItemHandler",value:function(e){this.setState((function(t){return t.value.calculation_logic.splice(e,1),t}))}},{key:"itemChangeHandler",value:function(e,t){var n=e.name,a=e.value;this.setState((function(e){return e.value.calculation_logic[t][n]=a,e}))}},{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fieldsOptionsResource.getAll();case 2:if(t=e.sent,n=t.options,!this.props.match.params.id){e.next=11;break}return e.next=7,this.filedsResource.get(this.props.match.params.id);case 7:a=e.sent,this.fieldName=a.name,"string"==typeof a.calculation_logic&&(a.calculation_logic=JSON.parse(a.calculation_logic)),this.setState((function(e){return ro(ro({},e),{},{isAlways:!!a.calculation,value:ro(ro({},e.value),a)})}));case 11:this.setState((function(e){return ro(ro({},e),{},{fieldsOptions:n})}));case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.match.params.modelId;return p.createElement("form",{className:"admin-form field-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group "},p.createElement("label",{htmlFor:"field-title"},"Field Title"),p.createElement("input",{type:"text",id:"field-title",required:!0,value:this.state.value.title||"",onChange:this.titleChangeHandler,className:"form-control"})),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",{htmlFor:"field-name"},"Field Name"),p.createElement("input",{type:"text",id:"field-name",required:!0,readOnly:this.props.match.params.id,value:this.state.value.name||"",onChange:function(t){e.changeValue(t.target.value,"name")},className:"form-control"})),p.createElement("div",{className:"form-group form-group_width65"},p.createElement("label",{htmlFor:"field-description"},"Field Description"),p.createElement("input",{type:"text",id:"field-description",value:this.state.value.description||"",onChange:function(t){e.changeValue(t.target.value,"description")},className:"form-control"}))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"field-type"},"Field Type"),p.createElement("select",{id:"field-type",required:!0,value:this.state.value.type||"",onChange:function(t){e.changeValue(t.target.value,"type")},className:"form-control"},p.createElement("option",{value:""}),oo.map((function(e){return p.createElement("option",{key:e.value,value:e.value},e.label)})))),"calculated"===this.state.value.type?p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group col-6 form-check-inline"},p.createElement("input",{type:"checkbox",id:"always",className:"form-check-input",checked:this.state.isAlways,onChange:function(t){return e.setState({isAlways:t.target.checked})}}),p.createElement("label",{htmlFor:"always",className:"label_checkbox"},"Always")),this.state.isAlways?p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"calculation"},"Calculation"),p.createElement("input",{type:"text",className:"form-control",id:"calculation",value:this.state.value.calculation,onChange:function(t){e.changeValue(t.target.value,"calculation")}})),p.createElement("p",null,"E.g. [field_name]*[field_name] + 10")):p.createElement(p.Fragment,null,this.state.value.calculation_logic.map((function(t,n){return p.createElement(p.Fragment,{key:n},0!==n&&p.createElement("hr",null),p.createElement(no,{item:t,index:n,fieldsOptions:e.state.fieldsOptions,key:n+"logic",changeHandler:function(t){return e.itemChangeHandler(t,n)},deleteItemHandler:function(){return e.deleteItemHandler(n)}}))})),p.createElement("button",{className:"btn",type:"button",onClick:this.addItemHandler},"+ Calculated Logic"))):p.createElement(p.Fragment,null,p.createElement("div",{className:"checkbox-group"},p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"field-is_label",checked:this.state.value.is_label,onChange:function(t){e.changeValue(t.target.checked,"is_label")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-is_label"},"As Label")),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"field-is_title",checked:this.state.value.is_title,onChange:function(t){e.changeValue(t.target.checked,"is_title")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-is_title"},"As Title")),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"field-is_auth",checked:this.state.value.is_auth,onChange:function(t){e.changeValue(t.target.checked,"is_auth")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-is_auth"},"Set Auth"))),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"field-length_value"},"Length/Value"),p.createElement("input",{type:"number",id:"field-length_value",value:this.state.value.size||"",onChange:function(t){e.changeValue(+t.target.value,"size")},className:"form-control"})),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"field-default"},"Default"),p.createElement("input",{type:"text",id:"field-default",value:this.state.value.default||"",onChange:function(t){e.changeValue(t.target.value,"default")},className:"form-control"}))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"field-attribute"},"Attribute"),p.createElement("select",{id:"field-attribute",value:this.state.value.attribute||"",onChange:function(t){e.changeValue(t.target.value,"attribute")},className:"form-control"},p.createElement("option",{value:""}),io.map((function(e){return p.createElement("option",{key:e.value,value:e.value},e.label)})))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"field-input_type"},"Input Type"),p.createElement("select",{id:"field-input_type",required:!0,value:this.state.value.input_type||"",onChange:function(t){e.changeValue(t.target.value,"input_type")},className:"form-control"},p.createElement("option",{disabled:!0,value:""}),lo.map((function(e){return p.createElement("option",{key:e,value:e},e)})))),["select","checkbox","radio button"].includes(this.state.value.input_type)&&p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"field-options"},"Options"),p.createElement("textarea",{id:"field-options",value:this.state.value.options||"",onChange:function(t){e.changeValue(t.target.value,"options")},className:"form-control"})),p.createElement("p",null,"Enter each choice on a new line."),p.createElement("p",null,"Fro more control, you may specify both a value and label like this:"),p.createElement("p",null,"red | Red")),p.createElement("div",{className:"checkbox-group"},p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"field-nullable",checked:this.state.value.null,onChange:function(t){e.changeValue(t.target.checked,"null")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-nullable"},"Nullable")),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"field-indexed",checked:this.state.value.indexed,onChange:function(t){e.changeValue(t.target.checked,"indexed")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-indexed"},"Indexed")),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"field-editable",checked:this.state.value.editable,onChange:function(t){e.changeValue(t.target.checked,"editable")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-editable"},"Editable")))),p.createElement("div",{className:"btn__wrapper btn_add"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Add"),p.createElement(h.rU,{className:"btn",to:"/admin/tables/models/edit/".concat(t)},"Cancel")))}}]),f}(p.Component),co=(0,b.EN)(so);var uo=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).onSubmit=function(){var e=(0,r.Z)(d().mark((function e(n,a){var r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props.match.params.modelId,o=t.props.history,a&&fetch("/admin/ajax/models/".concat(r,"/field_name_is_free/?name=").concat(n.name)).then((function(e){return e.json()})).then((function(e){if(!e.taken)return alert("Name ".concat(n.name," is already taken. Use another one."))})),!t.props.match.params.id){e.next=10;break}return e.next=6,t.filedsResource.put(t.props.match.params.id,n);case 6:e.sent,o.push("/admin/tables/models/edit/".concat(r)),e.next=14;break;case 10:return e.next=12,t.filedsResource.post(n);case 12:e.sent,o.push("/admin/tables/models/edit/".concat(r));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.state={modelTitle:"Model Title",field:{}},t.modelsResource=new K.default({route:"/admin/ajax/models"}),t.filedsResource=new K.default({route:"/admin/ajax/models/".concat(t.props.match.params.modelId,"/fields")}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.modelId,e.next=3,this.modelsResource.get(t);case 3:n=e.sent,this.setState({modelTitle:n.title});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.modelTitle,t=this.props.match.params.modelId;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/models"},"Models / All Models"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/models/edit/".concat(t)},e),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Add New Field"))),p.createElement("div",{className:"admin-content"},p.createElement(co,{onSubmit:this.onSubmit})))}}]),m}(p.Component),mo=(0,b.EN)(uo);function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ho=[{value:"hasOne",label:"Has One"},{value:"belongsTo",label:"Belongs To"},{value:"hasMany",label:"Has Many"}],bo=[{value:"cascade",label:"cascade"},{value:"set null",label:"set null"},{value:"no action",label:"no action"},{value:"restrict",label:"restrict"}],vo=function(e){(0,s.Z)(v,e);var t,n,a,m,f,b=(m=v,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(m);if(f){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function v(e){var t;return(0,o.Z)(this,v),(t=b.call(this,e)).state={modelsOptions:[],value:{title:"",description:"",type:"",model_id:t.props.match.params.modelId,add_belong_to:!1,editable:!0,always_with:!1,local_key:"",foreign_key:"",onDelete:"set null",onUpdate:"set null"},selfFieldsOptions:[],foreignFieldsOptions:[],relationTypeOptions:ho},t.modelsResource=new K.default({route:"/admin/ajax/model_options"}),t.relationsResource=new K.default({route:"/admin/ajax/models/".concat(t.props.match.params.modelId,"/relations")}),t.submitHandler=t.submitHandler.bind((0,l.Z)(t)),t}return(0,i.Z)(v,[{key:"componentDidMount",value:(a=(0,r.Z)(d().mark((function e(){var t,n,a,r,o,i,l,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modelsResource.getAll();case 2:return t=e.sent,n=t.options,a=this.props.match.params,r=a.modelId,o=a.id,this.setState({modelsOptions:n}),e.next=8,new K.default({route:"/admin/ajax/models/".concat(r,"/fields")}).getAll();case 8:if(i=e.sent,l=i.map((function(e){return{label:e.title,value:e.name}})),this.setState((function(e){return fo(fo({},e),{},{selfFieldsOptions:l})})),!o){e.next=19;break}return e.next=14,this.relationsResource.get(o);case 14:s=e.sent,this.relationName=s.name,this.updateForeignFieldOptions(s.target_model_id),this.changeTargetModel(s.target_model_id),this.setState((function(e){return fo(fo({},e),{},{value:s})}));case 19:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"changeTargetModel",value:function(e){var t="";this.state.modelsOptions.forEach((function(n){parseInt(n.value)===parseInt(e)&&(t=n.label)}));var n=ho.filter((function(e){return"User"!==t||"hasMany"!==e.value}));"User"===t&&(this.changeValue("hasOne","type"),this.changeValue(!1,"add_belong_to")),this.setState((function(e){return fo(fo({},e),{},{hideAddBelongTo:"User"===t,relationTypeOptions:n})}))}},{key:"changeValue",value:function(e,t){var n=this,a=this.props.match.params.id;"target_model_id"===t&&this.changeTargetModel(e),this.setState((function(r){return(r=fo({},r)).value[t]=e,"title"!==t||a||(r.value.name=de(e)),"name"===t&&(r.value.name=de(e)),"foreign_key"===t&&(r.value[t]=de(e)),"target_model_id"===t&&n.updateForeignFieldOptions(e),r}))}},{key:"updateForeignFieldOptions",value:(n=(0,r.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new K.default({route:"/admin/ajax/models/".concat(t,"/fields")}).getAll();case 2:n=e.sent,a=n.map((function(e){return{label:e.title,value:e.name}})),this.setState((function(e){return fo(fo({},e),{},{foreignFieldsOptions:a})}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"submitHandler",value:(t=(0,r.Z)(d().mark((function e(t){var n,a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=this.props,a=n.history,r=n.match,o=this.state.value,this.props.match.params.id&&this.relationName===o.name){e.next=9;break}return e.next=6,fetch("/admin/ajax/models/".concat(r.params.modelId,"/relation_name_is_free/?name=").concat(o.name)).then((function(e){return e.json()})).then((function(e){return!e.taken}));case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=null;case 10:if(!e.t0){e.next=13;break}return e.abrupt("return",alert("Name ".concat(o.name," is already taken. Use another one.")));case 13:if(!this.props.match.params.id){e.next=19;break}return e.next=16,this.relationsResource.put(this.props.match.params.id,o);case 16:e.sent,e.next=22;break;case 19:return e.next=21,this.relationsResource.post(o);case 21:e.sent;case 22:a.push("/admin/tables/models/edit/".concat(r.params.modelId));case 23:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"renderLocalKey",value:function(){var e=this;return this.props.match.params.id,p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"relation-local_key"},"Local Key"),p.createElement("select",{id:"relation-local_key",value:this.state.value.local_key||"",className:"form-control",onChange:function(t){e.changeValue(t.target.value,"local_key")}},p.createElement("option",{disabled:!0,value:""}),this.state.selfFieldsOptions.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)}))))}},{key:"renderForeignKey",value:function(){var e=this;return this.props.match.params.id,p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"relation-foreign_key"},"Foreign Key"),p.createElement("select",{id:"relation-foreign_key",value:this.state.value.foreign_key||"",onChange:function(t){e.changeValue(t.target.value,"foreign_key")},className:"form-control"},p.createElement("option",{disabled:!0,value:""}),this.state.foreignFieldsOptions.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)}))))}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"row"},p.createElement("div",{className:"form-group col-12"},p.createElement("label",{htmlFor:"relation-title"},"Relation Title"),p.createElement("input",{type:"text",id:"relation-title",required:!0,value:this.state.value.title||"",onChange:function(t){e.changeValue(t.target.value,"title")},className:"form-control"})),p.createElement("div",{className:"form-group col-4"},p.createElement("label",{htmlFor:"relation-title"},"Relation Name"),p.createElement("input",{type:"text",id:"relation-title",required:!0,readOnly:t,value:this.state.value.name||"",onChange:function(t){e.changeValue(t.target.value,"name")},className:"form-control"})),p.createElement("div",{className:"form-group col-8"},p.createElement("label",{htmlFor:"relation-description"},"Relation Description"),p.createElement("input",{type:"text",id:"relation-description",readOnly:t,value:this.state.value.description||"",onChange:function(t){e.changeValue(t.target.value,"description")},className:"form-control"}))),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"relation-type"},"Relation Type"),p.createElement("select",{id:"relation-type",required:!0,disabled:t,value:this.state.value.type,onChange:function(t){e.changeValue(t.target.value,"type")},className:"form-control"},p.createElement("option",{disabled:!0,value:""}),this.state.relationTypeOptions.map((function(e){return p.createElement("option",{key:e.value,value:e.value},e.label)})))),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"relation-model_id"},"Model to Bound"),p.createElement("select",{id:"relation-model_id",required:!0,value:this.state.value.target_model_id||"",onChange:function(t){e.changeValue(t.target.value,"target_model_id")},className:"form-control"},p.createElement("option",{disabled:!0,value:""}),this.state.modelsOptions.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)}))))),p.createElement("div",{className:"row"},p.createElement("div",{className:"form-group col-4"},this.state.hideAddBelongTo||"belongsTo"===this.state.value.type?"":p.createElement(p.Fragment,null,p.createElement("input",{type:"checkbox",id:"relation-add_belong_to",checked:this.state.value.add_belong_to,readOnly:t,onChange:function(t){e.changeValue(t.target.checked,"add_belong_to")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"relation-add_belong_to"},"Add Reverse Relation"))),p.createElement("div",{className:"form-group col-4"},["hasMany","belongsTo"].includes(this.state.value.type)?"":p.createElement(p.Fragment,null,p.createElement("input",{type:"checkbox",id:"field-editable",checked:this.state.value.editable,onChange:function(t){e.changeValue(t.target.checked,"editable")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-editable"},"Editable"))),p.createElement("div",{className:"form-group col-4"},p.createElement("input",{type:"checkbox",id:"field-always_with",checked:this.state.value.always_with,onChange:function(t){e.changeValue(t.target.checked,"always_with")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-always_with"},"Always With"))),p.createElement("div",{className:"form-group__inline-wrapper"},this.renderLocalKey(),this.renderForeignKey()),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"onDelete"},"On Delete"),p.createElement("select",{id:"onDelete",required:!0,value:this.state.value.onDelete,onChange:function(t){e.changeValue(t.target.value,"onDelete")},className:"form-control"},p.createElement("option",{disabled:!0,value:""}),bo.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n.toUpperCase())})))),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"onUpdate"},"On Update"),p.createElement("select",{id:"onUpdate",required:!0,value:this.state.value.onUpdate,onChange:function(t){e.changeValue(t.target.value,"onUpdate")},className:"form-control"},p.createElement("option",{disabled:!0,value:""}),bo.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n.toUpperCase())}))))),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Add"),p.createElement(h.rU,{className:"btn",to:"/admin/tables/models"},"Cancel")))}}]),v}(p.Component),go=(0,b.EN)(vo);var _o=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).state={modelTitle:"Model Title"},t.modelsResource=new K.default({route:"/admin/ajax/models"}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.modelId,e.next=3,this.modelsResource.get(t);case 3:n=e.sent,this.setState({modelTitle:n.title});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.modelTitle,t=this.props.match.params.modelId;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/models"},"Models / All Models"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/models/edit/".concat(t)},e),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Add New Relation"))),p.createElement("div",{className:"admin-content"},p.createElement(go,null)))}}]),m}(p.Component),yo=(0,b.EN)(_o);function Eo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wo=function(e){(0,s.Z)(b,e);var t,n,a,m,f=(a=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(m){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(e){var t;return(0,o.Z)(this,b),(t=f.call(this,e)).state={constructor:!1,fieldsOptions:[],value:{name:"",title:"",description:"",calculation:"",calculation_logic:[{left:"",operator:"",result:"",right:""}]}},t.submitHandler=t.submitHandler.bind((0,l.Z)(t)),t.itemChangeHandler=t.itemChangeHandler.bind((0,l.Z)(t)),t.addItemHandler=t.addItemHandler.bind((0,l.Z)(t)),t.deleteItemHandler=t.deleteItemHandler.bind((0,l.Z)(t)),t.titleChangeHandler=t.titleChangeHandler.bind((0,l.Z)(t)),t.accessorsResource=new K.default({route:"/admin/ajax/models/".concat(t.props.match.params.modelId,"/accessors")}),t.fieldsOptionsResource=new K.default({route:"/admin/ajax/models/".concat(t.props.match.params.modelId,"/field_options")}),t}return(0,i.Z)(b,[{key:"changeValue",value:function(e,t){this.setState((function(n){return(n=xo({},n)).value[t]=e,n}))}},{key:"titleChangeHandler",value:function(e){var t=this;e.persist(),this.setState((function(n){return xo(xo({},n),{},{value:xo(xo({},n.value),{},{title:e.target.value,name:t.props.match.params.id?n.value.name:de(e.target.value)})})}))}},{key:"submitHandler",value:(n=(0,r.Z)(d().mark((function e(t){var n,a,r,o,i,l,s,c,u,m;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=this.props,a=n.history,r=n.match,o=this.state.value,i=o.name,l=o.title,s=o.description,c=o.calculation,u=o.calculation_logic,m={},m=this.state.constructor?{title:l,description:s,calculation:c,name:i}:{title:l,description:s,calculation_logic:u,name:i},!this.props.match.params.id){e.next=11;break}return e.next=8,this.accessorsResource.put(this.props.match.params.id,m);case 8:e.sent,e.next=14;break;case 11:return e.next=13,this.accessorsResource.post(m);case 13:e.sent;case 14:a.push("/admin/tables/models/edit/".concat(r.params.modelId));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"addItemHandler",value:function(){this.setState((function(e){return e.value.calculation_logic.push({left:"",operator:"",result:"",right:""}),e}))}},{key:"deleteItemHandler",value:function(e){this.setState((function(t){return t.value.calculation_logic.splice(e,1),t}))}},{key:"itemChangeHandler",value:function(e,t){var n=e.name,a=e.value;this.setState((function(e){return e.value.calculation_logic[t][n]=a,e}))}},{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fieldsOptionsResource.getAll();case 2:if(t=e.sent,n=t.options,!this.props.match.params.id){e.next=11;break}return e.next=7,this.accessorsResource.get(this.props.match.params.id);case 7:"string"==typeof(a=e.sent).calculation_logic&&(a.calculation_logic=JSON.parse(a.calculation_logic)),null===a.calculation_logic&&(a.calculation_logic=[{left:"",operator:"",result:"",right:""}]),this.setState((function(e){return xo(xo({},e),{},{constructor:!!a.calculation,value:xo(xo({},e.value),a)})}));case 11:this.setState((function(e){return xo(xo({},e),{},{fieldsOptions:n})}));case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props.match.params.modelId;return p.createElement("form",{className:"admin-form field-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group "},p.createElement("label",{htmlFor:"field-title"},"Field Title"),p.createElement("input",{type:"text",id:"field-title",required:!0,value:this.state.value.title||"",onChange:this.titleChangeHandler,className:"form-control"})),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",{htmlFor:"field-name"},"Field Name"),p.createElement("input",{type:"text",id:"field-name",required:!0,readOnly:this.props.match.params.id,value:this.state.value.name||"",onChange:function(t){e.changeValue(t.target.value,"name")},className:"form-control"})),p.createElement("div",{className:"form-group form-group_width65"},p.createElement("label",{htmlFor:"field-description"},"Field Description"),p.createElement("input",{type:"text",id:"field-description",value:this.state.value.description||"",onChange:function(t){e.changeValue(t.target.value,"description")},className:"form-control"}))),p.createElement("div",{className:"form-group col-6 form-check-inline"},p.createElement("input",{type:"checkbox",id:"constructor",className:"form-check-input",checked:this.state.constructor,onChange:function(t){return e.setState({constructor:t.target.checked})}}),p.createElement("label",{htmlFor:"constructor",className:"label_checkbox"},"Constructor")),this.state.constructor?p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"calculation"},"Calculation"),p.createElement("input",{type:"text",className:"form-control",id:"calculation",value:this.state.value.calculation,onChange:function(t){e.changeValue(t.target.value,"calculation")}})),p.createElement("p",null,"E.g. [field_name]*[field_name] + 10")):p.createElement(p.Fragment,null,this.state.value.calculation_logic.map((function(t,n){return p.createElement(no,{item:t,index:n,fieldsOptions:e.state.fieldsOptions,key:n,changeHandler:function(t){return e.itemChangeHandler(t,n)},deleteItemHandler:function(){return e.deleteItemHandler(n)}})})),p.createElement("button",{className:"btn",type:"button",onClick:this.addItemHandler},"+ Calculated Logic")),p.createElement("div",{className:"btn__wrapper btn_add"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Add"),p.createElement(h.rU,{className:"btn",to:"/admin/tables/models/edit/".concat(t)},"Cancel")))}}]),b}(p.Component),ko=(0,b.EN)(wo);var No=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).state={modelTitle:"Model Title"},t.modelsResource=new K.default({route:"/admin/ajax/models"}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.modelId,e.next=3,this.modelsResource.get(t);case 3:n=e.sent,this.setState({modelTitle:n.title});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.modelTitle,t=this.props.match.params.modelId;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/models"},"Models / All Models"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/models/edit/".concat(t)},e),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Add New Accessor"))),p.createElement("div",{className:"admin-content"},p.createElement(ko,null)))}}]),m}(p.Component),Oo=(0,b.EN)(No);var So=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props,t=(0,un.Z)(e.item,2),n=t[0],a=t[1],r=e.changeHandler;return p.createElement("div",{className:"form-segment row"},p.createElement("div",{className:"form-group col-4"},p.createElement("label",null,"Key",p.createElement("input",{type:"text",required:!0,name:0,value:n,onChange:r,className:"form-control"}))),p.createElement("div",{className:"form-group col-8"},p.createElement("label",null,"Value",p.createElement("input",{type:"text",name:1,value:a,onChange:r,className:"form-control"}))))}}]),r}(p.Component);function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jo=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={modelsOptions:[],rolesOptions:[],permissionsOptions:[],typeIsDisabled:!1,value:{title:"",name:"",description:"",type:"remote",request_type:"",model_id:"",url:"",api_url:"",auth:!0,access:{roles:[],permissions:[]},headers:[],bodies:[]}},e.changeValue=function(t,n){e.setState((function(e){return(e=Zo({},e)).value[n]=t,e}))},e.titleChangeHandler=function(t){t.persist(),e.setState((function(e){return Zo(Zo({},e),{},{value:Zo(Zo({},e.value),{},{title:t.target.value,name:de(t.target.value)})})}))},e.changeRoles=function(t){var n=[];t&&t.forEach((function(e){n.push(e.value)})),e.setState((function(e){var t=_.cloneDeep(e);return t.value.access.roles=n,t}))},e.changePermission=function(t){var n=[];t&&t.forEach((function(e){n.push(e.value)})),e.setState((function(e){var t=_.cloneDeep(e);return t.value.access.permissions=n,t}))},e.headerDeleteHandler=function(t){e.setState((function(e){var n=(0,zt.Z)(e.value.headers);return n.splice(t,1),Zo(Zo({},e),{},{value:Zo(Zo({},e.value),{},{headers:n})})}))},e.headerChangeHandler=function(t,n){var a=t.target,r=a.name,o=a.value;e.setState((function(e){var t=(0,zt.Z)(e.value.headers);return t[n][+r]=o,Zo(Zo({},e),{},{value:Zo(Zo({},e.value),{},{headers:t})})}))},e.headerAddHandler=function(){e.setState((function(e){var t=[].concat((0,zt.Z)(e.value.headers),[["",""]]);return Zo(Zo({},e),{},{value:Zo(Zo({},e.value),{},{headers:t})})}))},e.bodyDeleteHandler=function(t){e.setState((function(e){var n=(0,zt.Z)(e.value.bodies);return n.splice(t,1),Zo(Zo({},e),{},{value:Zo(Zo({},e.value),{},{bodies:n})})}))},e.bodyChangeHandler=function(t,n){var a=t.target,r=a.name,o=a.value;e.setState((function(e){var t=(0,zt.Z)(e.value.bodies);return t[n][+r]=o,Zo(Zo({},e),{},{value:Zo(Zo({},e.value),{},{bodies:t})})}))},e.bodyAddHandler=function(){e.setState((function(e){var t=[].concat((0,zt.Z)(e.value.bodies),[["",""]]);return Zo(Zo({},e),{},{value:Zo(Zo({},e.value),{},{bodies:t})})}))},e.submitHandler=function(t){t.preventDefault();var n=new K.default({route:"/admin/ajax/data_sources"}),a=e.props.match.params.id,r=Object.fromEntries(e.state.value.headers),o=Object.fromEntries(e.state.value.bodies),i=Zo(Zo({},e.state.value),{},{headers:r,bodies:o});(a?n.put(a,i):n.post(i)).then((function(){return e.props.history.goBack()}))},e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;new K.default({route:"/admin/ajax/model_options"}).getAll().then((function(t){var n=t.options;return e.setState({modelsOptions:n})})),new K.default({route:"/admin/ajax/role_options"}).getAll().then((function(t){return e.setState({rolesOptions:t})})),new K.default({route:"/admin/ajax/permissions_options"}).getAll().then((function(t){return e.setState({permissionsOptions:t})})),t&&new K.default({route:"/admin/ajax/data_sources"}).get(t).then((function(t){return e.setState({value:Zo(Zo({},t),{},{headers:Object.entries(t.headers||{}),bodies:Object.entries(t.bodies||{})}),typeIsDisabled:"remote"===t.type})}))}},{key:"render",value:function(){var e=this,t=this.state.value.access,n=t.roles,a=t.permissions,r=this.state,o=r.rolesOptions,i=r.permissionsOptions,l=this.state.value,s=l.headers,c=l.bodies,u=this.props.match.params.id;return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"data-source-title"},"Data Source Title"),p.createElement("input",{type:"text",id:"data-source-title",required:!0,value:this.state.value.title,onChange:this.titleChangeHandler,className:"form-control"})),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"data-source-title"},"Data Source Name"),p.createElement("input",{type:"text",id:"data-source-title",required:!0,value:this.state.value.name,onChange:function(t){e.changeValue(t.target.value,"name")},className:"form-control"}))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"data-source-description"},"Data Source Description"),p.createElement("input",{type:"text",id:"data-source-description",value:this.state.value.description,onChange:function(t){e.changeValue(t.target.value,"description")},className:"form-control"})),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"data-source-type"},"Data Source Type"),p.createElement("select",{id:"data-source-type",required:!0,name:"type",value:this.state.value.type,onChange:function(t){e.changeValue(t.target.value,"type")},className:"form-control",disabled:!this.props.match.params.id||this.state.typeIsDisabled},p.createElement("option",{value:"get"},"get"),p.createElement("option",{value:"show"},"show"),p.createElement("option",{value:"options"},"options"),p.createElement("option",{value:"filters"},"filters"),p.createElement("option",{value:"add"},"add"),p.createElement("option",{value:"update"},"update"),p.createElement("option",{value:"update_column"},"update_column"),p.createElement("option",{value:"delete"},"delete"),p.createElement("option",{value:"remote"},"remote"))),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"data-source-type"},"Request Type"),p.createElement("select",{id:"data-source-type",required:!0,name:"type",value:this.state.value.request_type,onChange:function(t){e.changeValue(t.target.value,"request_type")},className:"form-control"},p.createElement("option",{disabled:!0,value:""}),p.createElement("option",{value:"get"},"get"),p.createElement("option",{value:"post"},"post"),p.createElement("option",{value:"put"},"put"),p.createElement("option",{value:"delete"},"delete")))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"data-source-model_id"},"Model"),p.createElement("select",{id:"data-source-model_id",required:!0,value:this.state.value.model_id,onChange:function(t){e.changeValue(t.target.value,"model_id")},className:"form-control",disabled:this.props.match.params.id},p.createElement("option",{disabled:!0,value:""}),this.state.modelsOptions.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)})))),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"data-source-url"},"Route"),p.createElement("input",{type:"text",id:"data-source-url",required:!0,value:this.state.value.url,onChange:function(t){e.changeValue(t.target.value,"url")},className:"form-control"})),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"data-source-api_url"},"API Route"),p.createElement("input",{type:"text",id:"data-source-api_url",required:!0,value:this.state.value.api_url,onChange:function(t){e.changeValue(t.target.value,"api_url")},className:"form-control"}))),p.createElement("h2",{className:"admin-form__subheader centred"},"Headers"),s&&s.map((function(t,n){return p.createElement(p.Fragment,{key:n},0!==n&&p.createElement("hr",null),p.createElement("div",{className:"text-right"},p.createElement("button",{className:"btn btn_failure",type:"button",onClick:function(){return e.headerDeleteHandler(n)}},"✖")),p.createElement(So,{item:t,changeHandler:function(t){return e.headerChangeHandler(t,n)}}))})),p.createElement("div",{className:"centred"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:this.headerAddHandler},"+ New Header")),p.createElement("h2",{className:"admin-form__subheader centred"},"Bodies"),c&&c.map((function(t,n){return p.createElement(p.Fragment,{key:n},0!==n&&p.createElement("hr",null),p.createElement("div",{className:"text-right"},p.createElement("button",{className:"btn btn_failure",type:"button",onClick:function(){return e.bodyDeleteHandler(n)}},"✖")),p.createElement(So,{item:t,changeHandler:function(t){return e.bodyChangeHandler(t,n)}}))})),p.createElement("div",{className:"centred"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:this.bodyAddHandler},"+ New Body")),p.createElement("h2",{className:"admin-form__subheader centred"},"Access"),p.createElement("input",{type:"checkbox",id:"field-auth",checked:this.state.value.auth,value:this.state.value.auth,onChange:function(t){e.changeValue(t.target.checked,"auth")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-auth"},"Auth"),this.state.value.auth?p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"roles"},"Roles"),p.createElement(ht,{id:"roles",closeMenuOnSelect:!1,value:_.filter(o,(function(e){return n.indexOf(e.value)>=0})),isMulti:!0,onChange:this.changeRoles,options:o})),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"permissions"},"Permissions"),p.createElement(ht,{id:"roles",value:_.filter(i,(function(e){return a.indexOf(e.value)>=0})),closeMenuOnSelect:!1,isMulti:!0,onChange:this.changePermission,options:i}))):null,p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},u?"Edit":"Add"),p.createElement(h.rU,{className:"btn",to:"/admin/tables/models"},"Cancel")))}}]),r}(p.Component),Ro=(0,b.EN)(jo);var Po=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props.match.params.id;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/models"},"Models / All Models"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},e?"Edit Data Source":"Add New Data Source"))),p.createElement("div",{className:"admin-content"},p.createElement(Ro,null)))}}]),r}(p.Component),Ao=(0,b.EN)(Po);var Do=["sum","min","max","avg","count","distinct","count_distinct"],Fo=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props.item,t=e.type,n=e.column,a=e.alias,r=this.props,o=r.columnsOptions,i=r.changeHandler;return p.createElement("div",{className:"form-segment form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Type",p.createElement("select",{required:!0,name:"type",value:t,onChange:i,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),Do.map((function(e){return p.createElement("option",{key:e,value:e},e)}))))),p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Field",p.createElement("select",{required:!0,name:"column",value:n,onChange:i,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),p.createElement("option",{value:"*"},"All"),o.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)}))))),p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Alias",p.createElement("input",{type:"text",required:!0,name:"alias",value:a,onChange:i,className:"form-control"}))))}}]),r}(p.Component);var Mo=function(e){return new K.default({route:"/admin/ajax/tables/".concat(e,"/columns")})},To=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={targetColumnOptions:[]},e}return(0,i.Z)(r,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.item.target_table;e.item.target_table!==n&&Mo(n).getAll().then((function(e){return t.setState({targetColumnOptions:e})}))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.item.target_table;t&&Mo(t).getAll().then((function(t){return e.setState({targetColumnOptions:t})}))}},{key:"render",value:function(){var e=this.props.item,t=e.type,n=e.target_table,a=e.source_column,r=e.operator,o=e.target_column,i=this.props,l=i.changeHandler,s=i.tablesOptions,c=i.sourceColumnOptions,u=this.state.targetColumnOptions;return p.createElement("div",{className:"form-segment"},p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Type",p.createElement("select",{required:!0,name:"type",value:t,onChange:l,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),p.createElement("option",{value:"inner_join"},"Inner Join"),p.createElement("option",{value:"left_join"},"Left Join"),p.createElement("option",{value:"right_join"},"Right Join")))),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Target Table",p.createElement("select",{required:!0,name:"target_table",value:n,onChange:l,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),s.map((function(e){var t=e.value,a=e.label;return p.createElement("option",{disabled:t===n,value:t,key:t},a)})))))),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Source Column",p.createElement("select",{required:!0,name:"source_column",value:a,onChange:l,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),c.map((function(e){var t=e.label,n=e.value;return p.createElement("option",{value:n,key:n},t)}))))),p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Operator",p.createElement("select",{required:!0,name:"operator",value:r,onChange:l,className:"form-control"},p.createElement("option",{value:"",disabled:!0}),p.createElement("option",{value:"="},"Equals"),p.createElement("option",{value:"!="},"Not Equals"),p.createElement("option",{value:"like"},"Like"),p.createElement("option",{value:">"},">"),p.createElement("option",{value:">="},">="),p.createElement("option",{value:"<"},"<"),p.createElement("option",{value:"<="},"<=")))),p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Target Column",p.createElement("select",{required:!0,name:"target_column",value:o,onChange:l,className:"form-control"},p.createElement("option",{disabled:!0,value:""},n?"":"Choose Table First"),u.map((function(e){var t=e.id,n=e.title;return p.createElement("option",{value:t,key:t},n)})))))))}}]),r}(p.Component),Ho=n(9198),Bo=n.n(Ho);function zo(e){switch(e){case"datetime":return"yyyy/MM/dd h:mm:ss";case"date":return"yyyy/MM/dd";case"time":return"h:mm:ss";case"day":return"dd";case"month":return"MM";case"year":default:return"yyyy"}}function qo(e){switch(e){case"datetime":return"YYYY/MM/DD H:mm:ss";case"date":return"YYYY/MM/DD";case"time":return"H:mm:ss";case"day":return"DD";case"month":return"MM";case"year":default:return"YYYY"}}var Io=["where","or_where","where_between","where_in","where_date","where_column"],Vo=[{value:"datetime",label:"Date - Time"},{value:"date",label:"Date"},{value:"time",label:"Time"},{value:"day",label:"Day"},{value:"month",label:"Month"},{value:"year",label:"Year"}],Uo=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={isDateVar:!1},e.dateValueFormatChange=function(){var t=e.state.isDateVar;e.props.changeHandler({target:{value:t?Tn()(new Date).format(qo(e.props.item.type)):"",name:"value"}}),e.setState({isDateVar:!t})},e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props,t=e.columnsOptions,n=e.changeHandler,a=e.isFirst,r=this.props.item,o=r.condition_type,i=r.column,l=r.operator,s=r.value,c=r.or,u=r.not,m=r.values,d=r.type,f=r.first_column,h=r.second_column,b=this.state.isDateVar;return p.createElement("div",{className:"form-segment"},p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Condition Type",p.createElement("select",{required:!0,name:"condition_type",value:o,onChange:n,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),Io.map((function(e){return p.createElement("option",{key:e,value:e,disabled:a&&"or_where"===e},e)}))))),o&&"where_column"!==o&&p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Field",p.createElement("select",{required:!0,name:"column",value:i,onChange:n,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),t.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)}))))),["where","or_where","where_column"].includes(o)&&p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Operator",p.createElement("select",{required:!0,name:"operator",value:l,onChange:n,className:"form-control"},p.createElement("option",{value:"",disabled:!0}),p.createElement("option",{value:"="},"Equals"),p.createElement("option",{value:"!="},"Not Equals"),p.createElement("option",{value:"like"},"Like"),p.createElement("option",{value:">"},">"),p.createElement("option",{value:">="},">="),p.createElement("option",{value:"<"},"<"),p.createElement("option",{value:"<="},"<=")))),["where_between","where_in","where_column"].includes(o)&&p.createElement(p.Fragment,null,!a&&p.createElement("div",{className:"form-group form-group_checkbox form-group_width15"},p.createElement("label",{className:"label_checkbox"},p.createElement("input",{type:"checkbox",name:"or",className:"form-check-input",checked:c,onChange:n})," Or")),"where_column"!==o&&p.createElement("div",{className:"form-group form-group_checkbox form-group_width15"},p.createElement("label",{className:"label_checkbox"},p.createElement("input",{type:"checkbox",name:"not",className:"form-check-input",checked:u,onChange:n})," Not"))),"where_date"===o&&p.createElement("div",{className:"form-group form-group_width30"},p.createElement("label",null,"Type",p.createElement("select",{id:"type",required:!0,name:"type",value:d,onChange:n,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),Vo.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)})))))),["where","or_where"].includes(o)&&p.createElement("div",{className:"form-group"},p.createElement("label",null,"Value",p.createElement("input",{type:"text",required:!0,name:"value",value:s,onChange:n,className:"form-control"}))),["where_between"].includes(o)&&p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Value 1",p.createElement("input",{type:"text",required:!0,name:"value1",value:m[0]||"",onChange:n,className:"form-control"}))),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Value 2",p.createElement("input",{type:"text",required:!0,name:"value2",value:m[1]||"",onChange:n,className:"form-control"})))),"where_in"===o&&p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group"},p.createElement("label",null,"Values",p.createElement("textarea",{required:!0,name:"values",value:m.join(", "),onChange:n,className:"form-control"}))),p.createElement("p",null,"Comma Separated")),"where_date"===o&&p.createElement("div",{className:"row"},p.createElement("div",{className:"form-group col-6"},p.createElement("label",null,"Operator",p.createElement("select",{required:!0,name:"operator",value:l,onChange:n,className:"form-control"},p.createElement("option",{value:"",disabled:!0}),p.createElement("option",{value:"="},"Equals"),p.createElement("option",{value:"!="},"Not Equals"),p.createElement("option",{value:">"},">"),p.createElement("option",{value:">="},">="),p.createElement("option",{value:"<"},"<"),p.createElement("option",{value:"<="},"<=")))),p.createElement("div",{className:"form-group col-6 ".concat(["day","month"].includes(d)?"hide-blocks":"")},p.createElement("label",{className:"w-auto mb-0"},"Value"),p.createElement("label",{className:"label_checkbox float-right w-auto"},p.createElement("input",{type:"checkbox",className:"form-check-input",checked:b,onChange:this.dateValueFormatChange})," Set Variable"),b?p.createElement("input",{type:"text",required:!0,name:"value",value:s,onChange:n,className:"form-control"}):p.createElement(Bo(),{selected:Tn()(s,qo(d))._d,showTimeSelect:["datetime","time"].includes(d),showYearPicker:"year"===d,showTimeSelectOnly:"time"===d,showMonthYearPicker:"month"===d,dateFormat:zo(d),className:"form-control",onChange:function(e){return n({target:{value:Tn()(e).format(qo(d)),name:"value"}})}}))),"where_column"===o&&p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"First Field",p.createElement("select",{required:!0,name:"first_column",value:f,onChange:n,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),t.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)}))))),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Second Field",p.createElement("select",{required:!0,name:"second_column",value:h,onChange:n,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),t.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)})))))))}}]),r}(p.Component);var Lo=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props.item,t=e.type,n=e.column,a=this.props,r=a.columnsOptions,o=a.changeHandler;return p.createElement("div",{className:"form-segment form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Field",p.createElement("select",{required:!0,name:"column",value:n,onChange:o,className:"form-control"},p.createElement("option",{disabled:!0,value:""}),r.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:n},n)}))))),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",null,"Type",p.createElement("select",{required:!0,name:"type",value:t,onChange:o,className:"form-control"},p.createElement("option",{value:"asc"},"Asc"),p.createElement("option",{value:"desc"},"Desc")))))}}]),r}(p.Component);function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ko=function(e){(0,s.Z)(g,e);var t,n,m,f,b,v=(f=g,b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(f);if(b){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function g(e){var t;(0,o.Z)(this,g),(t=v.call(this,e)).changeGroupBy=function(e){var n=[];e&&e.forEach((function(e){n.push(e.value)})),t.setState((function(e){var t=_.cloneDeep(e);return t.value.group_by=n,t}))},t.changeColumns=function(e){var n=[];e&&e.forEach((function(e){n.push(e.value)})),t.setState((function(e){return Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{columns:n})})}))},t.changeRelations=function(e){var n=[];e&&e.forEach((function(e){n.push(e.value)})),t.setState((function(e){return Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{relations:n})})}))},t.changeRoles=function(e){var n=[];e&&e.forEach((function(e){n.push(e.value)})),t.setState((function(e){var t=_.cloneDeep(e);return t.value.access.roles=n,t}))},t.changePermission=function(e){var n=[];e&&e.forEach((function(e){n.push(e.value)})),t.setState((function(e){var t=_.cloneDeep(e);return t.value.access.permissions=n,t}))},t.valueChangeHandler=function(e){var n=e.target,r=n.value,o=n.name;t.setState((function(e){return Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},(0,a.Z)({},o,r))})}))},t.aggregateToggle=function(){t.setState((function(e){return{isAggregateRaw:!e.isAggregateRaw,value:Yo(Yo({},e.value),{},{aggregates:e.isAggregateRaw?[{type:"",column:"",alias:""}]:""})}}))},t.conditionAddHandler=function(){t.setState((function(e){var t=(0,zt.Z)(e.value.conditions);return t.push({condition_type:""}),Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{conditions:t})})}))},t.offsetDeleteHandler=function(){t.setState((function(e){var t=_.cloneDeep(e);return delete t.value.offset,t}))},t.limitDeleteHandler=function(){t.setState((function(e){var t=_.cloneDeep(e);return delete t.value.offset,delete t.value.limit,t}))},t.setRelations=function(e){var n=[];e.forEach((function(e){n.push(e.value)})),t.setState((function(e){return Yo(Yo({},e),{},{relations:n})}))},t.setColumns=function(e){var n=[];e.forEach((function(e){n.push(e.value)})),t.setState((function(e){return Yo(Yo({},e),{},{columns:n})}))};var n=t.props.match.params,r=n.modelId;return n.id,t.state={value:{title:"",name:"",columns:[],aggregates:[],joins:[],conditions:[],relations:[],order_by:[],access:{roles:[],permissions:[]},group_by:[]},relationsOptions:[],rolesOptions:[],permissionsOptions:[],tablesOptions:[],selfFields:[],selfFieldsOptions:[],isAggregateRaw:!1},t.counter=0,t.rolesOptions=new K.default({route:"/admin/ajax/role_options"}),t.permissionsOptions=new K.default({route:"/admin/ajax/permissions_options"}),t.tablesOptions=new K.default({route:"/admin/ajax/tables_options"}),t.selfFieldsResource=new K.default({route:"/admin/ajax/models/".concat(r,"/fields_only")}),t.relationsResource=new K.default({route:"/admin/ajax/models/".concat(r,"/relations")}),t.sqlResource=new K.default({route:"/admin/ajax/models/".concat(r,"/queries")}),t.submitHandler=t.submitHandler.bind((0,l.Z)(t)),t.multipleSelectChangeHandler=t.multipleSelectChangeHandler.bind((0,l.Z)(t)),t.aggregateChangeHandler=t.aggregateChangeHandler.bind((0,l.Z)(t)),t.aggregateAddHandler=t.aggregateAddHandler.bind((0,l.Z)(t)),t.aggregateDeleteHandler=t.aggregateDeleteHandler.bind((0,l.Z)(t)),t.joinChangeHandler=t.joinChangeHandler.bind((0,l.Z)(t)),t.joinAddHandler=t.joinAddHandler.bind((0,l.Z)(t)),t.joinDeleteHandler=t.joinDeleteHandler.bind((0,l.Z)(t)),t.conditionChangeHandler=t.conditionChangeHandler.bind((0,l.Z)(t)),t.orderByChangeHandler=t.orderByChangeHandler.bind((0,l.Z)(t)),t.orderByAddHandler=t.orderByAddHandler.bind((0,l.Z)(t)),t.orderByDeleteHandler=t.orderByDeleteHandler.bind((0,l.Z)(t)),t.titleChangeHandler=t.titleChangeHandler.bind((0,l.Z)(t)),t}return(0,i.Z)(g,[{key:"componentDidMount",value:(m=(0,r.Z)(d().mark((function e(){var t,n,a,r,o,i,l,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.match.params.id)){e.next=6;break}return e.next=4,this.sqlResource.get(t);case 4:n=e.sent,this.setState((function(e){return Yo(Yo({},e),{},{value:n})}));case 6:return e.next=8,this.rolesOptions.getAll();case 8:return a=e.sent,this.setState((function(e){return Yo(Yo({},e),{},{rolesOptions:a})})),e.next=12,this.permissionsOptions.getAll();case 12:return r=e.sent,this.setState((function(e){return Yo(Yo({},e),{},{permissionsOptions:r})})),e.next=16,this.tablesOptions.getAll();case 16:return o=e.sent,this.setState((function(e){return Yo(Yo({},e),{},{tablesOptions:o})})),e.next=20,this.selfFieldsResource.getAll();case 20:return i=e.sent,l=i.map((function(e){return{label:e.title,value:e.name}})),this.setState((function(e){return Yo(Yo({},e),{},{selfFields:i,selfFieldsOptions:l})})),e.next=25,this.relationsResource.getAll();case 25:s=e.sent,c=s.map((function(e){return{label:e.title,value:e.name}})),this.setState((function(e){return Yo(Yo({},e),{},{relationsOptions:c})}));case 28:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"addForeignFields",value:(n=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"titleChangeHandler",value:function(e){e.persist(),this.setState((function(t){return Yo(Yo({},t),{},{value:Yo(Yo({},t.value),{},{title:e.target.value,name:de(e.target.value)})})}))}},{key:"aggregateChangeHandler",value:function(e,t){var n=e.target,r=n.value,o=n.name;this.setState((function(e){var n=(0,zt.Z)(e.value.aggregates);return n[t]=Yo(Yo({},e.value.aggregates[t]),{},(0,a.Z)({},o,r)),Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{aggregates:n})})}))}},{key:"aggregateAddHandler",value:function(){this.setState((function(e){var t=(0,zt.Z)(e.value.aggregates);return t.push({type:"",column:"",alias:""}),Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{aggregates:t})})}))}},{key:"aggregateDeleteHandler",value:function(e){this.setState((function(t){var n=(0,zt.Z)(t.value.aggregates);return n.splice(e,1),Yo(Yo({},t),{},{value:Yo(Yo({},t.value),{},{aggregates:n})})}))}},{key:"joinChangeHandler",value:function(e,t){var n=e.target,r=n.value,o=n.name;this.setState((function(e){var n=(0,zt.Z)(e.value.joins);return n[t]=Yo(Yo({},e.value.joins[t]),{},(0,a.Z)({},o,r)),Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{joins:n})})}))}},{key:"joinAddHandler",value:function(){this.setState((function(e){var t=(0,zt.Z)(e.value.joins);return t.push({type:"",target_table:"",source_column:"",operator:"",target_column:""}),Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{joins:t})})}))}},{key:"joinDeleteHandler",value:function(e){this.setState((function(t){var n=(0,zt.Z)(t.value.joins);return n.splice(e,1),Yo(Yo({},t),{},{value:Yo(Yo({},t.value),{},{joins:n})})}))}},{key:"conditionChangeHandler",value:function(e,t){var n=e.target,r=n.value,o=n.name,i=n.checked;this.setState((function(e){var n,l=(0,zt.Z)(e.value.conditions);if("condition_type"===o)switch(r){case"where":case"or_where":n={condition_type:r,column:"",operator:"",value:""};break;case"where_between":case"where_in":n=0===t?{condition_type:r,not:!1,column:"",values:[]}:{condition_type:r,or:!1,not:!1,column:"",values:[]};break;case"where_date":n={condition_type:r,type:"year",column:"",value:"2020"};break;case"where_column":n=0===t?{condition_type:r,first_column:"",operator:"",second_column:""}:{condition_type:r,or:!1,first_column:"",operator:"",second_column:""};break;default:throw new Error("invalid condition type")}else switch(o){case"value1":n=Yo(Yo({},e.value.conditions[t]),{},{values:[r,e.value.conditions[t].values[1]]});break;case"value2":n=Yo(Yo({},e.value.conditions[t]),{},{values:[e.value.conditions[t].values[0],r]});break;case"values":n=Yo(Yo({},e.value.conditions[t]),{},(0,a.Z)({},o,r.split(",").map((function(e){return e.trim()}))));break;case"type":n=Yo(Yo({},e.value.conditions[t]),{},{type:r,value:Tn()(new Date).format(qo(r))});break;case"operator":"where_column"===(n=Yo(Yo({},e.value.conditions[t]),{},(0,a.Z)({},o,r))).condition_type?n.second_column=n.second_column||"":n.value=n.value||"";break;default:n=Yo(Yo({},e.value.conditions[t]),{},(0,a.Z)({},o,["or","not"].includes(o)?i:r))}return l[t]=n,Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{conditions:l})})}))}},{key:"conditionDeleteHandler",value:function(e){this.setState((function(t){var n=(0,zt.Z)(t.value.conditions);return n.splice(e,1),Yo(Yo({},t),{},{value:Yo(Yo({},t.value),{},{conditions:n})})}))}},{key:"orderByChangeHandler",value:function(e,t){var n=e.target,r=n.value,o=n.name;this.setState((function(e){var n=(0,zt.Z)(e.value.order_by);return n[t]=Yo(Yo({},e.value.order_by[t]),{},(0,a.Z)({},o,r)),Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{order_by:n})})}))}},{key:"orderByAddHandler",value:function(){this.setState((function(e){var t=(0,zt.Z)(e.value.order_by);return t.push({type:"asc",column:""}),Yo(Yo({},e),{},{value:Yo(Yo({},e.value),{},{order_by:t})})}))}},{key:"orderByDeleteHandler",value:function(e){this.setState((function(t){var n=(0,zt.Z)(t.value.order_by);return n.splice(e,1),Yo(Yo({},t),{},{value:Yo(Yo({},t.value),{},{order_by:n})})}))}},{key:"multipleSelectChangeHandler",value:function(e){var t=e.target,n=t.value,r=t.name;this.setState((function(e){var t=(0,zt.Z)(e[r]);if(t.includes(n)){var o=t.indexOf(n);t.splice(o,1)}else t.push(n);return Yo(Yo({},e),{},(0,a.Z)({},r,t))}))}},{key:"submitHandler",value:(t=(0,r.Z)(d().mark((function e(t){var n,a,r,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.match.params,a=n.modelId,r=n.id,t.preventDefault(),e.next=4,fetch("/admin/ajax/models/".concat(a,"/sql_builder_name_is_free?name=").concat(this.state.value.name)).then((function(e){return e.json()})).then((function(e){return!e.taken}));case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",alert("Name ".concat(this.state.value.name," is already taken. Use another one.")));case 7:(r?this.sqlResource.put(r,this.state.value):this.sqlResource.post(this.state.value)).then((function(){return o.props.history.push("/admin/tables/models/edit/".concat(a))}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state.value,n=t.title,a=t.name,r=t.relations,o=t.columns,i=t.aggregates,l=t.joins,s=t.conditions,c=t.order_by,u=t.group_by,m=t.offset,d=t.limit,f=this.state.value.access,b=f.roles,v=f.permissions,g=this.state,y=g.selfFieldsOptions,E=g.permissionsOptions,x=g.relationsOptions,w=g.rolesOptions,k=g.tablesOptions,N=g.isAggregateRaw;return this.props.match.params.modelId,p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"row"},p.createElement("div",{className:"form-group  col-6"},p.createElement("label",{htmlFor:"title"},"Title"),p.createElement("input",{type:"text",id:"title",required:!0,name:"title",value:n,onChange:this.titleChangeHandler,className:"form-control"})),p.createElement("div",{className:"form-group col-6 "},p.createElement("label",{htmlFor:"name"},"Name"),p.createElement("input",{type:"text",id:"name",required:!0,name:"name",value:a,onChange:this.valueChangeHandler,className:"form-control"})),p.createElement("div",{className:"form-group col-6"},p.createElement("label",{htmlFor:"relations"},"With"),p.createElement(ht,{closeMenuOnSelect:!1,onChange:this.changeRelations,value:_.filter(x,(function(e){return r.indexOf(e.value)>=0})),options:x,isMulti:!0})),p.createElement("div",{className:"form-group col-6"},p.createElement("label",{htmlFor:"columns"},"Fields"),p.createElement(ht,{closeMenuOnSelect:!1,onChange:this.changeColumns,value:_.filter(y,(function(e){return o.indexOf(e.value)>=0})),options:y,isMulti:!0}))),p.createElement("h2",{className:"admin-form__subheader centred"},"Access"),p.createElement("div",{className:"form-group__inline-wrapper"},p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"roles"},"Roles"),p.createElement(ht,{id:"roles",closeMenuOnSelect:!1,value:_.filter(w,(function(e){return b.indexOf(e.value)>=0})),isMulti:!0,onChange:this.changeRoles,options:w})),p.createElement("div",{className:"form-group form-group_width47"},p.createElement("label",{htmlFor:"permissions"},"Permissions"),p.createElement(ht,{id:"roles",value:_.filter(E,(function(e){return v.indexOf(e.value)>=0})),closeMenuOnSelect:!1,isMulti:!0,onChange:this.changePermission,options:E}))),p.createElement("h2",{className:"admin-form__subheader centred"},"Joins"),l.map((function(t,n){return p.createElement(p.Fragment,{key:n},0!==n&&p.createElement("hr",null),p.createElement("div",{className:"text-right"},p.createElement("button",{className:"btn btn_failure",type:"button",onClick:function(){return e.joinDeleteHandler(n)}},"✖")),p.createElement(To,{item:t,tablesOptions:k,sourceColumnOptions:y,changeHandler:function(t){return e.joinChangeHandler(t,n)}}))})),p.createElement("div",{className:"centred"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:this.joinAddHandler},"+ New Join")),p.createElement("h2",{className:"admin-form__subheader centred"},"Aggregates"),(!!i.length||N)&&p.createElement("div",{className:"text-center"},p.createElement("button",{className:"btn ".concat(N?"btn_success":""),type:"button",onClick:this.aggregateToggle},"Aggregate Raw")),N?p.createElement("div",{className:"form-group"},p.createElement("input",{type:"text",id:"aggregates",required:!0,name:"aggregates",value:i,onChange:this.valueChangeHandler,className:"form-control"})):i.map((function(t,n){return p.createElement(p.Fragment,{key:n},0!==n&&p.createElement("hr",null),p.createElement("div",{className:"text-right"},p.createElement("button",{className:"btn btn_failure",type:"button",onClick:function(){return e.aggregateDeleteHandler(n)}},"✖")),p.createElement(Fo,{item:t,columnsOptions:y,changeHandler:function(t){return e.aggregateChangeHandler(t,n)}}))})),!N&&p.createElement("div",{className:"centred"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:this.aggregateAddHandler},"+ New Aggregate")),p.createElement("h2",{className:"admin-form__subheader centred"},"Conditions"),s.map((function(t,n){return p.createElement(p.Fragment,{key:n},p.createElement("div",{className:"text-right"},p.createElement("button",{className:"btn btn_failure",type:"button",onClick:function(){return e.conditionDeleteHandler(n)}},"✖")),0!==n&&p.createElement("hr",null),p.createElement(Uo,{item:t,isFirst:0===n,columnsOptions:y,changeHandler:function(t){return e.conditionChangeHandler(t,n)}}))})),p.createElement("div",{className:"centred"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:this.conditionAddHandler},"+ New Condition")),p.createElement("h2",{className:"admin-form__subheader centred"},"Order By"),c.map((function(t,n){return p.createElement(p.Fragment,{key:n},0!==n&&p.createElement("hr",null),p.createElement("div",{className:"text-right"},p.createElement("button",{className:"btn btn_failure",type:"button",onClick:function(){return e.orderByDeleteHandler(n)}},"✖")),p.createElement(Lo,{item:t,columnsOptions:y,changeHandler:function(t){return e.orderByChangeHandler(t,n)}}))})),p.createElement("div",{className:"centred"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:this.orderByAddHandler},"+ New Order")),p.createElement("h2",{className:"admin-form__subheader centred"},"Group By"),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"group_by"},"Fields"),p.createElement(ht,{id:"group_by",closeMenuOnSelect:!1,onChange:this.changeGroupBy,value:_.filter(y,(function(e){return u.indexOf(e.value)>=0})),options:y,isMulti:!0})),p.createElement("h2",{className:"admin-form__subheader centred"},"Pagination Settings"),p.createElement("div",{className:"centred"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:function(){return e.setState({value:Yo(Yo({},e.state.value),{},{limit:"REQUEST:pageSize"})})}},"Add Limit")),d&&p.createElement("div",{className:"centred mt-3"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:function(){return e.setState({value:Yo(Yo({},e.state.value),{},{offset:"REQUEST:pageSize * (REQUEST:page - 1)"})})}},"Add Offset")),p.createElement("div",{className:"row"},m&&p.createElement("div",{className:"form-group  col-6"},p.createElement("div",{className:"text-right"},p.createElement("button",{className:"btn btn_failure",type:"button",onClick:this.offsetDeleteHandler},"✖")),p.createElement("label",{htmlFor:"offset"},"Offset"),p.createElement("input",{type:"text",id:"offset",required:!0,name:"offset",value:m,onChange:this.valueChangeHandler,className:"form-control"})),d&&p.createElement("div",{className:"form-group col-6 "},p.createElement("div",{className:"text-right"},p.createElement("button",{className:"btn btn_failure",type:"button",onClick:this.limitDeleteHandler},"✖")),p.createElement("label",{htmlFor:"limit"},"Limit"),p.createElement("input",{type:"text",id:"limit",required:!0,name:"limit",value:d,onChange:this.valueChangeHandler,className:"form-control"}))),p.createElement("div",{className:"btn__wrapper btn_add centred"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Save"),p.createElement(h.rU,{className:"btn",to:"/admin/tables/models"},"Cancel")))}}]),g}(p.Component),Go=(0,b.EN)(Ko);var Jo=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){return p.createElement("div",{className:"admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"SQL"))),p.createElement("div",{className:"admin-content"},p.createElement(Go,null)))}}]),r}(p.Component),Qo=(0,b.EN)(Jo);function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ei=function(e){(0,s.Z)(f,e);var t,n,l,m=(n=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(l){var a=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(){var e;(0,o.Z)(this,f);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=m.call.apply(m,[this].concat(n))).state=Xo({name:"",column_name:"",remote_find_column:"",remote_need_column:"",as_object:!0,single_source_id:"",list_source_id:"",enabled:!0,dataSourceOptions:[]},e.props.field),e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.submitHandler=function(){var t=(0,r.Z)(d().mark((function t(n){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.props.match.params.id,!e.props.field){t.next=7;break}return t.next=5,e.props.remoteFieldsResource.put(e.props.field.id,Xo(Xo({},e.state),{},{model_id:a}));case 5:t.next=9;break;case 7:return t.next=9,e.props.remoteFieldsResource.post(Xo(Xo({},e.state),{},{model_id:a}));case 9:e.props.updateRemoteFields();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,i.Z)(f,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new K.default({route:"/admin/ajax/data_source_options"}),e.next=3,t.getAll();case 3:n=e.sent,a=n.options,this.setState({dataSourceOptions:a});case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.column_name,r=t.remote_find_column,o=t.remote_need_column,i=t.as_object,l=t.single_source_id,s=t.list_source_id,c=t.enabled,u=t.dataSourceOptions;return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"name"},"Name"),p.createElement("input",{type:"text",id:"name",required:!0,name:"name",value:n,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"column_name"},"Column Name"),p.createElement("input",{type:"text",id:"column_name",required:!0,name:"column_name",value:a,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"remote_find_column"},"Remote Find Column"),p.createElement("input",{type:"text",id:"remote_find_column",required:!0,name:"remote_find_column",value:r,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"remote_need_column"},"Remote Need Column"),p.createElement("input",{type:"text",id:"remote_need_column",required:!0,name:"remote_need_column",value:o,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"as_object",checked:i,onChange:function(t){return e.setState({as_object:t.target.checked})}}),p.createElement("label",{className:"checkbox-label",htmlFor:"as_object"},"As Object")),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"single_source_id"},"Single Source"),p.createElement(ht,{required:!0,options:u,onChange:function(t){var n=t.value;e.setState((function(e){return Xo(Xo({},e),{},{single_source_id:n})}))},value:u.find((function(e){return e.value===l}))})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"list_source_id"},"List Source"),p.createElement(ht,{required:!0,options:u,onChange:function(t){var n=t.value;e.setState((function(e){return Xo(Xo({},e),{},{list_source_id:n})}))},value:u.find((function(e){return e.value===s}))})),p.createElement("div",{className:"form-group"},p.createElement("input",{type:"checkbox",id:"enabled",checked:c,onChange:function(t){return e.setState({enabled:t.target.checked})}}),p.createElement("label",{className:"checkbox-label",htmlFor:"enabled"},"Enabled")),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Submit")))}}]),f}(p.Component),ti=(0,b.EN)(ei);function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oi=[{name:"name",title:"Name"},{name:"remote_find_column",title:"Remote Find Column"},{name:"remote_need_column",title:"Remote Need Column"}],ii=function(e){(0,s.Z)(f,e);var t,n,a,m=(n=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t;(0,o.Z)(this,f),(t=m.call(this,e)).aceEditorObserver=function(){var e=Ee.default.getState();t.setState((function(t){return ri(ri({},t),{},{AceEditor:e.aceEditorReducer.AceEditor})}))},t.updateRemoteFields=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.remoteFieldsResource.getAll();case 2:n=e.sent,t.setState((function(e){return ri(ri({},e),{},{remoteFields:n,isFieldRemoteModalOpened:!1,editingRemoteField:null})}));case 4:case"end":return e.stop()}}),e)}))),t.onSubmit=function(){var e=(0,r.Z)(d().mark((function e(n){var a,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props.match.params.id,n.preventDefault(),t.state.value.sql){e.next=4;break}return e.abrupt("return",alert("Заполните SQL Query"));case 4:if(!a){e.next=10;break}return e.next=7,t.sqlEditorResource.put(a,t.state.value);case 7:r=e.sent,e.next=13;break;case 10:return e.next=12,t.sqlEditorResource.post(t.state.value);case 12:r=e.sent;case 13:r.success?t.props.history.push("/admin/tables/sql_editors"):alert(r.message);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onTest=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state.testParams.sql=t.state.value.sql,e.next=3,t.sqlEditorTest.post(t.state.testParams);case 3:(n=e.sent).success&&(n=JSON.stringify(n.success)),n.error&&(n=JSON.stringify(n.error)),t.setState((function(e){return ri(ri({},e),{},{testResponse:n})}));case 7:case"end":return e.stop()}}),e)})));var n=Ee.default.getState();return t.state={modelTitle:"Model Title",value:{paged:!1,is_object:!1,auth:!1},modelsOptions:[],AceEditor:n.aceEditorReducer.AceEditor,AceEditorResponse:n.aceEditorReducer.AceEditor,remoteFields:[],editingRemoteField:null,isFieldRemoteModalOpened:!1,testResponse:"",testParams:{}},t.sqlEditorResource=new K.default({route:"/admin/ajax/sql_editors"}),t.sqlEditorTest=new K.default({route:"/admin/ajax/sql_editors/test"}),t.modelsResource=new K.default({route:"/admin/ajax/model_options"}),t.remoteFieldsResource=new K.default({route:"/admin/ajax/remote_data/sql_editor/".concat(t.props.match.params.id)}),t.onTest=t.onTest.bind((0,l.Z)(t)),Ee.default.subscribe(t.aceEditorObserver),t}return(0,i.Z)(f,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a,r,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.match.params.id)){e.next=8;break}return this.remoteFieldsResource.getAll().then((function(e){return o.setState({remoteFields:e})})),e.next=5,this.sqlEditorResource.get(t);case 5:n=e.sent,this.editor=null,this.setState((function(e){return ri(ri({},e),{},{value:n})}));case 8:return e.next=10,this.modelsResource.getAll();case 10:a=e.sent,r=(r=a.options).filter((function(e){return"User"!==e.label})),this.setState({modelsOptions:r});case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"changeValue",value:function(e,t){this.setState((function(n){if((n=ri({},n)).value[t]="name"===t?de(e):e,"title"===t&&(n.value.name=de(e)),"test"===t){n.value.test=e;var a={},r=e.split("&");if(r.length>0){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}(r);try{for(i.s();!(o=i.n()).done;){var l=o.value.split("=");l[0]&&(a[l[0]]=l[1])}}catch(e){i.e(e)}finally{i.f()}}n.testParams=a,n.testParams.sql=n.value.sql}return n}))}},{key:"render",value:function(){var e=this,t=this.props.match.params.id,n=this.state,a=n.isFieldRemoteModalOpened,r=n.remoteFields,o=n.editingRemoteField;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/sql_editors"},"All  SQL Editors"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Add SQL Query"))),p.createElement("div",{className:"admin-content"},p.createElement("form",{className:"admin-form field-form",onSubmit:this.onSubmit},p.createElement("div",{className:"row"},p.createElement("div",{className:"form-group col-6"},p.createElement("label",{htmlFor:"field-title"},"Title"),p.createElement("input",{type:"text",id:"field-title",required:!0,value:this.state.value.title||"",onChange:function(t){e.changeValue(t.target.value,"title")},className:"form-control"})),p.createElement("div",{className:"form-group col-6"},p.createElement("label",{htmlFor:"field-name"},"Name"),p.createElement("input",{type:"text",id:"field-name",required:!0,readOnly:t,value:this.state.value.name||"",onChange:function(t){e.changeValue(t.target.value,"name")},className:"form-control"})),p.createElement("div",{className:"form-group col-12"},p.createElement("label",{htmlFor:"field-name"},"Description"),p.createElement("input",{type:"text",id:"field-description",value:this.state.value.description||"",onChange:function(t){e.changeValue(t.target.value,"description")},className:"form-control"})),p.createElement("div",{className:"form-group col-12"},p.createElement("label",{htmlFor:"relation-model_id"},"Model"),p.createElement("select",{id:"relation-model_id",required:!0,disabled:t,value:this.state.value.model_id||"",onChange:function(t){e.changeValue(t.target.value,"model_id")},className:"form-control"},p.createElement("option",{disabled:!0,value:""}),this.state.modelsOptions.map((function(e){var t=e.value,n=e.label;return p.createElement("option",{key:t,value:t},n)})))),p.createElement("div",{className:"form-group col-12"},p.createElement("input",{type:"checkbox",id:"field-auth",checked:this.state.value.auth,value:this.state.value.auth,onChange:function(t){e.changeValue(t.target.checked,"auth")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-auth"},"Auth")),p.createElement("div",{className:"form-group col-12"},p.createElement("input",{type:"checkbox",id:"field-is_object",checked:this.state.value.is_object,value:this.state.value.is_object,onChange:function(t){e.changeValue(t.target.checked,"is_object")}}),p.createElement("label",{className:"checkbox-label",htmlFor:"field-is_object"},"As Object")),this.state.value.auth?p.createElement(p.Fragment,null,p.createElement("div",{className:"form-group col-4"},p.createElement("label",{htmlFor:"field-roles"},"Roles"),p.createElement(ht,{id:"field-roles",isMulti:!0,optionsRoute:"/admin/ajax/role_options",placeholder:"All",defaultOptions:[{value:null,label:"All"}],value:this.state.value.roles,onChange:function(t){e.changeValue(t,"roles")}})),p.createElement("div",{className:"form-group col-4"},p.createElement("label",{htmlFor:"field-permissions"},"Permissions"),p.createElement(ht,{id:"field-permissions",isMulti:!0,optionsRoute:"/admin/ajax/permissions_options",placeholder:"All",defaultOptions:[{value:null,label:"All"}],value:this.state.value.permissions,onChange:function(t){e.changeValue(t,"permissions")}}))):"",p.createElement("div",{className:"form-group col-12"},p.createElement("label",{htmlFor:"field-name"},"SQL Query"),this.state.AceEditor&&(this.editor=this.editor||p.createElement(this.state.AceEditor,{mode:"sql",theme:"textmate",onChange:function(t){e.changeValue(t,"sql")},className:"field-ace",name:"aceEditor",height:"15em",setOptions:{value:this.state.value.sql||""},showPrintMargin:!1,style:{width:"100%"},enableLiveAutocompletion:!0}))),p.createElement("div",{className:"row col-12"},p.createElement("div",{className:"form-group col-11"},p.createElement("input",{type:"text",id:"field-test",value:this.state.value.test||"",placeholder:"Parametr for test (task_id=3&id=1)",onChange:function(t){e.changeValue(t.target.value,"test")},className:"form-control"})),p.createElement("div",{className:"form-group col-1"},p.createElement("button",{className:"btn btn_success",type:"button",onClick:this.onTest},"Test"))),p.createElement("div",{className:"form-group col-12"},p.createElement("label",{htmlFor:"field-name"},"Test Result"),p.createElement(this.state.AceEditorResponse,{mode:"javascript",theme:"textmate",onChange:function(e){},className:"field-ace",name:"aceEditorResponse",height:"15em",wrapEnabled:!0,value:this.state.testResponse||"",showPrintMargin:!1,style:{width:"100%"},enableLiveAutocompletion:!1}))),p.createElement("div",{className:"btn__wrapper btn_add"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Add"),p.createElement(h.rU,{className:"btn",to:"/admin/tables/sql_editors"},"Cancel"))),t&&p.createElement(p.Fragment,null,p.createElement("h2",{className:"sub-header"},"Remote Fields"),p.createElement(X,{columns:oi,quickActions:[{callBack:function(t){return e.setState({isFieldRemoteModalOpened:!0,editingRemoteField:t})},title:"Edit"},{tag:"button",route:"/admin/ajax/remote_data/:id",method:"delete",confirm:"Are You Sure?",after:function(){return e.updateRemoteFields()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:r}),p.createElement("button",{onClick:function(){return e.setState({isFieldRemoteModalOpened:!0,editingRemoteField:null})},className:"btn btn_add"},"Add Remote Field"))),a&&p.createElement(La,{closeHandler:function(){return e.setState({isFieldRemoteModalOpened:!1,editingRemoteField:null})}},p.createElement(ti,{remoteFieldsResource:this.remoteFieldsResource,updateRemoteFields:this.updateRemoteFields,field:o})))}}]),f}(p.Component),li=(0,b.EN)(ii);function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ui=[{name:"name",title:"Name",url:!0,editUrl:!0,tag:"Link"},{name:"display_name",title:"Display Name"},{name:"description",title:"Description"}],mi=new K.default({route:"/admin/ajax/roles"}),di=new K.default({route:"/admin/ajax/permissions"}),pi={pageCount:1,currentPage:1,count:0},fi=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(){var e;(0,o.Z)(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={roles:[],rolesPagination:pi,rolesFilter:"",rolesSorting:{},permissions:[],permissionsPagination:pi,permissionsFilter:"",permissionsSorting:{}},e.getRoles=(0,r.Z)(d().mark((function t(){var n,a,r,o,i,l,s,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.rolesPagination,r=n.rolesFilter,o=n.rolesSorting,t.next=3,mi.getQueried(ci({page:a.currentPage,pageSize:20,preset:!1,s:r},o));case 3:i=t.sent,l=i.roles,s=i.count,c=i.pageCount,e.setState({roles:l,rolesPagination:ci(ci({},a),{},{count:s,pageCount:c||1})});case 8:case"end":return t.stop()}}),t)}))),e.rolesSortingHandler=function(t,n){e.setState({rolesSorting:{order_by:t,order:n}},e.getRoles)},e.getPermissions=(0,r.Z)(d().mark((function t(){var n,a,r,o,i,l,s,c;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.permissionsPagination,r=n.permissionsFilter,o=n.permissionsSorting,t.next=3,di.getQueried(ci({page:a.currentPage,pageSize:20,preset:!1,s:r},o));case 3:i=t.sent,l=i.permissions,s=i.count,c=i.pageCount,e.setState({permissions:l,permissionsPagination:ci(ci({},a),{},{count:s,pageCount:c||1})});case 8:case"end":return t.stop()}}),t)}))),e.permissionsSortingHandler=function(t,n){e.setState({permissionsSorting:{order_by:t,order:n}},e.getPermissions)},e.searchRoles=function(t){t.preventDefault(),e.getRoles()},e.searchPermissions=function(t){t.preventDefault(),e.getPermissions()},e}return(0,i.Z)(l,[{key:"componentDidMount",value:function(){this.getRoles(),this.getPermissions()}},{key:"render",value:function(){var e=this,t=this.state,n=t.roles,a=t.rolesPagination,r=t.rolesFilter,o=t.rolesSorting,i=t.permissions,l=t.permissionsPagination,s=t.permissionsFilter,c=t.permissionsSorting,u="/admin/access/roles"===this.props.location.pathname?0:1;return p.createElement("div",{className:"admin-settings admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Access"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},0===u?"All Roles":"All Permissions")),p.createElement(h.rU,{className:"btn",to:"/admin/access/".concat(0===u?"roles":"permissions","/add")},"Add New")),p.createElement("div",{className:"admin-content"},p.createElement(_e.mQ,{selectedIndex:u,onSelect:function(){}},p.createElement(_e.td,{className:"nav nav-pills admin-pills"},p.createElement(h.rU,{to:"/admin/access/roles"},p.createElement(_e.OK,null,"Roles")),p.createElement(h.rU,{to:"/admin/access/permissions"},p.createElement(_e.OK,null,"Permissions"))),p.createElement(_e.x4,null,p.createElement("form",{className:"admin-panel py-2",onSubmit:this.searchRoles},p.createElement("input",{className:"input-sm mr-2",value:r,onChange:function(t){return e.setState({rolesFilter:t.target.value})}}),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Search")),p.createElement(X,{columns:ui,quickActions:[{tag:"Link",props:{href:"/admin/access/roles/edit/:id"},title:"Edit"},{tag:"button",route:"/admin/ajax/roles/:id",method:"delete",confirm:"Are You Sure?",after:function(){return e.getRoles()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:n.map((function(e){return ci(ci({},e),{},{editUrl:"/admin/access/roles/edit/"+e.id})})),sortingHandler:this.rolesSortingHandler,sortingField:o.order_by}),p.createElement(ne,{pageCount:a.pageCount,currentPage:a.currentPage,changePage:function(t){return e.setState({rolesPagination:ci(ci({},a),{},{currentPage:t})},e.getRoles)},itemsCount:a.count})),p.createElement(_e.x4,null,p.createElement("form",{className:"admin-panel py-2",onSubmit:this.searchPermissions},p.createElement("input",{className:"input-sm mr-2",value:s,onChange:function(t){return e.setState({permissionsFilter:t.target.value})}}),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Search")),p.createElement(X,{columns:ui,quickActions:[{tag:"Link",props:{href:"/admin/access/permissions/edit/:id"},title:"Edit"},{tag:"button",route:"/admin/ajax/permissions/:id",method:"delete",confirm:"Are You Sure?",after:function(){return e.getPermissions()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:i.map((function(e){return ci(ci({},e),{},{editUrl:"/admin/access/permissions/edit/"+e.id})})),sortingHandler:this.permissionsSortingHandler,sortingField:c.order_by}),p.createElement(ne,{pageCount:l.pageCount,currentPage:l.currentPage,changePage:function(t){return e.setState({permissionsPagination:ci(ci({},l),{},{currentPage:t})},e.getPermissions)},itemsCount:l.count})))))}}]),l}(p.Component),hi=(0,b.EN)(fi);var bi=new K.default({route:"/admin/ajax/roles"}),vi=function(e){(0,s.Z)(f,e);var t,n,l,m=(n=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(l){var a=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(){var e;(0,o.Z)(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=m.call.apply(m,[this].concat(n))).state={name:"",display_name:"",description:""},e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.deleteHandler=function(){var t=e.props.match.params.id;bi.delete(t).then((function(){return e.props.history.push("/admin/access/roles")}))},e.submitHandler=function(t){var n=e.props.match.params.id;t.preventDefault(),(n?bi.put(n,e.state):bi.post(e.state)).then((function(){return e.props.history.push("/admin/access/roles")}))},e}return(0,i.Z)(f,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.match.params.id)){e.next=9;break}return e.next=4,bi.get(t);case 4:n=e.sent,a=n.name,r=n.display_name,o=n.description,this.setState({name:a,display_name:r,description:o});case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name,n=e.display_name,a=e.description,r=Boolean(this.props.match.params.id);return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"name"},"Name"),p.createElement("input",{type:"text",id:"name",required:!0,name:"name",value:t,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"display_name"},"Display Name"),p.createElement("input",{type:"text",id:"display_name",name:"display_name",value:n,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"description"},"Description"),p.createElement("input",{type:"text",id:"description",name:"description",value:a,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Add"),p.createElement(h.rU,{to:"/admin/access/roles"},p.createElement("button",{className:"btn"},"Cancel")),r&&p.createElement("button",{className:"btn btn_failure",type:"button",onClick:this.deleteHandler},"Delete")))}}]),f}(p.Component),gi=(0,b.EN)(vi);var _i=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=Boolean(this.props.match.params.id);return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/access"},"Access / All Roles"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},e?"Edit Role":"Add New Role"))),p.createElement("div",{className:"admin-content"},p.createElement(gi,null)))}}]),r}(p.Component),yi=(0,b.EN)(_i);var Ei=new K.default({route:"/admin/ajax/permissions"}),xi=function(e){(0,s.Z)(f,e);var t,n,l,m=(n=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(l){var a=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(){var e;(0,o.Z)(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=m.call.apply(m,[this].concat(n))).state={name:"",display_name:"",description:""},e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.deleteHandler=function(){var t=e.props.match.params.id;Ei.delete(t).then((function(){return e.props.history.push("/admin/access/permissions")}))},e.submitHandler=function(t){var n=e.props.match.params.id;t.preventDefault(),(n?Ei.put(n,e.state):Ei.post(e.state)).then((function(){return e.props.history.push("/admin/access/permissions")}))},e}return(0,i.Z)(f,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.match.params.id)){e.next=9;break}return e.next=4,Ei.get(t);case 4:n=e.sent,a=n.name,r=n.display_name,o=n.description,this.setState({name:a,display_name:r,description:o});case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.state,t=e.name,n=e.display_name,a=e.description,r=Boolean(this.props.match.params.id);return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"name"},"Name"),p.createElement("input",{type:"text",id:"name",required:!0,name:"name",value:t,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"display_name"},"Display Name"),p.createElement("input",{type:"text",id:"display_name",name:"display_name",value:n,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"description"},"Description"),p.createElement("input",{type:"text",id:"description",required:!0,name:"description",value:a,onChange:this.changeHandler,className:"form-control"})),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Add"),p.createElement(h.rU,{to:"/admin/access/permissions"},p.createElement("button",{className:"btn"},"Cancel")),r&&p.createElement("button",{className:"btn btn_failure",type:"button",onClick:this.deleteHandler},"Delete")))}}]),f}(p.Component),wi=(0,b.EN)(xi);var ki=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=Boolean(this.props.match.params.id);return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/access"},"Access / All Permissions"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},e?"Edit Permission":"Add New Permission"))),p.createElement("div",{className:"admin-content"},p.createElement(wi,null)))}}]),r}(p.Component),Ni=(0,b.EN)(ki);function Oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ci=function(e){(0,s.Z)(h,e);var t,n,a,m,f=(a=h,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(m){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function h(e){var t;return(0,o.Z)(this,h),(t=f.call(this,e)).state={value:{},errors:[],redirectAfterSave:!1},t.resource=new K.default({route:"/admin/ajax/tables"}),t.saveTable=t.saveTable.bind((0,l.Z)(t)),t}return(0,i.Z)(h,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.id)){e.next=6;break}return e.next=4,this.resource.get(t);case 4:n=e.sent,this.setState((function(e){return Si(Si({},e),{},{value:n,id:t})}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"saveTable",value:(t=(0,r.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.state.id){e.next=7;break}return e.next=4,this.resource.put(this.state.id,this.state.value);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,this.resource.post(this.state.value);case 9:n=e.sent;case 10:n?this.setState((function(e){return Si(Si({},e),{},{redirectAfterSave:!0})})):this.setState((function(e){return Si(Si({},e),{},{value:{}})}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"changeValue",value:function(e,t){this.setState((function(n){return(n=Si({},n)).value[t]=e,n}))}},{key:"render",value:function(){var e=this;return this.state.redirectAfterSave?p.createElement(b.l_,{to:this.props.redirect_url}):p.createElement("form",{className:"admin-form",onSubmit:this.saveTable},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-name"},"Name"),p.createElement("input",{type:"text",id:"page-name",required:1,value:this.state.value.name||"",onChange:function(t){e.changeValue(t.target.value,"name")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-title"},"Title"),p.createElement("input",{type:"text",id:"page-title",required:1,value:this.state.value.title||"",onChange:function(t){e.changeValue(t.target.value,"title")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"page-description"},"Description"),p.createElement("input",{type:"text",id:"page-description",required:1,value:this.state.value.description||"",onChange:function(t){e.changeValue(t.target.value,"description")},className:"form-control"})),p.createElement("button",{className:"btn btn_success"},this.state.id?"Save":"Add"))}}]),h}(p.Component);var Zi=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).state={redirect_url:"/admin/tables"},t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params.id,this.setState((function(e){return{table_id:t}}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables"},"Tables"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Add New Table"))),p.createElement("div",{className:"admin-content"},p.createElement(Ci,{id:this.state.table_id,redirect_url:this.state.redirect_url})))}}]),m}(p.Component),ji=(0,b.EN)(Zi);var Ri=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).state={redirect_url:"/admin/tables",table_id:t.props.match.params.id,setting_url:"/admin/tables/edit/"+t.props.match.params.id+"/setting"},t.resource=new K.default({route:"/admin/ajax/tables"}),t}return(0,i.Z)(r,[{key:"render",value:function(){return this.state.redirectAfterSave?p.createElement(b.l_,{to:"/admin/tables"}):p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables"},"Tables"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Edit Table"))),p.createElement("div",{className:"admin-content"},p.createElement(Ci,{id:this.state.table_id,redirect_url:this.state.redirect_url}),p.createElement("div",null,p.createElement(h.rU,{to:this.state.setting_url},"Settings"))))}}]),r}(p.Component),Pi=(0,b.EN)(Ri),Ai=n(7145),Di=n.n(Ai);function Fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ti=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).state={table_id:t.props.match.params.id,migrations:[],table:{},table_columns:[{name:"name",title:"Name"},{name:"status",title:"Status"},{name:"created_at",title:"Created At"}]},t.migrations_resource=new K.default({route:"/admin/ajax/tables/"+t.props.match.params.id+"/migrations"}),t.table_resource=new K.default({route:"/admin/ajax/tables"}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.migrations_resource.getAll();case 2:return t=e.sent,this.setState((function(e){return Mi(Mi({},e),{},{migrations:t})})),e.next=6,this.table_resource.get(this.state.table_id);case 6:n=e.sent,this.setState((function(e){return Mi(Mi({},e),{},{table:n})}));case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return p.createElement("div",null,p.createElement(X,{columns:this.state.table_columns,rows:this.state.migrations}))}}]),m}(p.Component),Hi=(0,b.EN)(Ti);function Bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qi=function(e){(0,s.Z)(b,e);var t,n,m,f,h=(m=b,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(m);if(f){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(e){var t;(0,o.Z)(this,b),(t=h.call(this,e)).relationship_types=[{id:"hasMany",name:"hasMany"},{id:"hasOne",name:"hasOne"},{id:"belongsTo",name:"belongsTo"},{id:"belongsToMany",name:"belongsToMany"},{id:"hasOneThrough",name:"hasOneThrough"},{id:"hasManyThrough",name:"hasManyThrough"},{id:"morphTo",name:"morphTo"},{id:"morphOne",name:"morphOne"},{id:"morphMany",name:"morphMany"},{id:"morphToMany",name:"morphToMany"},{id:"morphedByMany",name:"morphedByMany"}],t.table_columns=[{name:"id",title:"ID"},{name:"name",title:"Name"},{name:"type",title:"Type"},{name:"model_class",title:"Model Class"},{name:"foreign_key",title:"Foreign Key"},{name:"local_key",title:"Local Key"},{name:"edit",title:"Edit",is_button:!0,button:{class:"",function:t.addModalShow.bind((0,l.Z)(t)),title:"Edit"}},{name:"delete",title:"Delete",is_button:!0,button:{class:"",function:t.onDeleteClick.bind((0,l.Z)(t)),title:"Delete"}}];var n={id:"",name:"",title:"",type:"hasMany",model_class:"",foreign_key:"",local_key:""};t.accessors_table_columns=[{name:"id",title:"ID"},{name:"name",title:"Name"},{name:"formula",title:"Formula"},{name:"status",title:"Status"},{name:"edit",title:"Edit",is_button:!0,button:{class:"",function:t.addAccessorModalShow.bind((0,l.Z)(t)),title:"Edit"}},{name:"delete",title:"Delete",is_button:!0,button:{class:"",function:t.onDeleteAccessorClick.bind((0,l.Z)(t)),title:"Delete"}}];var a={id:"",name:"",formula:"",description:""};return t.state={modal_toogle:!1,table_id:t.props.match.params.id,table:{},actual_columns:[],fillable_columns:[],user_cols:[],data:{description:"",fillable_cols:[],user_cols:[],table_id:t.props.match.params.id,path:"",name:"",relationships:[],pk:"",time_stamps:!1,soft_deletes:!1},accessors:[],default_relationship:n,selected_relationship:null,relationship:n,default_accessor:a,selected_accessor:null,accessor:a},t.resource=new K.default({route:"/admin/ajax/tables"}),t.model_resource=new K.default({route:"/admin/ajax/tables/"+t.props.match.params.id+"/model"}),t.save_model_resource=new K.default({route:"/admin/ajax/tables/"+t.props.match.params.id+"/models"}),t.accessors_resource=!1,t.addFillableColumn=t.addFillableColumn.bind((0,l.Z)(t)),t.deleteFillableColumn=t.deleteFillableColumn.bind((0,l.Z)(t)),t.addUserColsColumn=t.addUserColsColumn.bind((0,l.Z)(t)),t.deleteUserColsColumn=t.deleteUserColsColumn.bind((0,l.Z)(t)),t.onChange=t.onChange.bind((0,l.Z)(t)),t.onChangeRelationship=t.onChangeRelationship.bind((0,l.Z)(t)),t.saveModel=t.saveModel.bind((0,l.Z)(t)),t.addRelationship=t.addRelationship.bind((0,l.Z)(t)),t.addModalShow=t.addModalShow.bind((0,l.Z)(t)),t.toggleModal=t.toggleModal.bind((0,l.Z)(t)),t.getModalClasses=t.getModalClasses.bind((0,l.Z)(t)),t.onDeleteClick=t.onDeleteClick.bind((0,l.Z)(t)),t.addAccessorModalShow=t.addAccessorModalShow.bind((0,l.Z)(t)),t.onDeleteAccessorClick=t.onDeleteAccessorClick.bind((0,l.Z)(t)),t}return(0,i.Z)(b,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n,a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resource.get(this.state.table_id);case 2:return t=e.sent,this.setState((function(e){return zi(zi({},e),{},{table:t})})),e.next=6,this.resource.get(this.state.table_id+"/columns");case 6:return n=e.sent,this.setState((function(e){return zi(zi({},e),{},{actual_columns:n,fillable_columns:n,user_cols:n})})),e.next=10,this.resource.get(this.state.table_id+"/model");case 10:if(!(a=e.sent)){e.next=18;break}return r={description:a.description,fillable_cols:this.setCols(a.fillable_cols),user_cols:this.setCols(a.user_cols),table_id:a.table_id,path:null!==a.path?a.path:"",name:a.name,relationships:a.table.relationships,pk:a.pk,time_stamps:a.time_stamps,soft_deletes:a.soft_deletes},this.accessors_resource=new K.default({route:"/admin/ajax/tables/"+this.props.match.params.id+"/models/"+a.id+"/accessors"}),e.next=16,this.accessors_resource.getAll();case 16:o=e.sent,this.setState((function(e){return zi(zi({},e),{},{data:r,accsessors:o})}),(function(){}));case 18:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setCols",value:function(e){var t=[];return e?null==e||""==e?t:(e.replace(/'/g,""),e.split(",")):t}},{key:"addFillableColumn",value:function(e){var t=e.target.value;if(-1!==this.state.data.fillable_cols.indexOf(t))return alert("This column has already been added."),!1;this.setState((function(e){return zi(zi({},e),{},{data:zi(zi({},e.data),{},{fillable_cols:Di()(e.data.fillable_cols,{$push:[t]})})})}),(function(){}))}},{key:"deleteFillableColumn",value:function(e,t){e.preventDefault();var n=this.state.data.fillable_cols.indexOf(t);if(-1===n)return alert("This column not found."),!1;this.setState((function(e){return zi(zi({},e),{},{data:zi(zi({},e.data),{},{fillable_cols:Di()(e.data.fillable_cols,{$splice:[[n,1]]})})})}),(function(){}))}},{key:"addUserColsColumn",value:function(e){var t=e.target.value;if(-1!==this.state.data.user_cols.indexOf(t))return alert("This column has already been added."),!1;this.setState((function(e){return zi(zi({},e),{},{data:zi(zi({},e.data),{},{user_cols:Di()(e.data.user_cols,{$push:[t]})})})}),(function(){}))}},{key:"deleteUserColsColumn",value:function(e,t){e.preventDefault();var n=this.state.data.user_cols.indexOf(t);if(-1===n)return alert("This column not found."),!1;this.setState((function(e){return zi(zi({},e),{},{data:zi(zi({},e.data),{},{user_cols:Di()(e.data.user_cols,{$splice:[[n,1]]})})})}),(function(){}))}},{key:"onChange",value:function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;this.setState(zi(zi({},this.state),{},{data:zi(zi({},this.state.data),{},(0,a.Z)({},t,n))}))}},{key:"onChangeRelationship",value:function(e){var t=e.target.name;this.setState(zi(zi({},this.state),{},{relationship:zi(zi({},this.state.relationship),{},(0,a.Z)({},t,e.target.value))}))}},{key:"saveModel",value:(t=(0,r.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.data.name){e.next=4;break}return alert("Enter model name!"),e.abrupt("return");case 4:return(n=zi({},this.state.data))._token=_token,console.log(this.state.data),JSON.stringify(n),e.next=11,this.save_model_resource.post(n);case 11:e.sent?alert("Success"):alert("Error");case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"addRelationship",value:function(e){var t=this;e.preventDefault();var n=zi({},this.state.relationship);""==n.id&&(n.id=(new Date).getTime()),this.setState((function(e){return null==e.selected_relationship?zi(zi({},e),{},{data:zi(zi({},e.data),{},{relationships:Di()(e.data.relationships,{$push:[n]})})}):zi(zi({},e),{},{data:zi(zi({},e.data),{},{relationships:Di()(e.data.relationships,(0,a.Z)({},e.selected_relationship,{$set:n}))})})}),(function(){t.toggleModal()}))}},{key:"getModalClasses",value:function(){var e="admin-modal";return this.state.modal_toogle&&(e+=" admin-modal_active"),e}},{key:"toggleModal",value:function(){this.setState((function(e){return zi(zi({},e),{},{modal_toogle:!e.modal_toogle})}))}},{key:"addModalShow",value:function(e){var t=this;console.log(e);var n=this.state.data.relationships.indexOf(e);this.setState((function(e){return zi(zi({},e),{},-1===n?{selected_relationship:null,relationship:e.default_relationship}:{selected_relationship:n,relationship:e.data.relationships[n]})}),(function(){t.toggleModal()}))}},{key:"onDeleteClick",value:function(e){var t=this;if(confirm("Are you sure?")){var n=this.state.data.relationships.indexOf(e);-1!==n&&this.setState((function(e){return zi(zi({},e),{},{data:zi(zi({},e.data),{},{relationships:Di()(t.state.data.relationships,{$splice:[[n,1]]})})})}),(function(){alert("Success")}))}}},{key:"addAccessorModalShow",value:function(e){var t=this;console.log(e);var n=this.state.data.relationships.indexOf(e);this.setState((function(e){return zi(zi({},e),{},-1===n?{selected_relationship:null,relationship:e.default_relationship}:{selected_relationship:n,relationship:e.data.relationships[n]})}),(function(){t.toggleModal()}))}},{key:"onDeleteAccessorClick",value:function(e){var t=this;if(confirm("Are you sure?")){var n=this.state.data.relationships.indexOf(e);-1!==n&&this.setState((function(e){return zi(zi({},e),{},{data:zi(zi({},e.data),{},{relationships:Di()(t.state.data.relationships,{$splice:[[n,1]]})})})}),(function(){alert("Success")}))}}},{key:"render",value:function(){var e=this;return p.createElement("div",null,p.createElement("div",null,p.createElement("form",null,p.createElement("div",null,p.createElement("label",{className:"form-label"},"Name",p.createElement("input",{className:"form__input",type:"text",name:"name",value:this.state.data.name,onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Description",p.createElement("input",{className:"form__input",type:"text",name:"description",value:this.state.data.description,onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Soft Deletes",p.createElement("input",{className:"form__input",type:"checkbox",checked:this.state.data.soft_deletes?1:0,name:"soft_deletes",onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Timestamps",p.createElement("input",{className:"form__input",type:"checkbox",checked:this.state.data.time_stamps?1:0,name:"time_stamps",onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Fillable",p.createElement("select",{className:"form__input",name:"add_fillable",onChange:function(t){e.addFillableColumn(t)}},p.createElement("option",{value:""}),this.state.fillable_columns.map((function(e){return p.createElement("option",{key:e.id,value:e.name,children:e.title})})))),p.createElement("div",null,this.state.data.fillable_cols.map((function(t){return p.createElement("div",{key:t},p.createElement("button",{className:"btn",onClick:function(n){e.deleteFillableColumn(n,t)}},t))})))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"User Cols",p.createElement("select",{className:"form__input",name:"add_user_cols",onChange:function(t){e.addUserColsColumn(t)}},p.createElement("option",{value:""}),this.state.user_cols.map((function(e){return p.createElement("option",{key:e.id,value:e.name,children:e.title})})))),p.createElement("div",null,this.state.data.user_cols.map((function(t){return p.createElement("div",{key:t},p.createElement("button",{className:"btn",onClick:function(n){e.deleteUserColsColumn(n,t)}},t))})))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Path",p.createElement("input",{className:"form__input",type:"text",name:"path",value:this.state.data.path,onChange:function(t){e.onChange(t)}}))),p.createElement("label",{className:"form-label"},"Primary Key",p.createElement("select",{className:"form__input",name:"pk",value:this.state.data.pk,onChange:function(t){e.onChange(t)}},p.createElement("option",{value:""}),this.state.actual_columns.map((function(e){return p.createElement("option",{key:e.id,value:e.name,children:e.title||e.name})})))))),p.createElement("div",null,p.createElement(X,{columns:this.table_columns,rows:this.state.data.relationships})),p.createElement("div",null,p.createElement("button",{onClick:this.addModalShow},"Add Relationship")),p.createElement("div",null,p.createElement("form",{className:"admin-form",onSubmit:this.saveModel},p.createElement("button",{className:"btn btn_success"},"Save"))),p.createElement("div",null,p.createElement("hr",null)),p.createElement("div",null,p.createElement(X,{columns:this.accessors_table_columns,rows:this.state.accessors})),p.createElement("div",null,p.createElement("button",{onClick:this.addAccessorModalShow},"Add Accessor")),p.createElement("div",{className:this.getModalClasses()},p.createElement("div",{className:"admin-modal__bg",onClick:this.toggleModal}),p.createElement("div",{className:"admin-modal-content"},p.createElement("button",{className:"admin-modal__close",onClick:this.toggleModal},p.createElement(za,{className:"icon"})),p.createElement("div",{className:"admin-caption"},"Add New Relationship"),p.createElement("div",{className:"admin-modal-form form"},p.createElement("form",{className:"admin-form",onSubmit:this.addRelationship},p.createElement("div",null,p.createElement("label",{className:"form-label"},"name",p.createElement("input",{className:"form__input",type:"text",name:"name",value:this.state.relationship.name,onChange:function(t){e.onChangeRelationship(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Model Class",p.createElement("input",{className:"form__input",type:"text",name:"model_class",value:this.state.relationship.model_class,onChange:function(t){e.onChangeRelationship(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"type",p.createElement("select",{className:"form__input",value:this.state.relationship.type,name:"type",onChange:function(t){e.onChangeRelationship(t)}},p.createElement("option",{value:""}),this.relationship_types.map((function(e){return p.createElement("option",{key:e.id,value:e.id,children:e.title||e.name})}))))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"foreign key",p.createElement("input",{className:"form__input",type:"text",name:"foreign_key",value:this.state.relationship.foreign_key,onChange:function(t){e.onChangeRelationship(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"local key",p.createElement("input",{className:"form__input",type:"text",name:"local_key",value:this.state.relationship.local_key,onChange:function(t){e.onChangeRelationship(t)}}))),p.createElement("button",{className:"btn btn_success"},"Add col"))))))}}]),b}(p.Component),Ii=(0,b.EN)(qi);function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Li=function(e){(0,s.Z)(v,e);var t,n,m,f,h,b=(f=v,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(f);if(h){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function v(e){var t;(0,o.Z)(this,v),(t=b.call(this,e)).table_columns=[{name:"id",title:"ID"},{name:"name",title:"Name"},{name:"formula",title:"Formula"},{name:"status",title:"Status"},{name:"edit",title:"Edit",is_button:!0,button:{class:"",function:t.addModalShow.bind((0,l.Z)(t)),title:"Edit"}},{name:"delete",title:"Delete",is_button:!0,button:{class:"",function:t.onDeleteClick.bind((0,l.Z)(t)),title:"Delete"}}];var n={id:"",name:"",formula:"",description:""};return t.state={modal_toogle:!1,table_id:t.props.match.params.id,table:{},data:[],default_accessor:n,selected_accessor:null,accessor:n},t.resource=new K.default({route:"/admin/ajax/tables"}),t.model_resource=new K.default({route:"/admin/ajax/tables/"+t.props.match.params.id+"/model"}),t.accessors_resource=!1,t.toggleModal=t.toggleModal.bind((0,l.Z)(t)),t.getModalClasses=t.getModalClasses.bind((0,l.Z)(t)),t.onChange=t.onChange.bind((0,l.Z)(t)),t.addModalShow=t.addModalShow.bind((0,l.Z)(t)),t.onDeleteClick=t.onDeleteClick.bind((0,l.Z)(t)),t.addAccessor=t.addAccessor.bind((0,l.Z)(t)),t.getModalClasses=t.getModalClasses.bind((0,l.Z)(t)),t}return(0,i.Z)(v,[{key:"componentDidMount",value:(m=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resource.get(this.state.table_id);case 2:return t=e.sent,this.setState((function(e){return Ui(Ui({},e),{},{table:t})})),e.next=6,this.model_resource.get(" ");case 6:if(!(n=e.sent)){e.next=13;break}return this.accessors_resource=new K.default({route:"/admin/ajax/tables/"+this.props.match.params.id+"/models/"+n.id+"/accessors"}),e.next=11,this.accessors_resource.getAll();case 11:a=e.sent,this.setState((function(e){return Ui(Ui({},e),{},{model:n,data:a})}),(function(){}));case 13:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"onChange",value:function(e){var t=e.target.name,n="checkbox"===e.target.type?e.target.checked:e.target.value;this.setState(Ui(Ui({},this.state),{},{accessor:Ui(Ui({},this.state.accessor),{},(0,a.Z)({},t,n))}))}},{key:"addAccessor",value:(n=(0,r.Z)(d().mark((function e(t){var n,r,o=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=(n=Ui({},this.state.accessor)).name){e.next=5;break}return alert("Enter accessor name!"),e.abrupt("return");case 5:if(n._token=_token,null!=this.state.selected_accessor){e.next=12;break}return e.next=9,this.accessors_resource.post(n);case 9:r=e.sent,e.next=15;break;case 12:return e.next=14,this.accessors_resource.put(n.id,n);case 14:r=e.sent;case 15:r?this.setState((function(e){return null==e.selected_accessor?Ui(Ui({},e),{},{data:Di()(e.data,{$push:[r]})}):Ui(Ui({},e),{},{data:Di()(e.data,(0,a.Z)({},e.selected_accessor,{$set:r}))})}),(function(){o.toggleModal()})):alert("Error");case 16:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getModalClasses",value:function(){var e="admin-modal";return this.state.modal_toogle&&(e+=" admin-modal_active"),e}},{key:"toggleModal",value:function(){this.setState((function(e){return Ui(Ui({},e),{},{modal_toogle:!e.modal_toogle})}))}},{key:"addModalShow",value:function(e){var t=this;console.log(e);var n=this.state.data.indexOf(e);this.setState((function(e){return Ui(Ui({},e),{},-1===n?{selected_accessor:null,accessor:e.default_accessor}:{selected_accessor:n,accessor:e.data[n]})}),(function(){t.toggleModal()}))}},{key:"onDeleteClick",value:(t=(0,r.Z)(d().mark((function e(t){var n,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure?")){e.next=8;break}if(-1===(n=this.state.data.indexOf(t))){e.next=8;break}return e.next=6,this.accessors_resource.delete(t.id);case 6:e.sent?this.setState((function(e){return Ui(Ui({},e),{},{data:Di()(a.state.data,{$splice:[[n,1]]})})}),(function(){alert("Success")})):alert("Error");case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return p.createElement("div",null,p.createElement("div",null,p.createElement(X,{columns:this.table_columns,rows:this.state.data})),p.createElement("div",null,p.createElement("button",{onClick:this.addModalShow},"Add Accessor")),p.createElement("div",{className:this.getModalClasses()},p.createElement("div",{className:"admin-modal__bg",onClick:this.toggleModal}),p.createElement("div",{className:"admin-modal-content"},p.createElement("button",{className:"admin-modal__close",onClick:this.toggleModal},p.createElement(za,{className:"icon"})),p.createElement("div",{className:"admin-caption"},"Add New Accessor"),p.createElement("div",{className:"admin-modal-form form"},p.createElement("form",{className:"admin-form",onSubmit:this.addAccessor},p.createElement("div",null,p.createElement("label",{className:"form-label"},"name",p.createElement("input",{className:"form__input",type:"text",name:"name",value:this.state.accessor.name,onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"description",p.createElement("input",{className:"form__input",type:"text",name:"description",value:this.state.accessor.description,onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"formula",p.createElement("input",{className:"form__input",type:"text",name:"formula",value:this.state.accessor.formula,onChange:function(t){e.onChange(t)}}))),p.createElement("button",{className:"btn btn_success"},"Add accessor"))))))}}]),v}(p.Component),Wi=(0,b.EN)(Li);function Yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yi(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gi=function(e){(0,s.Z)(b,e);var t,n,m,f,h=(m=b,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(m);if(f){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(e){var t;return(0,o.Z)(this,b),(t=h.call(this,e)).state={table_id:t.props.match.params.id,table:{},relationships:[],relation:"",data:{description:"",prefix:"",namespace:"",relations:""}},t.resource=new K.default({route:"/admin/ajax/tables"}),t.controller_resource=new K.default({route:"/admin/ajax/tables/"+t.props.match.params.id+"/controller"}),t.save_controller_resource=new K.default({route:"/admin/ajax/tables/"+t.props.match.params.id+"/controllers"}),t.onChange=t.onChange.bind((0,l.Z)(t)),t.saveController=t.saveController.bind((0,l.Z)(t)),t.addRelation=t.addRelation.bind((0,l.Z)(t)),t.deleteRelation=t.deleteRelation.bind((0,l.Z)(t)),t}return(0,i.Z)(b,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resource.get(this.state.table_id);case 2:return t=e.sent,this.setState((function(e){return Ki(Ki({},e),{},{table:t})})),e.next=6,this.resource.get(this.state.table_id+"/controller");case 6:(n=e.sent)&&(n.description=null==n.description?"":n.description,n.prefix=null==n.prefix?"":n.prefix,n.namespace=null==n.namespace?"":n.namespace,n.relation=this.setCols(n.relations),this.setState((function(e){return Ki(Ki({},e),{},{data:n})}),(function(){a.setState((function(e){return Ki(Ki({},e),{},{relationships:n.relation})}))})));case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"setCols",value:function(e){var t=[];return e?null==e||""==e?t:(e.replace(/'/g,""),e.split(",")):t}},{key:"onChange",value:function(e){var t=e.target.name;if("relation"===t)return this.setState(Ki(Ki({},this.state),{},{relation:e.target.value}));this.setState(Ki(Ki({},this.state),{},{data:Ki(Ki({},this.state.data),{},(0,a.Z)({},t,e.target.value))}))}},{key:"saveController",value:(t=(0,r.Z)(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=Ki({},this.state.data))._token=_token,JSON.stringify(n),e.next=7,this.save_controller_resource.post(n);case 7:e.sent?alert("Success"):alert("Error");case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"addRelation",value:function(e){var t=this;e.preventDefault();var n=this.state.relation;if(-1!==this.state.relationships.indexOf(n))return alert("This relation has already been added."),!1;this.setState((function(e){return Ki(Ki({},e),{},{relationships:Di()(e.relationships,{$push:[n]})})}),(function(){console.log(t.state),t.setRelation()}))}},{key:"deleteRelation",value:function(e,t){var n=this;e.preventDefault();var a=this.state.relationships.indexOf(t);if(-1===a)return alert("This relation not found."),!1;this.setState((function(e){return Ki(Ki({},e),{},{relationships:Di()(e.relationships,{$splice:[[a,1]]})})}),(function(){n.setRelation()}))}},{key:"setRelation",value:function(){var e=this,t=this.state.relationships.join(";");this.setState((function(n){return Ki(Ki({},n),{},{data:Ki(Ki({},e.state.data),{},{relations:t})})}),(function(){console.log(e.state)}))}},{key:"render",value:function(){var e=this;return p.createElement("div",null,p.createElement("div",null,p.createElement("form",{className:"admin-form",onSubmit:this.saveController},p.createElement("div",null,p.createElement("label",{className:"form-label"},"Description",p.createElement("input",{className:"form__input",type:"text",name:"description",value:this.state.data.description,onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Prefix",p.createElement("input",{className:"form__input",type:"text",name:"prefix",value:this.state.data.prefix,onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Namespace",p.createElement("input",{className:"form__input",type:"text",name:"namespace",value:this.state.data.namespace,onChange:function(t){e.onChange(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Relations",p.createElement("div",{className:"input-group"},p.createElement("input",{className:"form__input",type:"text",name:"relation",value:this.state.relation,onChange:function(t){e.onChange(t)}}),p.createElement("button",{onClick:function(t){e.addRelation(t)}},"Добавить")))),p.createElement("div",null,this.state.relationships.map((function(t){return p.createElement("div",{key:t},p.createElement("button",{className:"btn",onClick:function(n){e.deleteRelation(n,t)}},t))}))),p.createElement("div",null,p.createElement("button",{className:"btn btn_success"},"Save")))))}}]),b}(p.Component),Ji=(0,b.EN)(Gi);function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xi=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).state={table_id:t.props.match.params.id,table:{}},t.resource=new K.default({route:"/admin/ajax/tables"}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resource.get(this.state.table_id);case 2:t=e.sent,this.setState((function(e){return $i($i({},e),{},{table:t})}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return p.createElement("div",{className:"admin-templates admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables"},"Tables"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/edit/"+this.state.table_id},this.state.table.title),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Setting"))),p.createElement("div",{className:"admin-content"},p.createElement(_e.mQ,{selectedIndex:this.state.activeTab,onSelect:this.switchTab},p.createElement(_e.td,{className:"nav nav-pills admin-pills"},p.createElement(_e.OK,null,"Migration"),p.createElement(_e.OK,null,"Model"),p.createElement(_e.OK,null,"Controller"),p.createElement(_e.OK,null,"Routes"),p.createElement(_e.OK,null,"Accessors")),p.createElement(_e.x4,null,p.createElement(Hi,null),p.createElement("div",null,p.createElement(h.rU,{className:"btn",to:"/admin/tables/edit/"+this.state.table_id+"/setting/migrations/add"},"Add New"))),p.createElement(_e.x4,null,p.createElement(Ii,null)),p.createElement(_e.x4,null,p.createElement(Ji,null)),p.createElement(_e.x4,null),p.createElement(_e.x4,null,p.createElement(Wi,null)))))}}]),m}(p.Component),el=(0,b.EN)(Xi);function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var al=function(e){(0,s.Z)(v,e);var t,n,m,f,b=(m=v,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(m);if(f){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function v(e){var t;(0,o.Z)(this,v),(t=b.call(this,e)).column_types=[{id:"id",name:"Identifier",fields:[]},{id:"foreignId",name:"Foreign Id",fields:["nullable","default"]},{id:"boolean",name:"Boolean",fields:["nullable","default"]},{id:"date",name:"Date",fields:["nullable","default","size","unique","current"]},{id:"datetime",name:"Datetime",fields:["nullable","default","size","unique","current"]},{id:"decimal",name:"Decimal",fields:["nullable","default","size","places"]},{id:"integer",name:"Integer",fields:["nullable","default"]},{id:"longtext",name:"Long Text",fields:["nullable","default","unique"]},{id:"string",name:"String",fields:["nullable","default","size","unique"]},{id:"text",name:"Text",fields:["nullable","default","unique"]},{id:"timestamps",name:"Timestamps",fields:["size"]}];var n={id:"",name:"",title:"",description:"",type:"string",size:191,places:0,default:"",null:!1,unique:!1},a={id:"",target_table:"",source_table_id:t.props.match.params.id,target_column:"",source_column:"",onDelete:"restrict",onUpdate:"restrict"};return t.key_actions=[{id:"restrict",name:"RESTRICT"},{id:"cascade",name:"CASCADE"},{id:"set null",name:"SET NULL"},{id:"no action",name:"NO ACTION"}],t.table_columns=[{name:"title",title:"Title"},{name:"name",title:"Name"},{name:"type",title:"Type"},{name:"size",title:"Size"},{name:"default",title:"Default"},{name:"null",title:"Nullable",is_boolean:!0},{name:"unique",title:"Unique",is_boolean:!0},{name:"edit",title:"Edit",is_button:!0,button:{class:"",function:t.addModalColumnShow.bind((0,l.Z)(t)),title:"Edit"}},{name:"delete",title:"Delete",is_button:!0,button:{class:"",function:t.onDeleteColumnClick.bind((0,l.Z)(t)),title:"Delete"}}],t.table_keys=[{name:"target_table",title:"Target Table"},{name:"target_column",title:"Target Column"},{name:"source_column",title:"Source Column"},{name:"onDelete",title:"onDelete"},{name:"onUpdate",title:"onUpdate"},{name:"edit",title:"Edit",is_button:!0,button:{class:"",function:t.addModalKeyShow.bind((0,l.Z)(t)),title:"Edit"}},{name:"delete",title:"Delete",is_button:!0,button:{class:"",function:t.onDeleteKeyClick.bind((0,l.Z)(t)),title:"Delete"}}],t.state={column_modal_toggle:!1,key_modal_toggle:!1,table:{},table_id:t.props.match.params.id,data:{columns:[],keys:[],rename_columns:[]},name:"",default_column:n,selected_column:null,column:n,default_key:a,selected_key:null,key:a},t.resource=new K.default({route:"/admin/ajax/tables"}),t.migration_resource=new K.default({route:"/admin/ajax/tables/"+t.props.match.params.id+"/migrations"}),t.addModalColumnShow=t.addModalColumnShow.bind((0,l.Z)(t)),t.addModalKeyShow=t.addModalKeyShow.bind((0,l.Z)(t)),t.onChangeColumn=t.onChangeColumn.bind((0,l.Z)(t)),t.onChangeKey=t.onChangeKey.bind((0,l.Z)(t)),t.addColumn=t.addColumn.bind((0,l.Z)(t)),t.addKey=t.addKey.bind((0,l.Z)(t)),t.toggleModal=t.toggleModal.bind((0,l.Z)(t)),t.getModalClasses=t.getModalClasses.bind((0,l.Z)(t)),t.onDeleteColumnClick=t.onDeleteColumnClick.bind((0,l.Z)(t)),t.onDeleteKeyClick=t.onDeleteKeyClick.bind((0,l.Z)(t)),t.changeName=t.changeName.bind((0,l.Z)(t)),t.saveMigration=t.saveMigration.bind((0,l.Z)(t)),t.isShowField=t.isShowField.bind((0,l.Z)(t)),t}return(0,i.Z)(v,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function e(){var t,n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resource.get(this.state.table_id);case 2:return t=e.sent,this.setState((function(e){return nl(nl({},e),{},{table:t})})),e.next=6,this.resource.get(this.state.table_id+"/columns");case 6:return n=e.sent,this.setState((function(e){return nl(nl({},e),{},{data:nl(nl({},e.data),{},{columns:n})})})),e.next=10,this.resource.get(this.state.table_id+"/keys");case 10:a=e.sent,this.setState((function(e){return nl(nl({},e),{},{data:nl(nl({},e.data),{},{keys:a})})}));case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getModalClasses",value:function(e){var t=e+"_modal_toggle",n="admin-modal";return this.state[t]&&(n+=" admin-modal_active"),n}},{key:"isShowField",value:function(e){var t=this,n=!1,a=this.column_types.find((function(e){return e.id===t.state.column.type}));return a&&a.fields.indexOf(e)>-1&&(n=!0),n}},{key:"toggleModal",value:function(e){var t=this,n=e+"_modal_toggle";this.setState((function(e){return nl(nl({},e),{},(0,a.Z)({},n,!e[n]))}),(function(){console.log(t.state)}))}},{key:"addModalColumnShow",value:function(e){var t=this,n=this.state.data.columns.indexOf(e);this.setState((function(e){return nl(nl({},e),{},-1===n?{selected_column:null,column:e.default_column}:{selected_column:n,column:e.data.columns[n]})}),(function(){t.toggleModal("column")}))}},{key:"addModalKeyShow",value:function(e){var t=this,n=this.state.data.keys.indexOf(e);this.setState((function(e){return nl(nl({},e),{},-1===n?{selected_key:null,key:e.default_key}:{selected_key:n,key:e.data.keys[n]})}),(function(){t.toggleModal("key")}))}},{key:"addColumn",value:function(e){var t=this;e.preventDefault();var n=nl({},this.state.column);""==n.id&&(n.id=(new Date).getTime()),this.setState((function(e){return null==e.selected_column?nl(nl({},e),{},{data:nl(nl({},e.data),{},{columns:Di()(e.data.columns,{$push:[n]})})}):nl(nl({},e),{},{data:nl(nl({},e.data),{},{columns:Di()(e.data.columns,(0,a.Z)({},e.selected_column,{$set:n}))})})}),(function(){t.toggleModal("column")}))}},{key:"addKey",value:function(e){var t=this;e.preventDefault();var n=nl({},this.state.key);""==n.id&&(n.id=(new Date).getTime()),this.setState((function(e){return null==e.selected_key?nl(nl({},e),{},{data:nl(nl({},e.data),{},{keys:Di()(e.data.keys,{$push:[n]})})}):nl(nl({},e),{},{data:nl(nl({},e.data),{},{keys:Di()(e.data.keys,(0,a.Z)({},e.selected_key,{$set:n}))})})}),(function(){t.toggleModal("key")}))}},{key:"onDeleteColumnClick",value:function(e){var t=this;if(confirm("Are you sure?")){var n=this.state.data.columns.indexOf(e);-1!==n&&this.setState((function(e){return nl(nl({},e),{},{data:nl(nl({},e.data),{},{columns:Di()(t.state.data.columns,{$splice:[[n,1]]})})})}),(function(){alert("Success")}))}}},{key:"onDeleteKeyClick",value:function(e){var t=this;if(confirm("Are you sure?")){var n=this.state.data.keys.indexOf(e);-1!==n&&this.setState((function(e){return nl(nl({},e),{},{data:nl(nl({},e.data),{},{keys:Di()(t.state.data.keys,{$splice:[[n,1]]})})})}),(function(){alert("Success")}))}}},{key:"onChangeColumn",value:function(e){var t=this,n=e.target.name,r="checkbox"===e.target.type?e.target.checked:e.target.value;if("name"===n){var o,i=e.target.value.replace("_"," ");r=i.charAt(0).toUpperCase()+i.slice(1);var l=this.state.column.title,s=this.state.column.description;return""!==l&&l!==r.slice(0,r.length-1)||(l=r),""!==s&&s!==r.slice(0,r.length-1)||(s=r),void this.setState(nl(nl({},this.state),{},{column:nl(nl({},this.state.column),{},(o={},(0,a.Z)(o,n,e.target.value),(0,a.Z)(o,"title",l),(0,a.Z)(o,"description",s),o))}))}this.setState(nl(nl({},this.state),{},{column:nl(nl({},this.state.column),{},(0,a.Z)({},n,r))}),(function(){console.log(t.state)}))}},{key:"onChangeKey",value:function(e){var t=e.target.name;console.log(e.target.value),this.setState(nl(nl({},this.state),{},{key:nl(nl({},this.state.key),{},(0,a.Z)({},t,e.target.value))}))}},{key:"changeName",value:function(e){var t=e.target.value;this.setState((function(e){return{name:t}}))}},{key:"saveMigration",value:(t=(0,r.Z)(d().mark((function e(t){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=this.state.name){e.next=4;break}return alert("Enter migration name!"),e.abrupt("return");case 4:return this.state.main_url,console.log(this.state.data),n={name:this.state.name,data:JSON.stringify(this.state.data),_token:_token},JSON.stringify(n),e.next=11,this.migration_resource.post(n);case 11:a=e.sent,console.log(a),a?alert("Success"):alert("Error");case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return p.createElement("div",{className:"admin-templates admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables"},"Tables"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/edit/"+this.state.table_id},this.state.table.title),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/tables/edit/"+this.state.table_id+"/setting"},"Setting"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"Add New Migration"))),p.createElement("div",{className:"admin-content"},p.createElement("div",null,p.createElement("input",{type:"text",placeholder:"Enter migration name...",onChange:this.changeName})),p.createElement(X,{columns:this.table_columns,rows:this.state.data.columns}),p.createElement("div",null,p.createElement("button",{onClick:function(t){return e.addModalColumnShow(t)}},"Add Column")),p.createElement(X,{columns:this.table_keys,rows:this.state.data.keys}),p.createElement("div",null,p.createElement("button",{onClick:function(t){return e.addModalKeyShow(t)}},"Add Key")),p.createElement("div",{className:this.getModalClasses("key")},p.createElement("div",{className:"admin-modal__bg",onClick:function(){return e.toggleModal("key")}}),p.createElement("div",{className:"admin-modal-content"},p.createElement("button",{className:"admin-modal__close",onClick:function(){return e.toggleModal("key")}},p.createElement(za,{className:"icon"})),p.createElement("div",{className:"admin-caption"},"Add New Key"),p.createElement("div",{className:"admin-modal-form form"},p.createElement("form",{className:"admin-form",onSubmit:this.addKey},p.createElement("div",null,p.createElement("label",{className:"form-label"},"id",p.createElement("input",{className:"form__input",type:"text",name:"id",value:this.state.key.id,onChange:function(t){e.onChangeKey(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Target Table",p.createElement("input",{className:"form__input",type:"text",name:"target_table",value:this.state.key.target_table,onChange:function(t){e.onChangeKey(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Source Column",p.createElement("input",{className:"form__input",type:"text",name:"source_column",value:this.state.key.source_column,onChange:function(t){e.onChangeKey(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"Target Column",p.createElement("input",{className:"form__input",type:"text",name:"target_column",value:this.state.key.target_column,onChange:function(t){e.onChangeKey(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"onUpdate",p.createElement("select",{className:"form__input",value:this.state.key.onUpdate,name:"onUpdate",onChange:function(t){e.onChangeKey(t)}},p.createElement("option",{value:""}),this.key_actions.map((function(e){return p.createElement("option",{key:e.id,value:e.id,children:e.title||e.name})}))))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"onDelete",p.createElement("select",{className:"form__input",value:this.state.key.onDelete,name:"onDelete",onChange:function(t){e.onChangeKey(t)}},p.createElement("option",{value:""}),this.key_actions.map((function(e){return p.createElement("option",{key:e.id,value:e.id,children:e.title||e.name})}))))),p.createElement("button",{className:"btn btn_success"},"Add key"))))),p.createElement("div",{className:this.getModalClasses("column")},p.createElement("div",{className:"admin-modal__bg",onClick:function(){return e.toggleModal("column")}}),p.createElement("div",{className:"admin-modal-content"},p.createElement("button",{className:"admin-modal__close",onClick:function(){return e.toggleModal("column")}},p.createElement(za,{className:"icon"})),p.createElement("div",{className:"admin-caption"},"Add New Column"),p.createElement("div",{className:"admin-modal-form form"},p.createElement("form",{className:"admin-form",onSubmit:this.addColumn},p.createElement("div",null,p.createElement("label",{className:"form-label"},"name",p.createElement("input",{className:"form__input",type:"text",name:"name",value:this.state.column.name,onChange:function(t){e.onChangeColumn(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"type",p.createElement("select",{className:"form__input",value:this.state.column.type,name:"type",onChange:function(t){e.onChangeColumn(t)}},p.createElement("option",{value:""}),this.column_types.map((function(e){return p.createElement("option",{key:e.id,value:e.id,children:e.title||e.name})}))))),this.isShowField("size")?p.createElement("div",null,p.createElement("label",{className:"form-label"},"size",p.createElement("input",{className:"form__input",type:"text",name:"size",value:this.state.column.size,onChange:function(t){e.onChangeColumn(t)}}))):null,this.isShowField("places")?p.createElement("div",null,p.createElement("label",{className:"form-label"},"places",p.createElement("input",{className:"form__input",type:"text",name:"places",value:this.state.column.places,onChange:function(t){e.onChangeColumn(t)}}))):null,this.isShowField("default")?p.createElement("div",null,p.createElement("label",{className:"form-label"},"default",p.createElement("input",{className:"form__input",type:"text",name:"default",value:this.state.column.default,onChange:function(t){e.onChangeColumn(t)}}))):null,this.isShowField("unique")?p.createElement("div",null,p.createElement("label",{className:"form-label"},p.createElement("input",{className:"form__input",type:"checkbox",name:"unique",checked:this.state.column.unique?1:0,onChange:function(t){e.onChangeColumn(t)}}),"unique")):null,this.isShowField("nullable")?p.createElement("div",null,p.createElement("label",{className:"form-label"},p.createElement("input",{className:"form__input",type:"checkbox",name:"null",checked:this.state.column.null?1:0,onChange:function(t){e.onChangeColumn(t)}}),"nullable")):null,p.createElement("div",null,p.createElement("label",{className:"form-label"},"title",p.createElement("input",{className:"form__input",type:"text",name:"title",value:this.state.column.title,onChange:function(t){e.onChangeColumn(t)}}))),p.createElement("div",null,p.createElement("label",{className:"form-label"},"description",p.createElement("input",{className:"form__input",type:"text",name:"description",value:this.state.column.description,onChange:function(t){e.onChangeColumn(t)}}))),p.createElement("button",{className:"btn btn_success"},"Add col"))))),p.createElement("div",null),p.createElement("div",null,p.createElement("form",{className:"admin-form",onSubmit:this.saveMigration},p.createElement("button",{className:"btn btn_success"},"Save")))))}}]),v}(p.Component),rl=(0,b.EN)(al);var ol=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){return p.createElement("div",{children:"Version: ".concat(altrp_version),className:"admin__version"})}}]),r}(p.Component);function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?il(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sl=[{name:"title",title:"Title",url:!0,editUrl:!0,tag:"Link"},{name:"name",title:"Name"},{name:"description",title:"Description"},{name:"updated_at",title:"Updated At"}],cl={pageCount:1,currentPage:1},ul=function(e){(0,s.Z)(b,e);var t,n,m,f=(n=b,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(m){var a=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function b(e){var t;return(0,o.Z)(this,b),(t=f.call(this,e)).getSqlEditors=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sql_editorsResource.getQueried(ll({s:t.state.sqlEditorSearch},t.state.sorting));case 2:n=(n=e.sent).sql_editors,t.setState((function(e){return ll(ll({},e),{},{sql_editors:n})}));case 5:case"end":return e.stop()}}),e)}))),t.sortingHandler=function(e,n){t.setState({sorting:{order_by:e,order:n}},t.getSqlEditors)},t.searchSqlEditors=function(e){e.preventDefault(),t.getSqlEditors()},t.state={sql_editorsPagination:cl,sql_editors:[],sqlEditorSearch:"",sorting:{}},t.changePage=t.changePage.bind((0,l.Z)(t)),t.sql_editorsResource=new K.default({route:"/admin/ajax/sql_editors"}),t}return(0,i.Z)(b,[{key:"changePage",value:function(e,t){this.setState((function(n){return ll(ll({},n),{},(0,a.Z)({},t,ll(ll({},n[t]),{},{currentPage:e})))}))}},{key:"updateSqlEditors",value:function(){}},{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sql_editorsResource.getAll();case 2:t=(t=e.sent).sql_editors,this.setState((function(e){return ll(ll({},e),{},{sql_editors:t})}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.sql_editors,a=t.sql_editorsPagination,r=t.sqlEditorSearch,o=t.sorting;return p.createElement("div",{className:"admin-settings admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"SQL Editors"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},"SQL Editors")),p.createElement(h.rU,{className:"btn",to:"/admin/tables/sql_editors/add"},"Add New")),p.createElement("div",{className:"admin-content"},p.createElement("form",{className:"admin-panel py-2",onSubmit:this.searchSqlEditors},p.createElement("input",{className:"input-sm mr-2",value:r,onChange:function(t){return e.setState({sqlEditorSearch:t.target.value})}}),p.createElement("button",{type:"button",onClick:this.getSqlEditors,className:"btn btn_bare admin-users-button"},"Search")),p.createElement(X,{columns:sl,quickActions:[{tag:"Link",props:{href:"/admin/tables/sql_editors/edit/:id"},title:"Edit"},{tag:"button",route:"/admin/ajax/sql_editors/:id",method:"delete",confirm:"Are You Sure?",className:"quick-action-menu__item_danger",title:"Trash"}],rows:n.map((function(e){return ll(ll({},e),{},{editUrl:"/admin/tables/sql_editors/edit/"+e.id})})),sortingHandler:this.sortingHandler,sortingField:o.order_by}),p.createElement(ne,{pageCount:a.pageCount,currentPage:a.currentPage,changePage:function(t){return e.changePage(t,"sql_editorsPagination")},itemsCount:n.length})))}}]),b}(p.Component),ml=function(){return p.createElement("div",{className:"admin-templates admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("a",{className:"admin-breadcrumbs__link",href:"#"},"Analytics")),p.createElement(Link,{className:"btn",to:"/admin/dashboard"},"All Widgets")),p.createElement("div",{className:"admin-content"}))};function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fl=function(e){(0,s.Z)(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(){var e;(0,o.Z)(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).state=pl({},e.props.item),e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.submitHandler=function(t){t.preventDefault();var n=e.props.match.params.id,a=_.pick(e.state,e.props.fields);e.props.item?new K.default({route:"/admin/ajax/custom_models/".concat(n,"/edit")}).put(e.state.id,a).then((function(){return e.props.submitHandler()})):new K.default({route:"/admin/ajax/custom_models/".concat(n)}).post(a).then((function(){return e.props.submitHandler()}))},e}return(0,i.Z)(l,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.fields;return p.createElement("form",{className:"admin-form",onSubmit:this.submitHandler},t.map((function(t){return p.createElement("div",{className:"form-group",key:t},p.createElement("label",{htmlFor:t},t),p.createElement("input",{type:"text",id:t,name:t,value:e.state[t],onChange:e.changeHandler,className:"form-control"}))})),p.createElement("div",{className:"btn__wrapper"},p.createElement("button",{className:"btn btn_success",type:"submit"},"Add")))}}]),l}(p.Component),hl=(0,b.EN)(fl);function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gl=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={sorting:{},search:"",currentPage:1,data:[],pageCount:1,itemsPerPage:20,isModalOpened:!1,editingItem:null,fields:[]},e.getModelData=function(){var t=e.props.match.params.id,n=e.state,a=vl({page:n.currentPage,s:n.search,pageSize:n.itemsPerPage},n.sorting);new K.default({route:"/admin/ajax/custom_models/"+t}).getQueried(a).then((function(t){var n=t.data,a=t.pageCount;return e.setState({data:n,pageCount:a})})).catch((function(e){return console.log(e)}))},e.sortingHandler=function(t,n){e.setState({sorting:{order_by:t,order:n}},e.getModelData)},e.editHandler=function(t){e.setState({editingItem:t,isModalOpened:!0})},e.searchModelData=function(t){t.preventDefault(),e.getModelData()},e}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var e=this;this.getModelData(),new K.default({route:"/admin/ajax/models/".concat(this.props.match.params.id,"/fields")}).getAll().then((function(t){return e.setState({fields:t})})).catch((function(e){return console.log(e)}))}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.getModelData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.search,r=t.currentPage,o=t.pageCount,i=t.sorting,l=t.isModalOpened,s=t.editingItem,c=t.fields,u=this.props.match.params.id;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{className:"admin-breadcrumbs__link",to:"/admin/pages"},"Model"),p.createElement("span",{className:"admin-breadcrumbs__separator"},"/"),p.createElement("span",{className:"admin-breadcrumbs__current"},this.props.location.propsSearch))),p.createElement("div",{className:"admin-content"},p.createElement("form",{className:"admin-panel py-2",onSubmit:this.searchModelData},p.createElement("input",{className:"input-sm mr-2",value:a,onChange:function(t){return e.setState({search:t.target.value})}}),p.createElement("button",{className:"btn btn_bare admin-users-button"},"Search")),Boolean(n.length)&&p.createElement(p.Fragment,null,p.createElement(X,{columns:c,quickActions:[{callBack:function(t){return e.editHandler(t)},title:"Edit"},{tag:"button",route:"/admin/ajax/custom_models/".concat(u,"/delete/:id"),method:"delete",confirm:"Are You Sure?",after:function(){return e.getModelData()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:n,sortingHandler:this.sortingHandler,sortingField:i.order_by}),p.createElement(ne,{pageCount:o||1,currentPage:r,changePage:function(t){return e.setState({currentPage:t},e.getModelData)}})),p.createElement("button",{onClick:function(){return e.setState({isModalOpened:!0})},className:"btn btn_add"},"Add New"),l&&p.createElement(La,{closeHandler:function(){return e.setState({isModalOpened:!1,editingItem:null})}},p.createElement(hl,{item:s,submitHandler:function(){return e.setState({isModalOpened:!1,editingItem:null},e.getModelData)},fields:c.map((function(e){return e.name})).filter((function(e){return"id"!==e}))}))))}}]),r}(p.Component),_l=(0,b.EN)(gl);var yl=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e=this.props.location.pathname.indexOf("assets");return p.createElement("ul",{className:-1!==e?"admin-nav-list admin-nav-list--sublist_active":"admin-nav-list admin-nav-list--sublist"},p.createElement("li",null,p.createElement(h.rU,{to:"/admin/assets",className:"admin-nav-list__link"},p.createElement("span",null,"Library"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/assets/custom-fonts",className:"admin-nav-list__link"},p.createElement("span",null,"Custom fonts"))))}}]),r}(p.Component),El=(0,b.EN)(yl);var xl=function(e){(0,s.Z)(h,e);var t,a,l,m,p,f=(m=h,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(m);if(p){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function h(e,t){(0,o.Z)(this,h);var n={metaValue:t,metaName:e};return f.call(this,n)}return(0,i.Z)(h,[{key:"getMetaValue",value:function(e){return this.getProperty("metaValue")||e}},{key:"setMetaValue",value:function(e){return this.setProperty("metaValue",e)}},{key:"getMetaName",value:function(){return this.getProperty("metaName")}},{key:"save",value:(l=(0,r.Z)(d().mark((function e(){var t,a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getMetaName(),a=this.getMetaValue(),_.isObject(a)&&(a=JSON.stringify(a)),e.next=5,Promise.resolve().then(n.bind(n,3925));case 5:return r=e.sent.default,o=new r({route:"/admin/ajax/altrp_meta"}),e.next=9,o.put(t,{meta_value:a});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})}],[{key:"saveGlobalStylesPresets",value:(a=(0,r.Z)(d().mark((function e(t){var a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="global_styles",_.isObject(t)&&(t=JSON.stringify(t)),e.next=4,Promise.resolve().then(n.bind(n,3925));case 4:return r=e.sent.default,o=new r({route:"/admin/ajax/altrp_meta"}),e.next=8,o.put(a,{meta_value:t});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"getMetaByName",value:(t=(0,r.Z)(d().mark((function e(t){var a,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if("loading"!==_.get(h,"statuses.".concat(t))){e.next=4;break}return e.abrupt("return",new Promise((function(e,n){h.pendingCallbacks[t]=h.pendingCallbacks[t]||[],h.pendingCallbacks[t].push(e)})));case 4:return h.statuses[t]="loading",e.next=7,Promise.resolve().then(n.bind(n,3925));case 7:return a=e.sent.default,r=new a({route:"/admin/ajax/altrp_meta"}),e.prev=9,e.t1=_,e.next=13,r.get(t);case 13:if(e.t2=e.sent,e.t0=e.t1.get.call(e.t1,e.t2,"data.meta_value"),e.t0){e.next=17;break}e.t0=null;case 17:return o=e.t0,o=(0,U.hB)(o),_.isArray(h.pendingCallbacks[t])&&h.pendingCallbacks[t].forEach((function(e){e(new h(t,o))})),h.statuses[t]="loaded",h.pendingCallbacks[t]=[],e.abrupt("return",new h(t,o));case 25:return e.prev=25,e.t3=e.catch(9),_.isArray(h.pendingCallbacks[t])&&h.pendingCallbacks[t].forEach((function(e){e(new h(t,null))})),h.statuses[t]="loaded",h.pendingCallbacks[t]=[],e.abrupt("return",new h(t,null));case 31:case"end":return e.stop()}}),e,null,[[9,25]])}))),function(e){return t.apply(this,arguments)})},{key:"clone",value:function(e){return new h(e.getMetaName(),e.getMetaValue())}}]),h}(n(97239).Z);xl.statuses={},xl.pendingCallbacks={};var wl=xl,kl=n(14890),Nl=n(22017);var Ol=function(e){(0,s.Z)(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function l(){var e;(0,o.Z)(this,l);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={},e.deleteFont=function(){var t=(0,r.Z)(d().mark((function t(n){var a,r,o,i,l;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.metaValue,r=n,o=e.props.metaValue.findIndex((function(e){return e.id==r})),a.splice(o,1),t.next=6,wl.getMetaByName("custom_fonts");case 6:return(i=t.sent).setMetaValue(a),t.next=10,i.save();case 10:return t.next=12,wl.getMetaByName("custom_fonts");case 12:return i=t.sent,t.next=15,i.getMetaValue();case 15:l=t.sent,e.props.getCustomFonts(l);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return(0,i.Z)(l,[{key:"render",value:function(){var e=this,t=null,n=null;return null!==this.props.metaValue&&(n=this.props.metaValue.length,t=this.props.metaValue.map((function(t){return p.createElement("tr",{key:t.id,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},p.createElement("td",{className:"custom-fonts__table-check"},p.createElement("input",{type:"checkbox"})),p.createElement("td",{className:"custom-fonts__table-font-family"},p.createElement(h.rU,{to:"/admin/assets/edit-font/".concat(t.id)},t.fontFamily,p.createElement("span",{className:"custom-fonts__table-font-family__count"},t.variations.length)),p.createElement("span",{className:"custom-fonts__table-font-family_hover"},p.createElement(h.rU,{to:"/admin/assets/edit-font/".concat(t.id),className:"custom-fonts__table-font-family_hover_edit"},"Edit"),p.createElement("span",{onClick:function(){return e.deleteFont(t.id)},className:"custom-fonts__table-font-family_hover_trash"},"Trash"))),p.createElement("td",{className:"custom-fonts__table-preview"},"Elementor Is Making the Web Beautiful!!!"))}))),p.createElement("div",{className:"custom-fonts"},p.createElement("div",{className:"custom-fonts__title"},"Custom Fonts",p.createElement(h.rU,{to:"/admin/assets/add-new-font"},p.createElement("button",{className:"custom-fonts__btn custom-fonts__btn_add-new"},"Add new"))),p.createElement("div",{className:"custom-fonts__table-header"},p.createElement("div",{className:"custom-fonts__sorting-options"},p.createElement(h.rU,{className:"custom-fonts__sorting-options-name"},"All",p.createElement("span",{className:"custom-fonts__sorting-options-count custom-fonts__sorting-options-count_line"},n)),p.createElement(h.rU,{className:"custom-fonts__sorting-options-name"},"Published",p.createElement("span",{className:"custom-fonts__sorting-options-count"},n))),p.createElement("div",{className:"custom-fonts__search"},p.createElement("input",{className:"custom-fonts__search-input"}),p.createElement("button",{onClick:this.props.getMetaName,className:"custom-fonts__btn custom-fonts__btn_search"},"Search Font"))),p.createElement("div",{className:"custom-fonts__const-part-of-table"},p.createElement("div",{className:"custom-fonts__possible-actions"},p.createElement("select",{className:"custom-fonts__possible-actions-drop-list"},p.createElement("option",null,"Bulk actions"),p.createElement("option",null,"Edit"),p.createElement("option",null,"Move To Trash")),p.createElement("button",{onClick:this.props.test,className:"custom-fonts__btn custom-fonts__btn_apply"},"Apply")),p.createElement("span",{className:"custom-fonts__number-of-items"},n," items")),p.createElement("table",{className:"custom-fonts__table"},p.createElement("thead",null,p.createElement("tr",null,p.createElement("th",{className:"custom-fonts__table-check"},p.createElement("input",{type:"checkbox"})),p.createElement("th",{className:"custom-fonts__table-font-family"},"Font Family"),p.createElement("th",{className:"custom-fonts__table-preview"},"Preview"))),p.createElement("tbody",null,t),p.createElement("tfoot",null,p.createElement("tr",null,p.createElement("th",{className:"custom-fonts__table-check"},p.createElement("input",{type:"checkbox"})),p.createElement("th",{className:"custom-fonts__table-font-family"},"Font Family"),p.createElement("th",{className:"custom-fonts__table-preview"},"Preview")))),p.createElement("div",{className:"custom-fonts__const-part-of-table"},p.createElement("div",{className:"custom-fonts__possible-actions"},p.createElement("select",{className:"custom-fonts__possible-actions-drop-list"},p.createElement("option",null,"Bulk actions"),p.createElement("option",null,"Edit"),p.createElement("option",null,"Move To Trash")),p.createElement("button",{className:"custom-fonts__btn custom-fonts__btn_apply"},"Apply")),p.createElement("span",{className:"custom-fonts__number-of-items"},n," items")))}}]),l}(p.Component),Sl=(0,kl.qC)((0,g.$j)(null,{getCustomFonts:Nl.R}))(Ol),Cl=n(51115),Zl=n(25281);var jl=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){return p.createElement("div",null,p.createElement("div",{className:"edit-font__content-publish-header"},p.createElement("span",{className:"edit-font__content-publish-title"},"Publish"),p.createElement("div",null,p.createElement("button",{onClick:this.props.changePublishSizeMin,className:"edit-font__content-publish-arrow"},p.createElement(Zl.Z,null)),p.createElement("button",{onClick:this.props.changePublishSizeMax,className:"edit-font__content-publish-arrow"},p.createElement(Cl.Z,null)))),p.createElement("div",{className:"edit-font__content-publish-body"},p.createElement("button",{type:"submit",className:"edit-font__content-publish-btn"},"Update"),-1!==this.props.pathName.indexOf("edit-font")&&p.createElement("span",{onClick:this.props.deleteFont,className:"edit-font__content-publish-trash"},"Move to Trash")))}}]),r}(p.Component),Rl=n(28428),Pl=n(59067),Al=["fontsLibrary"];var Dl=[100,200,300,400,500,600,700,800,900],Fl=["normal","italic","oblique"],Ml=function(e){(0,s.Z)(m,e);var t,n,l=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).state={fontFamily:"",fontWeight:"",fontStyle:"",woffFile:"",woff2File:"",ttfFile:"",svgFile:"",eotFile:"",fontsLibrary:[],editFont:!1,publishMaxSize:!1},e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.postFont=function(t){t.persist(),new K.default({route:"/admin/ajax/media"}).postFiles(t.target.files).then((function(n){var r;return e.setState((r={},(0,a.Z)(r,t.target.name,n[0].url),(0,a.Z)(r,"fontsLibrary",[].concat((0,zt.Z)(e.state.fontsLibrary),[n[0]])),r))}))},e.submitHandler=function(t){var n=e.state;n.woffFile,n.woff2File,n.ttfFile,n.svgFile,n.eotFile,t.preventDefault();var a=e.state,r=(a.fontsLibrary,(0,E.Z)(a,Al)),o={};for(var i in r)r[i]&&(o[i]=r[i]);e.addFontVariation(o)},e.addFontVariation=function(){var t=(0,r.Z)(d().mark((function t(n){var a,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.metaValue,r=a[e.findIndexCurrentFont()],delete n.fontFamily,delete n.editFont,n.id=oe(),r.variations.push(n),e.setNewMetaValue(a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteFontVariation=function(){var t=(0,r.Z)(d().mark((function t(n){var a,r,o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.metaValue,r=a[e.findIndexCurrentFont()],o=r.variations.findIndex((function(e){return e.id==n})),r.variations.splice(o,1),e.setNewMetaValue(a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteFont=(0,r.Z)(d().mark((function t(){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.props.metaValue).splice(e.findIndexCurrentFont(),1),e.setNewMetaValue(n),e.setState({fontFamily:""});case 4:case"end":return t.stop()}}),t)}))),e.setNewMetaValue=function(){var t=(0,r.Z)(d().mark((function t(n){var a,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wl.getMetaByName("custom_fonts");case 2:return(a=t.sent).setMetaValue(n),t.next=6,a.save();case 6:return t.next=8,wl.getMetaByName("custom_fonts");case 8:return a=t.sent,t.next=11,a.getMetaValue();case 11:r=t.sent,e.props.getCustomFonts(r);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editFontOn=function(){e.setState({editFont:!0})},e.editFontOff=function(){e.setState({editFont:!1})},e.changePublishSizeMax=function(){e.setState({publishMaxSize:!0})},e.changePublishSizeMin=function(){e.setState({publishMaxSize:!1})},e}return(0,i.Z)(m,[{key:"componentDidMount",value:function(){var e=this;new K.default({route:"/admin/ajax/media?type=font"}).getAll().then((function(t){return e.setState({fontsLibrary:t})})),this.initialFontName()}},{key:"initialFontName",value:function(){var e=this.props.metaValue;if(null!==e){var t=e[this.findIndexCurrentFont()].fontFamily;this.setState({fontFamily:t})}}},{key:"findIndexCurrentFont",value:function(){var e=this.props.match.params.id;return this.props.metaValue.findIndex((function(t){return t.id==e}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.fontFamily,a=t.fontWeight,r=t.fontStyle,o=t.woffFile,i=t.woff2File,l=t.ttfFile,s=t.svgFile,c=t.eotFile,u=t.fontsLibrary,m=null;if(null!==this.props.metaValue){var d=this.props.metaValue.findIndex((function(t){return t.id==e.props.match.params.id}));-1!==d&&(m=this.props.metaValue[d].variations.map((function(t){return p.createElement("tr",{key:t.id,className:"edit-font__content-font-editing-line"},p.createElement("td",{className:"edit-font__content-font-editing-line__element"},p.createElement("span",{className:"edit-font__content-font-editing-line__element_property"},"Weight:"),t.fontWeight),p.createElement("td",{className:"edit-font__content-font-editing-line__element"},p.createElement("span",{className:"edit-font__content-font-editing-line__element_property"},"Style:"),t.fontStyle),p.createElement("td",{className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_description"},"Elementor Is Making The Web Beautiful"),p.createElement("td",{className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_edit"},p.createElement(Pl.Z,{fontSize:"small"}),"Edit"),p.createElement("td",{onClick:function(){return e.deleteFontVariation(t.id)},className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_delete"},p.createElement(Rl.Z,{fontSize:"small"}),"Delete"))})))}return p.createElement("div",{className:"edit-font"},p.createElement("div",{className:"custom-fonts__title"},"Edit Font",p.createElement(h.rU,{to:"/admin/assets/add-new-font"},p.createElement("button",{className:"custom-fonts__btn custom-fonts__btn_add-new"},"Add new"))),p.createElement("div",{className:"edit-font__content"},p.createElement("div",{className:"edit-font__content-main"},p.createElement("div",{className:"admin-content admin-content-fonts-form"},p.createElement("form",{className:"admin-form field-form",onSubmit:this.submitHandler},p.createElement("input",{className:"edit-font__content-input edit-font__content-input-add-font",placeholder:"Enter Font Family",required:!0,type:"text",id:"fontFamily",name:"fontFamily",value:n,onChange:this.changeHandler}),this.state.publishMaxSize?null:p.createElement("div",{className:"edit-font__content-publish edit-font__content-publish_min"},p.createElement(jl,{pathName:this.props.location.pathname,deleteFont:this.deleteFont,changePublishSizeMax:this.changePublishSizeMax,changePublishSizeMin:this.changePublishSizeMin})),this.state.publishMaxSize?p.createElement("div",{className:"edit-font__content-publish"},p.createElement(jl,{pathName:this.props.location.pathname,deleteFont:this.deleteFont,changePublishSizeMax:this.changePublishSizeMax,changePublishSizeMin:this.changePublishSizeMin})):null,p.createElement("div",{className:"edit-font__content-subtitle"},"Manage Your Font Files"),p.createElement("table",{className:"font-table"},p.createElement("tbody",null,m)),p.createElement("div",{className:this.state.editFont?"add-variatons-open":"add-variatons-close"},p.createElement("table",{className:"edit-font__content-main__variation-table"},p.createElement("tbody",null,p.createElement("tr",{className:"edit-font__content-font-editing-line"},p.createElement("td",{className:"edit-font__content-font-editing-line__element"},p.createElement("span",{className:"edit-font__content-font-editing-line__element_property"},"Weight:"),p.createElement("select",{id:"fontWeight",name:"fontWeight",value:a,onChange:this.changeHandler,className:"edit-font__content-font-editing-line__element-value"},p.createElement("option",{value:""}),Dl.map((function(e){return p.createElement("option",{value:e,key:e},e)})))),p.createElement("td",{className:"edit-font__content-font-editing-line__element"},p.createElement("span",{className:"edit-font__content-font-editing-line__element_property"},"Style:"),p.createElement("select",{id:"fontStyle",name:"fontStyle",value:r,onChange:this.changeHandler,className:"edit-font__content-font-editing-line__element-value"},p.createElement("option",{value:""}),Fl.map((function(e){return p.createElement("option",{value:e,key:e},e)})))),p.createElement("td",{className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_description"},"Elementor Is Making The Web Beautiful"),p.createElement("td",{className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_edit",onClick:this.editFontOff},"Close"),p.createElement("td",{className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_delete"},p.createElement(Rl.Z,{fontSize:"small"}),"Delete")))),p.createElement("div",{className:"form-group-wrap"},p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"WOFF File"),p.createElement("input",{className:"showFontUrl",value:o}),p.createElement("select",{name:"woffFile",value:o,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"The Web Open Font Format, Used by Modern Browsers"),u.filter((function(e){return e.filename.endsWith(".woff")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))),p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"WOFF2 File"),p.createElement("input",{className:"showFontUrl",value:i}),p.createElement("select",{name:"woff2File",value:i,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"The Web Open Font Format 2, Used by Super Modern Browsers"),u.filter((function(e){return e.filename.endsWith(".woff2")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))),p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"TTF File"),p.createElement("input",{className:"showFontUrl",value:l}),p.createElement("select",{name:"ttfFile",value:l,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"TrueType Fonts, Used for better supporting Safari, Android, iOS"),u.filter((function(e){return e.filename.endsWith(".ttf")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))),p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"SVG File"),p.createElement("input",{className:"showFontUrl",value:s}),p.createElement("select",{name:"svgFile",value:s,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"SVG fonts allow SVG to be used as glyphs when displaying text, Used by Legacy iOS"),u.filter((function(e){return e.filename.endsWith(".svg")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))),p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"EOT File"),p.createElement("input",{className:"showFontUrl",value:c}),p.createElement("select",{name:"eotFile",value:c,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"Embedded OpenType, Used by IE6-IE9 Browsers"),u.filter((function(e){return e.filename.endsWith(".eot")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))))))),p.createElement("button",{onClick:this.editFontOn,className:"edit-font__content-main-btn"},"ADD FONT VARIATION"))))}}]),m}(p.Component),Tl=(0,kl.qC)((0,g.$j)(null,{getCustomFonts:Nl.R}),b.EN)(Ml),Hl=["fontsLibrary"];var Bl=[100,200,300,400,500,600,700,800,900],zl=["normal","italic","oblique"],ql=function(e){(0,s.Z)(m,e);var t,n,l=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function m(){var e;(0,o.Z)(this,m);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=l.call.apply(l,[this].concat(n))).state={fontFamily:"",fontWeight:"",fontStyle:"",woffFile:"",woff2File:"",ttfFile:"",svgFile:"",eotFile:"",fontsLibrary:[],editFont:!1,publishMaxSize:!1,fontSavedSuccessfully:!1},e.changeHandler=function(t){var n=t.target,r=n.value,o=n.name;e.setState((0,a.Z)({},o,r))},e.postFont=function(t){t.persist(),new K.default({route:"/admin/ajax/media"}).postFiles(t.target.files).then((function(n){var r;return e.setState((r={},(0,a.Z)(r,t.target.name,n[0].url),(0,a.Z)(r,"fontsLibrary",[].concat((0,zt.Z)(e.state.fontsLibrary),[n[0]])),r))}))},e.submitHandler=function(t){var n=e.state;n.woffFile,n.woff2File,n.ttfFile,n.svgFile,n.eotFile,t.preventDefault();var a=e.state,r=(a.fontsLibrary,(0,E.Z)(a,Hl)),o={};for(var i in r)r[i]&&(o[i]=r[i]);e.addNewFont(o)},e.addNewFont=function(){var t=(0,r.Z)(d().mark((function t(n){var a,r,o,i,l;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wl.getMetaByName("custom_fonts");case 2:return a=t.sent,null===(r=e.props.metaValue)&&(r=[]),o=oe(),i={id:o,fontFamily:n.fontFamily,variations:[{id:oe(),fontStyle:n.fontStyle,fontWeight:n.fontWeight,woffFile:n.woffFile,woff2File:n.woff2File,ttfFile:n.ttfFile,svgFile:n.svgFile,eotFile:n.eotFile}]},r.push(i),a.setMetaValue(r),t.next=11,a.save();case 11:return t.next=13,wl.getMetaByName("custom_fonts");case 13:return a=t.sent,t.next=16,a.getMetaValue();case 16:l=t.sent,e.props.getCustomFonts(l),e.setState({fontSavedSuccessfully:!0,idCurrentFontForRedirect:o});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editFontOn=function(){e.setState({editFont:!0})},e.editFontOff=function(){e.setState({editFont:!1})},e.changePublishSizeMax=function(){e.setState({publishMaxSize:!0})},e.changePublishSizeMin=function(){e.setState({publishMaxSize:!1})},e}return(0,i.Z)(m,[{key:"componentDidMount",value:function(){var e=this;new K.default({route:"/admin/ajax/media?type=font"}).getAll().then((function(t){return e.setState({fontsLibrary:t})}))}},{key:"render",value:function(){var e=this.state,t=e.fontFamily,n=e.fontWeight,a=e.fontStyle,r=e.woffFile,o=e.woff2File,i=e.ttfFile,l=e.svgFile,s=e.eotFile,c=e.fontsLibrary;return this.state.fontSavedSuccessfully?p.createElement(b.l_,{from:"/admin/assets/add-new-font",to:"/admin/assets/edit-font/".concat(this.state.idCurrentFontForRedirect)}):p.createElement("div",{className:"edit-font"},p.createElement("div",{className:"custom-fonts__title"},"Add New Font"),p.createElement("div",{className:"edit-font__content"},p.createElement("div",{className:"edit-font__content-main"},p.createElement("div",{className:"admin-content admin-content-fonts-form"},p.createElement("form",{className:"admin-form field-form",onSubmit:this.submitHandler},p.createElement("input",{className:"edit-font__content-input edit-font__content-input-add-font",placeholder:"Enter Font Family",required:!0,type:"text",id:"fontFamily",name:"fontFamily",value:t,onChange:this.changeHandler}),this.state.publishMaxSize?null:p.createElement("div",{className:"edit-font__content-publish edit-font__content-publish_min"},p.createElement(jl,{pathName:this.props.location.pathname,changePublishSizeMax:this.changePublishSizeMax,changePublishSizeMin:this.changePublishSizeMin})),this.state.publishMaxSize?p.createElement("div",{className:"edit-font__content-publish"},p.createElement(jl,{pathName:this.props.location.pathname,changePublishSizeMax:this.changePublishSizeMax,changePublishSizeMin:this.changePublishSizeMin})):null,p.createElement("div",{className:"edit-font__content-subtitle"},"Manage Your Font Files"),p.createElement("div",{className:this.state.editFont?"add-variatons-open":"add-variatons-close"},p.createElement("div",{className:"edit-font__content-font-editing-line"},p.createElement("span",{className:"edit-font__content-font-editing-line__element"},p.createElement("span",{className:"edit-font__content-font-editing-line__element_property"},"Weight:"),p.createElement("select",{id:"fontWeight",name:"fontWeight",value:n,onChange:this.changeHandler,className:"edit-font__content-font-editing-line__element-value"},p.createElement("option",{value:""}),Bl.map((function(e){return p.createElement("option",{value:e,key:e},e)})))),p.createElement("span",{className:"edit-font__content-font-editing-line__element"},p.createElement("span",{className:"edit-font__content-font-editing-line__element_property"},"Style:"),p.createElement("select",{id:"fontStyle",name:"fontStyle",value:a,onChange:this.changeHandler,className:"edit-font__content-font-editing-line__element-value"},p.createElement("option",{value:""}),zl.map((function(e){return p.createElement("option",{value:e,key:e},e)})))),p.createElement("span",{className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_description"},"Elementor Is Making The Web Beautiful"),p.createElement("span",{className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_edit",onClick:this.editFontOff},"Close"),p.createElement("span",{className:"edit-font__content-font-editing-line__element edit-font__content-font-editing-line__element_delete"},p.createElement(Rl.Z,{fontSize:"small"}),"Delete")),p.createElement("div",{className:"form-group-wrap"},p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"WOFF File"),p.createElement("input",{className:"showFontUrl",value:r}),p.createElement("select",{name:"woffFile",value:r,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"The Web Open Font Format, Used by Modern Browsers"),c.filter((function(e){return e.filename.endsWith(".woff")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))),p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"WOFF2 File"),p.createElement("input",{className:"showFontUrl",value:o}),p.createElement("select",{name:"woff2File",value:o,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"The Web Open Font Format 2, Used by Super Modern Browsers"),c.filter((function(e){return e.filename.endsWith(".woff2")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))),p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"TTF File"),p.createElement("input",{className:"showFontUrl",value:i}),p.createElement("select",{name:"ttfFile",value:i,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"TrueType Fonts, Used for better supporting Safari, Android, iOS"),c.filter((function(e){return e.filename.endsWith(".ttf")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))),p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"SVG File"),p.createElement("input",{className:"showFontUrl",value:l}),p.createElement("select",{name:"svgFile",value:l,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"SVG fonts allow SVG to be used as glyphs when displaying text, Used by Legacy iOS"),c.filter((function(e){return e.filename.endsWith(".svg")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))),p.createElement("div",{className:"form-group d-flex justify-content-between"},p.createElement("div",{className:"form-group-input-label"},"EOT File"),p.createElement("input",{className:"showFontUrl",value:s}),p.createElement("select",{name:"eotFile",value:s,onChange:this.changeHandler,className:"form-control w-auto flex-grow-1 mx-2"},p.createElement("option",{value:""},"Embedded OpenType, Used by IE6-IE9 Browsers"),c.filter((function(e){return e.filename.endsWith(".eot")})).map((function(e){var t=e.filename,n=e.url;return p.createElement("option",{value:n,key:t},t)})))))))),p.createElement("button",{onClick:this.editFontOn,className:"edit-font__content-main-btn"},"ADD FONT VARIATION"))))}}]),m}(p.Component),Il=(0,kl.qC)((0,g.$j)(null,{getCustomFonts:Nl.R}),b.EN)(ql),Vl=n(96041);function Ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(93978);var Wl=function(e){(0,s.Z)(f,e);var t,n,a,m=(n=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function f(e){var t;return(0,o.Z)(this,f),(t=m.call(this,e)).insertRaw=function(){var e,n,a,r;if(t.state.assets.forEach((function(n){n.name===t.state.selectedAsset&&(e=n)})),!e)throw"Asset with name ".concat(t.state.selectedAsset," not found in Assets Browser (").concat(t.state.activeTab,")!");"svg"===e.type?new K.default({route:e.url}).getAsText().then((function(n){n=(n=(n=n.replace(/<!--[\s\S]*?-->/g,"")).replace(/<![\s\S]*?>/g,"")).replace(/<\?[\s\S]*?\?>/g,""),t.props.onChoose(Ll(Ll({},e),{},{rawSVG:n})),t.props.dispatch((0,tr.mp)())})):(n=e.url,a=function(n){t.props.onChoose(Ll(Ll({},e),{},{dataUrl:n})),t.props.dispatch((0,tr.mp)())},(r=new XMLHttpRequest).onload=function(){var e=new FileReader;e.onloadend=function(){a(e.result)},e.readAsDataURL(r.response)},r.open("GET",n),r.responseType="blob",r.send())},t.tabClick=t.tabClick.bind((0,l.Z)(t)),t.toggleBrowser=t.toggleBrowser.bind((0,l.Z)(t)),t.selectAsset=t.selectAsset.bind((0,l.Z)(t)),t.chooseAsset=t.chooseAsset.bind((0,l.Z)(t)),t.state={activeTab:"media",tabs:[{name:"icons",title:"Icons Library"},{name:"media",title:"Media Library"},{name:"video",title:"Video Library"}],svgAssets:[],assets:t.getAssets("media"),selectedAsset:null,mediaAssets:[],videoAssets:[]},t.mediaResource=new K.default({route:"/admin/ajax/media?type=image"}),t.svgResource=new K.default({route:"/admin/ajax/media?type=svg"}),t.videoResource=new K.default({route:"/admin/ajax/media?type=media"}),t}return(0,i.Z)(f,[{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.props.tabs&&e.tabs!==this.props.tabs){var a,r=(0,zt.Z)(this.state.tabs);r=r.filter((function(e){return-1===n.props.tabs.indexOf(e.name)||a||(a=e.name),-1!==n.props.tabs.indexOf(e.name)})),a||(a="media"),this.setState((function(e){return Ll(Ll({},e),{},{tabs:r,activeTab:a})}),(function(){n.setActiveTab(a)}))}}},{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t,n,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.videoResource.getAll().then((function(e){return a.setState({videoAssets:e})})),e.next=4,this.svgResource.getAll();case 4:return t=e.sent,this.setState((function(e){return Ll(Ll({},e),{},{svgAssets:t})})),e.next=8,this.mediaResource.getAll();case 8:n=e.sent,this.setState((function(e){return"media"===(e=Ll(Ll({},e),{},{mediaAssets:n})).activeTab&&(e.assets=n),e})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("error",e.t0);case 15:document.addEventListener("keydown",(function(e){"Escape"===e.key&&a.toggleBrowser()}));case 16:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(){return t.apply(this,arguments)})},{key:"getAssets",value:function(e){switch(e||(e=this.state.activeTab),e){case"icons":return this.state.svgAssets;case"media":return this.state?this.state.mediaAssets:[]}return[]}},{key:"selectAsset",value:function(e){var t=e.currentTarget.dataset.assetname;this.setState((function(e){return Ll(Ll({},e),{},{selectedAsset:t})}))}},{key:"tabClick",value:function(e){this.setActiveTab(e.target.dataset.tab)}},{key:"setActiveTab",value:function(e){var t=this;this.setState((function(n){return Ll(Ll({},n),{},{activeTab:e,assets:t.getAssets(e)})}))}},{key:"toggleBrowser",value:function(){this.setState((function(e){return Ll(Ll({},e),{},{selectedAsset:null})})),this.props.dispatch((0,tr.mp)())}},{key:"chooseAsset",value:function(){var e,t=this;if(this.state.assets.forEach((function(n){n.name===t.state.selectedAsset&&(e=n)})),!e)throw"Asset with name ".concat(this.state.selectedAsset," not found in Assets Browser (").concat(this.state.activeTab,")!");this.props.onChoose(e),this.setState((function(e){return Ll(Ll({},e),{},{selectedAsset:null})})),this.props.dispatch((0,tr.mp)())}},{key:"render",value:function(){var e=this,t=this.state,n=t.videoAssets,a=t.activeTab,r=this.props.rawEnable,o="assets-browser";this.props.active&&(o+=" assets-browser_active");var i="btn";return this.state.selectedAsset?i+=" btn_success":i+=" btn_disabled",this.props.active?p.createElement("div",{className:o},p.createElement("div",{className:"assets-browser__bg",onClick:this.toggleBrowser}),p.createElement("div",{className:"assets-browser-content"},p.createElement("div",{className:"assets-browser-top"},p.createElement("div",{className:"caption"},"Append Media"),p.createElement("button",{className:"btn btn_bare assets-browser__close",onClick:this.toggleBrowser},p.createElement(Vl.Z,{className:"icon"})),p.createElement("div",{className:"assets-browser-nav"},this.state.tabs.map((function(t){var n="assets-browser__tab";return e.state.activeTab===t.name&&(n+=" assets-browser__tab_active"),p.createElement("button",{className:n,onClick:e.tabClick,key:t.name,"data-tab":t.name},t.title)})))),this.state.assets.length?p.createElement("div",{className:"assets-browser-choose-frame"},this.state.assets.map((function(t){var n,a="asset-choose",r={className:"asset-choose__content"};return"icons"===e.state.activeTab&&(t.iconComponent?n=t.iconComponent:(n="img",t.name=t.filename,r.src=t.url),a+=" asset-choose_icon",r.width="35",r.height="35"),"media"===e.state.activeTab&&(n="img",r.src=t.url,a+=" asset-choose_media",t.name=t.filename,t.assetType="media"),t.assetType=e.state.activeTab,e.state.selectedAsset===t.name&&(a+=" asset-choose_selected"),p.createElement("div",{className:a,"data-assetname":t.name,key:t.name,onClick:e.selectAsset},p.createElement(n,r))}))):"","video"===a&&p.createElement("div",{className:"assets-browser-choose-frame"},n.map((function(t){return p.createElement("div",{className:"assets-list__item item col-1",onClick:e.selectAsset},p.createElement("svg",{width:"43",height:"56",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"item__icon-background"},p.createElement("path",{d:"M30.485 0H1.463C.655 0 0 .655 0 1.926V55c0 .345.655 1 1.463 1h40.074c.808 0 1.463-.655 1.463-1V12.978c0-.696-.093-.92-.257-1.085L31.107.257A.884.884 0 0030.485 0z",fill:"#F7F8F9"}),p.createElement("path",{d:"M31 .151V12h11.849L31 .151z",fill:"#E0E1E6"}),p.createElement("path",{d:"M41.537 56H1.463A1.463 1.463 0 010 54.537V39h43v15.537c0 .808-.655 1.463-1.463 1.463z",fill:"#7CA727"}),p.createElement("path",{d:"M18.262 52h-1.86v-6.07L13.96 52h-.806l-2.444-6.07V52H8.863v-8.67h2.587l2.106 5.238 2.106-5.239h2.6V52zM21.83 52h-1.846v-8.67h4.056c.91 0 1.62.268 2.132.805.52.529.78 1.192.78 1.99 0 .788-.26 1.45-.78 1.988-.52.537-1.23.806-2.132.806h-2.21V52zm1.963-4.706c.373 0 .676-.104.91-.312.243-.217.364-.503.364-.858s-.121-.637-.364-.845c-.234-.217-.537-.325-.91-.325H21.83v2.34h1.963zM33.556 52H31.71v-1.794h-4.147V48.75l3.445-5.42h2.548v5.251h1.118v1.625h-1.118V52zm-1.846-3.419v-3.614l-2.34 3.614h2.34z",fill:"#fff"}),p.createElement("path",{d:"M16.923 28a.964.964 0 01-.444-.108.87.87 0 01-.479-.767v-12.25a.87.87 0 01.48-.768.972.972 0 01.94.03l10.153 6.124c.265.161.427.44.427.739 0 .3-.162.577-.427.738l-10.154 6.125a.968.968 0 01-.496.137zm.923-11.532v9.063L25.357 21l-7.51-4.532z",fill:"#D5D7DE"}),p.createElement("path",{d:"M21 35c-7.72 0-14-6.28-14-14S13.28 7 21 7s14 6.28 14 14-6.28 14-14 14zm0-26.133C14.31 8.867 8.867 14.31 8.867 21c0 6.69 5.443 12.133 12.133 12.133 6.69 0 12.133-5.443 12.133-12.133 0-6.69-5.443-12.133-12.133-12.133z",fill:"#D5D7DE"})))}))),p.createElement("div",{className:"assets-browser-bottom"},p.createElement("button",{className:i,onClick:this.chooseAsset},"Choose"),r&&p.createElement("button",{className:i+" ml-3",onClick:this.insertRaw},"Insert Raw")))):""}}]),f}(p.Component),Yl=(0,g.$j)((function(e){return Ll({},e.assetsManagerSettings)}))(Wl),Kl=n(84554);function Gl(e){return{type:"SET_USERS_ONLINE",members:e}}n(13295);var Jl=n(51626),Ql=n(58962);function $l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var es=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).updateAreas=(0,r.Z)(d().mark((function e(){var n,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new K.default({route:"/admin/ajax/areas"}),e.next=3,n.getAll();case 3:a=(a=e.sent).filter((function(e){return-1===Ql.Z.DEFAULT_AREAS.indexOf(e.name)})),t.setState((function(e){return Xl(Xl({},e),{},{areas:a})}));case 6:case"end":return e.stop()}}),e)}))),t.state={areas:[]},t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.updateAreas();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("div",{className:"admin-breadcrumbs__current"},"Areas")),p.createElement(h.rU,{className:"btn",to:"/admin/areas/add"},"Add New")),p.createElement("div",{className:"admin-content"},p.createElement(X,{columns:[{name:"title",title:"Title",url:!0,editUrl:!0,tag:"Link"}],quickActions:[{tag:"button",route:"/admin/ajax/areas/:id",method:"delete",confirm:"Are You Sure?",after:function(){e.updateAreas()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:this.state.areas.map((function(e){return Xl(Xl({},e),{},{editUrl:"/admin/areas/"+e.id})}))})))}}]),m}(p.Component);function ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var as=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).submitForm=function(e){e.preventDefault(),t.props.onSubmit&&t.props.onSubmit(t.state.value)},t.changeValue=function(e,n){var a=ns({},t.state.value);"title"===n&&(a.name=de(e)),_.set(a,n,e),t.setState((function(e){return ns(ns({},e),{},{value:a})}))},t.state={value:e.value?e.value:{title:"",name:"",settings:{area_type:"sidebar",sidebar_type:"",sidebar_location:"",sidebar_width:"",custom_css:"",sidebar_checked:!1}}},t}return(0,i.Z)(r,[{key:"render",value:function(){var e=this,t=this.state.value,n=t.title,a=t.settings,r=t.name;return p.createElement("form",{method:"post",action:"/ajax/areas/add",onSubmit:this.submitForm},p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"title"},"Title"),p.createElement("input",{type:"text",id:"title",required:!0,name:"title",value:n,onChange:function(t){e.changeValue(t.target.value,"title")},className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"title"},"Name"),p.createElement("input",{type:"text",id:"title",required:!0,name:"title",disabled:!0,value:r,className:"form-control"})),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"settings.area_type"},"Area Type"),p.createElement("select",{id:"settings.area_type",required:!0,value:a.area_type,onChange:function(t){e.changeValue(t.target.value,"settings.area_type")},className:"form-control"},p.createElement("option",{value:"sidebar"},"Sidebar"))),"sidebar"===a.area_type&&p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"settings.sidebar_type"},"Sidebar Type"),p.createElement("select",{id:"settings.sidebar_type",required:!0,value:a.sidebar_type,onChange:function(t){e.changeValue(t.target.value,"settings.sidebar_type")},className:"form-control"},p.createElement("option",{value:""},"Choose..."),p.createElement("option",{value:"content_sidebar"},"Content Sidebar"),p.createElement("option",{value:"app_sidebar"},"App Sidebar"))),"sidebar"===a.area_type&&p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"settings.sidebar_location"},"Sidebar Location"),p.createElement("select",{id:"settings.sidebar_location",required:!0,value:a.sidebar_location,onChange:function(t){e.changeValue(t.target.value,"settings.sidebar_location")},className:"form-control"},p.createElement("option",{value:""},"Choose..."),p.createElement("option",{value:"left"},"Left"),p.createElement("option",{value:"right"},"Right"))),"sidebar"===a.area_type&&p.createElement("div",{className:"row"},p.createElement("div",{className:"form-group col-6"},p.createElement("label",{htmlFor:"settings.sidebar_width"},"Sidebar Width"),p.createElement("input",{type:"text",id:"settings.sidebar_width",required:!0,name:"settings.sidebar_width",value:a.sidebar_width,onChange:function(t){e.changeValue(t.target.value,"settings.sidebar_width")},className:"form-control"})),p.createElement("div",{className:"form-group col-6"},p.createElement("label",{htmlFor:"settings.sidebar_fixed"},"Sidebar Fixed"),p.createElement("br",null),p.createElement("input",{type:"checkbox",id:"settings.sidebar_fixed",name:"settings.sidebar_fixed",checked:a.sidebar_fixed,onChange:function(t){console.log(t.target.checked),e.changeValue(t.target.checked,"settings.sidebar_fixed")}}))),p.createElement("div",{className:"form-group"},p.createElement("label",{htmlFor:"settings.custom_css"},"Custom CSS"),p.createElement(Xr.Z,{value:a.custom_css,id:"settings.custom_css",mode:"css",onChange:function(t){e.changeValue(t,"settings.custom_css")}})),p.createElement("button",{className:"btn btn_success"},this.props.submitText||"Add"))}}]),r}(p.Component);var rs=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(e){var t;return(0,o.Z)(this,r),(t=a.call(this,e)).submitForm=function(e){try{t.resource.post(e),alert("Success"),t.props.history.push("/admin/areas")}catch(e){console.error(e)}},t.state={},t.resource=new K.default({route:"/admin/ajax/areas"}),t}return(0,i.Z)(r,[{key:"render",value:function(){return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{to:"/admin/areas",className:"admin-breadcrumbs__link"},"Areas"))),p.createElement("div",{className:"admin-content"},p.createElement(as,{onSubmit:this.submitForm})))}}]),r}(p.Component),os=(0,b.EN)(rs);function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ss=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).submitForm=function(e){try{t.resource.put(t.props.match.params.id,e),alert("Success"),t.props.history.push("/admin/areas")}catch(e){console.error(e)}},t.state={},t.resource=new K.default({route:"/admin/ajax/areas"}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.resource.get(this.props.match.params.id);case 3:t=e.sent,this.setState((function(e){return ls(ls({},e),{},{value:t})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{to:"/admin/areas",className:"admin-breadcrumbs__link"},"Areas"))),p.createElement("div",{className:"admin-content"},this.state.value&&p.createElement(as,{onSubmit:this.submitForm,submitText:"Update",value:this.state.value})))}}]),m}(p.Component),cs=(0,b.EN)(ss),us=n(16941);function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ps,fs=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){var e;(0,o.Z)(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=a.call.apply(a,[this].concat(n))).state={showContent:!1},e}return(0,i.Z)(r,[{key:"render",value:function(){var e=this,t=this.state.showContent;return p.createElement("div",{className:"altrp-menu-item"},p.createElement("div",{className:"altrp-menu-item__handle",onDoubleClick:function(){return e.setState((function(t){return ds(ds({},t),{},{showContent:!e.state.showContent})}))}},p.createElement("span",{className:"altrp-menu-item__title"},this.props.item.label||"(no Label)")),t&&p.createElement("div",{className:"altrp-menu-item-content p-3 "},p.createElement("label",{htmlFor:"".concat(this.props.indexes.join("."),".label"),className:"form-label"},"Label"),p.createElement("input",{type:"text",className:"form-control",id:"".concat(this.props.indexes.join("."),".label"),onChange:function(t){var n=t.target.value,a=e.props.indexes.map((function(e){return"children.".concat(e)})).join(".")+".label";e.props.updateValue(n,a)},value:this.props.item.label}),p.createElement("label",{htmlFor:"".concat(this.props.indexes.join("."),".url"),className:"form-label"},"URL"),p.createElement("input",{type:"text",className:"form-control",id:"".concat(this.props.indexes.join("."),".url"),onChange:function(t){var n=t.target.value,a=e.props.indexes.map((function(e){return"children.".concat(e)})).join(".")+".url";e.props.updateValue(n,a)},value:this.props.item.url}),p.createElement("label",{htmlFor:"".concat(this.props.indexes.join("."),".icon"),className:"form-label"},"Icon"),p.createElement("button",{onClick:function(){var t=e.props.indexes.map((function(e){return"children.".concat(e)})).join(".")+".icon";e.props.updateValue("",t)},className:"btn btn_link text-danger fs-2 altrp-menu-item__delete"},"delete Icon"),p.createElement(or,{value:this.props.item.icon,returnType:"text",onChange:function(t){var n=t,a=e.props.indexes.map((function(e){return"children.".concat(e)})).join(".")+".icon";e.props.updateValue(n,a)}}),p.createElement("button",{onClick:function(){e.props.deleteItem(e.props.indexes)},className:"btn btn_link text-danger fs-2 altrp-menu-item__delete"},"delete")),p.createElement(us._O,{className:"altrp-menu-item-children",group:"nested",setList:function(t){return e.props.updateChildren(t,e.props.indexes)},list:this.props.item.children},this.props.item.children.map((function(t,n){return p.createElement(r,{item:t,key:t.id,indexes:[].concat((0,zt.Z)(e.props.indexes),[n]),deleteItem:e.props.deleteItem,updateChildren:e.props.updateChildren,updateValue:e.props.updateValue})}))))}}]),r}(p.Component);function hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vs={name:"",children:[],settings:{toggle_icon:""}},gs=Ze.ZP.div(ps||(ps=(0,Ce.Z)(["\n  & {\n    border: 1px solid #dcdcde;\n  }\n\n  & .altrp-menu-item {\n    line-height: 1.5;\n    position: relative;\n  }\n\n  & .altrp-menu-item__handle {\n    border: 1px solid #dcdcde;\n    position: relative;\n    padding: 10px 15px;\n    height: auto;\n    min-height: 20px;\n    max-width: 382px;\n    line-height: 1.5;\n    overflow: hidden;\n    word-wrap: break-word;\n    cursor: move;\n    background-color: #F7F8F9;\n  }\n\n  & .altrp-menu-item-content {\n    border: 1px solid #dcdcde;\n    border-top: none;\n    max-width: 382px;\n  }\n\n  & .altrp-menu-builder-top {\n    border-bottom: 1px solid #dcdcde;\n\n    .form-control {\n      width: 400px;\n    }\n  }\n\n  & .altrp-menu-sortable {\n    width: calc(100% - 400px);\n    background-color: #fff;\n  }\n\n  & .altrp-menu-item-children {\n    padding-bottom: 6px;\n    padding-top: 6px;\n    padding-left: 20px;\n  }\n\n  & .altrp-menu-item-content .form-control:not(:first-child) {\n    margin-bottom: 13px;\n  }\n\n  & .altrp-menu-builder-add {\n    width: 400px;\n    border-right: 1px solid #dcdcde;\n\n    .form-label {\n      width: auto;\n      margin-bottom: 0;\n    }\n  }\n\n  & .altrp-menu-item__delete {\n    font-size: 12px;\n  }\n\n  & .altrp-menu-builder-actions {\n    width: 100%;\n    border-top: 1px solid #dcdcde;\n    background-color: #fff;\n  }\n"]))),_s=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).addNew=function(){var e={children:[],label:t.state.new.label,url:t.state.new.url,id:oe()},n=bs({},t.state.value);n.children=(0,zt.Z)(n.children),n.children.push(e),t.setState((function(e){return bs(bs({},e),{},{new:{label:"",url:""},value:n})}))},t.save=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=bs({},t.state.value)).children=JSON.stringify(n.children),n.settings=JSON.stringify(n.settings),e.next=6,t.resource.put(t.props.menuId,n);case 6:e.sent.success&&(alert("Success"),t.props.afterSave&&t.props.afterSave()),e.next=26;break;case 10:if(e.prev=10,e.t0=e.catch(0),!(e.t0.res instanceof Promise)){e.next=19;break}return e.next=15,e.t0.res.then();case 15:e.t0=e.sent,e.t0=(0,U.hB)(e.t0),e.next=24;break;case 19:if(!(e.t0 instanceof Promise)){e.next=24;break}return e.next=22,e.t0.then();case 22:e.t0=e.sent,e.t0=(0,U.hB)(e.t0);case 24:console.error(e.t0),alert("Error: "+e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[0,10]])}))),t.delete=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("Sure?")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.resource.delete(t.props.menuId);case 6:e.sent.success&&(alert("Success"),t.props.afterDelete&&t.props.afterDelete()),e.next=26;break;case 10:if(e.prev=10,e.t0=e.catch(3),!(e.t0.res instanceof Promise)){e.next=19;break}return e.next=15,e.t0.res.then();case 15:e.t0=e.sent,e.t0=(0,U.hB)(e.t0),e.next=24;break;case 19:if(!(e.t0 instanceof Promise)){e.next=24;break}return e.next=22,e.t0.then();case 22:e.t0=e.sent,e.t0=(0,U.hB)(e.t0);case 24:console.error(e.t0),alert("Error: "+e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[3,10]])}))),t.state={value:bs({},vs),new:{label:"",url:""}},t.resource=new K.default({route:"/admin/ajax/menus"}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.menuId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.resource.get(this.props.menuId);case 5:(t=e.sent).children=(0,U.hB)(t.children,[]),t.name||(t.name=""),t.settings?t.settings=(0,U.hB)(t.settings,{toggle_icon:""}):t.settings={toggle_icon:""},this.setState((function(e){return bs(bs({},e),{},{value:t})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),this.props.fetchError&&this.props.fetchError();case 15:this.setState((function(e){return bs(bs({},e),{},{show:!0})}));case 16:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(!this.state.show)return null;var t=this.state.value;return p.createElement(gs,{className:"altrp-menu-builder d-flex flex-wrap"},p.createElement("div",{className:"altrp-menu-builder-top p-3 d-flex align-items-center w-100"},p.createElement("label",{htmlFor:"menu-name",className:"mb-0 mr-3"},"Menu Name"),p.createElement("input",{type:"text",id:"menu-name",value:t.name,onChange:function(t){var n=t.target.value,a=lr().set(e.state.value,"name",n);e.setState((function(e){return bs(bs({},e),{},{value:a})}))},className:"form-control"}),p.createElement("label",{htmlFor:"toggle-icon",className:"mb-0 mr-3 ml-3"},"Toggle Icon"),p.createElement(or,{id:"toggle-icon",returnType:"text",value:this.state.value.settings.toggle_icon,maxWidth:"50px",maxHeight:"50px",onChange:function(t){var n=lr().set(e.state.value,"settings.toggle_icon",t);e.setState((function(e){return bs(bs({},e),{},{value:n})}))}})),p.createElement("div",{className:"d-flex altrp-menu-builder-add align-items-center align-content-start p-3 flex-wrap"},p.createElement("label",{htmlFor:"label",className:"form-label "},"Label"),p.createElement("input",{type:"text",className:"form-control ",id:"label",onChange:function(t){var n=t.target.value;e.setState((function(e){return bs(bs({},e),{},{new:bs(bs({},e.new),{},{label:n})})}))},value:this.state.new.label}),p.createElement("label",{htmlFor:"url",className:"form-label "},"URL"),p.createElement("input",{type:"text",className:"form-control ",id:"url",onChange:function(t){var n=t.target.value;e.setState((function(e){return bs(bs({},e),{},{new:bs(bs({},e.new),{},{url:n})})}))},value:this.state.new.url}),p.createElement("button",{className:"btn btn_success mt-3",onClick:this.addNew},"Add new")),p.createElement(us._O,{className:"altrp-menu-sortable p-3",group:"nested",handle:".altrp-menu-item__handle",list:t.children,setList:function(t){return e.setState((function(e){return bs(bs({},e),{},{value:bs(bs({},e.value),{},{children:t})})}))}},t.children.map((function(t,n){return p.createElement(fs,{item:t,key:t.id,indexes:[n],deleteItem:function(t){var n=e.state.value,a=t.map((function(e){return"children.".concat(e)})).join(".");n=lr().delete(n,a),e.setState((function(e){return bs(bs({},e),{},{value:n})}))},updateValue:function(t,n){var a=e.state.value;a=lr().set(a,n,t),e.setState((function(e){return bs(bs({},e),{},{value:a})}))},updateChildren:function(t,n){var a=e.state.value,r=n.map((function(e){return"children.".concat(e)})).join(".")+".children";a=lr().set(a,r,t),e.setState((function(e){return bs(bs({},e),{},{value:a})}))}})}))),p.createElement("div",{className:"altrp-menu-builder-actions d-flex p-3"},p.createElement("button",{className:"btn btn_danger mr-3",onClick:this.delete},"Delete"),p.createElement("button",{className:"btn btn_success",onClick:this.save},"Save")))}}]),m}(p.Component);var ys=function(e){(0,s.Z)(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,u.Z)(t);if(n){var r=(0,u.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,c.Z)(this,e)});function r(){return(0,o.Z)(this,r),a.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){var e,t=this;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement(h.rU,{to:"/admin/menus",className:"admin-breadcrumbs__link"},"All Menus"))),p.createElement("div",{className:"admin-content"},p.createElement(_s,{menuId:null===(e=this.props.match.params)||void 0===e?void 0:e.id,afterDelete:function(){t.props.history.push("/admin/menus/")}})))}}]),r}(p.Component),Es=(0,b.EN)(ys);function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ks=function(e){(0,s.Z)(m,e);var t,n,a,l=(n=m,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(a){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,o.Z)(this,m),(t=l.call(this,e)).addNew=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.resource.post({name:"",children:"[]"});case 3:n=(n=e.sent).data,console.log(n),t.props.history.push("/admin/menus/".concat(n.id)),e.next=25;break;case 9:if(e.prev=9,e.t0=e.catch(0),!(e.t0.res instanceof Promise)){e.next=18;break}return e.next=14,e.t0.res.then();case 14:e.t0=e.sent,e.t0=(0,U.hB)(e.t0),e.next=23;break;case 18:if(!(e.t0 instanceof Promise)){e.next=23;break}return e.next=21,e.t0.then();case 21:e.t0=e.sent,e.t0=(0,U.hB)(e.t0);case 23:console.error(e.t0),alert("Error: "+e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[0,9]])}))),t.updateMenus=(0,r.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.resource=new K.default({route:"/admin/ajax/menus"}),e.next=3,t.resource.getAll();case 3:n=e.sent,t.setState((function(e){return ws(ws({},e),{},{menus:n})}));case 5:case"end":return e.stop()}}),e)}))),t.state={menus:[]},t.resource=new K.default({route:"/admin/ajax/menus"}),t}return(0,i.Z)(m,[{key:"componentDidMount",value:(t=(0,r.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.resource.getAll();case 3:t=e.sent,this.setState((function(e){return ws(ws({},e),{},{menus:t})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return p.createElement("div",{className:"admin-pages admin-page"},p.createElement("div",{className:"admin-heading"},p.createElement("div",{className:"admin-breadcrumbs"},p.createElement("div",{className:"admin-breadcrumbs__current"},"Areas")),p.createElement("button",{className:"btn",onClick:this.addNew},"Add New")),p.createElement("div",{className:"admin-content"},p.createElement(X,{columns:[{name:"name",title:"Name",default:"(no Name)",url:!0,editUrl:!0,tag:"Link"}],quickActions:[{tag:"button",route:"/admin/ajax/menus/:id",method:"delete",confirm:"Are You Sure?",after:function(){e.updateMenus()},className:"quick-action-menu__item_danger",title:"Trash"}],rows:this.state.menus.map((function(e){return ws(ws({},e),{},{editUrl:"/admin/menus/"+e.id})}))})))}}]),m}(p.Component),Ns=(0,b.EN)(ks);function Os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}window.React=p,window.ReactDOM=f,window.Component=p.Component;var Cs=function(e){(0,s.Z)(g,e);var t,a,m,f=(a=g,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(a);if(m){var n=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function g(e){var t;return(0,o.Z)(this,g),(t=f.call(this,e)).assetsActive=function(){t.setState({isAssetsActive:!0})},t.getMetaName=(0,r.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wl.getMetaByName("custom_fonts");case 2:return t=e.sent,e.next=5,t.getMetaValue();case 5:n=e.sent,Ee.default.dispatch((0,Nl.R)(n));case 7:case"end":return e.stop()}}),e)}))),t.state={adminState:{adminEnable:!0},pagesMenuShow:!1,models:[]},t.toggleMenu=t.toggleMenu.bind((0,l.Z)(t)),t}return(0,i.Z)(g,[{key:"componentDidMount",value:function(){var e=this;Ee.default.subscribe(this.updateAdminState.bind(this)),new K.default({route:"/admin/ajax/model_options"}).getAll().then((function(t){var n=t.options;return e.setState({models:n})})),this.getConnect(),this.getMetaName()}},{key:"getConnect",value:(t=(0,r.Z)(d().mark((function e(){var t,a,r,o,i,l,s,c,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new K.default({route:"/ajax/current-user"}).getAll();case 2:return o=(o=e.sent).data,Ee.default.dispatch((0,Jl.a2)(o)),e.next=7,new K.default({route:"/admin/ajax/settings"}).get("pusher_app_key");case 7:return i=e.sent,e.next=10,new K.default({route:"/admin/ajax/settings"}).get("websockets_port");case 10:return l=e.sent,e.next=13,new K.default({route:"/admin/ajax/settings"}).get("pusher_host");case 13:if(s=e.sent,i=null===(t=i)||void 0===t?void 0:t.pusher_app_key,l=null===(a=l)||void 0===a?void 0:a.websockets_port,s=null===(r=s)||void 0===r?void 0:r.pusher_host,i&&l){try{window.Pusher=n(86606),window.Echo=new Kl.Z({broadcaster:"pusher",key:i,wsHost:s,wsPort:l,forceTLS:!1,disableStats:!0}),console.log("Вебсокеты включены")}catch(e){console.log(e)}Ee.default.dispatch((0,We.Yz)(i)),Ee.default.dispatch((0,We.Uh)(l)),window.Echo.private("App.User."+o.id).notification((function(e){console.log(e)})),c=window.Echo.join("online"),u=[],c.here((function(e){u=e,Ee.default.dispatch(Gl(u))})).joining((function(e){u.push(e),Ee.default.dispatch(Gl(u))})).leaving((function(e){u.splice(u.indexOf(e),1),Ee.default.dispatch(Gl(u))}))}else console.log("Вебсокеты выключены");this.getPusherConnect();case 19:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getPusherConnect",value:function(){var e,t,n;null===(e=window)||void 0===e||null===(t=e.Echo)||void 0===t||null===(n=t.connector)||void 0===n||n.pusher.connection.bind("connected",(function(){Ee.default.dispatch((0,We.He)(!0))}))}},{key:"updateAdminState",value:function(){var e=Ee.default.getState().adminState;this.setState((function(t){return Ss(Ss({},t),{},{adminState:Ss({},e)})}))}},{key:"toggleMenu",value:function(){this.setState((function(e){return Ss(Ss({},e),{},{pagesMenuShow:!e.pagesMenuShow})}))}},{key:"render",value:function(){var e=this.state.models,t=["admin"];return this.state.adminState.adminEnable||t.push("pointer-event-none"),this.state.pagesMenuShow&&t.push("admin_pages-show"),p.createElement("div",{className:t.join(" ")},p.createElement(h.VK,null,p.createElement("nav",{className:"admin-nav"},p.createElement("div",{className:"admin-nav-top"},p.createElement(W,null),p.createElement(w,{className:"admin__bars",onClick:this.toggleMenu})),p.createElement("div",{className:"admin-nav-main"},this.state.pagesMenuShow?p.createElement(v.$B,{autoHide:!0,autoHideTimeout:500,autoHideDuration:200},p.createElement("ul",{className:"admin-nav-list"},p.createElement("li",null,p.createElement(h.rU,{to:"/admin/pages",className:"admin-nav-list__link"},p.createElement(Z,{className:"icon"}),p.createElement("span",null,"Pages"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/reports",className:"admin-nav-list__link"},p.createElement(A,{className:"icon"}),p.createElement("span",null,"Reports"))),"Models",e.sort((function(e,t){return e.label.toUpperCase()<t.label.toUpperCase()?-1:e.label.toUpperCase()>t.label.toUpperCase()?1:0})).map((function(e){var t=e.value,n=e.label;return p.createElement("li",{key:t},p.createElement(h.rU,{to:{pathname:"/admin/model/".concat(t),propsSearch:n},className:"admin-nav-list__link admin-nav-list__link--models"},n))})))):p.createElement(v.$B,{autoHide:!0,autoHideTimeout:500,autoHideDuration:200},p.createElement("ul",{className:"admin-nav-list"},p.createElement("li",null,p.createElement(h.rU,{to:"/admin/dashboard",className:"admin-nav-list__link"},p.createElement(S,{className:"icon"}),p.createElement("span",null,"Dashboard"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/assets",className:"admin-nav-list__link"},p.createElement(N,{className:"icon"}),p.createElement("span",null,"Assets")),p.createElement(El,null)),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/tables/models",className:"admin-nav-list__link"},p.createElement(T,{className:"icon"}),p.createElement("span",null,"Tables")),p.createElement("ul",{className:"admin-nav-sublist"},p.createElement("li",null,p.createElement(h.rU,{to:"/admin/tables/sql_editors",className:"admin-nav-list__link"},p.createElement(T,{className:"icon"}),p.createElement("span",null,"SQL Editors"))))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/templates",className:"admin-nav-list__link"},p.createElement(B,{className:"icon"}),p.createElement("span",null,"Templates"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/areas",className:"admin-nav-list__link"},p.createElement(B,{className:"icon"}),p.createElement("span",null,"Custom Areas"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/robots",className:"admin-nav-list__link"},p.createElement(B,{className:"icon"}),p.createElement("span",null,"Robots"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/users",className:"admin-nav-list__link"},p.createElement(q,{className:"icon"}),p.createElement("span",null,"Users"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/tools",className:"admin-nav-list__link"},p.createElement("span",null,"Tools"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/access/roles",className:"admin-nav-list__link"},p.createElement(q,{className:"icon"}),p.createElement("span",null,"Access"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/plugins",className:"admin-nav-list__link"},p.createElement(R,{className:"icon"}),p.createElement("span",null,"Plugins"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/settings",className:"admin-nav-list__link"},p.createElement(F,{className:"icon"}),p.createElement("span",null,"Settings"))),p.createElement("li",null,p.createElement(h.rU,{to:"/admin/menus",className:"admin-nav-list__link"},p.createElement(F,{className:"icon"}),p.createElement("span",null,"Menus")))))),p.createElement(ol,null)),p.createElement(b.rs,null,p.createElement(b.AW,{path:"/admin/reports/add"},p.createElement(vr,null)),p.createElement(b.AW,{path:"/admin/",exact:!0},p.createElement(b.l_,{to:"/admin/dashboard"})),p.createElement(b.AW,{path:"/admin/settings"},p.createElement(Xe,null)),p.createElement(b.AW,{path:"/admin/users",exact:!0},p.createElement(ot,null)),p.createElement(b.AW,{path:"/admin/users/new",exact:!0},p.createElement(Pt,null)),p.createElement(b.AW,{path:"/admin/users/user/:id",exact:!0},p.createElement(Ht,null)),p.createElement(b.AW,{path:"/admin/users/user/:id",exact:!0},p.createElement(ct,null)),p.createElement(b.AW,{path:"/admin/users/user/:id/notification/:name",exact:!0},p.createElement(St,null)),p.createElement(b.AW,{path:"/admin/users/user/:id/notification/new",exact:!0},p.createElement(St,null)),"            ",p.createElement(b.AW,{path:"/admin/tools"},p.createElement(Bt,null)),p.createElement(b.AW,{path:"/admin/assets/custom-fonts"},p.createElement(Sl,{metaValue:""!=this.props.metaValue?this.props.metaValue:null})),p.createElement(b.AW,{path:"/admin/assets/add-new-font"},p.createElement(Il,{metaValue:""!=this.props.metaValue?this.props.metaValue:null})),p.createElement(b.AW,{path:"/admin/assets/edit-font/:id?"},p.createElement(Tl,{metaValue:""!=this.props.metaValue?this.props.metaValue:null})),p.createElement(b.AW,{path:"/admin/assets"},p.createElement(cn,null)),p.createElement(b.AW,{path:"/admin/dashboard"},p.createElement(Oa,null)),p.createElement(b.AW,{path:"/admin/dashboard/colors"},p.createElement(ml,null)),p.createElement(b.AW,{path:"/admin/plugins"},p.createElement(Sa,null)),p.createElement(b.AW,{path:"/admin/reports"},p.createElement(ja,null)),p.createElement(b.AW,{path:"/admin/tables",exact:!0},p.createElement(Ra,null)),p.createElement(b.AW,{path:"/admin/tables/edit/:id",component:Pi,exact:!0},p.createElement(Pi,null)),p.createElement(b.AW,{path:"/admin/tables/edit/:id/setting",component:el,exact:!0}),p.createElement(b.AW,{path:"/admin/tables/edit/:id/setting/migrations/add",component:rl}),p.createElement(b.AW,{path:"/admin/tables/add"},p.createElement(ji,null)),p.createElement(b.AW,{path:"/admin/templates"},p.createElement(Fa,null)),p.createElement(b.AW,{path:"/admin/areas/add"},p.createElement(os,null)),p.createElement(b.AW,{path:"/admin/areas/:id"},p.createElement(cs,null)),p.createElement(b.AW,{path:"/admin/areas"},p.createElement(es,null)),p.createElement(b.AW,{path:"/admin/menus/:id"},p.createElement(Es,null)),p.createElement(b.AW,{path:"/admin/menus"},p.createElement(Ns,null)),p.createElement(b.AW,{path:"/admin/robots"},p.createElement(Ha,null)),p.createElement(b.AW,{path:"/admin/pages",exact:!0},p.createElement(ge,null)),p.createElement(b.AW,{path:"/admin/pages/edit/:id"},p.createElement(dr,null)),p.createElement(b.AW,{path:"/admin/pages/add"},p.createElement(dr,null)),p.createElement(b.AW,{path:"/admin/tables/models",exact:!0},p.createElement(Cr,null)),p.createElement(b.AW,{path:"/admin/tables/sql_editors",exact:!0},p.createElement(ul,null)),p.createElement(b.AW,{path:"/admin/tables/sql_editors/add"},p.createElement(li,null)),p.createElement(b.AW,{path:"/admin/tables/sql_editors/edit/:id"},p.createElement(li,null)),p.createElement(b.AW,{path:"/admin/tables/models/add"},p.createElement($r,null)),p.createElement(b.AW,{path:"/admin/tables/models/edit/:id",exact:!0},p.createElement($r,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/fields/add"},p.createElement(mo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/fields/edit/:id"},p.createElement(mo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/remote-fields/add"},p.createElement(mo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/remote-fields/edit/:id"},p.createElement(mo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/relations/add"},p.createElement(yo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/relations/edit/:id"},p.createElement(yo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/accessors/add"},p.createElement(Oo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/accessors/edit/:id"},p.createElement(Oo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/queries/add"},p.createElement(Qo,null)),p.createElement(b.AW,{path:"/admin/tables/models/:modelId/queries/edit/:id"},p.createElement(Qo,null)),p.createElement(b.AW,{path:"/admin/tables/data-sources/add"},p.createElement(Ao,null)),p.createElement(b.AW,{path:"/admin/tables/data-sources/edit/:id"},p.createElement(Ao,null)),p.createElement(b.AW,{path:"/admin/access/roles/add"},p.createElement(yi,null)),p.createElement(b.AW,{path:"/admin/access/roles/edit/:id"},p.createElement(yi,null)),p.createElement(b.AW,{path:"/admin/access/permissions/add"},p.createElement(Ni,null)),p.createElement(b.AW,{path:"/admin/access/permissions/edit/:id"},p.createElement(Ni,null)),p.createElement(b.AW,{path:"/admin/access"},p.createElement(hi,null)),p.createElement(b.AW,{path:"/admin/model/:id"},p.createElement(_l,null)))),p.createElement(Ua,null),p.createElement(wr,null),p.createElement(Yl,null))}}]),g}(p.Component),Zs=Cs=(0,g.$j)((function(e){return{metaValue:e.customFonts.metaValue}}),(function(e){return{setUserData:function(t){return e({userData:t,type:"SET_USER_DATA"})},getCustomFonts:function(t){return e((0,Nl.R)(t))}}}))(Cs)},57925:function(e,t,n){"use strict";var a=n(22122),r=n(96156),o=n(6610),i=n(5991),l=n(10379),s=n(46070),c=n(77608),u=n(14494);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){(0,l.Z)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,c.Z)(t);if(n){var r=(0,c.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,s.Z)(this,e)});function u(e){var t;return(0,o.Z)(this,u),(t=r.call(this,e)).onChange=function(e){console.log(e)},t.state={value:t.prepareIncomingValue(t.props.value)||""},t.editorProps=d({},t.props),t.editorProps.theme=t.props.theme||"textmate",t.editorProps.mode=t.props.mode||"css","wrapped json"===t.props.mode&&(t.editorProps.mode="json"),t.editorProps.height=t.props.height||"15em",t.editorProps.enableLiveAutocompletion=_.get(t.props,"enableLiveAutocompletion",!0),t.editorProps.onChange=function(e){e=t.prepareOutgoingValue(e),_.isFunction(t.props.onChange)?t.props.onChange(e):t.onChange(e)},t}return(0,i.Z)(u,[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.value!==e.value){var n=this.prepareIncomingValue(this.props.value);this.setState((function(e){return d(d({},e),{},{value:n})})),this.editor=React.createElement(this.props.AceEditor,(0,a.Z)({},this.editorProps,{value:n}))}this.props.AceEditor&&!e.AceEditor&&this.setState((function(e){return d(d({},e),{},{value:t.props.value})}))}},{key:"prepareIncomingValue",value:function(e){return e?("wrapped json"===this.props.mode&&("'"===e[0]&&(e=e.substr(1)),"'"===e[e.length-1]&&(e=e.slice(0,-1))),e):e}},{key:"prepareOutgoingValue",value:function(e){return e?("wrapped json"===this.props.mode&&("'"!==e[0]&&(e="'".concat(e)),"'"!==e[e.length-1]&&(e="".concat(e,"'"))),e):e}},{key:"render",value:function(){var e=this.state.value;return React.createElement("div",{className:"altrp-code-editor"},this.props.AceEditor&&(this.editor=this.editor||React.createElement(this.props.AceEditor,(0,a.Z)({},this.editorProps,{value:e}))))}}]),u}(Component);t.Z=(0,u.$j)((function(e){return{AceEditor:e.aceEditorReducer.AceEditor}}))(p)},53661:function(e,t,n){(e.exports=n(9252)(!1)).push([e.id,'.wrapper{width:100%}.wrapper a{cursor:pointer}.wrapper a:hover{text-decoration:none}.wrapper .disabled{color:gray}.wrapper .admin-notice--heading{display:flex;align-items:center;padding:10px 20px 10px 25px}.wrapper .admin-notice--heading a{text-decoration:none;color:gray}.wrapper .admin-notice--heading a:hover{color:#315efb;text-decoration:underline}.wrapper .admin-notice-box-parent{display:block;padding:10px 20px 10px 25px}.wrapper .admin-notice-box-parent .admin-notice-general{display:flex}.wrapper .admin-notice-box-parent .admin-notice-general .form-group{margin-right:20px;min-width:25%;max-width:65%}.wrapper .admin-notice-box-parent .admin-notice-general .form-group #source{min-width:400px}.wrapper .react-tabs{padding:10px 20px 10px 25px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box{display:flex}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .btn{margin:25px 0}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .condition-box{width:35%;padding-right:10px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child{width:65%}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box{width:100%}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .condition-box-general{display:flex;min-width:400px;max-width:100%;padding-top:10px;padding-right:10px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .condition-box-general .form-group{display:flex;align-items:center;margin-right:20px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .condition-box-general .form-group label{padding:0;margin:0 10px 0 0}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .condition-box-general .form-group #condition-input{width:250px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .condition-box-general .form-group #condition-select{width:80px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .admin-notice-compare-box{display:flex;justify-content:flex-start}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .admin-notice-compare-box .compare-box{width:60%;padding-right:10px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .admin-notice-compare-box .admin-notice-box-child-compare{width:40%;margin-top:55px;margin-right:50px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .condition-compare-box .admin-notice-compare-box .admin-notice-box-child-compare #value{height:60px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .btn-box{display:flex;justify-content:flex-end;margin-right:50px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .btn-box button{margin-left:15px}.wrapper .react-tabs .react-tabs__tab-panel--selected .admin-notice-condition-box .admin-notice-box-child .btn-box .btn_save{background-color:#91d11b}.wrapper .list-box{position:relative;height:50px}.wrapper .list-box .list-item a{margin-right:10px}.wrapper .list-box .quick-action-menu{display:none;position:absolute;bottom:4px;left:0}.wrapper .list-box .quick-action-menu.quick-action-menu--li{position:relative;bottom:0;left:10px}.wrapper .list-box .quick-action-menu__item_wrapper::after{content:" | ";color:gray}.wrapper .list-box .quick-action-menu__item_wrapper:last-child::after{content:""}.wrapper .list-box:hover .quick-action-menu{display:inline-block}.wrapper .list-box:hover .quick-action-menu.quick-action-menu--li{display:none}.wrapper .list-box:hover .quick-action-menu .quick-action-menu__item{font-size:12px;color:gray;padding:0;background-color:transparent}.wrapper .list-box:hover .quick-action-menu .quick-action-menu__item.quick-action-menu__item_danger{color:#cf0025}.wrapper .list-box:hover .quick-action-menu .quick-action-menu__item:hover{text-decoration:underline}.wrapper .list-box li:hover .quick-action-menu.quick-action-menu--li{display:inline-block}.admin-users-notice .admin-breadcrumbs{margin:25px 10px}.admin-users-notice .admin-breadcrumbs a{text-decoration:none;color:gray}.admin-users-notice .admin-breadcrumbs a:hover{color:#315efb;text-decoration:underline}.send-checkbox-box label{margin-right:40px;margin-left:10px}',""])},73166:function(e,t,n){(t=e.exports=n(9252)(!1)).i(n(19169),""),t.i(n(68525),""),t.i(n(51925),""),t.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Roboto:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic&subset=cyrillic);",""]),t.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic&subset=cyrillic);",""]),t.push([e.id,"@import url(https://fonts.googleapis.com/css?family=Open+Sans:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic&subset=cyrillic);",""]),t.push([e.id,"@import url(https://fonts.googleapis.com/css?family=PT+Sans:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic&subset=cyrillic);",""]),t.push([e.id,'html{height:100%}body,*,*:focus,*::before,*::after{box-sizing:border-box;outline:none}body{font-family:Roboto,sans-serif;margin:0;overflow-x:hidden;color:#242424;display:flex;flex-direction:column;height:100%}a,button,svg,path{-webkit-transition-duration:.2s;-moz-transition-duration:.2s;-ms-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;font-family:Roboto,sans-serif}.btn:active,.btn:focus,a:active,a:focus,button:active,button:focus{outline:none;box-shadow:none}button{cursor:pointer}.btn_grey{background-color:#8e94aa}.btn_disabled{background-color:#8e94aa;cursor:default;font-weight:bold;color:#fff;pointer-events:none}.btn,button{padding:10px 15px;border:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}iframe{display:block;border:none}input[type=checkbox]{cursor:pointer}.no-transition{-webkit-transition-duration:0s !important;-moz-transition-duration:0s !important;-ms-transition-duration:0s !important;-o-transition-duration:0s !important;transition-duration:0s !important}.caption{margin-bottom:15px;font-weight:600;font-size:18px}.btn_bare{border:none;background-color:transparent}.btn_success{background-color:#87ca00;color:#fff;font-weight:bold}.btn_failure{background-color:#ff4e6e;color:#fff;font-weight:bold}.text_bold{font-weight:bold}.altrp-scroll__vertical-track{bottom:2px;top:2px;right:2px;z-index:1000;border-radius:3px}.clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cursor-pointer{cursor:pointer}.rotate-180{transform:rotatex(180deg)}.altrp-label{display:block}#editor-content .fixed-section,.fixed-section,.fixed-section .altrp-section{position:fixed;z-index:55;width:auto}.position-relative{position:relative}.ck.ck-balloon-panel{z-index:99999999999 !important}#ckf-modal{z-index:999999999999 !important}.export-panel{position:relative;z-index:99999999999}@media print{.export-panel{display:none}}.hidden{display:none}.admin-heading{display:flex;align-items:center;padding:10px 20px 10px 25px}.admin-breadcrumbs{margin-right:20px;font-size:28px;font-family:Montserrat,Arial,sans-serif}.admin-breadcrumbs__link{font-weight:500;font-size:28px;text-decoration:none;color:#8e94aa}.admin-breadcrumbs__link:hover{color:#315efb}.admin-breadcrumbs__separator{font-weight:bold;font-size:28px;margin-left:5px;margin-right:5px}.admin-breadcrumbs__current{font-weight:bold;font-size:28px}.admin-filters{margin-left:20px;margin-right:20px;font-size:15px;font-family:Roboto,Arial,sans-serif}.admin-filters__link{text-decoration:none;color:#8e94aa}.admin-filters__link:hover{color:#315efb}.admin-filters__separator{margin-left:5px;margin-right:5px}.admin-filters__current{font-size:15px}.btn{display:inline-block;padding:6px 12px;background:#e9e9eb;border:1.5px solid #3c455b;border-radius:2px;font-family:Roboto,Arial,sans-serif;font-weight:500;font-size:15px;line-height:18px;text-decoration:none;color:#3c455b}.btn:hover{background:#3c455b;color:#fff}.btn_success{background-color:#87ca00;border-color:#87ca00}.btn_success:hover{border-color:#343b4c}.btn_link{padding:0;border:none;background-color:transparent}.btn_link:hover{background-color:transparent;text-decoration:underline}.btn_disable{background-color:#ccc;color:#666;border-color:#666}.btn_disable:hover{background-color:#ccc;color:#666}.btn_danger{border-color:#ff4e6e;color:#fff;background-color:#ff4e6e}.btn_danger:hover{background-color:#fff;color:#ff4e6e}.form-bottom{display:flex;justify-content:flex-end}.form-label{position:relative;margin-bottom:13px;font-size:13px;display:block;width:100%}.form-label select.form__input,.form-label .form__input[type=text]{margin-top:5px;font-size:13px;border:1px solid #d5d7de}.form-label__error{position:absolute;left:0;top:100%;font-size:12px;line-height:13px;color:#ff4e6e}select.form__input,input[type=number].form__input,input[type=text].form__input{width:100%;padding:10px;line-height:16px;font-size:14px}.admin-pills .nav-item{background-color:transparent}.admin-pills .nav-link{border:1px solid #d5d7de;border-radius:3px 3px 0 0;margin-bottom:-1px;background-color:#e6e9ec;font-family:Montserrat,sans-serif;font-size:16px;font-weight:bold;color:#8e94aa}.admin-pills .nav-link.active{background-color:#fff;border-bottom-color:#fff;color:#343b4c}.admin-user-top-panel{position:absolute;top:0;right:0;height:62px;padding-right:27px}.top-panel-notification{margin-right:19px}.top-panel__portrait{margin-right:7px}.top-panel__greeting{margin-right:14px;font-size:15px;color:#8e94aa}.top-panel-logout{background-color:transparent;border:none;padding:0}.custom-tab__tabs{bottom:-1px;position:relative}.custom-tab__tab{display:inline-block;margin-right:16px;padding:.5rem 1rem;border:1px solid #d5d7de;border-radius:3px 3px 0 0;background-color:#e6e9ec;font-family:Montserrat,sans-serif;font-size:16px;font-weight:bold;color:#8e94aa;cursor:pointer}.custom-tab__tab:hover{background-color:#f1f3f5;color:#8992b4;text-decoration:none}.custom-tab__tab--selected{display:inline-block;background-color:#fff;border-bottom-color:#fff;color:#343b4c}.custom-tab__tab--selected:hover{background-color:#fff;color:#343b4c}.custom-tab__tab-panel{padding:0 10px;background-color:#fff;border:1px solid #d5d7de}.admin-table{width:100%;border:1px solid #d5d7de;border-radius:3px;overflow:hidden}.admin-table .admin-table__td{height:65px;position:relative}.admin-table .admin-table__td_check{width:45px;text-align:center}.admin-table table{border-collapse:collapse;width:100%}.admin-table-head{background-color:#fff;border-bottom:1px solid #d5d7de}.admin-table-head .admin-table__td{height:45px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;color:#343b4c}.admin-table-body .admin-table-row:nth-child(2n){background-color:#f7f8f9}.admin-table-body .admin-table-row:nth-child(2n+1){background-color:#fff}.admin-table-body .admin-table-row .quick-action-menu{display:none;position:absolute;bottom:4px;left:0}.admin-table-body .admin-table-row .quick-action-menu.quick-action-menu--li{position:relative;bottom:0;left:10px}.admin-table-body .admin-table-row .quick-action-menu__item_wrapper::after{content:" | ";color:#8e94aa}.admin-table-body .admin-table-row .quick-action-menu__item_wrapper:last-child::after{content:""}.admin-table-body .admin-table-row:hover .quick-action-menu{display:inline-block}.admin-table-body .admin-table-row:hover .quick-action-menu.quick-action-menu--li{display:none}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item{font-size:12px;color:#8e94aa;padding:0;background-color:transparent}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item.quick-action-menu__item_danger{color:#cf0025}.admin-table-body .admin-table-row:hover .quick-action-menu .quick-action-menu__item:hover{text-decoration:underline}.admin-table-body .admin-table-row li:hover .quick-action-menu.quick-action-menu--li{display:inline-block}.admin-modal{display:flex;opacity:0;z-index:-1000;position:fixed;top:0;bottom:0;right:0;left:0;align-items:center;justify-content:center}.admin-modal_active{display:flex;opacity:1;z-index:1000;background-color:rgba(52,59,76,.2)}.admin-modal_active .admin-modal-content{transform:translate(0, 0vh)}.admin-modal-content{width:470px;max-height:70vh;overflow:auto;position:relative;padding:25px;background-color:#fff;border:1px solid #d5d7de;-webkit-box-shadow:0px 4px 5px rgba(0,0,0,.04);-moz-box-shadow:0px 4px 5px rgba(0,0,0,.04);box-shadow:0px 4px 5px rgba(0,0,0,.04);border-radius:3px;z-index:100;transform:translate(0, -50vh);transition-duration:.5s}.admin-modal__close{position:absolute;top:0;right:0;padding:10px;border:none;background-color:transparent}.admin-modal__close .icon{width:auto;height:auto;margin:0;display:block}.admin-modal__bg{position:absolute;top:0;bottom:0;left:0;right:0;z-index:50}.uploader{padding:48px;background-color:#fff;border:1px solid #d5d7de;border-radius:5px;-webkit-transition-duration:.5s;-moz-transition-duration:.5s;-ms-transition-duration:.5s;-o-transition-duration:.5s;transition-duration:.5s;color:#8e94aa}.uploader .icon{width:auto;height:auto;fill:#8e94aa;margin:0;transition-duration:inherit}.uploader__input{display:none}.uploader_drag-over{padding:44px;border:5px solid #71d7f7;color:#71d7f7}.uploader_drag-over .icon{fill:#71d7f7}.item{position:relative}.item__delete{position:absolute;top:0;right:0;padding:8px 15px;border:none;background-color:transparent}.item__delete-icon{transform:scale(1.2)}.item__background{position:absolute;top:5px;bottom:5px;left:5px;right:5px;background-position:center;-webkit-background-size:contain;background-size:contain;background-repeat:no-repeat;background-color:#f7f8f9}.item__icon-background{position:absolute;top:17px;right:27px;transform:scale(1.5)}.assets-list{background-color:#fff}.assets-list__item{padding-top:8.333333%}.admin-settings{width:100%;border:1px solid #d5d7de;border-radius:3px;overflow:hidden}.admin-settings .nav{margin-bottom:-1px}.admin-settings .admin-settings-table__td{height:65px;padding:8px 16px}.admin-settings .admin-settings-table__td_check{width:45px;text-align:center}.admin-settings .header-text{text-transform:uppercase;font-weight:600;font-size:16px;line-height:20px}.admin-settings .row-text{font-family:Roboto;font-style:normal;font-weight:bold;font-size:15px;line-height:18px}.admin-settings .admin-settings-button{line-height:5px;width:163px;height:30px;left:315px;top:448px;background:#87ca00;border:1.5px solid #87ca00;box-sizing:border-box;border-radius:2px}.admin-settings table{border-collapse:collapse;width:100%}.admin-settings table .admin-table__td_check{margin-right:10px}.admin-settings-head{background-color:#fff;border-bottom:1px solid #d5d7de}.admin-settings-head .admin-settings-table__td{height:45px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;color:#343b4c}.admin-settings-body .admin-settings-table-row:nth-child(2n){background-color:#f7f8f9}.admin-settings-body .admin-settings-table-row:nth-child(2n+1){background-color:#fff}.admin_input_key,.admin_input_port,.admin_input_host{width:150px}.admin_settings_telegram{display:flex;margin-top:20px}.admin_settings_telegram .admin_input__label{font-weight:bold;margin-right:15px}.admin_settings_telegram .admin_input_key{min-width:500px}.admin_switcher{display:flex;margin-right:50px}.admin_switcher .control-switcher{display:flex;align-items:center;justify-content:center;padding-right:7px;padding-left:7px;font-size:8px;line-height:9px;width:49px;height:22px;border-radius:11px;position:relative;-webkit-transition-duration:.2s;-moz-transition-duration:.2s;-ms-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-weight:bold}.admin_switcher .control-switcher_off{background:#e6e9ec;box-shadow:inset 1px 1px 2px rgba(0,0,0,.15),inset -1px -1px 2px rgba(0,0,0,.15);color:rgba(0,0,0,.3)}.admin_switcher .control-switcher_off .control-switcher__on-text{opacity:0}.admin_switcher .control-switcher_on{background:#87ca00;box-shadow:inset 1px 1px 2px rgba(0,0,0,.15),inset -1px -1px 2px rgba(0,0,0,.15);color:#fff}.admin_switcher .control-switcher_on .control-switcher__off-text{opacity:0}.admin_switcher .control-switcher_on .control-switcher__caret{left:30px}.admin_switcher .control-switcher__caret{position:absolute;width:16px;height:16px;top:3px;left:3px;border-radius:50%;background:#fff;box-shadow:-1px 1px 2px rgba(0,0,0,.25);-webkit-transition-duration:.2s;-moz-transition-duration:.2s;-ms-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}.admin_switcher .admin_switcher__label{font-weight:bold;font-size:15px;margin-right:10px}.admin_settings_websockets .admin_settings_websockets_box{display:flex;margin-top:20px}.admin_settings_websockets .admin_input__label{margin-right:15px}.admin_settings_websockets .admin_input{margin-right:30px}.react-tabs__tab-panel{width:100%;padding:10px;border:1px solid #d5d7de;border-radius:3px;overflow:hidden;background-color:#fff}.nav-pills .react-tabs__tab{margin-right:16px;padding:.5rem 1rem;border:1px solid #d5d7de;border-radius:3px 3px 0 0;background-color:#e6e9ec;font-family:Montserrat,sans-serif;font-size:16px;font-weight:bold;color:#8e94aa}.nav-pills .react-tabs__tab--selected{background-color:#fff;border-bottom-color:#fff;color:#343b4c}.admin-users{width:100%}.admin-users .wrapper{margin:15px}.admin-users .admin-heading-users{padding:10px 0;display:flex;align-items:center}.admin-users .admin-panel{display:flex}.admin-users .admin-users-form{display:flex}.admin-users .admin-users-form .admin-users-button{margin-left:8px;flex:none}.admin-users .form-bulk-left{width:unset}.admin-users .form-bulk-right{margin-left:24px}.admin-users .form-bulk-search{margin-left:auto}.admin-users .form-control{border:1px solid #343b4c;box-sizing:border-box;box-shadow:0px 0px 0px #007cba;border-radius:2px;max-height:35px}.admin-users .admin-users-table{margin-top:10px;border:1px solid #d5d7de;height:75vh;border-radius:3px}.admin-users .table{border-bottom:1px solid #d5d7de;font-family:Roboto;font-style:normal;font-size:15px;line-height:15px}.admin-users .table thead{text-transform:uppercase;font-weight:600;font-family:Montserrat}.admin-users .table td{vertical-align:middle}.admin-users .table td a{font-family:Roboto;color:#274bc8;cursor:pointer}.admin-users .table .input-users{margin-right:10px}.admin-users .table .users-svg{position:relative;margin-right:5px;max-width:36px;max-height:36px;display:inline-block;align-items:center}.vector-svg{position:relative;margin-left:8px;width:16px;height:16px;display:inline-block;align-items:center;fill:red}.vector-svg.vector-svg--active{border:1px solid red;border-radius:100%}.role-svg{transform:rotate(180deg)}#content{width:100%;height:100vh;margin:12px}.admin-heading{display:flex;align-items:center;padding:10px 20px 10px 25px}.admin-breadcrumbs{margin-right:20px;font-size:28px;font-family:Montserrat,Arial,sans-serif}.admin-breadcrumbs__link{font-weight:500;font-size:28px;text-decoration:none;color:gray}.admin-breadcrumbs__separator{font-weight:bold;font-size:28px}.admin-breadcrumbs__current{font-weight:bold;font-size:28px}.nav{margin-top:10px}.nav-item a{font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase}.change-role{line-height:50px;padding:35px 8px 8px 8px;align-items:center}.form-control-sm{margin:0 35px 0 20px;background:#fff;border:1px solid #343b4c !important;box-sizing:border-box;box-shadow:0px 0px 0px #007cba;border-radius:2px}.form-control-sm:focus{box-shadow:none}.form-check{padding-left:1.2rem !important}.form-check-inline{margin-right:0 !important}.form-check-label{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343b4c}.form-check-label:hover{color:#007bff}.col-3{align-self:center}.col-6{padding-bottom:8px;padding-top:10px;border-top:0;border-bottom:0;margin:0 !important}.form-group{margin-top:14px !important}fieldset{padding-top:12px}.treeview{margin-top:-50px;padding:0;clear:both;font-family:Arial,sans-serif;width:100%;height:70vh}.treeview *{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#8e94aa}.treeview ul{overflow:hidden;width:100%;margin:0;padding:0 0 1.5em 0;list-style-type:none}.treeview ul ul{overflow:visible;width:auto;margin:0 0 0 0;padding:0 0 0 1.5em}.treeview ul.l{border-left:1px solid;margin-left:-1px}ul{overflow:hidden}.treeview li{position:relative;padding-left:1.2em}.treeview+ul{margin-left:30px;padding-top:10px}.treeview li{margin-bottom:.8em}.treeview li{margin:0;padding:0}.treeview li li{margin:0 0 0 .5em;border-left:1px solid;padding:0}.treeview li div{position:relative;height:1.5em;min-height:16px;height:1.9em}.treeview li li div{border-bottom:1px solid}.treeview li p{position:absolute;z-index:1;top:.8em;top:1.2em;left:.95em;width:100%;margin:0;border-bottom:1px dashed;padding:0}.treeview li p.form-group-p{margin-left:7.8rem}.treeview a{padding:.1em .2em;white-space:nowrap;height:1px}.treeview a:hover{padding:.1em .2em;white-space:nowrap;height:1px;text-decoration:none}.treeview img.i{border-right:2px solid;border-bottom:.5em solid;margin-bottom:-0.5em;vertical-align:middle}.treeview a.sc{position:absolute;top:.06em;margin-left:-1em;padding:0;text-decoration:none}.treeview li p,.treeview img.i,.treeview .sc{background:#fff}.treeview ul.l,.treeview li p,.treeview img.i{border-color:#fff}.treeview ul li li,.treeview ul li li div{border-color:#999}.treeview a,.treeview a.sc,.treeview a.sc:hover{color:#8e94aa}.treeview a.core{color:#343b4c}.treeview a:hover{color:#f97c13}.group-table{height:50px;align-items:center}.group-table .text-group{margin:0 0 0 15px;font-family:Montserrat;font-style:normal;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase;color:#343b4c}.group-table .text-total{font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343b4c}.col input .search-tools{height:30px;border:1px solid #ced4da}.form-tools button{min-width:-webkit-fill-available;min-height:-webkit-fill-available;border-bottom:none;border-right:none;border-top:none;border-left:1px solid #ced4da;background:#87ca00;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-transform:uppercase;color:#3c455b}.form-tools button:hover{min-width:-webkit-fill-available;min-height:-webkit-fill-available;border-bottom:none;border-right:none;border-top:none;border-left:1px solid #ced4da;background:#b5ea49;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-transform:uppercase;color:#3c455b}.group-table-trees{height:75vh}.form-check-group{margin-top:16px}.form-group-p{margin:0;margin-left:10px;display:inline-block}.form-group-p a{font-family:Roboto;font-style:normal;font-weight:normal;font-size:11px;line-height:14px;color:#8e94aa;text-decoration:none !important}.form-group-p span{margin:0;font-size:12px;line-height:14px;color:#8e94aa}.form-group-p a:last-child{color:#fc394d}.form-group-p a:last-child:hover{color:#fa011a}.group-vertical{display:grid;width:80%;margin:25px auto}.group-vertical button{margin-top:5px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;text-align:center;color:#3c455b}.dangerous{display:grid;width:80%;justify-content:center;margin:350px auto auto auto}.dangerous span{width:195px;font-family:Roboto;font-style:normal;font-weight:bold;font-size:12px;line-height:14px;margin:0 19px;color:#8e94aa}.dangerous button{margin:5px auto;width:195px;height:40px;left:1651px;top:889px;background:#ff4e6e;border:1px solid #ff4e6e;box-sizing:border-box;border-radius:2px;font-family:Montserrat;font-style:normal;font-weight:bold;font-size:18px;line-height:22px;text-align:center;color:#fff}.admin-logo{width:100%;height:41px;background-color:#2a2d36}.logo{margin:8px 15px}.admin-users{width:100%}.admin-users .wrapper{margin:15px}.admin-users .admin-heading-users{padding:10px 0;display:flex;align-items:center}.admin-users .admin-panel{display:flex}.admin-users .admin-users-form{display:flex}.admin-users .admin-users-form .admin-users-button{margin-left:8px;flex:none}.admin-users .form-bulk-left{width:unset}.admin-users .form-bulk-right{margin-left:24px}.admin-users .form-bulk-search{margin-left:auto}.admin-users .form-control{border:1px solid #343b4c;box-sizing:border-box;box-shadow:0px 0px 0px #007cba;border-radius:2px;max-height:35px}.admin-users .admin-users-table{margin-top:10px;border:1px solid #d5d7de;height:75vh;border-radius:3px}.admin-users .table{border-bottom:1px solid #d5d7de;font-family:Roboto;font-style:normal;font-size:15px;line-height:15px}.admin-users .table thead{text-transform:uppercase;font-weight:600;font-family:Montserrat}.admin-users .table td{vertical-align:middle}.admin-users .table td a{font-family:Roboto;color:#274bc8;cursor:pointer}.admin-users .table .input-users{margin-right:10px}.admin-users .table .users-svg{position:relative;margin-right:5px;max-width:36px;max-height:36px;display:inline-block;align-items:center}.vector-svg{position:relative;margin-left:8px;width:16px;height:16px;display:inline-block;align-items:center;fill:red}.vector-svg.vector-svg--active{border:1px solid red;border-radius:100%}.role-svg{transform:rotate(180deg)}.btn__wrapper .btn{margin-right:20px}.btn_add{margin-top:20px}.form-group__inline-wrapper{display:flex;justify-content:space-between}.form-group__inline-wrapper__divider,.form-group__inline-wrapper .form-group_checkbox{align-self:flex-end}.form-group.form-group_width30{flex-basis:30%}.form-group.form-group_width65{flex-basis:65%}.form-group.form-group_width47{flex-basis:47.5%}.form-group.form-group_width30{flex-basis:30%}.form-group.form-group_width15{flex-basis:15%}.sub-header{margin:30px 0;font-weight:600;font-size:16px;line-height:20px;text-transform:uppercase;color:#343b4c}.field-form p,.admin-form p{color:#242424;display:block;font-family:inherit}.field-form .checkbox-group,.admin-form .checkbox-group{display:flex}.field-form .checkbox-group .form-group,.admin-form .checkbox-group .form-group{flex-grow:1}.centred{text-align:center}.checkbox-label{margin-left:10px}.flex-container{display:flex;justify-content:space-between;align-items:baseline}.label_checkbox{margin-bottom:0;cursor:pointer}.disabling-radio{margin-left:15px}.charts{display:flex;flex-wrap:wrap}.charts .card{margin-right:10px;margin-bottom:10px;min-height:300px;min-width:450px;padding:20px;border:0}.charts .card-body{padding:0}.charts .card-body .spinner-container{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.charts .card-body .widget-table{overflow:auto;width:100%;height:100%}.charts .card-body .widget-table table{width:100%;font-size:.8rem}.charts .card-body .widget-table table.vertical-table tbody td:first-child{background-color:#f0f0f0;color:#666;width:50%;font-weight:600}.charts .card-body .widget-table table thead th,.charts .card-body .widget-table table tbody td{border-collapse:collapse;border:1px solid rgba(0,0,0,.125);padding:.3rem .5rem}.charts .card-body .widget-table table thead{background-color:#f0f0f0;color:#666;font-weight:600}.charts .card-header{display:flex;justify-content:space-between;align-items:center;padding:.5rem .7rem;border-bottom:none;background-color:transparent;margin-bottom:10px}.charts .card-header__name{width:80%;font-size:1.2rem;color:#2a2d36;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.charts .card-header__buttons button{border:0;background:transparent;padding:0 7px}.widget-placeholder{width:100%;height:420px;border:1px solid #dedede;overflow:hidden;border-radius:2px;margin-right:15px;padding:20px}.widget-placeholder .widget-table{overflow:auto;width:100%;height:100%}.widget-placeholder .widget-table table{width:100%;font-size:.8rem}.widget-placeholder .widget-table table.vertical-table tbody td:first-child{background-color:#f0f0f0;color:#666;width:50%;font-weight:600}.widget-placeholder .widget-table table thead th,.widget-placeholder .widget-table table tbody td{border-collapse:collapse;border:1px solid rgba(0,0,0,.125);padding:.3rem .5rem}.widget-placeholder .widget-table table thead{background-color:#f0f0f0;color:#666;font-weight:600}.form-group .react-datepicker-wrapper{width:100%}.hide-blocks .react-datepicker__header{display:none}.form-segment .form-group label{width:100%}.from-segment .form-group_checkbox{margin-bottom:25px}.document-detail_opacity-background{background-color:#000;opacity:.7;z-index:1;position:absolute;top:0;bottom:0;right:0;left:0}.document-detail{position:absolute;top:30px;left:0;right:0;margin:auto;overflow-y:hidden;height:91.6%;width:96%;background:#fff;z-index:2}.document-detail_header{display:flex;justify-content:space-between;border-bottom:1px solid #dcdcde}.document-detail__title{font-size:22px;font-weight:bold;line-height:2.3;margin-left:16px;letter-spacing:.8px}.document-detail__btn-nav-group{display:flex}.document-detail__btn-nav{color:#787c82;background-color:#fff;border:1px solid #dcdcde;border-bottom:none;padding:13px 15px}.document-detail__btn-nav:hover{border-left-color:#c3c4c7;color:#000;background-color:#dcdcde}.document-detail__btn-nav:disabled{color:#dcdcde}.document-detail__btn-nav:disabled:hover{background-color:#fff;cursor:default}.document-detail__content{display:flex;justify-content:space-between;width:100%;height:91%}.document-detail__display{display:flex;flex-direction:column;width:66%;margin:0 auto;padding:20px 30px 20px 30px}.document-detail__image{margin:20px auto;object-fit:scale-down;max-width:100%;max-height:87%}.document-detail__btn{background-color:#f6f7f7;font-size:13px;border:1px solid #1a74af;border-radius:4px;color:#1a74af;padding:5px 10px}.document-detail__btn:hover{color:#0a4b78;border-color:#0a4b78;background-color:#f0f0f1}.document-detail__btn-edit-image{width:84px;margin:0 auto}.document-detail__editing-section{width:367px;height:100%;border-left:1px solid #dcdcde;padding:11px 16px 11px 16px;font-size:12px;color:#646970;overflow-y:auto}.document-detail__data-wrap{padding-right:34px}.document-detail__data{font-weight:600;padding-bottom:15px;margin-bottom:16px;border-bottom:1px solid #dcdcde}.document-detail__data-result{font-weight:normal;word-wrap:break-word}.document-detail__line-to-change{text-align:right;margin-bottom:12px}.document-detail__line-to-change_uploated-by{margin:18px 0px 18px 36px}.document-detail__name-of-changes{margin-right:18px;vertical-align:top}.document-detail__name-of-changes__uploated-by{margin-left:18px}.document-detail__input{width:65%;border-radius:4px;height:30px;border:1px solid #8c8f94;padding:0px 8px;font-size:14px}.document-detail__textarea{width:65%;border:1px solid #8c8f94;border-radius:4px;height:62px;font-size:14px;padding:4px 8px}.document-detail__btn-copy-url{font-size:11px;margin-left:117px}.document-detail__btn-delete-wrap{border-top:1px solid #dcdcde;margin-top:24px;padding-top:15px}.document-detail__btn-delete{padding:0;background-color:#fff;color:#e55a43}.document-detail__save-notification{color:#646970;font-size:12px;position:absolute;top:62px;right:30px}.custom-fonts{width:100%;padding:17px 17px 15px 22px;background-color:#f0f0f1}.custom-fonts a{color:#1a74af;text-decoration:none;position:relative}.custom-fonts a:hover{text-decoration:none;color:#0a4b78}.custom-fonts__title{display:flex;font-size:21px;letter-spacing:1px}.custom-fonts__table-header{display:flex;justify-content:space-between;font-size:13px;margin-top:16px;margin-left:4px}.custom-fonts__sorting-options-count{color:#646970}.custom-fonts__sorting-options-count_line{border-right:2px solid #646970;padding-right:4px;margin-right:4px}.custom-fonts__btn{border:1px solid #1a74af;color:#1a74af;background:#fff;padding:0px 11px;border-radius:3px;line-height:2px;font-size:13px;background-color:#fff}.custom-fonts__btn:hover{color:#0a4b78;border-color:#0a4b78;background-color:#f0f0f1}.custom-fonts__btn_add-new{margin-left:8px;font-weight:800;height:25px;margin-top:3px;letter-spacing:.8px;padding:0px 8px 0px 8px}.custom-fonts__search{display:flex}.custom-fonts__search-input{height:31px;width:221px;border-radius:4px;border:1px solid #8c8f94;margin-right:4px;background-color:#fff}.custom-fonts__const-part-of-table{display:flex;justify-content:space-between}.custom-fonts__possible-actions{display:flex}.custom-fonts__possible-actions-drop-list{width:126px;margin-right:6px;font-size:14px;padding:5px 4px 5px 4px;color:#2c3338;cursor:pointer;background-color:#fff}.custom-fonts__possible-actions-drop-list:hover{color:#1a74af}.custom-fonts__number-of-items{font-size:12px;margin-top:11px}.custom-fonts__table{border:1px solid #c3c4c7;margin:6px 0px 10px 0px;width:100%;font-size:14px;background-color:#fff}.custom-fonts__table thead{border-bottom:1px solid #c3c4c7}.custom-fonts__table thead tr{height:36px}.custom-fonts__table thead .custom-fonts__table-font-family:hover{cursor:pointer}.custom-fonts__table tbody .custom-fonts__table-font-family{position:relative;font-weight:bold}.custom-fonts__table tbody .custom-fonts__table-font-family_hover{opacity:0}.custom-fonts__table tbody .custom-fonts__table-font-family_hover:hover{opacity:1}.custom-fonts__table tbody .custom-fonts__table-font-family_hover_edit{position:absolute;left:1px;bottom:11px;font-size:13px;font-weight:normal;border-right:1px solid #cecece;height:11px;line-height:10px;padding-right:5px;cursor:pointer}.custom-fonts__table tbody .custom-fonts__table-font-family_hover_trash{position:absolute;left:33px;bottom:8px;color:#e55a43;font-size:13px;font-weight:normal;cursor:pointer}.custom-fonts__table tbody .custom-fonts__table-preview{color:#50575e}.custom-fonts__table tbody tr{height:60px;vertical-align:initial}.custom-fonts__table tfoot{border-top:1px solid #c3c4c7}.custom-fonts__table tfoot tr{height:36px}.custom-fonts__table tfoot .custom-fonts__table-font-family:hover{cursor:pointer}.custom-fonts__table-check{width:3.5%;padding:10px 0px 0px 11px}.custom-fonts__table-font-family{width:36.3%;font-weight:normal;color:#1a74af}.custom-fonts__table-font-family:hover{color:#0a4b78}.custom-fonts__table-font-family__count{position:absolute;top:-3px;right:-22px;width:17px;height:16px;background-color:#d4dffb;border-radius:9px;font-size:9px;text-align:center;padding-top:1px}.custom-fonts__table-preview{font-weight:normal}.custom-fonts__table input{width:16px;height:16px}.edit-font{width:100%;padding:17px 17px 15px 22px;background-color:#f0f0f1}.edit-font__content{display:flex;justify-content:space-between;margin-top:15px}.edit-font__content-main{width:74.9%}.edit-font__content-main-btn{background-color:#a4afb7;color:#fff;font-size:13px;padding:7px 20px;letter-spacing:.5px;margin-top:19px;border-radius:5px}.edit-font__content-main-btn:hover{background-color:#767e83}.edit-font__content-main__variation-table{width:100%}.edit-font__content-main__variation-table .add-variations{width:200px}.edit-font__content-input{font-size:22px;padding:2px 5px 0px 7px;width:100%;color:#2c3338;border-radius:5px;border:1px solid #8c8f94}.edit-font__content-input-add-font{color:#787c82}.edit-font__content-subtitle{font-size:14px;font-weight:bold;letter-spacing:.4px;margin-top:24px;margin-bottom:6px;border-bottom:1px solid #c3c4c7}.edit-font__content-font-editing-line{border-radius:5px;background-color:#fff;font-size:13px;letter-spacing:.6px;padding:18px 35px 21px 20px;color:#6d7882;border-bottom:4px solid #f0f0f1}.edit-font__content-font-editing-line td{padding:8px 20px}.edit-font__content-font-editing-line__element{margin-right:76px}.edit-font__content-font-editing-line__element_property{font-weight:bold;margin-right:8px}.edit-font__content-font-editing-line__element_description{margin-left:15px;font-size:14px;letter-spacing:.4px;margin-right:73px}.edit-font__content-font-editing-line__element_edit{opacity:.6;margin-right:0px;letter-spacing:0px}.edit-font__content-font-editing-line__element_edit:hover{cursor:pointer;opacity:1}.edit-font__content-font-editing-line__element_delete{opacity:.6;margin-right:0px;margin-left:56px;letter-spacing:0px}.edit-font__content-font-editing-line__element_delete:hover{cursor:pointer;opacity:1;color:#b32d2e}.edit-font__content-font-editing-line__element-value{height:31px;width:81px}.edit-font__content-publish{border:1px solid #c3c4c7;margin-top:26px;background-color:#fff;height:93px}.edit-font__content-publish_min{position:absolute;right:22px;top:37px;width:18%}.edit-font__content-publish-header{border-bottom:1px solid #c3c4c7;padding:9px 3px 5px 12px;font-size:15px;font-weight:bold;display:flex;justify-content:space-between}.edit-font__content-publish-body{padding:11px;display:flex;justify-content:space-between;flex-direction:row-reverse}.edit-font__content-publish-trash{color:#b32d2e;font-size:13px;text-decoration:underline;line-height:28px}.edit-font__content-publish-trash:hover{cursor:pointer}.edit-font__content-publish-btn{font-size:13px;background-color:#2271b1;padding:7px 15px 6px 15px;color:#fff;border-radius:4px}.edit-font__content-publish-btn:hover{background-color:#0a4b78}.edit-font__content-publish-arrow{background-color:#fff;color:#787c82;padding:0}.admin-content.admin-content-fonts-form{padding:0px}.admin-content .edit-font__content-font-editing-line__element{margin-right:41px;width:200px}.admin-content .edit-font__content-font-editing-line__element_description{margin-right:52px;padding-left:0px}.admin-content .edit-font__content-font-editing-line__element_edit{margin-left:32px;margin-right:0}.admin-content .edit-font__content-font-editing-line__element_delete{margin-right:0}.form-group-wrap{padding:8px 40px 10px 40px;background-color:#fff}.form-group-wrap .form-group{padding-right:20px;padding-left:20px;padding-bottom:9px;border-bottom:4px solid #f0f0f1}.form-group-wrap .form-group-input-label{font-size:12px;letter-spacing:.8px;margin-top:0px;width:125px;padding-top:12px;padding-left:10px;color:#6d7882;font-weight:600}.form-group-wrap .form-group select{color:#495157;font-size:12px;padding:5px 5px;height:37px}.add-variatons-open{display:block}.add-variatons-close{display:none}.font-table{width:100%;background-color:#f0f0f1}.showFontUrl{width:37%;color:#495157;font-size:12px;padding:5px;border-radius:5px;border:1px solid #d5dadf}.admin{display:flex;min-height:100vh;padding-left:271px}.admin__logo{width:120px;height:44px;padding-left:12px;display:flex;align-items:center;justify-content:center}.admin__logo img{max-width:100%;max-height:100%}.admin-nav{position:fixed;z-index:1;top:0;left:0;bottom:0;overflow:hidden;height:100vh;background-color:#2a2d36;width:271px;flex-shrink:0}.admin-nav-main{height:100%}.admin-nav-top{display:flex;justify-content:space-between;align-items:center;width:271px;padding-right:5px}.admin-nav-top .nav-logo{background-color:#2a2d36}.admin-nav-list{margin-top:10px}.admin-nav-list__link{position:relative;display:flex;padding:6px;color:#fff;font-size:17px;font-weight:500}.admin-nav-list__link.admin-nav-list__link--models{margin-left:40px}.admin-nav-list__link:hover{color:#87ca00}.admin-nav-list__link:hover path{fill:#87ca00}.admin-nav-list__link:hover::before{content:"";position:absolute;left:1px;top:3px;border-left:4px solid #7eb223;height:28px}.admin-nav-list__link svg{position:relative;top:1px;margin:3px 16px 0 7px}.admin-nav-list_pages{position:absolute;top:44px;left:0;right:0;background-color:#2a2d36;transform:translate(100%, 0);transition-duration:.3s}.admin-nav-list .admin-nav-list--sublist_active::after{content:"";position:absolute;right:0;top:62px;border:8px solid transparent;border-right:8px solid #f7f8f9;display:block;width:0;height:0}.admin-nav-list .admin-nav-list--sublist_active li{background-color:#677289;position:relative}.admin-nav-list .admin-nav-list--sublist_active li:hover{background-color:#677289}.admin-nav-list .admin-nav-list--sublist_active .admin-nav-list__link{font-size:13px;text-decoration:none;padding:8px 12px 8px 12px}.admin-nav-list.admin-nav-list--sublist{display:none;position:fixed;left:271px;top:81px}.admin-nav-list.admin-nav-list--sublist::before{content:"";position:fixed;left:255px;top:102px;border:8px solid transparent;border-right:8px solid #677289;display:block;width:0;height:0}.admin-nav-list.admin-nav-list--sublist li{background-color:#677289;position:relative}.admin-nav-list.admin-nav-list--sublist li:hover{background-color:#677289}.admin-nav-list.admin-nav-list--sublist .admin-nav-list__link{font-size:13px;padding:8px 67px 8px 19px;text-decoration:none}.admin-nav-list li:hover .admin-nav-list.admin-nav-list--sublist{display:block}.admin-content{width:100%}.admin-caption{margin-bottom:15px;font-weight:600;font-size:18px}.admin__bars{margin:12px 12px;float:right;cursor:pointer}.admin_pages-show .admin-nav-list_pages{transform:translate(0, 0)}.admin__version{position:absolute;bottom:0;left:0;right:0;padding:5px;text-align:center;font-size:13px;color:#fff}.admin-form__subheader{text-transform:uppercase;margin-top:25px;font-weight:600;font-size:16px;line-height:20px}.icon{width:16px;height:16px;fill:#fff;margin-right:15px;display:inline-block;align-items:center}.admin-nav li{list-style-type:none;background:#343b4c}.admin-nav li:hover{background:#495267}ul{margin-left:0;padding-left:0}p{display:inline-block;color:#fff;font-weight:500;font-family:Montserrat,Arial,sans-serif}a{text-decoration:none}.admin-page{width:100%;display:flex;flex-direction:column}.admin-content{background-color:#f7f8f9;flex-grow:1;padding:13px 25px}.ace_editor{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace}.admin-skeleton .altrp-skeleton{width:220px;height:240px}',""])},82364:function(e,t,n){var a=n(23456);(e.exports=n(9252)(!1)).push([e.id,".pagination{display:flex;align-items:center;padding:20px 0}.pagination__version{font-family:Roboto;font-style:italic;font-weight:normal;font-size:13px;line-height:15px;color:#8e94aa;margin-right:437px}.pagination__link{text-decoration:none;font-weight:400;font-family:Roboto;font-style:italic;font-size:13px;line-height:15px;color:#673daa}.pagination__text{margin:0 9px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343b4c}.pagination__move{width:30px;height:30px;padding:0;display:flex;justify-content:center;align-items:center;border:1px solid #8e94aa;box-sizing:border-box;cursor:pointer;border-radius:2px}.pagination__buttons{display:flex;align-items:center}.pagination__indicator{display:flex;justify-content:center;align-items:center;width:43px;height:30px;background:#fff;border:1px solid #343b4c;box-sizing:border-box;box-shadow:0px 0px 0px #007cba;border-radius:2px}.pagination__prev{background-image:url("+a(n(67091))+");background-size:7.5px 4px;margin:0 7px}.pagination__map{margin:0 9px;font-family:Roboto;font-style:normal;font-weight:normal;font-size:15px;line-height:18px;color:#343b4c}.pagination__next{margin-right:7.5px}.pagination__disabled{opacity:.5;cursor:auto}.right__arrow{transform:rotate(-180deg)}",""])},74357:function(e,t,n){(t=e.exports=n(9252)(!1)).i(n(68525),""),t.push([e.id,"html{height:100%}body,*,*:focus,*::before,*::after{box-sizing:border-box;outline:none}body{font-family:Roboto,sans-serif;margin:0;overflow-x:hidden;color:#242424;display:flex;flex-direction:column;height:100%}a,button,svg,path{-webkit-transition-duration:.2s;-moz-transition-duration:.2s;-ms-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;font-family:Roboto,sans-serif}.btn:active,.btn:focus,a:active,a:focus,button:active,button:focus{outline:none;box-shadow:none}button{cursor:pointer}.btn_grey{background-color:#8e94aa}.btn_disabled{background-color:#8e94aa;cursor:default;font-weight:bold;color:#fff;pointer-events:none}.btn,button{padding:10px 15px;border:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}iframe{display:block;border:none}input[type=checkbox]{cursor:pointer}.no-transition{-webkit-transition-duration:0s !important;-moz-transition-duration:0s !important;-ms-transition-duration:0s !important;-o-transition-duration:0s !important;transition-duration:0s !important}.caption{margin-bottom:15px;font-weight:600;font-size:18px}.btn_bare{border:none;background-color:transparent}.btn_success{background-color:#87ca00;color:#fff;font-weight:bold}.btn_failure{background-color:#ff4e6e;color:#fff;font-weight:bold}.text_bold{font-weight:bold}.altrp-scroll__vertical-track{bottom:2px;top:2px;right:2px;z-index:1000;border-radius:3px}.clickable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cursor-pointer{cursor:pointer}.rotate-180{transform:rotatex(180deg)}.altrp-label{display:block}#editor-content .fixed-section,.fixed-section,.fixed-section .altrp-section{position:fixed;z-index:55;width:auto}.position-relative{position:relative}.ck.ck-balloon-panel{z-index:99999999999 !important}#ckf-modal{z-index:999999999999 !important}.export-panel{position:relative;z-index:99999999999}@media print{.export-panel{display:none}}.hidden{display:none}.assets-browser{display:none}.assets-browser_active{position:fixed;display:flex;top:0;bottom:0;right:0;left:0;z-index:1000}.assets-browser__bg{position:absolute;top:0;left:0;bottom:0;right:0;background-color:rgba(52,59,76,.2);z-index:50}.assets-browser-content{position:absolute;top:5%;bottom:5%;left:5%;right:5%;padding-bottom:60px;z-index:100;border:1px solid #d5d7de;border-radius:3px;background-color:#fff}.assets-browser__close.btn{position:absolute;top:0;right:0;padding:10px;-webkit-transform:scale(2);-moz-transform:scale(2);-ms-transform:scale(2);-o-transform:scale(2);transform:scale(2);background-color:transparent}.assets-browser__close.btn .icon{margin:0;width:auto;height:auto}.assets-browser-top{padding:20px 20px 0;background-color:#f7f8f9}.assets-browser-top .caption{font-size:22px}.assets-browser-nav{margin-left:-20px;margin-right:-20px;padding-left:5px;padding-right:5px;border-bottom:1px solid #d5d7de}.assets-browser__tab{margin-bottom:-1px;background-color:transparent;border-top:1px solid transparent;border-left:1px solid transparent;border-right:1px solid transparent}.assets-browser__tab_active{border-top:1px solid #d5d7de;border-left:1px solid #d5d7de;border-right:1px solid #d5d7de;background-color:#fff}.assets-browser-bottom{position:absolute;bottom:0;left:0;right:0;display:flex;align-items:center;justify-content:flex-end;height:60px;padding-right:20px;border-top:1px solid #d5d7de}.assets-browser-choose-frame{display:flex;align-content:flex-start;align-items:flex-start;flex-wrap:wrap;padding:20px 20px 20px 10px;height:calc( 100% - 96.5px );overflow:auto}.asset-choose{position:relative;cursor:pointer;margin-bottom:10px;margin-left:10px;border:1px solid #d5d7de}.asset-choose__content{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-moz-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);-o-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}.asset-choose_selected{background:#71d7f7}.asset-choose_icon{width:calc(5% - 10px);padding-top:calc(5% - 10px)}.asset-choose_media{width:calc(10% - 10px);padding-top:calc(10% - 10px)}.asset-choose_media .asset-choose__content{top:10px;left:10px;width:calc(100% - 20px);height:calc(100% - 20px);transform:none;object-fit:contain;object-position:center;background-color:#f7f8f9}",""])},46700:function(e,t,n){var a={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=46700},38908:function(e,t,n){var a=n(53661);"string"==typeof a&&(a=[[e.id,a,""]]);n(76723)(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},13295:function(e,t,n){var a=n(73166);"string"==typeof a&&(a=[[e.id,a,""]]);n(76723)(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},68843:function(e,t,n){var a=n(82364);"string"==typeof a&&(a=[[e.id,a,""]]);n(76723)(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},93978:function(e,t,n){var a=n(74357);"string"==typeof a&&(a=[[e.id,a,""]]);n(76723)(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)}}]);
//# sourceMappingURL=545.admin.js.map