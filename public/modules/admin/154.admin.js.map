{"version":3,"sources":["webpack:///./resources/modules/admin/src/components/settings/MailForm.js"],"names":["MailForm","props","changeHandler","target","value","name","setState","submitHandler","e","preventDefault","resource","Resource","route","post","state","res","success","alert","message","mail_driver","mail_host","mail_port","mail_username","mail_password","mail_encryption","mail_from_address","mail_from_name","getAll","settings","this","data","className","onSubmit","htmlFor","id","required","onChange","type","autoComplete","Component"],"mappings":"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","file":"154.admin.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport Resource from \"../../../../editor/src/js/classes/Resource\";\r\n\r\nclass MailForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mail_driver: 'smtp',\r\n      mail_host: '',\r\n      mail_port: '',\r\n      mail_username: '',\r\n      mail_password: '',\r\n      mail_encryption: '',\r\n      mail_from_address: '',\r\n      mail_from_name: '',\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Компонент загрузился\r\n   */\r\n  async componentDidMount(){\r\n\r\n    let settings = await (new Resource({ route: `/admin/ajax/get_mail_settings` })).getAll();\r\n    this.setState(state=>({...state,...settings.data}));\r\n  }\r\n\r\n  changeHandler = ({ target: { value, name } }) => {\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  submitHandler = async e => {\r\n    e.preventDefault();\r\n    const resource = new Resource({ route: `/admin/ajax/write_mail_settings` });\r\n    let res = await resource.post(this.state);\r\n    if(res.success){\r\n      alert(res.message || 'success');\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      mail_driver,\r\n      mail_host,\r\n      mail_port,\r\n      mail_username,\r\n      mail_password,\r\n      mail_encryption,\r\n      mail_from_address,\r\n      mail_from_name,\r\n    } = this.state;\r\n\r\n    return <div>\r\n\r\n      <form className=\"admin-form\" onSubmit={this.submitHandler}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail_driver\">Driver</label>\r\n          <select id=\"mail_driver\" required\r\n            name=\"mail_driver\"\r\n            value={mail_driver}\r\n            onChange={this.changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option value=\"\"/>\r\n            <option value=\"smtp\">smtp</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail_host\">Host</label>\r\n          <input type=\"text\" id=\"mail_host\" required\r\n            name=\"mail_host\"\r\n            value={mail_host}\r\n            onChange={this.changeHandler}\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail_port\">Port</label>\r\n          <input type=\"text\" id=\"mail_port\" required\r\n            name=\"mail_port\"\r\n            value={mail_port}\r\n            onChange={this.changeHandler}\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail_username\">User Name</label>\r\n          <input type=\"text\" id=\"mail_username\" required\r\n            name=\"mail_username\"\r\n            value={mail_username}\r\n            onChange={this.changeHandler}\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail_password\">Password</label>\r\n          <input type=\"password\"\r\n                autoComplete=\"mail-settings-password\"\r\n                id=\"mail_password\" required\r\n            name=\"mail_password\"\r\n            value={mail_password}\r\n            onChange={this.changeHandler}\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail_from_address\">Mail from Address</label>\r\n          <input type=\"email\" id=\"mail_from_address\"\r\n            name=\"mail_from_address\"\r\n            value={mail_from_address}\r\n            onChange={this.changeHandler}\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail_from_name\">Mail from Name</label>\r\n          <input type=\"text\" id=\"mail_from_name\"\r\n            name=\"mail_from_name\"\r\n            value={mail_from_name}\r\n            onChange={this.changeHandler}\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"mail_encryption\">Encryption</label>\r\n          <select id=\"mail_encryption\" required\r\n            name=\"mail_encryption\"\r\n            value={mail_encryption}\r\n            onChange={this.changeHandler}\r\n            className=\"form-control\"\r\n          >\r\n            <option value=\"\" />\r\n            <option value=\"tls\">tls</option>\r\n            <option value=\"ssl\">ssl</option>\r\n          </select>\r\n        </div>\r\n\r\n\r\n\r\n        <div className=\"btn__wrapper\">\r\n          <button className=\"btn btn_success\" type=\"submit\">Save</button>\r\n        </div>\r\n      </form>\r\n    </div>;\r\n  }\r\n}\r\n\r\nexport default MailForm;\r\n"],"sourceRoot":""}