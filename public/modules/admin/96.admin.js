(self.webpackChunk=self.webpackChunk||[]).push([[96],{99776:function(t,e,r){"use strict";r.d(e,{a:function(){return n},r:function(){return a}});var n="SET_ACE";function a(t){return{AceEditor:t,type:n}}},60257:function(t,e,r){"use strict";r.d(e,{V:function(){return n},a:function(){return a}});var n="SET_LOGO";function a(t){return{logoData:t,type:n}}},94006:function(t,e,r){"use strict";r.d(e,{hH:function(){return n},U$:function(){return a},MC:function(){return i},gy:function(){return o},_H:function(){return s},Fc:function(){return c}});var n="SET_DISABLED",a="SET_ENABLE",i="SET_PROPERTY";function o(){return{type:n}}function s(){return{type:a}}function c(t,e){return{type:i,propertyName:t,value:e}}},22017:function(t,e,r){"use strict";r.d(e,{i:function(){return n},R:function(){return a}});var n="GET_CUSTOM_FONTS";function a(t){return{type:n,metaValue:t}}},74604:function(t,e,r){"use strict";r.d(e,{dh:function(){return o},DK:function(){return s},tn:function(){return c},$J:function(){return u}});var n=r(96156);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var o="SET_MODAL_SETTINGS",s="TOGGLE_MODAL";function c(t){return i(i({},t),{},{type:o})}function u(){return{type:s}}},10096:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return Z}});var n=r(14890),a=r(96156),i=r(74604);function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c={fields:[],active:!1,title:"Modal",submitButton:"Submit",submit:function(t){console.log(t)},success:function(t){console.log(t)}},u=r(94006);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f={adminEnable:!0},d=r(60257);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var g=window.admin_logo?window.admin_logo:{},y=r(19776);function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var O={onChoose:function(t){},active:!1},b=r(99776),w={AceEditor:null},S=r(40148),j=r(77810);function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var k={},R=r(22017);function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var T={metaValue:[]},A=(0,n.UY)({modalSettings:function(t,e){switch(t=t||c,e.type){case i.dh:t={fields:e.fields,title:e.title||c.title,submit:e.submit||c.submit,submitButton:e.submitButton||c.submitButton,success:e.success||c.success,active:e.active};break;case i.DK:t=s(s({},c),{},{active:!t.active})}return t},adminState:function(t,e){switch(t=t||f,e.type){case u.hH:t=p(p({},t),{},{adminEnable:!1});break;case u.U$:t=p(p({},t),{},{adminEnable:!0});break;case u.MC:var r=e.propertyName,n=e.value;r&&(t=p({},t),_.set(t,r,n))}return t},adminLogo:function(t,e){switch(t=t||g,e.type){case d.V:t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e.logoData)}return t},assetsManagerSettings:function(t,e){switch(t=t||O,e.type){case y.nw:t=m({},e.settings);break;case y.D3:(t=m({},t)).active=!1}return t},aceEditorReducer:function(t,e){switch(t=t||w,e.type){case b.a:t={AceEditor:e.AceEditor}}return t},currentUser:S.r,websocketStore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0,r=e.type,n=e.item;switch(r){case j.U$:t=E(E({},t),{},{enabled:n});break;case j.KJ:t=E(E({},t),{},{key:n});break;case j.ci:t=E(E({},t),{},{port:n})}return t},customFonts:function(t,e){switch(t=t||T,e.type){case R.i:t=D(D({},t),{},{metaValue:e.metaValue})}return t}}),Z=(0,n.MT)(A)},77810:function(t,e,r){"use strict";r.d(e,{U$:function(){return n},KJ:function(){return a},ci:function(){return i},He:function(){return o},Yz:function(){return s},Uh:function(){return c}});var n="WEBSOCKETS_SERVER_ENABLED",a="WEBSOCKETS_SERVER_KEY",i="WEBSOCKETS_SERVER_PORT";function o(t){return{type:n,item:t}}function s(t){return{type:a,item:t}}function c(t){return{type:i,item:t}}},97239:function(t,e,r){"use strict";var n=r(6610),a=r(5991),i=r(83465),o=r.n(i),s=r(29208),c=r.n(s),u=r(31468),l=r.n(u),p=r(38394),f=r.n(p),d=r(96633),h=r.n(d),g=r(99245),y=r.n(g),v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.Z)(this,t),this.data=o()(e)}return(0,a.Z)(t,[{key:"getData",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?o()(this.data):this.data}},{key:"isEmpty",value:function(){return y()(this.data)}},{key:"getProperty",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(this.data,t,e)}},{key:"hasProperty",value:function(t){return f()(this.data,t)}},{key:"setProperty",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r instanceof t&&(r=r.getData(!1)),l()(this.data,e,r)}},{key:"unsetProperty",value:function(t){return h()(this.data,t)}}]),t}();window.AltrpModel=v,e.Z=v},3925:function(t,e,r){"use strict";r.r(e),r.d(e,{MAX_FILE_SIZE:function(){return l}});var n=r(92137),a=r(6610),i=r(5991),o=r(87757),s=r.n(o),c=r(17563),u=r(5298);window.queryString=c;var l=83886080,p=function(){function t(e){if((0,a.Z)(this,t),this.route=e.route,this.dynamicURL=e.dynamicURL||!1,!this.route)throw"Нужен route"}var e;return(0,i.Z)(t,[{key:"getRoute",value:function(){return this.dynamicURL?(0,u.p_)(this.route):this.route}},{key:"getAuthorList",value:function(){return fetch("/admin/ajax/users",{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"get",value:function(t){t||console.error('Get only by "id"');var e,r=this.getRoute();return e="/"===r[r.length-1]?r+t:r+"/"+t,fetch(e,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"getInContext",value:function(t){t||console.error('Get only by "id"');var e=this.getRoute().replace("{id}",t);return fetch(e,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"getAll",value:function(){var t=this.getRoute();return fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"getAsText",value:function(){var t=this.getRoute();return fetch(t,{method:"get",headers:{"Content-Type":"text/plain"}}).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.text()}))}},{key:"search",value:function(t){var e;return e=-1===this.getRoute().indexOf("?")?this.getRoute()+"?s=".concat(t):this.getRoute()+"&s=".concat(t),fetch(e,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"post",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;e=_.assign({"X-CSRF-TOKEN":_token},e);var r=new FormData,n=!1;_.each(t,(function(t,e){if(_.isArray(t))for(var a=0;a<t.length;a++)t[a]instanceof File&&(n=!0),t[a].size>l||r.append("".concat(e,"[").concat(a,"]"),t[a]);else r.append(e,t)})),n||(e["Content-Type"]="application/json",e.Accept="application/json");var a={method:"POST",body:n?r:JSON.stringify(t),headers:e};return fetch(this.getRoute(),a).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"postFiles",value:function(t){for(var e={"X-CSRF-TOKEN":_token},r=new FormData,n=0;n<t.length;n++)t[n].size>l||r.append("files[".concat(n,"]"),t[n]);var a={method:"POST",body:r,headers:e};return fetch(this.getRoute(),a).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"postFile",value:function(t){var e={"X-CSRF-TOKEN":_token},r=new FormData;r.append("favicon",t);var n={method:"POST",body:r,headers:e};return fetch(this.getRoute(),n).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"put",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r=_.assign({"X-CSRF-TOKEN":_token},r);var n=new FormData,a=!1;_.each(e,(function(t,e){if(_.isArray(t))for(var r=0;r<t.length;r++)t[r]instanceof File&&(a=!0),t[r].size>l?console.log(t[r]):n.append("".concat(e,"[").concat(r,"]"),t[r]);else n.append(e,t)})),a||(r["Content-Type"]="application/json",r.Accept="application/json");var i={method:"put",body:a?n:JSON.stringify(e),headers:r},o=this.getRoute()+(t?"/"+t:"");return fetch(o,i).then((function(t){return!1===t.ok?Promise.reject(t.text(),t.status):t.json()}))}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n={method:"delete",headers:_.assign({"X-CSRF-TOKEN":_token,"Content-Type":"application/json",Accept:"application/json"},r)};_.isEmpty(e)||(n.body=JSON.stringify(e));var a=this.getRoute()+(t?"/"+t:"");return fetch(a,n).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"getOptions",value:function(){var t=this.getRoute()+"/options";return fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}))}},{key:"getQueried",value:(e=(0,n.Z)(s().mark((function t(e){var r,n,a,i,o,u=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:null,n={method:"get",headers:_.assign({"Content-Type":"application/json"},r)},a={},_.forEach(e,(function(t,e){_.isArray(t)&&(t=t.join(",")),a[e]=t})),i=c.parseUrl(this.getRoute()).url,a=_.assign(c.parseUrl(this.route).query,a),i="".concat(i,"?").concat(c.stringify(a)),t.next=9,fetch(i,n).then((function(t){return!1===t.ok?Promise.reject({res:t.text(),status:t.status}):t.json()}));case 9:return o=t.sent,t.abrupt("return",o);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}();e.default=p},58962:function(t,e){"use strict";e.Z={TEMPLATE_UPDATED:"TEMPLATE_UPDATED",TEMPLATE_NEED_UPDATE:"TEMPLATE_NEED_UPDATE",TEMPLATE_SAVING:"TEMPLATE_SAVING",DEFAULT_BREAKPOINT:"DEFAULT_BREAKPOINT",DEFAULT_AREAS:["content","footer","header","popup","email","card","reports"],SCREENS:[{icon:"wide_screen",name:"DEFAULT_BREAKPOINT",id:1,width:"100%",fullMediaQuery:"",mediaQuery:""},{icon:"desktop",name:"Desktop",id:2,width:"1440px",fullMediaQuery:"@media screen and (max-width: 1440px) and (min-width: 1025px)",mediaQuery:"@media screen and (max-width: 1440px)"},{icon:"laptop",name:"Laptop",id:3,fullMediaQuery:"@media screen and (max-width: 1024px) and (min-width: 769px)",width:"1024px",mediaQuery:"@media screen and (max-width: 1024px)"},{icon:"tablet",name:"Tablet",id:4,fullMediaQuery:"@media screen and (max-width: 768px) and (min-width: 451px)",width:"768px",mediaQuery:"@media screen and (max-width: 768px)"},{icon:"big_phone",name:"Big-Phone",id:5,width:"450px",fullMediaQuery:"@media screen and (max-width: 450px) and (min-width: 321px)",mediaQuery:"@media screen and (max-width: 450px)"},{icon:"small_phone",name:"Small-Phone",id:6,fullMediaQuery:"@media screen and (max-width: 320px)",width:"320px",mediaQuery:"@media screen and (max-width: 320px)"}]}},19776:function(t,e,r){"use strict";r.d(e,{nw:function(){return n},D3:function(){return a},jX:function(){return i},mp:function(){return o}});var n="ASSETS_SHOW",a="ASSETS_TOGGLE";function i(t){return t.active=!0,{type:n,settings:t}}function o(){return{type:a}}},65370:function(t,e,r){"use strict";r.d(e,{Z:function(){return p}});var n=r(87329),a=r(96156),i=r(6610),o=r(5991),s=function t(){(0,i.Z)(this,t)},c=r(29941);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p=function(){function t(){(0,i.Z)(this,t)}return(0,o.Z)(t,[{key:"getTemplates",value:function(){return this.templates=this.templates||[],this.templates}},{key:"isCustomArea",value:function(){return!!_.get(this.settings,"area_type")}},{key:"getAreaClasses",value:function(){return this.CSSclasses||(this.CSSclasses=[],this.CSSclasses.push("app-area_id-".concat(this.id)),this.settings.sidebar_type&&this.CSSclasses.push("app-area_".concat(this.settings.sidebar_type)),this.settings.sidebar_location&&this.CSSclasses.push("app-area_sidebar-location-".concat(this.settings.sidebar_location))),this.CSSclasses}},{key:"getCustomCSS",value:function(){var t="";return _.isString(this.settings.custom_css)?t=this.settings.custom_css.replace(/__selector__/g,".app-area_id-".concat(this.id)):t}},{key:"setSetting",value:function(t,e){var r=this;this.getSetting(t)!==e&&(_.set(this.settings,t,e),this.component&&this.component.setState((function(t){return l(l({},t),{},{settings:l({},r.settings)})})),window.currentRouteComponent?(window.currentRouteComponent.setState((function(t){return l(l({},t),{},{updateToken:Math.random()})})),appStore.dispatch((0,c.t)((0,n.Z)(appStore.getState().areas)))):appStore.dispatch((0,c.t)((0,n.Z)(appStore.getState().areas))))}},{key:"getSetting",value:function(t,e){return _.get(this.settings,t,e)}}],[{key:"areaFactory",value:function(e){var r=new t;return r.settings=e.settings,r.id=e.id,r.template=new s,r.template.data=e.template?e.template.data:null,_.isString(r.template.data)&&(r.template.data=JSON.parse(r.template.data)),r.template.id=e.template?e.template.id:null,r.template.name=e.template?e.template.name:"","popups"===e.area_name&&(r.templates=[],e.templates=e.templates||[],e.templates.forEach((function(t){var e=new s;e.data=t?t.data:null,_.isString(e.data)&&(e.data=JSON.parse(e.data)),e.name=t?t.name:"",e.id=t?JSON.parse(t.id):null,e.guid=t?t.guid:null,e.template_settings=t?t.template_settings:[],e.triggers=t?t.triggers:{},r.templates.push(e)}))),r}}]),t}()},24402:function(t,e,r){"use strict";r.d(e,{Z:function(){return h}});var n=r(6610),a=r(5991),i=r(65370),o=r(34699),s=r(10379),c=r(46070),u=r(77608),l=r(97239),p=r(5298);var f=function(t){(0,s.Z)(l,t);var e,r,i=(e=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,u.Z)(e);if(r){var a=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)});function l(){return(0,n.Z)(this,l),i.apply(this,arguments)}return(0,a.Z)(l,[{key:"getWebUrl",value:function(){return this.getProperty("source.web_url").replace(/{([\s\S]+?)}/g,"")}},{key:"getType",value:function(){return this.getProperty("source.type")}},{key:"getAlias",value:function(){return this.getProperty("alias")}},{key:"getParams",value:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=appStore.getState(),r=(e.currentModel,e.currentDataStorage,this.getProperty("parameters")),n={};return r?((r=(0,p.pM)(r)?(r=(0,p.hB)(r,[])).map((function(t){return[t.paramName,t.paramValue]})):(r=(r=r.split("\n")).filter((function(t){return t}))).map((function(t){return(t=t.split("|"))[0]=t[0].trim(),1===t.length?t.push(t[0]):t[1]=t[1].trim(),t}))).forEach((function(e){var r=(0,o.Z)(e,2),a=r[0],i=r[1];i.match(/{{([\s\S]+?)(?=}})/g)&&(i=(i=i.trim()).match(/{{([\s\S]+?)(?=}})/g)[0].replace("{{",""),i=t&&0===i.indexOf(t)?i:(0,p.BO)(i)),(i||0===i)&&(n[a]=i)})),n):null}}]),l}(l.Z);function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h=function(){function t(e){(0,n.Z)(this,t),this.id=e.id,this.path=e.path,this.icon=e.icon,this.model=e.model,this.models=e.models,this.parent_page_id=e.parent_page_id,this.models||(this.models=e.model?[e.model]:[]),this.model=e.model,this.data_sources=e.data_sources||[],this.data_sources=this.data_sources.map((function(t){return new f(t)})),this.title=e.title||"",this.allowed=e.allowed,this.redirect=e.redirect,this.lazy=e.lazy}return(0,a.Z)(t,null,[{key:"routeFabric",value:function(e){var r=new t(e);r.areas=[],e.areas=e.areas||[];var n,a=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(e.areas);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.areas.push(i.Z.areaFactory(o))}}catch(t){a.e(t)}finally{a.f()}return r}}]),t}()},5298:function(t,e,r){"use strict";r.d(e,{sW:function(){return D},D$:function(){return B},eB:function(){return R},BO:function(){return k},pM:function(){return G},hB:function(){return x},DG:function(){return E},vD:function(){return P},p_:function(){return L},Js:function(){return I}});var n=r(34699),a=r(96156),i=r(22122),o=r(87757),s=r.n(o),c=(r(58962),r(97239)),u=(r(3925),r(24402),r(17563)),l=r(92137),p=r(6610),f=r(5991),d=r(10379),h=r(46070),g=r(77608);function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var m=function(t){(0,d.Z)(o,t);var e,r,n,a=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,g.Z)(r);if(n){var a=(0,g.Z)(this).constructor;t=Reflect.construct(e,arguments,a)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function o(t){var e;(0,p.Z)(this,o),e=a.call(this,t),window.assetsCache=window.assetsCache||{},e.regex=new RegExp("[\\s\\r\\t\\n]*([a-z0-9\\-_]+)[\\s\\r\\t\\n]*=[\\s\\r\\t\\n]*(['\"])((?:\\\\\\2|(?!\\2).)*)\\2","ig");var r={},n="";if(e.props.rawSVG){window.assetsCache[e.props.url]=e.props.rawSVG;for(var i,s=(n=e.props.rawSVG).match(/<svg(.*?)=\"(.*?)\">/gi)?n.match(/<svg(.*?)=\"(.*?)\">/gi)[0]:"";i=e.regex.exec(s);)r[i[1]]=i[3];n=(n=(n=(n=n.replace(/<!--[\s\S]*?-->/g,"")).replace(/<![\s\S]*?>/g,"")).replace(/<\?[\s\S]*?\?>/g,"")).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}return e.state={svg:n||"",props:r},e}return(0,f.Z)(o,[{key:"componentDidMount",value:(e=(0,l.Z)(s().mark((function t(){var e,r,n,a,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.assetsCache=window.assetsCache||{},this.props.rawSVG&&(window.assetsCache[this.props.url]=this.props.rawSVG),this.props.url){t.next=4;break}return t.abrupt("return");case 4:if(e=window.assetsCache[this.props.url]){t.next=11;break}return r=new window.altrpHelpers.Resource({route:this.props.url}),t.next=9,r.getAsText();case 9:e=t.sent,window.assetsCache[this.props.url]=e;case 11:for(n=e.match(/<svg(.*?)=\"(.*?)\">/gi)?e.match(/<svg(.*?)=\"(.*?)\">/gi)[0]:"",a={};i=this.regex.exec(n);)a[i[1]]=i[3];this.setState((function(t){return v(v({},t),{},{props:a})})),e=(e=(e=(e=e.replace(/<!--[\s\S]*?-->/g,"")).replace(/<![\s\S]*?>/g,"")).replace(/<\?[\s\S]*?\?>/g,"")).replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),this.setState((function(t){return v(v({},t),{},{svg:e})}));case 20:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"componentDidUpdate",value:function(t,e){this.props.url!==t.url&&this.componentDidMount()}},{key:"render",value:function(){var t,e=_.assign(this.state.props,this.props);if(_.unset(e,"url"),_.unset(e,"rawSVG"),!this.state.svg)return"";var r,n,a,o,s,c,u="";return window.SSR?(null===(r=(t=parse("<div>".concat(this.state.svg,"</div>"))).childNodes[1])||void 0===r||r.removeAttribute("width"),null===(n=t.childNodes[1])||void 0===n||n.removeAttribute("height"),u=null===(a=t.childNodes[1])||void 0===a?void 0:a.outerHTML):((t=document.createElement("div")).innerHTML=this.state.svg,null===(o=t.children[0])||void 0===o||o.removeAttribute("width"),null===(s=t.children[0])||void 0===s||s.removeAttribute("height"),u=null===(c=t.children[0])||void 0===c?void 0:c.outerHTML),React.createElement("svg",(0,i.Z)({},e,{dangerouslySetInnerHTML:{__html:u||this.state.svg}}))}}]),o}(Component);r(66213);c.Z;var O=r(65370);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(){try{return window.SSR}catch(t){return!1}}function j(){return window.iconsManager}function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(_.isEmpty(t))return"";if("image"===t.type&&t.dataUrl)return React.createElement("img",w(w({},e),{},{src:t.dataUrl}));if(t.url&&"svg"===t.type)return React.createElement(m,(0,i.Z)({},e,{url:t.url,rawSVG:t.rawSVG}));if(!S()&&t instanceof File){var r=React.createRef(),n=new FileReader;return n.readAsDataURL(t),n.onload=function(){r.current&&(r.current.src=n.result,r.current.alt=t.name)},React.createElement("img",w(w({},e),{},{src:t.url,ref:r}))}switch(t.assetType){case"icon":return j().renderIcon(t.name,e);case"image":case"media":return React.createElement("img",w(w({},e),{},{src:t.url}));case"mediaBackground":return React.createElement("div",w(w({},e),{},{style:{backgroundImage:"url(".concat(t.url,")")}}));case void 0:return React.createElement("img",w(w({},e),{},{src:"/img/nullImage.png"}))}return""}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e instanceof c.Z||(e=new c.Z(e));var o={},s=window.currentRouterMatch instanceof c.Z?window.currentRouterMatch.getProperty("params"):{};if(!t)return o;var u=t.split("\n");return u.forEach((function(t){var c=t.split("|"),u=(0,n.Z)(c,2),l=u[0],p=u[1];l&&p&&(l=l.trim(),p=p.trim(),i&&-1!==l.indexOf("{{")&&(l=L(l)),i&&p.match(/{{([\s\S]+?)(?=}})/g)?e.getProperty(p.match(/{{([\s\S]+?)(?=}})/g)[0].replace("{{",""))||k(p.match(/{{([\s\S]+?)(?=}})/g)[0].replace("{{",""))?o[l]=e.getProperty(p.match(/{{([\s\S]+?)(?=}})/g)[0].replace("{{",""))||k(p.match(/{{([\s\S]+?)(?=}})/g)[0].replace("{{",""))||"":o[l]=a?s[p.match(/{{([\s\S]+?)(?=}})/g)[0].replace("{{","")]?s[p.match(/{{([\s\S]+?)(?=}})/g)[0].replace("{{","")]:"":p:o[l]=p,!r&&_.isObject(o[l])&&delete o[l])})),o}function k(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!r)return a;if(-1!==r.indexOf("{{")&&(r=L(r,i)),o&&0!==r.trim().indexOf("altrp"))return r;if(-1!==(r=r.trim()).indexOf("?")&&-1!==r.indexOf(":")){var s=r.split("?"),l=(0,n.Z)(s,2),p=l[0],f=l[1],d=f.split(":"),h=(0,n.Z)(d,2);t=h[0],e=h[1],-1!==(t=t.trim()).indexOf(".")&&(t=k(t,a,i)),-1!==(e=e.trim()).indexOf(".")&&(e=k(e,a,i)),r=p.trim()}var g=appStore.getState(),y=g.currentModel,v=g.currentDataStorage,m=g.altrpresponses,b=g.formsStore,w=g.altrpPageState,S=g.altrpPage,j=g.currentUser,P=g.altrpMeta;i&&(y=i instanceof c.Z?i:new c.Z(i));var E=window.currentRouterMatch instanceof c.Z?window.currentRouterMatch.getProperty("params"):{},R=u.parseUrl(window.location.href).query;E=_.assign(R,E);var x=a;if(!_.isString(r))return x;if(0===r.indexOf("altrpdata."))r=r.replace("altrpdata.",""),x=v?v.getProperty(r,a):"";else if(0===r.indexOf("altrpresponses."))r=r.replace("altrpresponses.",""),x=m?m.getProperty(r,a):"";else if(0===r.indexOf("altrpmeta."))r=r.replace("altrpmeta.",""),x=P?P.getProperty(r,a):"";else if(0===r.indexOf("altrppagestate."))r=r.replace("altrppagestate.",""),x=w?w.getProperty(r,a):"";else if(0===r.indexOf("altrpuser."))r=r.replace("altrpuser.",""),x=j?j.getProperty(r,a):"";else if("altrpuser"===r)x=j.getData();else if("altrpmodel"===r)x=y.getData();else if(0===r.indexOf("altrptime."))x=T(r.replace("altrptime.",""));else if(0===r.indexOf("altrpforms."))x=_.get(b,r.replace("altrpforms.",""),a);else if(0===r.indexOf("altrppage."))x=S?S.getProperty(r.replace("altrppage.",""),a):"";else if(0===r.indexOf("altrpelements.")){var D=r.split("."),A=(0,n.Z)(D,4),Z=(A[0],A[1]),N=A[2],M=A[3],U=C(Z);if(U)switch(N){case"settings":x=U.props.element.getSettings(M);break;default:x=""}else x=""}else if(0===r.indexOf("altrpstorage."))r=r.replace("altrpstorage.",""),x=F("altrpstorage",{}),x=_.get(x,r,a);else if(0===r.indexOf("altrpareas.")){var I=r.split("."),B=(0,n.Z)(I,4),G=(B[0],B[1]),V=B[2],H=B[3],K=window.page_areas.find((function(t){return t.id===G}));K&&"settings"===V&&(K instanceof O.Z||(K=O.Z.areaFactory(K)),x=K.getSetting(H,a))}else(x=y.getProperty(r)?y.getProperty(r):E[r])||(x=a);return(t||e)&&(x=x?t:e),x}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="";return _.isString(t)&&(e=_.get(t.match(/{{([\s\S]+?)(?=}})/g),"0","").replace("{{","")),e}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return JSON.parse(t)}catch(r){return null===e?t:e}}r(69852);var D=[{value:"empty",label:"Empty"},{value:"not_empty",label:"Not Empty"},{value:"null",label:"Null"},{value:"not_null",label:"Not Null"},{value:"==",label:"Equals"},{value:"<>",label:"Not Equals"},{value:"between",label:"Between"},{value:">",label:">"},{value:">=",label:">="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"in",label:"In"},{value:"not_in",label:"Not In"},{value:"contain",label:"Contain"},{value:"not_contain",label:"Not Contain"}];function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e;switch(t){case"now":r=_.now();break;case"month_start":r=A(new Date);break;case"prev_month_start":r=A(new Date,-1);break;case"year_start":r=Z(new Date);break;case"prev_year_start":r=Z(new Date,-1);break;case"prev_week_start":r=U();break;case"next_week_start":r=N();break;case"week_start":r=M()}var n=window.altrpHelpers.moment;return n(r).format("YYYY-MM-DD")}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Date(t.getFullYear(),t.getMonth()+e,1)}function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Date(t.getFullYear()+e,0,1)}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=null;return t&&t.trim()?(t=t.trim(),appStore.getState().elements.forEach((function(r){r.elementWrapperRef.current&&r.elementWrapperRef.current.id&&-1!==r.elementWrapperRef.current.id.toString().split(" ").indexOf(t)&&(e=r)})),e):e}function N(){var t=(0,window.altrpHelpers.moment)(),e=7-(t.isoWeekday()-1);return t.add(e,"days")}function M(){var t=(0,window.altrpHelpers.moment)(),e=t.isoWeekday()-1;return t.subtract(e,"days")}function U(){var t=(0,window.altrpHelpers.moment)(),e=t.isoWeekday()-1+7;return t.subtract(e,"days")}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(window.SSR)return t;var r=_.isString(t)?t.match(/{{([\s\S]+?)(?=}})/g):null;return _.isArray(r)&&r.forEach((function(r){var n=k(r=r.replace("{{",""),"",e);0===n&&(n="0"),r=V(r),t=t.replace(new RegExp("{{".concat(r,"}}"),"g"),n||"")})),t}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!t)return e;var r=localStorage.getItem(t);if(!r)return e;try{r=JSON.parse(r)}catch(t){console.error(t)}return _.isString(r)&&Number(r)&&(r=Number(r)),r||e}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_.isArray(t)&&t.forEach((function(t,e){_.isObject(t)&&(t instanceof c.Z?t.setProperty("altrpIndex",e):t.altrpIndex=e)}))}function B(){return Math.random().toString(36).substr(2,9)}function G(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return JSON.parse(t),!0}catch(t){return!1}}function V(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}window.altrphelpers={sumFields:function(t){var e=0;return _.isObject(this.context)?(_.isArray(this.context)||(this.context=[this.context]),this.context.forEach((function(r){e+=Number(_.get(r,t))||0})),e):e}}},29941:function(t,e,r){"use strict";r.d(e,{D:function(){return n},t:function(){return a}});var n="SET_AREAS";function a(t){return{type:n,areas:t}}},51626:function(t,e,r){"use strict";r.d(e,{rA:function(){return n},$L:function(){return a},$:function(){return i},XR:function(){return o},a2:function(){return s}});var n="CHANGE_CURRENT_USER",a="SET_NOTICE_FOR_USER",i="SET_USERS_ONLINE",o="CHANGE_CURRENT_USER_PROPERTY";function s(t){return{type:n,user:t||{}}}},40148:function(t,e,r){"use strict";r.d(e,{r:function(){return y}});var n=r(87329),a=r(96156),i=r(51626),o=r(6610),s=r(5991),c=r(10379),u=r(46070),l=r(77608);var p=function(t){(0,c.Z)(a,t);var e,r,n=(e=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,l.Z)(e);if(r){var a=(0,l.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,s.Z)(a,[{key:"isGuest",value:function(){return this.getProperty("is_guest",!1)}},{key:"isAuth",value:function(){return this.getProperty("created_at",!1)}},{key:"hasPermissions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_.isArray(t)||(t=[t]);var e=this.getProperty("permissions",[]);return _.find(e,(function(e){return _.find(t,(function(t){return parseInt(t)?parseInt(t)===parseInt(e.id):_.isString(t)?t===e.name:void 0}))}))}},{key:"hasRoles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_.isArray(t)||(t=[t]);var e=this.getProperty("roles",[]);return _.find(e,(function(e){return _.find(t,(function(t){return parseInt(t)?parseInt(t)===parseInt(e.id):_.isString(t)?t===e.name:void 0}))}))}},{key:"checkUserAllowed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!this.isAuth()&&(e=_.isArray(e)?e:[],!(t=_.isArray(t)?t:[]).length&&!e.length||!!this.hasPermissions(t)||!!this.hasRoles(e))}}]),a}(r(97239).Z),f=r(3925);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){(0,a.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g=window.current_user||{};function y(t,e){var r;switch(t=t||g,null===(r=e.user)||void 0===r||r.local_storage,e.type){case i.rA:t=e.user,Array.isArray(t.local_storage)&&(t.local_storage={});break;case i.XR:var a=e.path,o=e.value;t.setProperty(a,o);var s={local_storage:_.cloneDeep(t.getProperty("local_storage"))};new f.default({route:"/ajax/current-user"}).put("",s).then((function(t){appStore.dispatch((0,i.a2)(t.data))})).catch((function(t){return console.error(t)}));break;case i.$L:var c,u=e.notice;t=h(h({},t),{},{notice:[].concat((0,n.Z)((null===(c=t.data)||void 0===c?void 0:c.notice)||[]),[u])});break;case i.$:t=h(h({},t),{},{members:e.members})}if(t instanceof p||(t=new p(t)),!window.SSR){var l=document.getElementById("front-app");t.hasRoles("admin")?l&&l.classList.add("front-app_admin"):l&&l.classList.remove("front-app_admin")}return t}}}]);
//# sourceMappingURL=96.admin.js.map