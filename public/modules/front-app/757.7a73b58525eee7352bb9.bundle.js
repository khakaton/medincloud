(self.webpackChunk=self.webpackChunk||[]).push([[757],{1987:function(e,t,n){"use strict";n.d(t,{hX:function(){return i}}),n(87757);var r=n(37895);function i(){return window.iconsManager||(window.iconsManager=new r.default),window.iconsManager}n(38773),n(96486)},71743:function(e,t,n){"use strict";var r=n(6610),i=n(5991),a=n(83465),s=n.n(a),o=n(29208),c=n.n(o),l=n(31468),u=n.n(l),p=n(38394),f=n.n(p),h=n(96633),m=n.n(h),d=n(99245),g=n.n(d),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e),this.data=s()(t)}return(0,i.Z)(e,[{key:"getData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?s()(this.data):this.data}},{key:"isEmpty",value:function(){return g()(this.data)}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(this.data,e,t)}},{key:"hasProperty",value:function(e){return f()(this.data,e)}},{key:"setProperty",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n instanceof e&&(n=n.getData(!1)),u()(this.data,t,n)}},{key:"unsetProperty",value:function(e){return m()(this.data,e)}}]),e}();window.AltrpModel=y,t.Z=y},4011:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(96156),i=n(6610),a=n(5991),s=n(63349),o=n(10379),c=n(46070),l=n(77608),u=n(67294),p=n(22122),f=n(1987),h=n(76593);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){(0,o.Z)(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var i=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function s(e){var t;return(0,i.Z)(this,s),(t=r.call(this,e)).labelClick=function(e){(0,h.isEditor)()&&e.preventDefault()},t.deleteItem=function(e,n){e.preventDefault();var r=t.state.files;r.splice(n,1);var i=[];r.length||t.setState((function(e){return d(d({},e),{},{filesForDisplay:i,files:r})})),console.log(r),_.each(r,(function(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){i.push({src:n.result,alt:e.name||""}),i.length===r.length&&t.setState((function(e){return d(d({},e),{},{filesForDisplay:i,files:r})}))}})),_.isFunction(t.props.onChange)&&t.props.onChange(r)},t.onChange=function(e){if(!(!e.target.files instanceof FileList)){var n=[],r=t.props.settings.content_accept?t.props.settings.content_accept.split(","):[];_.each(e.target.files,(function(e){r.forEach((function(t){t=(t=t.trim()).replace("*",""),0===e.type.indexOf(t)&&n.push(e)}))}));var i=[];n.length||t.setState((function(e){return d(d({},e),{},{filesForDisplay:i,files:n})})),_.each(n,(function(e){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){i.push({src:r.result,alt:e.name||""}),i.length===n.length&&(console.log(i),t.setState((function(e){return d(d({},e),{},{filesForDisplay:i,files:n})})))}})),_.isFunction(t.props.onChange)&&t.props.onChange(n)}},t.state={filesForDisplay:[],files:[]},t}return(0,a.Z)(s,[{key:"render",value:function(){var e=this,t=this.props.settings.select2_multiple,n=this.props.settings.content_placeholder||"",r=this.state.filesForDisplay,i=this.props.settings.content_accept||"",a=["altrp-field-file"];return r.length||a.push("altrp-field-file_empty"),u.createElement("label",{className:a.join(" "),onClick:this.labelClick},u.createElement("span",{className:"altrp-field-file__placeholder"},n),u.createElement("input",{type:"file",className:"altrp-field-file__field",multiple:t,accept:i,onChange:this.onChange}),u.createElement("span",{className:"altrp-field-file-media-list media-list"},(0,h.isEditor)()?u.createElement("span",{className:"media-list-item"},(0,f.hX)().renderIcon("times",{className:"media-list-item__remove"}),(0,h.renderAsset)({},{className:"media-list-item__img"})):r.map((function(t,n){return u.createElement("span",{key:n,className:"media-list-item"},(0,f.hX)().renderIcon("times",{className:"media-list-item__remove",onClick:function(t){e.deleteItem(t,n)}}),u.createElement("img",(0,p.Z)({className:"media-list-item__img"},t)))}))))}}]),s}(u.Component),y=n(91749),v=n.n(y);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.e(882).then(n.bind(n,70882));var k=function(e){(0,o.Z)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var i=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function p(){var e;(0,i.Z)(this,p);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).state={isValid:!0},e.checkValidity=function(t){if(t){var n=e.props.value.replace(/_/g,""),r=!(!n.length||!(0,h.isValueMatchMask)(n,t));e.setState((function(e){return b(b({},e),{},{isValid:r})})),_.set((0,s.Z)(e),"props.element.maskIsValid",r)}},e}return(0,a.Z)(p,[{key:"componentDidUpdate",value:function(e,t){!this.props.value&&this.props.settings.content_mask&&this.state.isValid&&(this.setState((function(e){return b(b({},e),{},{isValid:!1})})),_.set(this,"props.element.maskIsValid",!1))}},{key:"render",value:function(){var e=this,t=window.altrpLibs.Blueprint.InputGroup,n=this.state.isValid,r=this.props.settings,i=r.content_type,a=r.content_mask,s=r.mask_mismatch_message,o=b({},this.props);switch(i){case"file":return u.createElement(g,o)}if(a){var c=a.split("");return c=c.map((function(e){switch(e){case"_":return/\d/;case"*":return/\S/;default:return e}})),o.mask=c,o.guide=!0,o.onBlur=function(t){e.props.onBlur(t),e.checkValidity(c)},o.onChange=function(t){e.props.onChange(t),n||e.checkValidity(c)},u.createElement(u.Fragment,null,u.createElement(v(),o),!n&&s&&u.createElement("p",{className:"mask-mismatch-message"},s))}return"email"===i&&s&&(o.onBlur=function(t){e.props.onBlur(t),e.setState({isValid:(0,h.validateEmail)(t.target.value)})},n||(o.onChange=function(t){e.props.onChange(t),e.setState({isValid:(0,h.validateEmail)(t.target.value)})})),u.createElement(u.Fragment,null,u.createElement(t,o),!n&&"email"===i&&s&&u.createElement("p",{className:"mask-mismatch-message"},s))}}]),p}(u.Component)}}]);
//# sourceMappingURL=757.7a73b58525eee7352bb9.bundle.js.map