(self.webpackChunk=self.webpackChunk||[]).push([[4894],{71743:function(e,t,n){"use strict";var r=n(6610),o=n(5991),a=n(83465),i=n.n(a),l=n(29208),c=n.n(l),s=n(31468),p=n.n(s),u=n(38394),m=n.n(u),d=n(96633),g=n.n(d),v=n(99245),h=n.n(v),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e),this.data=i()(t)}return(0,o.Z)(e,[{key:"getData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?i()(this.data):this.data}},{key:"isEmpty",value:function(){return h()(this.data)}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(this.data,e,t)}},{key:"hasProperty",value:function(e){return m()(this.data,e)}},{key:"setProperty",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n instanceof e&&(n=n.getData(!1)),p()(this.data,t,n)}},{key:"unsetProperty",value:function(e){return g()(this.data,e)}}]),e}();window.AltrpModel=f,t.Z=f},78578:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(22122),o=n(96156),a=n(92137),i=n(6610),l=n(5991),c=n(63349),s=n(10379),p=n(46070),u=n(77608),m=n(32465),d=n(87757),g=n.n(d),v=n(38773);function h(){return f.apply(this,arguments)}function f(){return(f=(0,a.Z)(g().mark((function e(){var t,n,r,o=arguments;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:""){e.next=3;break}return e.abrupt("return",null);case 3:return n=new v.Z({route:"/ajax/menus"}),e.next=6,n.get(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b,y=n(5998),S=n(76593),R=n(32360);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=window.altrpLibs.Blueprint,C=E.Button,O=E.ButtonGroup,D=E.Menu,M=E.MenuItem,I=E.Position,P=window.altrpLibs.Popover2,T=createGlobalStyle(b||(b=(0,m.Z)(["\n  ","\n\n  ","\n  .altrp-menu-item__icon svg {\n    display: block;\n    height: 20px;\n    width: 20px;\n  }\n"])),(function(e){var t=e.elementId,n=e.settings,r=".bp3-menu-item.altrp-menu-item".concat(t,"{align-items:center;border-radius:0;"),o=(0,S.getResponsiveSetting)(n,"padding");o&&(r+=(0,R.dimensionsControllerToStyles)(o));var a=(0,S.getResponsiveSetting)(n,"typographic");a&&(r+=(0,R.typographicControllerToStyles)(a));var i=(0,S.getResponsiveSetting)(n,"bg");i&&i.color&&(r+="background-color: ".concat(i.color,";"));var l=(0,S.getResponsiveSetting)(n,"color");l&&l.color&&(r+="color: ".concat(l.color,";"),r+=".bp3-icon svg, .bp3-icon path{fill: ".concat(l.color,";}")),r+="}",r+=".bp3-popover-open.bp3-popover-target .bp3-menu-item.altrp-menu-item.altrp-menu-item".concat(t,",\n    .bp3-menu-item.altrp-menu-item.altrp-menu-item").concat(t,":hover{"),(i=(0,S.getResponsiveSetting)(n,"bg",":hover"))&&i.color&&(r+="background-color: ".concat(i.color,";")),(a=(0,S.getResponsiveSetting)(n,"typographic",":hover"))&&(r+=(0,R.typographicControllerToStyles)(a)),(l=(0,S.getResponsiveSetting)(n,"color",":hover"))&&l.color&&(r+="color: ".concat(l.color,";"),r+=".bp3-icon svg, .bp3-icon path{fill: ".concat(l.color,";}")),r+="}";var c=(0,S.getResponsiveSetting)(n,"gap");c&&(r+=".altrp-portal".concat(t," .bp3-menu > li:not(:last-child) { margin-bottom: ").concat(c,"}")),r+=".altrp-portal".concat(t," .bp3-menu{");var s=(0,S.getResponsiveSetting)(n,"sub_menu_padding");s&&(r+=(0,R.dimensionsControllerToStyles)(s));var p=(0,S.getResponsiveSetting)(n,"sub_menu_bg");p&&p.color&&(r+="background-color: ".concat(p.color,";")),r+="}",r+=".bp3-portal .altrp-portal.altrp-portal".concat(t," .bp3-popover-content{");var u=(0,S.getResponsiveSetting)(n,"sub_menu_shadow");u&&(r+=(0,R.shadowControllerToStyles)(u)),r+="}",r+=".altrp-portal.altrp-portal".concat(t," .bp3-popover-content,\n    .altrp-portal.altrp-portal").concat(t," .bp3-menu{");var m=(0,S.getResponsiveSetting)(n,"sub_menu_radius");return m&&(r+=(0,R.dimensionsControllerToStyles)(m,"border-radius")),r+="}",r+=".altrp-portal".concat(t," .bp3-menu:hover{"),(p=(0,S.getResponsiveSetting)(n,"sub_menu_bg",":hover"))&&p.color&&(r+="background-color: ".concat(p.color,";")),r+=".bp3-portal .altrp-portal.altrp-portal".concat(t," .bp3-popover-content:hover{"),(u=(0,S.getResponsiveSetting)(n,"sub_menu_shadow",":hover"))&&(r+=(0,R.shadowControllerToStyles)(u)),r+="}",r+="}",r+=".altrp-portal.altrp-portal".concat(t," .bp3-popover-content:hover,\n    .altrp-portal.altrp-portal").concat(t," .bp3-menu:hover{"),(m=(0,S.getResponsiveSetting)(n,"sub_menu_radius",":hover"))&&(r+=(0,R.dimensionsControllerToStyles)(m,"border-radius")),r+"}"}),(function(e){var t=e.elementId,n=e.settings,r=".altrp-element".concat(t,".altrp-widget_menu {"),o=(0,S.getResponsiveSetting)(n,"menu_padding");o&&(r+=(0,R.dimensionsControllerToStyles)(o));var a=(0,S.getResponsiveSetting)(n,"menu_radius");a&&(r+=(0,R.dimensionsControllerToStyles)(a,"border-radius"));var i=(0,S.getResponsiveSetting)(n,"gap");i&&(i=i.replace(",","."),r+="& > li:not(:last-child) { margin-".concat("horizontal"===(0,S.getResponsiveSetting)(n,"type")?"right":"bottom",": ").concat(i,"}")),r+="}",r+=".altrp-element".concat(t," .altrp-menu{");var l=(0,S.getResponsiveSetting)(n,"menu_bg");if(l&&l.color&&(r+="background-color: ".concat(l.color,";")),r+="}",r+=".altrp-element".concat(t,".altrp-widget_menu:hover {"),(a=(0,S.getResponsiveSetting)(n,"menu_radius",":hover"))&&(r+=(0,R.dimensionsControllerToStyles)(a,"border-radius")),r+="}",(0,S.getResponsiveSetting)(n,"button")){r+=".altrp-portal_main.altrp-portal".concat(t," .altrp-menu{");var c=(0,S.getResponsiveSetting)(n,"width");c&&(r+="max-width:".concat(c,";width:").concat(c,";")),r+="}"}return r})),Z=function(e){(0,s.Z)(m,e);var t,n,o=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var o=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,p.Z)(this,e)});function m(e){var t;return(0,i.Z)(this,m),(t=o.call(this,e)).getMenuData=(0,a.Z)(g().mark((function e(){var n,r,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props.element.getResponsiveSetting("menu"),!t.state.menuData&&!t.loading&&n){e.next=3;break}return e.abrupt("return");case 3:if(t.loading=!0,r=appStore.getState().altrpMenus,o=r.find((function(e){return e.guid===n}))){e.next=13;break}return e.next=9,h(n);case 9:(o=e.sent).children=(0,S.mbParseJSON)(o.children),o.settings=(0,S.mbParseJSON)(o.settings),appStore.dispatch((0,y.b)(o));case 13:t.setState((function(e){return k(k({},e),{},{menuData:o})}),(function(){t.loading=!1}));case 14:case"end":return e.stop()}}),e)}))),t.getMenuClasses=function(){return["altrp-menu"].join(" ")},t.renderSubItems=function(e,n){if(!e.length)return null;var r=t.props.element,o={usePortal:!0,portalClassName:"altrp-portal altrp-portal".concat(t.elementId),portalContainer:window.EditorFrame?window.EditorFrame.contentWindow.document.body:document.body},a=t.props.element.getResponsiveSetting("button");return 1!==n||"horizontal"!==r.getResponsiveSetting("type")||a||(o.position=I.BOTTOM_LEFT),React.createElement(React.Fragment,null,e.map((function(e){return React.createElement(M,{popoverProps:o,depth:n,href:e.url,width:100,className:"altrp-menu-item altrp-menu-item".concat(t.elementId),key:e.id,onClick:function(n){n.preventDefault(),!(0,S.isEditor)()&&t.props.history?t.props.history.push(e.url):window.location.href=e.url},icon:React.createElement("span",{className:"altrp-menu-item__icon",dangerouslySetInnerHTML:{__html:e.icon}}),text:e.label},t.renderSubItems(e.children,n+1))})))},t.renderButton=function(){var e=t.state.menuData;if(!e)return null;var n=_.get(e,"settings.toggle_icon","");return React.createElement(P,{content:t.renderVerticalMenu(),className:"altrp-popover",portalContainer:window.EditorFrame?window.EditorFrame.contentWindow.document.body:document.body,portalClassName:"altrp-portal altrp-portal_main altrp-portal".concat(t.elementId),minimal:!0},React.createElement(C,{className:"altrp-menu-toggle",text:n?React.createElement("span",{className:"altrp-menu-item__icon",dangerouslySetInnerHTML:{__html:n}}):""}))},t.state={},window.elementDecorator&&window.elementDecorator((0,c.Z)(t)),e.baseRender&&(t.render=e.baseRender((0,c.Z)(t))),t.elementId=e.element.getId(),t}return(0,l.Z)(m,[{key:"renderHorizontalMenu",value:function(){var e=this;this.getMenuData();var t=this.state.menuData;return t?React.createElement(O,{fill:!0,alignText:"left"},t.children.map((function(t){return React.createElement(C,{minimal:!0,icon:React.createElement("span",{className:"altrp-menu-item__icon",dangerouslySetInnerHTML:{__html:t.icon}}),rightIcon:"caret-down",text:t.label,href:t.url,key:t.id,onClick:function(n){n.preventDefault(),!(0,S.isEditor)()&&e.props.history?e.props.history.push(t.url):window.location.href=t.url}})}))):"Select Menu"}},{key:"renderVerticalMenu",value:function(){this.getMenuData();var e=this.state.menuData;return e?React.createElement(D,{className:this.getMenuClasses()},this.renderSubItems(e.children,1)):"Select Menu"}},{key:"render",value:function(){this.getMenuData();var e=this.props.element.getResponsiveSetting("type");if(this.props.element.getResponsiveSetting("button"))return React.createElement(React.Fragment,null,React.createElement(T,(0,r.Z)({},this.props,{settings:this.props.element.getSettings(),elementId:this.elementId})),this.renderButton());switch(e){case"horizontal":default:return React.createElement(React.Fragment,null,React.createElement(T,(0,r.Z)({},this.props,{settings:this.props.element.getSettings(),elementId:this.elementId})),this.renderVerticalMenu())}}}]),m}(Component)},5998:function(e,t,n){"use strict";n.d(t,{Q:function(){return r},b:function(){return o}});var r="ADD_MENU";function o(e){return{type:r,menu:e}}}}]);
//# sourceMappingURL=MenuWidget.1adca5ca11f97cf45a65.bundle.js.map