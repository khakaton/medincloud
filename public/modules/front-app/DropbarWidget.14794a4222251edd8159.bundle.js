(self.webpackChunk=self.webpackChunk||[]).push([[506],{71743:function(e,t,n){"use strict";var r=n(6610),o=n(5991),s=n(83465),i=n.n(s),a=n(29208),p=n.n(a),c=n(31468),l=n.n(c),d=n(38394),u=n.n(d),h=n(96633),f=n.n(h),b=n(99245),g=n.n(b),m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e),this.data=i()(t)}return(0,o.Z)(e,[{key:"getData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?i()(this.data):this.data}},{key:"isEmpty",value:function(){return g()(this.data)}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p()(this.data,e,t)}},{key:"hasProperty",value:function(e){return u()(this.data,e)}},{key:"setProperty",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n instanceof e&&(n=n.getData(!1)),l()(this.data,t,n)}},{key:"unsetProperty",value:function(e){return f()(this.data,e)}}]),e}();window.AltrpModel=m,t.Z=m},46251:function(e,t,n){"use strict";var r=n(96156),o=n(92137),s=n(6610),i=n(5991),a=n(10379),p=n(46070),c=n(77608),l=n(87757),d=n.n(l),u=n(71743);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){(0,a.Z)(g,e);var t,r,l,h,b=(l=g,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,c.Z)(l);if(h){var n=(0,c.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,p.Z)(this,e)});function g(e){var t;return(0,s.Z)(this,g),(t=b.call(this,e)).state={templateComponent:null},t}return(0,i.Z)(g,[{key:"componentDidMount",value:(r=(0,o.Z)(d().mark((function e(){var t,r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4079),n.e(6593),n.e(7576),n.e(3327)]).then(n.bind(n,81352));case 2:return t=e.sent.default,e.next=5,Promise.all([n.e(4079),n.e(6593),n.e(7576),n.e(3897)]).then(n.bind(n,85009));case 5:return r=e.sent.default,e.next=8,Promise.all([n.e(5977),n.e(4079),n.e(6593),n.e(2360),n.e(268),n.e(9889)]).then(n.bind(n,11914));case 8:o=e.sent.default,this.setState((function(e){return f(f({},e),{},{templateLoader:t,frontElementsFabric:r,ElementWrapper:o})}),this.loadTemplate);case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadTemplate",value:(t=(0,o.Z)(d().mark((function e(){var t,n,r,s,i=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,n=this.state,r=n.templateLoader,s=n.frontElementsFabric,!this.props.templateId){e.next=9;break}return e.next=5,r.loadParsedTemplate(this.props.templateId);case 5:t=e.sent,t=s.cloneElement(t),this.props.cardModel instanceof u.Z&&t.setCardModel(this.props.cardModel),t=React.createElement(t.componentClass,f(f({},this.props),{},{children:t.children,element:t,ElementWrapper:this.state.ElementWrapper}));case 9:this.setState((function(e){return f(f({},e),{},{templateComponent:t})}),(0,o.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.isFunction(i.props.onLoad)&&i.props.onLoad();case 2:case"end":return e.stop()}}),e)}))));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e,t){this.props.templateId!==e.templateId&&this.loadTemplate()}},{key:"render",value:function(){return React.createElement("div",{className:"inner-template"},this.state.templateComponent)}}]),g}(Component);t.Z=b},97333:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(96156),o=n(92137),s=n(6610),i=n(5991),a=n(63349),p=n(10379),c=n(46070),l=n(77608),d=n(87757),u=n.n(d),h=n(67294),f=n(76593),b=n(28481),g=n(73935),m=n(8785),y=n(76450);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=(0,h.useRef)(),n=(0,h.useState)(e.settings.updateSettings||{}),r=(0,b.Z)(n,2),o=r[0],s=r[1],i=(0,h.useState)(!1),a=(0,b.Z)(i,2),p=a[0],c=a[1],l=(0,y.D9)(e.updateToken),d=document.body;e.editor||(d=(0,h.useMemo)((function(){return(0,f.isEditor)()?document.getElementById("editorContent").contentWindow.document.body:document.body})));var u=e.settings.placement,_=["bottom-start","bottom","bottom-end","top-start","top","top-end","left-start","left","left-end","right-start","right","right-end"];-1===_.indexOf(u)&&(console.log(u),u=_[0]);var v=(0,m.D)(e.target.current,t.current,{placement:u,modifiers:[{name:"offset",options:{offset:e.settings.offset}}]}),k=v.styles,x=v.attributes,O=v.forceUpdate,S=v.update;return(0,h.useEffect)((function(){e.updateToken!==l&&(O(),new Event("resize",{bubbles:!0,cancelable:!0}),(0,f.isEditor)()||console.log(),S()),0!==Object.keys(o).length&&JSON.stringify(o)!==JSON.stringify(e.settings.updateSettings)&&(s(e.settings.updateSettings),O()),!p&&e.target.current&&(console.log("aann"),c(!0))}),[e.children,u,e.target,e.updateToken]),e.portal?g.createPortal(h.cloneElement(e.children,w({ref:t,style:k.popper},x.popper)),d):h.cloneElement(e.children,w({ref:t,style:k.popper},x.popper))}var x,O=n(46251),S=n(32465),E=n(32360),Z=styled.div(x||(x=(0,S.Z)(["\n  ","\n"])),(function(e){var t=e.settings;return(0,E.styledString)(["&.altrp-dropbar-btn-containter",["width","width_dropbar_options","slider"],["padding","padding_dropbar_content_style","dimensions"],["background-color","background_dropbar_content_style","color"],["border-style","border_style_dropbar_content_style"],["border-width","border_width_dropbar_content_style","dimensions"],["border-color","border_color_dropbar_content_style","color"],["border-radius","border_radius_dropbar_content_style","dimensions"],["box-shadow","box_shadow_dropbar_content_style","shadow"],"}","altrp-dropbar-btn-content",["color","text_color_dropbar_content_style","color"],["","typographic_text_dropbar_content_style","typographic"],"}","&:hover.altrp-dropbar-btn-containter",["background-color","background_dropbar_content_style","color",":hover"],["border-style","border_style_dropbar_content_style","",":hover"],["border-width","border_width_dropbar_content_style","dimensions",":hover"],["border-color","border_color_dropbar_content_style","color",":hover"],["border-radius","border_radius_dropbar_content_style","dimensions",":hover"],["box-shadow","box_shadow_dropbar_content_style","shadow",":hover"],"}","&:hover .altrp-dropbar-btn-content",["color","text_color_dropbar_content_style","color",":hover"],["","typographic_text_dropbar_content_style","typographic",":hover"],"}"],t)}));var j=function(e){(0,p.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.Z)(t);if(n){var o=(0,l.Z)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,c.Z)(this,e)});function o(e){var t;return(0,s.Z)(this,o),(t=r.call(this,e)).state={show:!1,updateToken:void 0},t.show=t.show.bind((0,a.Z)(t)),t.leaveHide=t.leaveHide.bind((0,a.Z)(t)),t.enterShow=t.enterShow.bind((0,a.Z)(t)),t.children=h.createRef(),t}return(0,i.Z)(o,[{key:"show",value:function(){var e=this;this.props.settings.show_delay_dropbar_options.size||this.props.settings.hide_delay_dropbar_options.size?this.state.show?setTimeout((function(){e.setState((function(e){return{show:!e.show}}))}),this.props.settings.hide_delay_dropbar_options.size):setTimeout((function(){e.setState((function(e){return{show:!e.show}}))}),this.props.settings.show_delay_dropbar_options.size):this.setState((function(e){return{show:!e.show}}))}},{key:"leaveHide",value:function(){var e=this;this.props.settings.hide_delay_dropbar_options.size?setTimeout((function(){e.setState({show:!1})}),this.props.settings.hide_delay_dropbar_options.size):this.setState({show:!1})}},{key:"enterShow",value:function(e){var t=this;e.currentTarget,this.props.showDelay.size&&!this.state.show?setTimeout((function(){t.setState({show:!0})}),this.props.showDelay.size):this.setState((function(e){return{show:!e.show}}))}},{key:"componentDidUpdate",value:function(e,t,n){this.state.show,t.show}},{key:"render",value:function(){var e=this,t=h.Children.only(this.props.children),n="altrp-dropbar-"+this.props.className,r=this.props.settings.type_dropbar_section||"text",o=this.props.getContent("content_dropbar_section");return h.createElement("div",{className:"altrp-dropbar altrp-dropbar-"+n},h.createElement("span",{className:"altrp-dropbar-children-wrapper "+n+"-wrapper",onMouseEnter:"hover"===this.props.settings.mode_dropbar_options?this.enterShow:null,onMouseLeave:"hover"===this.props.settings.mode_dropbar_options?this.leaveHide:null},h.cloneElement(t,{ref:this.children,onClick:"click"===this.props.settings.mode_dropbar_options?this.show:null}),h.createElement(k,{target:this.children,portal:!0,updateToken:this.state.updateToken,settings:{placement:this.props.settings.position_dropbar_options,offset:[0,this.props.settings.offset_dropbar_options.size],updateSettings:{width:this.props.settings.width_dropbar_options}}},h.createElement(Z,{settings:this.props.element.getSettings(),className:"altrp-dropbar-container "+" ".concat(this.props.elemenentId,"-altrp-dropbar ")+n+"-containter"+(this.state.show?" altrp-dropbar-container-show":" altrp-dropbar-container-hide")},"text"===r?h.createElement("div",{className:"altrp-dropbar-content "+n+"-content",dangerouslySetInnerHTML:{__html:o||""}}):h.createElement(O.Z,{onLoad:function(){e.setState({updateToken:Math.random()})},templateId:this.props.settings.template_dropbar_section,cardModel:this.props.element.getCurrentModel()})))))}}]),o}(h.Component);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(window.globalDefaults=window.globalDefaults||[]).push("\n  .altrp-btn-wrapper_dropbar.altrp-btn-wrapper {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n\n    & img {\n      max-width: 100%;\n    }\n  }\n\n  .altrp-btn-wrapper_dropbar .altrp-btn {\n    width: auto;\n    text-decoration: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 6px;\n    flex-direction: row;\n    background-color: #343B4C;\n    color: #FFFFFF;\n    padding-top: 20px;\n    padding-right: 25px;\n    padding-bottom: 20px;\n    padding-left: 25px\n\n    &_gray {\n      background-color: #8E94AA;\n      color: #fff;\n    }\n\n    &__icon {\n      transform: scale(0.6);\n    }\n\n    &-icon {\n      display: flex;\n      justify-content: center;\n    }\n\n    & svg {\n      height: 25px;\n      width: 25px;\n    }\n  }\n\n  .altrp-dropbar {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: auto;\n  }\n\n  .altrp-dropbar-children-wrapper {\n    display: flex;\n    position: relative;\n  }\n\n  .altrp-btn-dropbar {\n    width: 100%;\n  }\n\n  .altrp-dropbar-container {\n    position: absolute;\n    color: #666;\n    padding: 30px;\n    background-color: #f1f3f5;\n  }\n\n  .altrp-dropbar-content {\n    user-select: text;\n  }\n\n  .altrp-dropbar-container-hide {\n    visibility: hidden;\n  }\n\n  .altrp-dropbar-variant-bottom-center .altrp-dropbar-children-wrapper {\n    position: static;\n    justify-content: center;\n  }\n\n  .altrp-dropbar-variant-top-center .altrp-dropbar-children-wrapper {\n    position: static;\n    justify-content: center;\n  }\n\n  .altrp-dropbar-variant-left-center .altrp-dropbar-children-wrapper {\n    align-items: center;\n  }\n\n  .altrp-dropbar-variant-right-center .altrp-dropbar-children-wrapper {\n    align-items: center;\n  }\n\n  .altrp-dropbar-container {\n    z-index: 9999;\n  }\n");var D=function(e){(0,p.Z)(m,e);var t,r,d,b,g=(d=m,b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,l.Z)(d);if(b){var n=(0,l.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function m(e){var t;return(0,s.Z)(this,m),(t=g.call(this,e)).state={settings:e.element.getSettings(),pending:!1},e.element.component=(0,a.Z)(t),window.elementDecorator&&window.elementDecorator((0,a.Z)(t)),e.baseRender&&(t.render=e.baseRender((0,a.Z)(t))),t.onClick=t.onClick.bind((0,a.Z)(t)),t}return(0,i.Z)(m,[{key:"_componentWillUnmount",value:(r=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(2167).then(n.bind(n,2167));case 2:e.sent.default.unregisterWidgetActions(this.props.element.getId());case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onClick",value:(t=(0,o.Z)(u().mark((function e(t){var r,s,i,a,p,c=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),!(0,f.isEditor)()){e.next=5;break}t.preventDefault(),e.next=13;break;case 5:if(!this.props.element.getResponsiveSetting("actions",null,[]).length){e.next=13;break}return t.preventDefault(),t.stopPropagation(),e.next=10,n.e(2167).then(n.bind(n,2167));case 10:return r=e.sent.default,e.next=13,r.callAllWidgetActions(this.props.element.getIdForAction(),"click",this.props.element.getSettings("actions",[]),this.props.element);case 13:this.props.element.getForms().length?(this.setState((function(e){return P(P({},e),{},{pending:!0})})),this.props.element.getForms().forEach(function(){var e=(0,o.Z)(u().mark((function e(t){var n,r,o,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.submit(c.getModelId(),c.props.element.getResponsiveSetting("form_confirm"));case 3:if(!(n=e.sent).success){e.next=14;break}if(r=c.state.settings,o=r.redirect_to_prev_page,s=r.redirect_after,!o){e.next=8;break}return e.abrupt("return",history.back());case 8:if(!s){e.next=11;break}return s=(0,f.parseURLTemplate)(s,n.data),e.abrupt("return",c.props.history.push(s));case 11:c.props.element.getResponsiveSetting("text_after",null,"")&&alert(c.props.element.getResponsiveSetting("text_after",null,"")),e.next=15;break;case 14:n.message&&alert(n.message);case 15:c.setState((function(e){return P(P({},e),{},{pending:!1})})),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.error(e.t0),c.setState((function(e){return P(P({},e),{},{pending:!1})}));case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}())):t.target.href&&0===t.target.href.replace(window.location.origin+window.location.pathname,"").indexOf("#")?(s=t.target.href.replace(window.location.origin+window.location.pathname,"").replace("#",""),(i=(0,f.getHTMLElementById)(s))&&(t.preventDefault(),(0,f.scrollToElement)(mainScrollbars,i))):this.props.element.getResponsiveSetting("hide_elements_trigger")?this.props.toggleTrigger(this.props.element.getResponsiveSetting("hide_elements_trigger")):this.props.element.getResponsiveSetting("other_action_type",null,[]).includes("print_elements")&&(a=(a=this.props.element.getResponsiveSetting("print_elements_ids",null,"")).split(","),p=[],a.forEach((function(e){var t;if(e&&e.trim()&&((0,f.getHTMLElementById)(e.trim())&&p.push((0,f.getHTMLElementById)(e)),null!==(t=(0,f.getComponentByElementId)(e.trim()))&&void 0!==t&&t.getStylesHTMLElement)){var n=(0,f.getComponentByElementId)(e.trim()).getStylesHTMLElement();n&&p.push(n)}})),_.get(window,"stylesModule.stylesContainer.current")&&p.push(_.get(window,"stylesModule.stylesContainer.current")),p.push(document.head),(0,f.printElements)(p));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.element.getResponsiveSetting("button_text","",""),t=this.props.element.getResponsiveSetting("position_css_id","",""),n=this.props.element.getResponsiveSetting("position_css_classes","",null),r=this.props.element.getResponsiveSetting("background_image",null,{}),o=this.props.element.getResponsiveSetting("button_icon","",{}),s=this.props.element.getResponsiveSetting("show_delay_dropbar_options"),i=o.url;this.state.pending&&a.push("altrp-disabled");var a=["altrp-btn","dropbar"];n&&a.push(n),r.url&&a.push("altrp-background-image"),this.isDisabled()&&a.push("state-disabled");var p=h.createElement("button",{onClick:this.onClick,className:_.join(a," "),id:t},e,i?!(0,f.isSSR)()&&h.createElement("span",{className:"altrp-btn-icon"},(0,f.renderAssetIcon)(o)," "):"");return h.createElement("div",{className:"altrp-btn-wrapper_dropbar altrp-btn-wrapper"},h.createElement(j,{elemenentId:this.props.element.getId(),settings:this.props.element.getSettings(),className:"btn",element:this.props.element,getContent:this.getContent,showDelay:s},p))}}]),m}(h.Component)},76450:function(e,t,n){"use strict";n.d(t,{q1:function(){return o},D9:function(){return s}});var r=n(67294);function o(e){return"function"==typeof e&&!!e.prototype.isReactComponent}function s(e){var t=(0,r.useRef)();return(0,r.useEffect)((function(){t.current=e}),[e]),t.current}}}]);
//# sourceMappingURL=DropbarWidget.14794a4222251edd8159.bundle.js.map