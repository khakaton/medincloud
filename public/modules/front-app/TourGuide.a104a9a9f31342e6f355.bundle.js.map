{"version":3,"sources":["webpack:///./resources/modules/editor/src/js/classes/AltrpModel.js","webpack:///./resources/modules/editor/src/js/components/altrp-tour/AltrpTour.js","webpack:///./resources/modules/editor/src/js/components/widgets/TourGuide.js"],"names":["AltrpModel","data","this","cloneDeep","clone","isEmpty","name","defaultValue","get","has","value","getData","set","unset","window","props","state","isTourOpen","show","steps","setState","s","isOpen","onRequestClose","setIsTourOpen","Component","container","document","body","elementDecorator","baseRender","render","element","settings","showTutorial","isEditor","getResponsiveSetting","length","map","step","selector","_","content","startAt"],"mappings":"2OAYMA,E,WACJ,aAAuB,IAAXC,EAAW,uDAAJ,IAAI,eACrBC,KAAKD,KAAOE,IAAUF,G,sCAQxB,WAAsB,IAAdG,IAAc,yDACpB,OAAGA,EACMD,IAAUD,KAAKD,MAEjBC,KAAKD,O,qBAMd,WACE,OAAOI,IAAQH,KAAKD,Q,yBAQtB,SAAYK,GAAyB,IAAnBC,EAAmB,uDAAJ,GAC/B,OAAOC,IAAIN,KAAKD,KAAMK,EAAMC,K,yBAQ9B,SAAYD,GACV,OAAOG,IAAIP,KAAKD,KAAMK,K,yBAQxB,SAAYA,GAAkB,IAAZI,EAAY,uDAAJ,GAIxB,OAHGA,aAAiBV,IAClBU,EAAQA,EAAMC,SAAQ,IAEjBC,IAAIV,KAAKD,KAAMK,EAAMI,K,2BAO9B,SAAcJ,GACZ,OAAOO,IAAMX,KAAKD,KAAMK,O,KAG5BQ,OAAOd,WAAaA,EACpB,O,8vBCrCA,E,wcAhCM,WAAYe,GAAO,6BACb,cAAMA,IAEDC,MAAQ,CACPC,WAAYF,EAAMG,KAClBC,MAAOJ,EAAMI,OALN,E,4CASnB,SAAcT,GACRR,KAAKkB,UAAS,SAAAC,GAAC,cAAUA,GAAV,IAAaJ,WAAYP,S,oBAG9C,WAAS,WACH,OACM,gCACM,gBAAC,KAAD,CACMS,MAAOjB,KAAKc,MAAMG,MAClBG,OAAQpB,KAAKc,MAAMC,WACnBM,eAAgB,kBAAM,EAAKC,eAAc,W,GArB/CC,a,eCoCxB,E,wcApCE,WAAYV,GAAO,6BACjB,cAAMA,IACDC,MAAQ,CACXU,UAAWC,SAASC,MAElBd,OAAOe,kBACTf,OAAOe,kBAAP,WAEEd,EAAMe,aACR,EAAKC,OAAShB,EAAMe,YAAN,YATC,E,qCAcnB,WACE,IAAIZ,EAAOhB,KAAKa,MAAMiB,QAAQC,SAASC,aACvC,KAAKC,iBAAkF,IAApEjC,KAAKa,MAAMiB,QAAQI,qBAAqB,QAAS,GAAI,IAAIC,OAC1E,OAAO,yCAET,IAAIlB,EAAQjB,KAAKa,MAAMiB,QAAQC,SAASd,MAAMmB,KAAI,SAAAC,GAAI,MAAK,CACzDC,SAAU,iBAAF,OAAmBC,EAAEjC,IAAI+B,EAAM,YACvCG,QAASD,EAAEjC,IAAI+B,EAAM,QACrBI,QAAS,QAKX,OAHIR,kBACFjB,GAAO,GAED,yCACLiB,iBACG,oEAEJ,oBAAC,EAAD,CAAWjB,KAAMA,EAAMC,MAAOA,S,GAhCZM","file":"TourGuide.a104a9a9f31342e6f355.bundle.js","sourcesContent":["/**\r\n * Имеет интерфейс для доступы к свойствам data (любой вложенности)\r\n * @class AltrpModel\r\n */\r\nimport cloneDeep from 'lodash.clonedeep';\r\nimport get from 'lodash.get';\r\nimport set from 'lodash.set';\r\nimport has from 'lodash.has';\r\nimport unset from 'lodash.unset';\r\nimport isEmpty from 'lodash.isempty';\r\n// import {cloneDeep, get, set, has, unset, isString, isEmpty} from \"lodash\";\r\n\r\nclass AltrpModel {\r\n  constructor(data = {}) {\r\n    this.data = cloneDeep(data);\r\n  }\r\n\r\n  /**\r\n   * Возваращает объект данных\r\n   * @params {boolean} clone - клонировать или ссылку на данные\r\n   * @return {{}}\r\n   */\r\n  getData(clone = true) {\r\n    if(clone){\r\n      return cloneDeep(this.data);\r\n    }\r\n    return this.data;\r\n  }\r\n\r\n  /**\r\n   * Пустой ли объект\r\n   */\r\n  isEmpty(){\r\n    return isEmpty(this.data);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {*}\r\n   */\r\n  getProperty(name, defaultValue = '') {\r\n    return get(this.data, name, defaultValue);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {*}\r\n   */\r\n  hasProperty(name, defaultValue = '') {\r\n    return has(this.data, name);\r\n  }\r\n  /**\r\n   * Возврашает значение свойства name\r\n   * @params {string} name\r\n   * @params {*} defaultValue\r\n   * @return {{}}\r\n   */\r\n  setProperty(name, value = '') {\r\n    if(value instanceof AltrpModel){\r\n      value = value.getData(false);\r\n    }\r\n    return set(this.data, name, value);\r\n  }\r\n  /**\r\n   * Удаляет свойства name\r\n   * @params {string} name\r\n   * @return {*}\r\n   */\r\n  unsetProperty(name) {\r\n    return unset(this.data, name);\r\n  }\r\n}\r\nwindow.AltrpModel = AltrpModel;\r\nexport default AltrpModel\r\n","import React, { Component } from \"react\";\r\nimport Tour from 'reactour';\r\n\r\n\r\nclass AltrpTour extends Component {\r\n\r\n      constructor(props) {\r\n            super(props);\r\n\r\n            this.state = {\r\n                  isTourOpen: props.show,\r\n                  steps: props.steps\r\n            };\r\n      }\r\n\r\n      setIsTourOpen(value) {\r\n            this.setState(s => ({ ...s, isTourOpen: value }));\r\n      }\r\n\r\n      render() {\r\n            return (\r\n                  <>\r\n                        <Tour\r\n                              steps={this.state.steps}\r\n                              isOpen={this.state.isTourOpen}\r\n                              onRequestClose={() => this.setIsTourOpen(false)}\r\n                        />\r\n                  </>\r\n            );\r\n      }\r\n}\r\n\r\nconst steps = [\r\n      {\r\n            selector: '.altrp-element_ncml8z2tn',\r\n            content: 'This is my first Step',\r\n      },\r\n];\r\nexport default AltrpTour;","import AltrpTour from '../altrp-tour/AltrpTour';\r\nimport {isEditor} from \"../../../../../front-app/src/js/helpers\";\r\n\r\nclass TourGuide extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      container: document.body\r\n    };\r\n    if (window.elementDecorator) {\r\n      window.elementDecorator(this);\r\n    }\r\n    if (props.baseRender) {\r\n      this.render = props.baseRender(this);\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    let show = this.props.element.settings.showTutorial;\r\n    if (!isEditor() && this.props.element.getResponsiveSetting('steps', '', []).length === 0) {\r\n      return <></>\r\n    }\r\n    let steps = this.props.element.settings.steps.map(step => ({\r\n      selector: `.altrp-element${_.get(step, 'element')}`,\r\n      content: _.get(step, 'text'),\r\n      startAt: 1000\r\n    }));\r\n    if (isEditor()) {\r\n      show = false;\r\n    }\r\n    return (<>\r\n      {isEditor() && (\r\n          <div>Нажмите, чтобы настроить обучение</div>\r\n      )}\r\n      <AltrpTour show={show} steps={steps}></AltrpTour>\r\n    </>);\r\n  }\r\n}\r\n\r\nexport default TourGuide\r\n"],"sourceRoot":""}