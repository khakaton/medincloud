(self.webpackChunk=self.webpackChunk||[]).push([[9741],{99822:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return S}});var s,a=n(96156),r=n(92137),i=n(6610),o=n(5991),p=n(10379),u=n(46070),l=n(77608),c=n(87757),d=n.n(c),f=n(67294),g=n(74374),m=n(81352),h=n(85009),v=n(71743),y=n(11914),O=n(76593),b=n(32465),P=n(71893).ZP.div(s||(s=(0,b.Z)(["{\n  grid-template-columns: repeat(",", 1fr);\n  display: grid;    \n  ","\n"])),(function(t){return t.columnsCount}),(function(t){var e=t.posts_columns_gap,n=t.posts_rows_gap,s="";return e&&!Number(e)?s+="grid-column-gap:".concat(e,";"):Number(e)&&(s+="grid-column-gap:".concat(e,"px;")),n&&!Number(n)?s+="grid-row-gap:".concat(n,";"):Number(n)&&(s+="grid-row-gap:".concat(n,"px;")),s})),E=n(49825);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.e(350).then(n.bind(n,90350)),n.e(8102).then(n.bind(n,48102));var C=function(t){(0,p.Z)(g,t);var e,n,s,a,c=(s=g,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(s);if(a){var n=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,u.Z)(this,t)});function g(t){var e;return(0,i.Z)(this,g),(e=c.call(this,t)).renderPost=function(t){var n=_.get(e.props.settings,"posts_card_hover_template",null),s=_.get(e.props.settings,"posts_transition_type",null),a=_.cloneDeep(e.props.data[t]||e.props.data),r=a.component||"";if(e.state.simpleTemplate){var i=h.default.cloneElement(e.state.simpleTemplate);i.setCardModel(new v.Z(a),t),r=f.createElement(i.componentClass,{element:i,ElementWrapper:y.default,children:i.children})}return f.createElement(f.Fragment,{key:(a.id||a.altrpIndex)+Math.random()},f.createElement("div",{className:"altrp-post"},r,n&&f.createElement("div",{className:"altrp-post altrp-post--hover altrp-post--hover--".concat(s)},r)))},e.state={simpleTemplate:"",simpleTemplateId:null,currentPage:1},e}return(0,o.Z)(g,[{key:"componentDidMount",value:(n=(0,r.Z)(d().mark((function t(){var e,n,s=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props.settings,!(n=_.get(e,"posts_card_template"))){t.next=6;break}if(n){t.next=5;break}return t.abrupt("return");case 5:this.setState((function(t){return x(x({},t),{},{simpleTemplateId:n})}),(0,r.Z)(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.default.loadParsedTemplate(n);case 2:e=t.sent,s.setState((function(t){return x(x({},t),{},{simpleTemplate:e})}));case 4:case"end":return t.stop()}}),t)}))));case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"shouldComponentUpdate",value:function(t,e){return!((0,O.isEditor)()&&this.props.settings===t.settings&&_.isEqual(this.state.simpleTemplate,e.simpleTemplate)&&_.isEqual(this.state.simpleTemplateId,e.simpleTemplateId)&&_.isEqual(this.props.data,t.data)&&this.state.currentPage===e.currentPage)}},{key:"componentDidUpdate",value:(e=(0,r.Z)(d().mark((function t(e){var n,s,a,i=this;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.props.settings,s=this.state.simpleTemplateId,a=_.get(n,"posts_card_template",s),_.isEqual(e.data,this.props.data)||this.setState((function(t){return x(x({},t),{},{posts:i.props.data})})),a===s){t.next=8;break}if(a){t.next=7;break}return t.abrupt("return");case 7:this.setState((function(t){return x(x({},t),{},{simpleTemplateId:a})}),(0,r.Z)(d().mark((function t(){var e;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.default.loadParsedTemplate(a);case 2:e=t.sent,i.setState((function(t){return x(x({},t),{},{simpleTemplate:e})}));case 4:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getPageCount",value:function(){var t=this.props.data,e=Number((0,O.getResponsiveSetting)(this.props.settings,"posts_per_page"))||12;return e&&_.get(t,"length")?Math.ceil(t.length/e):1}},{key:"setPage",value:function(t){(t=Number(t))||(t=1),t<0&&(t=0),t>this.getPageCount()&&(t=this.getPageCount()),this.state.currentPage!==t&&this.setState((function(e){return x(x({},e),{},{currentPage:t})}))}},{key:"renderPagination",value:function(){var t=this,e=x({},this.props.settings);if(!this.props.data.length&&!(0,O.isEditor)())return null;var n=(0,O.getResponsiveSetting)(this.props.settings,"posts_pagination_type")||"";if(n){var s=this.state.currentPage,a=this.getPageCount();if("pages"===n){e.hide_pagination_select=!0,e.hide_page_input=!0;var r={settings:e,pageCount:a,pageIndex:this.state.currentPage-1,nextPage:function(){t.setPage(t.state.currentPage+1)},previousPage:function(){t.setPage(t.state.currentPage-1)},gotoPage:function(e){t.setPage(e+1)},pageSize:this.props.element.getResponsiveSetting("posts_per_page"),widgetId:this.props.element.getId()};return f.createElement(E.Z,r)}return"prev_next"===n?f.createElement("div",{className:"altrp-pagination-pages"},f.createElement("button",{className:"altrp-pagination__previous "+(s<=1?"state-disabled":""),disabled:s<=1,onClick:function(){t.setPage(s-1)}},f.createElement("span",null,e.posts_prev_text||""),(0,O.renderAssetIcon)(e.prev_icon)),f.createElement("button",{className:"altrp-pagination__next "+(s===a?"state-disabled":""),disabled:s===a,onClick:function(){t.setPage(s+1)}},f.createElement("span",null,e.posts_next_text||""),(0,O.renderAssetIcon)(e.next_icon))):f.createElement("div",{className:"altrp-pagination"},!e.hide_pre_page_button&&f.createElement("button",{className:"altrp-pagination__previous",onClick:function(){return t.setPage(s-1)},disabled:s<=1},f.createElement("span",{dangerouslySetInnerHTML:{__html:e.prev_text||"Previous Page"}}),(0,O.renderAssetIcon)(e.prev_icon)),!e.hide_pages_buttons_button&&f.createElement("div",{className:"altrp-pagination__count"},e.pageText),!e.hide_next_page_button&&f.createElement("button",{className:"altrp-pagination__next",onClick:function(){return t.setPage(s+1)},disabled:s===a},f.createElement("span",{dangerouslySetInnerHTML:{__html:e.next_text||"Next Page"}}),(0,O.renderAssetIcon)(e.next_icon)))}return null}},{key:"render",value:function(){var t=this,e=this.state.currentPage,n=Number((0,O.getResponsiveSetting)(this.props.settings,"posts_per_page"))||12,s=this.props.data;!_.isArray(s)&&_.isObject(s)&&(s=[s]),_.isArray(s)||(s=[]);var a=0;n&&Number(n)&&(e>1&&(a=(e-1)*n),s=s.slice(a,a+n));var r=Number((0,O.getResponsiveSetting)(this.props.settings,"posts_columns"))||1,i=(0,O.getResponsiveSetting)(this.props.settings,"posts_columns_gap")||"",o=(0,O.getResponsiveSetting)(this.props.settings,"posts_rows_gap")||"";return f.createElement(f.Fragment,null,f.createElement(P,{columnsCount:r,posts_columns_gap:i,posts_rows_gap:o,className:"altrp-posts"},s.map((function(e,n){return t.renderPost(a+n)}))),this.renderPagination())}}]),g}(f.Component),S=function(t){return"datasource"===t.settings.choose_datasource?((0,O.isEditor)()&&((t=x({},t)).settings=x({},t.settings),t.data=Array.from({length:100},(function(){return{}})),(0,O.setAltrpIndex)(t.data)),f.createElement(C,t)):f.createElement(g.Z,t,f.createElement(C,null))}},75429:function(t,e,n){"use strict";var s=n(81253),a=n(22122),r=n(6610),i=n(5991),o=n(10379),p=n(46070),u=n(77608),l=n(67294),c=(n(22368),n(73935),n(53569)),d=n(75912);var f,g,m,h=(0,(n(81144),n(35639),n(61085)).m)(d.S),v=(f=h,m=g=function(t){(0,o.Z)(g,t);var e,n,d=(e=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,s=(0,u.Z)(e);if(n){var a=(0,u.Z)(this).constructor;t=Reflect.construct(s,arguments,a)}else t=s.apply(this,arguments);return(0,p.Z)(this,t)});function g(t){var e;return(0,r.Z)(this,g),(e=d.call(this)).select=void 0,e.lastRequest=void 0,e.mounted=!1,e.optionsCache={},e.handleInputChange=function(t,n){var s=e.props,a=s.cacheOptions,r=s.onInputChange,i=(0,c.G)(t,n,r);if(!i)return delete e.lastRequest,void e.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(a&&e.optionsCache[i])e.setState({inputValue:i,loadedInputValue:i,loadedOptions:e.optionsCache[i],isLoading:!1,passEmptyOptions:!1});else{var o=e.lastRequest={};e.setState({inputValue:i,isLoading:!0,passEmptyOptions:!e.state.loadedInputValue},(function(){e.loadOptions(i,(function(t){e.mounted&&(t&&(e.optionsCache[i]=t),o===e.lastRequest&&(delete e.lastRequest,e.setState({isLoading:!1,loadedInputValue:i,loadedOptions:t||[],passEmptyOptions:!1})))}))}))}return i},e.state={defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0,inputValue:void 0!==t.inputValue?t.inputValue:"",isLoading:!0===t.defaultOptions,loadedOptions:[],passEmptyOptions:!1},e}return(0,i.Z)(g,[{key:"componentDidMount",value:function(){var t=this;this.mounted=!0;var e=this.props.defaultOptions,n=this.state.inputValue;!0===e&&this.loadOptions(n,(function(e){if(t.mounted){var n=!!t.lastRequest;t.setState({defaultOptions:e||[],isLoading:n})}}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){t.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={}),t.defaultOptions!==this.props.defaultOptions&&this.setState({defaultOptions:Array.isArray(t.defaultOptions)?t.defaultOptions:void 0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(t,e){var n=this.props.loadOptions;if(!n)return e();var s=n(t,e);s&&"function"==typeof s.then&&s.then(e,(function(){return e()}))}},{key:"render",value:function(){var t=this,e=this.props,n=(e.loadOptions,e.isLoading),r=(0,s.Z)(e,["loadOptions","isLoading"]),i=this.state,o=i.defaultOptions,p=i.inputValue,u=i.isLoading,c=i.loadedInputValue,d=i.loadedOptions,g=i.passEmptyOptions?[]:p&&c?d:o||[];return l.createElement(f,(0,a.Z)({},r,{ref:function(e){t.select=e},options:g,isLoading:u||n,onInputChange:this.handleInputChange}))}}]),g}(l.Component),g.defaultProps={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},m);e.ZP=v}}]);
//# sourceMappingURL=altrp-posts.9de73c31b14d1ce58064.bundle.js.map