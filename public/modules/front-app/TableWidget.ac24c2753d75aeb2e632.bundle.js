(self.webpackChunk=self.webpackChunk||[]).push([[2171,1198],{66809:function(e,t,n){"use strict";var r=n(22122),a=n(92137),l=n(96156),o=n(6610),i=n(5991),c=n(63349),s=n(10379),u=n(46070),p=n(77608),d=n(87757),g=n.n(d),m=n(67294),f=n(38773);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){(0,s.Z)(v,e);var t,n,l,d,b=(l=v,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,p.Z)(l);if(d){var n=(0,p.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.Z)(this,e)});function v(e){var t;return(0,o.Z)(this,v),(t=b.call(this,e)).resource=new f.Z({route:t.props.route}),t.state={value:t.props.value||"",disabled:!t.props.value},t.changeValue=t.changeValue.bind((0,c.Z)(t)),t.onChange=t.onChange.bind((0,c.Z)(t)),t.onKeyDown=t.onKeyDown.bind((0,c.Z)(t)),t}return(0,i.Z)(v,[{key:"componentDidUpdate",value:function(e,t){var n=this;e.route!==this.props.route&&(this.resource=new f.Z({route:this.props.route}),console.log(this.resource)),e.value!==this.props.value&&this.props.value!==this.state.value&&this.setState((function(e){return h(h({},e),{},{value:n.props.value})}))}},{key:"componentDidMount",value:(n=(0,a.Z)(g().mark((function e(){var t,n=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.props.value&&this.props.resourceid){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.resource.get(this.props.resourceid);case 4:t=e.sent,this.setState((function(e){return h(h({},e),{},{value:t[n.props.resourceid]||"",disabled:!1})}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.changeValue(e)}},{key:"onChange",value:function(e){var t=e.target.value;this.setState((function(e){return h(h({},e),{},{value:t})})),_.isFunction(this.props.changevalue)&&this.props.changevalue(t)}},{key:"changeValue",value:(t=(0,a.Z)(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,this.setState((function(e){return h(h({},e),{},{disabled:!0})})),_.isFunction(this.props.onBlur)&&this.props.onBlur(n),e.next=5,this.resource.put(this.props.resourceid,{value:n,column_value:n});case 5:e.sent,this.setState((function(e){return h(h({},e),{},{disabled:!1})}));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.className;this.state.disabled&&(e+=" pointer-event-none");var t=h({},this.props);return delete t.changevalue,m.createElement("input",(0,r.Z)({},t,{className:e,onBlur:this.changeValue,onKeyDown:this.onKeyDown,onChange:this.onChange,value:this.state.value}))}}]),v}(m.Component);t.Z=v},1987:function(e,t,n){"use strict";n.d(t,{hX:function(){return a}}),n(87757);var r=n(37895);function a(){return window.iconsManager||(window.iconsManager=new r.default),window.iconsManager}n(38773),n(96486)},71743:function(e,t,n){"use strict";var r=n(6610),a=n(5991),l=n(83465),o=n.n(l),i=n(29208),c=n.n(i),s=n(31468),_=n.n(s),u=n(38394),p=n.n(u),d=n(96633),g=n.n(d),m=n(99245),f=n.n(m),b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e),this.data=o()(t)}return(0,a.Z)(e,[{key:"getData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?o()(this.data):this.data}},{key:"isEmpty",value:function(){return f()(this.data)}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(this.data,e,t)}},{key:"hasProperty",value:function(e){return p()(this.data,e)}},{key:"setProperty",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n instanceof e&&(n=n.getData(!1)),_()(this.data,t,n)}},{key:"unsetProperty",value:function(e){return g()(this.data,e)}}]),e}();window.AltrpModel=b,t.Z=b},71614:function(e,t,n){"use strict";var r=n(92137),a=n(96156),l=n(85061),o=n(6610),i=n(5991),c=n(87757),s=n.n(c),u=n(38773),p=n(75098),d=n(76593);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){function e(t,n){(0,o.Z)(this,e),this.component=n,this.modelName=t.modelName||"",this.dataSource=t.dataSource,t.dataSource&&"model_query"===t.dataSource.type&&(this.dataSourceName=t.dataSource.value||""),this.pageSize=t.pageSize||10,this.paginationType=t.paginationType||"pages",this.orderingField=t.orderingField||"name",this.order=t.order||"ASC",this.route="/ajax/models/".concat(this.modelName||(t.dataSource?t.dataSource.value:"")),t.dataSource&&"sql_datasource"===t.dataSource.type&&(this.route=t.dataSource.value,this.dataSourceName=t.dataSource.sql_name||"");var r=_.cloneDeep(n.props.currentModel);r.setProperty("altrpdata",n.props.currentDataStorage.getData()),this.setDefaultParams((0,d.parseParamsFromString)(t.defaultParams,r))}var t;return(0,i.Z)(e,[{key:"getResource",value:function(){return new u.Z({route:this.route})}},{key:"getFromModel",value:function(e){return e?_.isArray(e[this.dataSource.value])?(0,l.Z)(e[this.dataSource.value]):[m({},e[this.dataSource.value])]:[]}},{key:"getQueried",value:(t=(0,r.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.dataSource||"has_many_relation"!==this.dataSource.type){e.next=4;break}this.modelUpdater?console.log(this.modelUpdater):this.modelUpdater=p.default.subscribeToModelUpdates(this.dataSource.model_name,this.component.getModelId(),this.component),e.next=10;break;case 4:return e.next=6,this.getResource().getQueried(this.getParams(t));case 6:return this.lastQuery=e.sent,_.isArray(this.lastQuery)?n=(0,l.Z)(this.lastQuery):_.isArray(this.lastQuery.data)&&(n=this.lastQuery.data),n.hasMore=this.lastQuery.hasMore,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"hasMore",value:function(){return!!this.lastQuery&&this.lastQuery.hasMore}},{key:"setDefaultParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.defaultParams=e}},{key:"getDefaultParams",value:function(){return this.defaultParams=this.defaultParams||{},this.defaultParams.pageSize=this.pageSize,this.defaultParams}},{key:"getParams",value:function(e){return(e=m({},_.assign(_.cloneDeep(this.getDefaultParams()),e))).page=e.page||1,_.has(e,"pageSize")&&e.pageSize<=0&&(delete e.pageSize,delete e.page),e}},{key:"getCounterStart",value:function(e){var t=1;return this.pageSize<1?t:(e=parseInt(e)||1,t=this.pageSize*(e-1)+1)}}]),e}();t.Z=f},75098:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(6610),a=n(5991),l=n(96156),o=n(92137),i=n(87757),c=n.n(i),s=n(38773);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(){function e(t,n){(0,r.Z)(this,e),this.modelName=t,n||console.error("Ð¸Ð´ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½!"),this.modelId=n,this.data=null,this.subscribers=[],this.resource=new s.Z({route:"/ajax/models/".concat(this.modelName)}),this.updating=!1}var t;return(0,a.Z)(e,[{key:"subscribeToUpdates",value:function(e){this.subscribers.push(e),this.updating||(this.data&&this.callSubscribers(),this.updateData())}},{key:"updateData",value:(t=(0,o.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updating=!0,e.next=3,this.resource.get(this.modelId);case 3:this.data=e.sent,this.updating=!1,this.callSubscribers();case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"callSubscribers",value:function(){var e=this;this.subscribers.forEach((function(t){_.isFunction(t.updateModelData)&&t.updateModelData(e.getData()),_.isFunction(t)&&t(e.getData())}))}},{key:"unsubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e}))}},{key:"getData",value:function(){return this.data}},{key:"updateWithData",value:function(e){this.data=_.extend(this.data,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)),this.callSubscribers()}}]),e}(),d=new(function(){function e(){(0,r.Z)(this,e),this.modelsStorage={}}return(0,a.Z)(e,[{key:"updateModel",value:function(e,t){this.modelsStorage["".concat(e,"::").concat(t)]||this.modelsStorage["".concat(e,"::").concat(t)].updateData()}},{key:"addModel",value:function(e){}},{key:"getModel",value:function(e,t){}},{key:"subscribeToModelUpdates",value:function(e,t,n){return t?(this.modelsStorage["".concat(e,"::").concat(t)]||(this.modelsStorage["".concat(e,"::").concat(t)]=new p(e,t)),(r=this.modelsStorage["".concat(e,"::").concat(t)]).subscribeToUpdates(n),r):null;var r}},{key:"unsubscribe",value:function(e,t,n){return t?this.modelsStorage["".concat(e,"::").concat(t)]?((r=this.modelsStorage["".concat(e,"::").concat(t)]).unsubscribe(n),r):void 0:null;var r}},{key:"updateModelWithData",value:function(e,t,n){this.modelsStorage["".concat(e,"::").concat(t)]&&this.modelsStorage["".concat(e,"::").concat(t)].updateWithData(n)}}]),e}())},38844:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{i_:function(){return renderAdditionalRows},IN:function(){return renderCellActions}});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(85061),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22122),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(96156),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(28481),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67294),react_table__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(79521),react_table__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_table__WEBPACK_IMPORTED_MODULE_2__),_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(76593),_admin_src_js_helpers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1987),_admin_src_components_AutoUpdateInput__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(66809),_altrp_query_component_altrp_query_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(74374);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}__webpack_require__.e(350).then(__webpack_require__.bind(__webpack_require__,90350));var Link=window.Link,AltrpTable=function(e){var t=e.settings,n=e.query,r=e.data,a=(e.currentModel,e._status),l=e._error,o=e.setSortSettings,i=e.setFilterSettings,c=e.filterSetting,s=e.setPage,u=e._latestData,p=e.page,d=e.sortSetting;if(!t.tables_columns||!t.tables_columns.length)return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{children:"Please Add Column"});var g={};t.tables_columns.forEach((function(e){e.column_is_default_sorted&&!g.order_by&&(g.order_by=e.accessor,g.order=_.get(e,"column_is_default_sorted_direction","ASC"))}));var m=react__WEBPACK_IMPORTED_MODULE_1__.useMemo((function(){return _.get(t,"group_by_column_name")?_.get(t,"group_by_column_name"):getGroupBy(t.tables_columns)}),[t]);react__WEBPACK_IMPORTED_MODULE_1__.useEffect((function(){m&&o({order:"ASC",order_by:m})}),[m]);var f,b=n.getCounterStart(p),h=react__WEBPACK_IMPORTED_MODULE_1__.useMemo((function(){return t.group_collapsing})),v=react__WEBPACK_IMPORTED_MODULE_1__.useState([]),E=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.Z)(v,2),y=E[0],O=E[1],P=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),w=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.Z)(P,2),D=w[0],M=w[1],R=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),S=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.Z)(R,2),k=S[0],C=S[1],x=[];f=settingsToColumns(t),r=r.map((function(e){return e.id===D.rowId?(e[D.column]=D.value,_objectSpread({},e)):e}));var T=(0,react_table__WEBPACK_IMPORTED_MODULE_2__.useTable)({columns:react__WEBPACK_IMPORTED_MODULE_1__.useMemo((function(){return f||[]}),[t.tables_columns]),data:react__WEBPACK_IMPORTED_MODULE_1__.useMemo((function(){return r||[]}),[r])}),I=T.getTableProps,A=T.getTableBodyProps,j=T.headerGroups,L=T.rows,B=T.prepareRow,Z=function(e){o({order_by:e,order:d&&d.order_by===e?"DESC"===d.order?"ASC":"DESC":"ASC"})},U=function(e,t){s(1);var n=_objectSpread({},c);t?n[e]=t:delete n[e],i(n)};return react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("table",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({className:"altrp-table altrp-table_columns-"+f.length},I()),react__WEBPACK_IMPORTED_MODULE_1__.createElement("thead",{className:"altrp-table-head"},renderAdditionalRows(t),j.map((function(e){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},e.getHeaderGroupProps(),{className:"altrp-table-tr"}),e.headers.map((function(e){return renderTh({column:e,sortSetting:d,sortingHandler:Z,filterSetting:c,filterHandler:U})})))}))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("tbody",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},A(),{className:"altrp-table-tbody ".concat(t.table_style_table_striple_style?" altrp-table-tbody--striped":"")}),"error"===a?react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",null,l.message)):"loading"===a?react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",null,"Loading")):L.map((function(e,n){B(e);var r=_.get(t,"field_name_for_row_styling");return r=_.get(e.original,r,""),r=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.mbParseJSON)(r,{}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,{key:e.id},renderGroupingTr(e,m,x,t,h,O,y),react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},e.getRowProps(),{style:r,className:"altrp-table-tr ".concat(t.table_hover_row?"altrp-table-background":""," ").concat(h&&-1!==y.indexOf(_.last(x))?"altrp-d-none":"")}),e.cells.map((function(n,r){var a=n.render("Cell"),l=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.isEditor)()?"a":Link;f[r].column_external_link&&!(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.isEditor)()&&(l="a");var o=n.column.column_body_alignment?{textAlign:n.column.column_body_alignment}:{},i=_objectSpread({},n.getCellProps()),c=n.value,s="";if(f[r].column_is_editable&&f[r].column_edit_url){var u=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(f[r].column_edit_url,e.original);s=react__WEBPACK_IMPORTED_MODULE_1__.createElement(_admin_src_components_AutoUpdateInput__WEBPACK_IMPORTED_MODULE_5__.Z,{className:"altrp-inherit altrp-table-td__double-click-content",route:u,resourceid:"",changevalue:function(t){M({value:t,rowId:e.original.id,column:f[r]._accessor})},value:c}),i.onDoubleClick=function(){k.column===f[r]._accessor&&k.rowId===e.original.id?C({}):C({column:f[r]._accessor,rowId:e.original.id})}}var p="altrp-table-td ".concat(n.column.column_body_alignment?"altrp-table-td_alignment-".concat(n.column.column_body_alignment):""," ");k.column===f[r]._accessor&&e.original.id===k.rowId&&(p+=" altrp-table-td_double-clicked"),t.table_hover_row||(p+=" altrp-table-background"),_.isObject(n.value)&&(a=""),a=f[r].column_link?react__WEBPACK_IMPORTED_MODULE_1__.createElement(l,{to:(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(f[r].column_link,e.original),href:(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(f[r].column_link,e.original),target:f[r].column_blank_link?"_blank":"",className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:n.value}}):react__WEBPACK_IMPORTED_MODULE_1__.createElement("span",{className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:n.value}}),n.column._accessor&&"##"===n.column._accessor.trim()&&(a=b+++"");var d=_.get(n,"column.column_styles_field");return d=_.get(e.original,d,""),d=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.mbParseJSON)(d,{}),o=_.assign(o,d),_.get(n,"column.actions.length")?react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},i,{className:p,style:o}),renderCellActions(n,e)):_.isString(a)&&!s?react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},i,{className:p,dangerouslySetInnerHTML:{__html:a+""},style:o})):react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},i,{className:p,style:o}),a,s)}))))}))),renderFooter(t,r)),"prev-next"===n.paginationType&&n.pageSize?react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"altrp-pagination"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("button",{className:"altrp-pagination__previous",onClick:function(){s((function(e){return Math.max(e-1,0)})),C({}),M({})},disabled:1===p},t.prev_text||""),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"altrp-pagination__count"},t.current_page_text||"Current Page:",p),react__WEBPACK_IMPORTED_MODULE_1__.createElement("button",{className:"altrp-pagination__next",onClick:function(){M({}),C({}),s((function(e){return u&&u.hasMore?e+1:e}))},disabled:!u||!u.hasMore},t.next_text||"")):"")};function settingsToColumns(e){var t=[],n=e.tables_columns;return(n=n||[]).forEach((function(e){e.column_name&&(e.actions&&e.actions.length||e.accessor)&&(e._accessor=e.accessor,t.push(e))})),t}function renderAdditionalRows(e){var t=e.additional_rows;return _.isArray(t)?t.map((function(e){return e.additional_cells=e.additional_cells||[],react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",{key:"additional-row-".concat(e.id)},e.additional_cells.map((function(t){return t.rowspan=t.rowspan||1,t.colspan=t.colspan||1,react__WEBPACK_IMPORTED_MODULE_1__.createElement("th",{key:"additional-cell-".concat(e.id,"-").concat(t.id),role:"columnheader",className:"altrp-table-th altrp-table-cell",colSpan:t.colspan,rowSpan:t.rowspan},t.title)})))})):""}function renderTh(e){var t=e.column,n=e.sortSetting,r=e.sortingHandler,a=e.filterSetting,l=e.filterHandler,o=t.column_width,i=t.column_header_alignment,c=_objectSpread({},t.getHeaderProps()),s={};o&&(s.width=o),i&&(s.textAlign=i),c.className="altrp-table-th",t.column_is_sorted&&(c.onClick=function(){return r(t._accessor)},c.className+=" clickable"),t.column_width&&(c.width=t.column_width+"%");var _=t.render("column_name");return react__WEBPACK_IMPORTED_MODULE_1__.createElement("th",(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},c,{style:s}),_,n&&t.column_is_sorted&&n.order_by===t._accessor&&("DESC"===n.order?(0,_admin_src_js_helpers__WEBPACK_IMPORTED_MODULE_4__.hX)().renderIcon("chevron",{className:"rotate-180 sort-icon "}):(0,_admin_src_js_helpers__WEBPACK_IMPORTED_MODULE_4__.hX)().renderIcon("chevron",{className:"sort-icon"})),t.column_is_filtered&&react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",{className:"altrp-label"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"text",onClick:function(e){e.stopPropagation()},onChange:function(e){e.stopPropagation();var n=e.target.value;l(t._accessor,n)},value:a[t._accessor]||"",className:"altrp-field"})))}function getGroupBy(e){var t=null;return e.forEach((function(e){e.group_by&&(t=e.accessor)})),t}function renderGroupingTr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;if(!t)return null;var i=_.get(e,"original."+t,"");if(i||(i=_.get(r,"group_default_text","")),n.indexOf(i)>=0)return null;n.push(i);var c=-1!==o.indexOf(i),s=r.collapsed_icon,u=r.expanded_icon;return _.isArray(s)&&(s=null),_.isArray(u)&&(u=null),i?react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",{className:"altrp-table-tr"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",{colSpan:_.get(e,"cells.length",1),onClick:function(){a&&toggleGroup(i,l,o)},className:"altrp-table-td__grouping altrp-table-td altrp-table-background ".concat(a?c?"altrp-pointer":"altrp-pointer active":""," ")},a?react__WEBPACK_IMPORTED_MODULE_1__.createElement("span",{className:"altrp-table__collapse-icon ".concat(c?"altrp-table__collapse-icon_collapsed":"")},c?(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.renderAsset)(s||{assetType:"icon",name:"add"}):(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.renderAsset)(u||{assetType:"icon",name:"minus"})):null,i)):null}function toggleGroup(e,t,n){-1===n.indexOf(e)?(n.push(e),t((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__.Z)(n))):t(n=_.filter(n,(function(t){return t!==e})))}function renderFooter(settings,data){var footerColumns=settings.footer_columns||[];return 0===footerColumns.length?null:react__WEBPACK_IMPORTED_MODULE_1__.createElement("tfoot",{className:"altrp-table-foot"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("tr",{className:"altrp-table-tr"},footerColumns.map((function(footerColumn){var style={textAlign:footerColumn.column_footer_alignment||"left"},content=footerColumn.content;if(-1!==content.indexOf("{{altrphelpers.")){window.altrphelpers.context=data,content=content.replace(/{{/g,"").replace(/}}/g,"");try{content=eval(content)}catch(e){console.log(content),console.error(e),content=""}}else content=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.replaceContentWithData)(content);return react__WEBPACK_IMPORTED_MODULE_1__.createElement("td",{className:"altrp-table-td",key:footerColumn.id,style:style,colSpan:footerColumn.colspan||1},content)}))))}function renderCellActions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_.get(e,"column.actions",[]);return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"altrp-actions"},n.map((function(e){var n=e.type||"Link",r=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.replaceContentWithData)(e.text||""),a=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(e.link,t.original),l={className:"altrp-actions-item altrp-link "+(e.classes||""),style:{},key:(e.id||"")+(t.id||""),title:e.text||""};if(l.style.marginLeft=_.get(e,"spacing.left")?_.get(e,"spacing.left")+_.get(e,"spacing.unit"):null,l.style.marginRight=_.get(e,"spacing.right")?_.get(e,"spacing.right")+_.get(e,"spacing.unit"):null,l.style.marginTop=_.get(e,"spacing.top")?_.get(e,"spacing.top")+_.get(e,"spacing.unit"):null,l.style.marginBottom=_.get(e,"spacing.bottom")?_.get(e,"spacing.bottom")+_.get(e,"spacing.unit"):null,"Link"===n&&(n=Link,l.to=a),"a"===n&&e.target_blank&&(l.target="_blank"),"a"===n&&(l.href=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.parseURLTemplate)(e.link,t.original)),_.get(e,"icon.assetType")){var o=_.get(e,"size.size")?_.get(e,"size.size")+_.get(e,"size.unit","px"):null,i={className:"altrp-actions-item__icon",style:{}};o&&(i.style.width=o,i.style.height=o),r=(0,_front_app_src_js_helpers__WEBPACK_IMPORTED_MODULE_3__.renderAsset)(e.icon,i)}return react__WEBPACK_IMPORTED_MODULE_1__.createElement(n,l,r)})))}__webpack_exports__.ZP=function(e){return react__WEBPACK_IMPORTED_MODULE_1__.createElement(_altrp_query_component_altrp_query_component__WEBPACK_IMPORTED_MODULE_6__.Z,e,react__WEBPACK_IMPORTED_MODULE_1__.createElement(AltrpTable,null))}},84978:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ae}});var r,a=n(22122),l=n(81253),o=n(96156),i=n(6610),c=n(5991),s=n(63349),u=n(10379),p=n(46070),d=n(77608),g=n(71614),m=n(31298),f=n(38844),b=n(85061),h=n(92137),v=n(28481),E=n(87757),y=n.n(E),O=n(7145),P=n.n(O),w=n(76593),D=n(79521),M=n(74374),R=n(4916),S=n(1987),k=n(90233),C=n(67294),x=n(81352),T=n(85009),I=n(71743),A=n(11914),j=n(66809),L=n(32465),B=n(71893);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U,N,W=window.altrpHelpers.getResponsiveSetting,K=B.ZP.div(r||(r=(0,L.Z)(["",""])),(function(e){var t=e.settings,n=e.rows;if(!W(t,"table_transpose"))return"";var r=W(t,"table_style_main_width"),a=W(t,"table_style_other_width");if("%"!==_.get(r,"unit")&&"%"!==_.get(a,"unit"))return"";var l="";l+="grid-template-columns:".concat(_.get(r,"size")).concat(_.get(r,"unit")||"px");var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw l}}}}(n);try{for(i.s();!(o=i.n()).done;)o.value,l+=" ".concat(_.get(a,"size")).concat(_.get(a,"unit")||"px")}catch(e){i.e(e)}finally{i.f()}return l+";&&&{width:100%;}"})),z=n(32360),F=B.ZP.div(U||(U=(0,L.Z)(["",""])),(function(e){var t=e.settings,n=e.column;if(!t.table_transpose)return"";var r=n.column_cell_vertical_alignment,a=n.header_full_width,l=n.header_bg,o=(0,w.getResponsiveSetting)(t,"table_style_main_width"),i=(0,w.getResponsiveSetting)(t,"table_style_other_width"),c="&.altrp-table-th.altrp-table-cell{",s=(0,w.getResponsiveSetting)(t,"cell_vertical_alignment");return s=(0,z.verticalAlignToAlignItems)(s),r&&(s=(0,z.verticalAlignToAlignItems)(r)),s&&(c+="\n    display: flex;\n    align-items: ".concat(s,";\n    > span{\n      display: block;\n      width: 100%;\n    }\n    ")),l&&(c+="background-color:".concat(l.color,";")),a&&(c+="\n      grid-column-start: 1;\n      grid-column-end: ".concat(n.filteredRows.length+2,";\n      width: calc(").concat(_.get(o,"size")+(_.get(o,"unit")||"px")," + (").concat(_.get(i,"size")+(_.get(i,"unit")||"px"),") * ").concat(n.filteredRows.length,")\n    ")),"%"!==_.get(o,"unit")&&(c+="\n      width: ".concat(_.get(o,"size")+(_.get(o,"unit")||"px"),"\n    ")),c+"}"})),q=n(74061),H=n(59240),G=n(5200),V=B.ZP.div(N||(N=(0,L.Z)(["",""])),(function(e){var t=e.settings,n=e.column;if(!t.table_transpose)return"";var r=n.column_cell_vertical_alignment,a=n.body_bg,l=n.header_full_width,o=(0,w.getResponsiveSetting)(t,"table_style_other_width"),i=(0,w.getResponsiveSetting)(t,"cell_vertical_alignment");i=(0,z.verticalAlignToAlignItems)(i),r&&(i=(0,z.verticalAlignToAlignItems)(r));var c="&.altrp-table-td.altrp-table-cell{";return i&&(c+="\n    display: flex;\n    align-items: ".concat(i,";\n    .altrp-table-td__default-content{\n      display: block;\n      width: 100%;\n    }\n    ")),l?"&.altrp-table-td{display:none;}":(a&&(c+="background-color:".concat(a.color,";")),"%"!==_.get(o,"unit")&&(c+="\n    width: ".concat(_.get(o,"size")+(_.get(o,"unit")||"px"),";\n  ")),c+="}")}));function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var X=function(e){var t=e.cell,n=e.settings,r=t.row,l=t.column,i=n.resize_columns,c=n.replace_rows,s=n.virtualized_rows,u=n.hide_expanded_row_icon,p=n.expanded_row_icon,d=n.hide_not_expanded_row_icon,g=n.not_expanded_row_icon,m=t.render("Cell");"##"===t.column.id&&(m=t.row.index+1),t.isGrouped?m=React.createElement(React.Fragment,null,React.createElement("span",r.getToggleRowExpandedProps(),r.isExpanded?(0,w.renderIcon)(u,p,"ðŸ‘‡","expanded-row"):(0,w.renderIcon)(d,g,"ðŸ‘‰","not-expanded-row"))," ",t.render("Cell")," (",(0,w.recurseCount)(r,"subRows"),")"):t.isAggregated?m=t.render("Aggregated"):t.isPlaceholder&&(m=t.render("Cell"));var f=["altrp-table-td","altrp-table-cell"];t.isAggregated&&f.push("altrp-table-td_aggregated"),t.isPlaceholder&&f.push("altrp-table-td_placeholder"),t.isGrouped&&f.push("altrp-table-td_grouped");var b=React.useMemo((function(){var e=t.getCellProps();if(i||s||delete e.style,_.get(t,"column.column_styles_field")){var n=_.get(t,"column.column_styles_field");n=_.get(r.original,n,""),n=(0,w.mbParseJSON)(n,{}),e.style=_.assign(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n),e.style)}return e}),[i,c,s,t.getCellProps().style.width,_.get(t,"column.column_styles_field")]);n.table_hover_row||f.join("altrp-table-background");var h={};return t.column.column_body_alignment&&(h.textAlign=t.column.column_body_alignment),t.column.body_bg&&(h.backgroundColor=t.column.body_bg.color),h=_.assign(h,b.style||{}),t.column.column_cell_vertical_alignment&&"inherit"!==t.column.column_cell_vertical_alignment&&(h.verticalAlign=t.column.column_cell_vertical_alignment),React.createElement(V,(0,a.Z)({},b,{settings:n,column:l,style:h,className:f.join(" ")}),m)};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y,ee=function(e){var t=e.row,n=e.index,r=e.moveRow,l=e.style,o=e.visibleColumns,i=e.cardTemplate,c=e.settings,s=React.useRef(null),_=React.useRef(null),u=$({},t.getRowProps());delete u.role,delete u.style;var p=null,d=c.resize_columns,g=c.replace_rows,m=c.row_expand,f=c.virtualized_rows,b=c.card_template,h=c.replace_text,E=c.replace_image,y=c.replace_width;if(i){var O=T.default.cloneElement(i);O.setCardModel(new I.Z(t.original||{})),p=React.createElement(O.componentClass,{element:O,ElementWrapper:A.default,children:O.children})}var P=React.useMemo((function(){var e=t.getRowProps();return d||f||(delete e.style,l={}),g&&(e.ref=s),e}),[d,g,f]),w=(0,H.L)({accept:"row",hover:function(e,t){if(s.current){var a=e.index,l=n;if(a!==l){var o=s.current.getBoundingClientRect(),i=(o.bottom-o.top)/2,c=t.getClientOffset().y-o.top;a<l&&c<i||a>l&&c>i||(r(a,l),e.index=l)}}}}),D=(0,v.Z)(w,2)[1],M=(0,G.c)({item:{index:n},type:"row",collect:function(e){return{isDragging:e.isDragging()}}}),R=(0,v.Z)(M,3),S=R[0].isDragging,k=R[1],C=S?0:1;(0,R[2])(D(s)),k(_);var x=React.useMemo((function(){return d||f?l:{}}),[d,f,t.getRowProps().style.width]);return React.createElement(React.Fragment,u,React.createElement("div",(0,a.Z)({},P,{className:"altrp-table-tr ".concat(S?"altrp-table-tr__dragging":""),style:$($({},x),{},{opacity:C})}),g&&React.createElement("div",{className:"altrp-table-td replace-text",ref:_,style:{width:y}},h,E&&E.url&&React.createElement("img",{src:E.url,className:"replace-picture"})),t.cells.map((function(e,t){return React.createElement(X,{cell:e,key:t,settings:c})}))),t.isExpanded&&m&&b&&i&&React.createElement("div",{className:"altrp-table-tr altrp-posts"},React.createElement("td",{colSpan:o.length+g,className:"altrp-table-td altrp-post"},p)))},te=B.ZP.div(Y||(Y=(0,L.Z)(["\n",""])),(function(e){var t,n=e.settings,r=e.groupIndex,a=(0,w.getResponsiveSetting)(n,"tables_groups"),l=(0,w.getResponsiveSetting)(n,"tables_settings_for_subheading"),o=_.get(l,r-1,{}).transition;if(!_.isArray(a)||!r)return"";if(!(t=r>a.length?a[a.length-1]:a[r-1]))return"";if(!_.isObject(t))return"";var i=t,c=i.cell_alignment,s=i.padding,u=i.color,p=i.bg_color,d=i.typographic,g="&.altrp-table-tr .altrp-table-td{";null!=o&&o.size&&(g+="transition-duration: ".concat(o.size,"s;")),_.isObject(s)&&(g+=(0,z.dimensionsControllerToStyles)(s)),_.isObject(d)&&(g+=(0,z.typographicControllerToStyles)(d)),c&&(g+="text-align: ".concat(c,";")),null!=u&&u.color&&(g+="color: ".concat(u.color,";")),null!=p&&p.color&&(g+="background-color: ".concat(p.color,";")),g+="}&.altrp-table-tr .altrp-table-td:hover{";var m=t["cell_alignment_:hover_"],f=t["padding_:hover_"],b=t["color_:hover_"],h=t["bg_color_:hover_"],v=t["typographic_:hover_"];return _.isObject(f)&&(g+=(0,z.dimensionsControllerToStyles)(f)),_.isObject(v)&&(g+=(0,z.typographicControllerToStyles)(v)),m&&(g+="text-align: ".concat(m,";")),null!=b&&b.color&&(g+="color: ".concat(b.color,";")),null!=h&&h.color&&(g+="background-color: ".concat(h.color,";")),g+"}"}));function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var re=function e(t){var n=t.prepareRow,r=t.rows,l=t.visibleColumns,i=t.totalColumnsWidth,c=t.moveRow,s=t.settings,u=t.cardTemplate,p=t.groupIndex,d=t.page,g=C.useMemo((function(){return(0,w.scrollbarWidth)()}),[]),m=s.virtualized_rows,f=s.virtualized_height,b=s.item_size,h=s.tables_settings_for_subheading,E=(s.table_style_table_striple_style,C.useCallback((function(e){var t=e.index,o=e.style,i=d?d[t]:r[t];return n(i),C.createElement(ee,(0,a.Z)({index:t,row:i,visibleColumns:l,moveRow:c,settings:s,cardTemplate:u},i.getRowProps({style:o})))}),[d,r,l,s,u,c,n])),y=C.useMemo((function(){return d?d.length:r.length}),[d,r]),O=C.useMemo((function(){var e;if(_.isEmpty(h))return null;var t,n,a=null===(e=h[p])||void 0===e?void 0:e.name;if(!a)return null;if(-1!==a.indexOf("?")&&-1!==a.indexOf(":")){var l=a.split("?")[1].split(":"),o=(0,v.Z)(l,2);t=o[0],n=o[1],t=t.trim(),n=n.trim(),cell.value=cell.value?t:n,a=a.split("?")[0].trim()}var i=[];return(d||r).forEach((function(e){var r,l=i.find((function(t){return t.columnValue===e.original[a]}));r=t||n?e.original[a]?t:n:e.original[a],l||(l={columnValue:r,rows:[]},i.push(l)),l.rows.push(e)})),i}),[h,d,r]);return _.isEmpty(O)?m?C.createElement(C.Fragment,null,C.createElement(q.t7,{height:Number(f)||0,itemCount:y,itemSize:Number(b)||0,width:i+g},E)):C.createElement(C.Fragment,null,(d||r).map((function(e,t){return n(e),C.createElement(ee,(0,a.Z)({index:t,row:e,visibleColumns:l,moveRow:c,settings:s,cardTemplate:u},e.getRowProps()))}))):O.map((function(n,r){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);return a.page=n.rows,a.rows=n.rows,a.groupIndex=p+1,a.key=n.columnValue+r,C.createElement(C.Fragment,{key:a.key},C.createElement(te,{className:"altrp-table-tr altrp-table-tr_group-subheading",groupIndex:a.groupIndex,settings:s},C.createElement("td",{colSpan:l.length||1,className:"altrp-table-td",dangerouslySetInnerHTML:{__html:0===n.columnValue?"0":n.columnValue||"&nbsp;"}})),C.createElement(e,a))}))};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var le=function(e){var t=e.settings,n=t.tables_settings_for_subheading,r=t.table_style_table_striple_style,l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return l.rows=C.useMemo((function(){if(_.isEmpty(n))return e.rows;var t=[],r=[];n.forEach((function(e){e.name&&(t.push(e.name),r.push(e.order||"asc"))}))}),[n]),l.groupIndex=0,C.createElement("div",(0,a.Z)({},e.getTableBodyProps(),{className:"altrp-table-tbody ".concat(r?"altrp-table-tbody--striped":"")}),C.createElement(re,l))},oe=n(49825),ie=["indeterminate","icons"];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.e(8102).then(n.bind(n,48102)),n.e(350).then(n.bind(n,90350));var _e=window.Link;function ue(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return n.some((function(e){return!e&&!r||(_.isString(r)||(r+=""),r.includes(e))}))}))}))}function pe(e,t,n){return t=t?t[0]:void 0,(0,k.L)(e,n,{keys:[function(e){var n=e.values[t];return"##"===t&&(n=e.index+1),n}]})}function de(e,t,n){return t=t?t[0]:void 0,e.filter((function(e){return _.get(e,"values.".concat(t))===n}))}function ge(e,t,n){return t=t?t[0]:void 0,e.filter((function(e){return n=n.replace(/\s/g,""),-1!==_.get(e,"values.".concat(t),"").replace(/\s/g,"").indexOf(n)}))}function me(e){var t=e.settings,n=e.currentScreen,r=e.widgetId,l=(e.query,e.data),i=(e.currentModel,e._status),c=(e._error,e.setSortSettings,e.setFilterSettings,e.filterSetting,e._latestData,e.widgetState),s=(e.sortSetting,C.useRef(c)),u=t.inner_page_size,p=t.global_filter,d=t.card_template,g=t.row_expand,m=t.selected_storage,E=t.row_select,O=t.row_select_width,M=t.store_state,R=t.loading_text,k=t.row_select_all,T=t.hide_columns,I=t.resize_columns,A=t.table_transpose,j=t.virtualized_rows,L=t.replace_rows,B=t.tables_settings_for_subheading,Z=t.replace_width,U=t.ids_storage,N=t.hide_grouped_column_icon,W=t.grouped_column_icon,z=t.hide_not_grouped_column_icon,q=t.not_grouped_column_icon,H=t.checkbox_checked_icon,G=void 0===H?{}:H,V=t.checkbox_unchecked_icon,Q=void 0===V?{}:V,X=t.checkbox_indeterminate_icon,J=void 0===X?{}:X,$=C.useState(null),Y=(0,v.Z)($,2),ee=Y[0],te=Y[1],ne=C.useState(l),re=(0,v.Z)(ne,2),ae=re[0],ie=re[1];C.useEffect((function(){ie(l)}),[l]);var ce=C.useMemo((function(){return{fuzzyText:pe,fullMatchText:de,partialMatchText:ge,text:function(e,t,n){return t=t?t[0]:void 0,e.filter((function(e){var r=e.values[t];return"##"===t&&(r=e.index+1),void 0===r||String(r).toLowerCase().startsWith(String(n).toLowerCase())}))},between:function(e,t,n){var r=n||[],a=r[0],l=r[1];if((a="number"==typeof a?a:-1/0)>(l="number"==typeof l?l:1/0)){var o=a;a=l,l=o}return e.filter((function(e){return t.some((function(t){var n=e.values[t];return"##"===t&&(n=e.index+1),n>=a&&n<=l}))}))},equals:function(e,t,n){return e.filter((function(e){return t.some((function(t){var r=e.values[t];return"##"===t&&(r=e.index+1),r==n}))}))},includesSome:ue}}),[]),_e=C.useMemo((function(){return{Filter:fe,width:150,Cell:Pe}}),[]);C.useEffect((function(){l?_.isArray(l)||(l=[l]):l=[]}),[l]);var me=C.useMemo((function(){return function(e,t){var n=[],r=e.tables_columns,l=e.card_template,o=e.row_expand,i=e.virtualized_rows,c=e.resize_columns,s=e.hide_expanded_row_icon,_=e.expanded_row_icon,u=e.hide_not_expanded_row_icon,p=e.edit_disabled,d=e.not_expanded_row_icon;r=r||[];var g=((0,w.getResponsiveSetting)(e,"columns_order")||"").trim();if(g=g?g.split(","):[],r.forEach((function(e){if(e.actions&&e.actions.length||e.accessor){if(e.edit_disabled=p,e._accessor=e.accessor,e.accessor&&-1!==e.accessor.indexOf("?")&&-1!==e.accessor.indexOf(":")&&(e.accessor=e.accessor.split("?")[0].trim()),e.column_name=e.column_name||"&nbsp;",e.column_is_filtered)switch(e.filter="fuzzyText",e.column_filter_type){case"min_max":e.filter="between",e.Filter=ve;break;case"slider":e.filter="equals",e.Filter=he;break;case"select":e.filter="includesSome",e.Filter=function(e){var n=e.column;return C.createElement(be,{column:n,widgetId:t})};break;case"text":switch(e.column_text_filter_type){case"full_match":e.filter="fullMatchText";break;case"partial_match":e.filter="partialMatchText"}}if(e.canGroupBy=!!e.group_by,e.disableSortBy=!e.column_is_sorted,e.aggregate){var r=e.aggregate_template||"{{value}} Unique Names";e.Aggregated=function(e){var t=e.value;return r.replace(/{{value}}/g,t)}}(i||c)&&(e.width=Number(e.column_width)||150),n.push(e)}})),e.row_expand&&n.unshift({id:"expander",column_name:function(e){var t=e.getToggleAllRowsExpandedProps,n=e.isAllRowsExpanded;return C.createElement("span",(0,a.Z)({},t(),{className:"altrp-table__all-row-expander"}),n?(0,w.renderIcon)(s,_,"ðŸ‘‡","expanded-row"):(0,w.renderIcon)(u,d,"ðŸ‘‰","not-expanded-row"))},Cell:function(e){var t=e.row;return l&&o||t.canExpand?C.createElement("span",(0,a.Z)({className:"altrp-table__row-expander"},t.getToggleRowExpandedProps({style:{paddingLeft:"".concat(2*t.depth,"rem")}})),t.isExpanded?(0,w.renderIcon)(s,_,"ðŸ‘‡","expanded-row"):(0,w.renderIcon)(u,d,"ðŸ‘‰","not-expanded-row")):null}}),g.length){var m=[];g.forEach((function(e){e=parseInt(e)-1,n[e]&&-1===m.indexOf(n[e])&&m.push(n[e])})),n=m}return n}(t,r)}),[t,r]);C.useEffect((function(){d&&g&&(0,h.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.default.loadParsedTemplate(d);case 2:t=e.sent,te(t);case 4:case"end":return e.stop()}}),e)})))()}),[g,d]);var Oe=[D.useFilters,D.useGlobalFilter,D.useGroupBy,D.useSortBy,D.useExpanded,D.usePagination,D.useRowSelect,D.useResizeColumns,D.useBlockLayout];E&&Oe.push((function(e){e.visibleColumns.push((function(e){return[{id:"selection",column_width:O||0,column_name:function(e){var n=e.getToggleAllRowsSelectedProps,r=e.getToggleAllPageRowsSelectedProps;return!t.inner_page_size||t.inner_page_size<0||k?C.createElement("div",{className:"altrp-toggle-row"},C.createElement(Ee,(0,a.Z)({},n(),{icons:{checkedIcon:G,uncheckedIcon:Q,indeterminateIcon:J}}))):C.createElement("div",{className:"altrp-toggle-row"},C.createElement(Ee,(0,a.Z)({},r(),{icons:{checkedIcon:G,uncheckedIcon:Q,indeterminateIcon:J}})))},Cell:function(e){var t=e.row;return C.createElement("div",{className:"altrp-toggle-row"},C.createElement(Ee,(0,a.Z)({},t.getToggleRowSelectedProps(),{icons:{checkedIcon:G,uncheckedIcon:Q,indeterminateIcon:J}})))}}].concat((0,b.Z)(e))}))}));var we=C.useState(!1),De=(0,v.Z)(we,2),Me=De[0],Re=De[1],Se=function(e,t,n){Re(!0),ie((function(r){return r.map((function(a,l){return l===e?se(se({},r[e]),{},(0,o.Z)({},t,n)):a}))}))},ke=C.useCallback((function(e){return e.id}),[]),Ce=C.useMemo((function(){var e={columns:me,data:ae,filterTypes:ce,autoResetPage:!Me,defaultColumn:_e,updateData:Se};if(L&&(e.getRowId=ke),(0,w.isEditor)()&&(e.initialState=u>=1?{pageSize:Number(u)}:{pageSize:l.length}),_.isArray(e.data)||(_.isObject(e.data)?e.data=[e.data]:e.data=[]),!_.isEmpty(B)){var t=B.map((function(e){return{id:e.name,desc:"DESC"===e.order}}));_.set(e,"initialState.sortBy",t)}return e}),[u,l,me,s,ae,L,Me,B]);C.useEffect((function(){_.isObject(s.current)&&(Ce.initialState=s.current)}),[s,l]);var xe=D.useTable.apply(void 0,[Ce].concat(Oe)),Te=xe.getTableProps,Ie=xe.getTableBodyProps,Ae=xe.headerGroups,je=xe.prepareRow,Le=xe.page,Be=(xe.canPreviousPage,xe.canNextPage,xe.pageOptions,xe.pageCount),Ze=xe.gotoPage,Ue=xe.nextPage,Ne=xe.previousPage,We=xe.getToggleHideAllColumnsProps,Ke=xe.allColumns,ze=xe.rows,Fe=xe.visibleColumns,qe=xe.preGlobalFilteredRows,He=xe.setGlobalFilter,Ge=xe.setPageSize,Ve=xe.selectedFlatRows,Qe=xe.totalColumnsWidth,Xe=xe.state,Je=Xe.pageIndex,$e=Xe.globalFilter,Ye=(Xe.groupBy,Xe.selectedRowIds,Xe.expanded,Xe.pageSize);function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];return _.isEmpty(e)||e.forEach((function(e){e.original&&(t?n.push(_.get(e.original,t)):n.push(e.original)),e.subRows&&(n=_.concat(n,et(e.subRows)))})),n}C.useEffect((function(){M&&(0,w.storeWidgetState)(r,Xe)})),C.useEffect((function(){Ge&&(Number(u)&&!Number(u<1)||Ge(l.length||10),Ge(Number(u)||l.length||10))}),[u,l]);var tt=C.useMemo((function(){return et(Ve)}),[Ve]),nt=C.useMemo((function(){return et(Ve,"id")}),[Ve]);C.useEffect((function(){!m||_.isEqual(altrpHelpers.getDataByPath(m),tt)||(0,w.isEditor)()||(0,w.setDataByPath)(m,tt)}),[Ve]),C.useEffect((function(){!U||_.isEqual(altrpHelpers.getDataByPath(U),nt)||(0,w.isEditor)()||(0,w.setDataByPath)(U,nt)}),[Ve]);var rt=C.useMemo((function(){var e=null;return u&&u>=1&&(e={settings:t,nextPage:Ue,previousPage:Ne,pageIndex:Je,pageCount:Be,pageSize:Ye,setPageSize:Ge,widgetId:r,gotoPage:Ze}),e}),[u,Ye,Be,Je,t]),at=C.useRef(null);return C.createElement(C.Fragment,null,T&&C.createElement("div",{className:"altrp-table-hidden"},C.createElement("div",{className:"altrp-table-hidden__all"},C.createElement(Ee,We())," Toggle All"),Ke.map((function(e){return["expander","selection"].indexOf(e.id)>=0?null:C.createElement("div",{key:e.id,className:"altrp-table-hidden__column"},C.createElement("label",null,C.createElement("input",(0,a.Z)({type:"checkbox"},e.getToggleHiddenProps()))," ",e.column_name||e.id,e.id))})),C.createElement("br",null)),C.createElement(K,(0,a.Z)({className:"altrp-table altrp-table_columns-"+me.length,ReactTable:xe,currentScreen:n,settings:t,table:at,rows:ze,ref:at},Te()),C.createElement("div",{className:"altrp-table-head"},(0,f.i_)(t),Ae.map((function(e){var n=e.getHeaderGroupProps();return I||j||delete n.style,C.createElement("div",(0,a.Z)({},n,{className:"altrp-table-tr"}),L&&C.createElement("div",{className:"altrp-table-th altrp-table-cell",style:{width:Z}}),e.headers.map((function(e,n){var r=e.column_width,l=e.column_header_alignment,o=e.header_bg,i=e.getHeaderProps(e.getSortByToggleProps());i.settings=t;var c=se(se({},e.getResizerProps()),{},{onClick:function(e){e.stopPropagation()}});I||j||(i.style={},r&&(i.style.width=r+"%"),l&&(i.style.textAlign=l),o&&(i.style.backgroundColor=o.color));var s=e.render("column_name");return _.isString(s)&&(s=C.createElement("span",{dangerouslySetInnerHTML:{__html:e.render("column_name")||"&nbsp;"}})),A&&_.unset(i,"style.width"),C.createElement(F,(0,a.Z)({},i,{column:e,className:"altrp-table-th altrp-table-cell",key:n}),s,e.canGroupBy?C.createElement("span",(0,a.Z)({},e.getGroupByToggleProps(),{className:"altrp-table-th__group-toggle"}),e.isGrouped?(0,w.renderIcon)(z,q," ðŸ›‘ ","not-grouped-column"):(0,w.renderIcon)(N,W," ðŸ‘Š ","grouped-column")):null,e.isSorted?e.isSortedDesc?(0,S.hX)().renderIcon("chevron",{className:"rotate-180 sort-icon "}):(0,S.hX)().renderIcon("chevron",{className:"sort-icon"}):"",e.column_is_filtered&&C.createElement("label",{className:"altrp-label altrp-label_".concat(e.column_filter_type),onClick:function(e){e.stopPropagation()}},e.render("Filter")),I&&C.createElement("div",(0,a.Z)({},c,{className:"altrp-table__resizer ".concat(e.isResizing?"altrp-table__resizer_resizing":"")})))})))})),p&&C.createElement("div",{className:"altrp-table-tr"},C.createElement("th",{className:"altrp-table-th altrp-table-th_global-filter altrp-table-cell",role:"cell",colSpan:Fe.length+L,style:{textAlign:"left"}},C.createElement(ye,{widgetId:r,preGlobalFilteredRows:qe,globalFilter:$e,setGlobalFilter:He,settings:t})))),"success"===i?C.createElement(le,{getTableBodyProps:Ie,prepareRow:je,totalColumnsWidth:Qe,rows:ze,visibleColumns:Fe,moveRow:function(e,t){var n=ae[e];ie(P()(ae,{$splice:[[e,1],[t,0,n]]}))},settings:t,page:Le,cardTemplate:ee}):C.createElement("div",null,C.createElement("div",{className:"altrp-table-tr altrp-table-tr_loading"},C.createElement("div",{className:"altrp-table-td altrp-table-td_loading",colSpan:Fe.length+L},"loading"===i&&R||null)))),rt&&C.createElement(oe.Z,rt))}function fe(e,t){var n=e.column,r=n.filterValue,a=n.preFilteredRows,l=n.setFilter,o=n.filter_placeholder,i=(n.column_filter_type,n.column_is_filtered,a.length);return o=o?o.replace("{{count}}",i):"Search ".concat(i," records..."),C.createElement("input",{value:r||"",className:"altrp-field",onChange:function(e){l(e.target.value||void 0)},placeholder:o})}function be(e){var t=e.column,n=(t.filterValue,t.setFilter),r=t.preFilteredRows,a=t.id,l=t.filter_placeholder,o=e.widgetId,i=C.useMemo((function(){var e=new Set;return r.forEach((function(t){e.add(t.values[a])})),(0,b.Z)(e.values()).map((function(e){return{value:e,label:e+""}}))}),[a,r]);return C.createElement(R.Z,{options:i,isMulti:!0,placeholder:l||"Select some...",className:"altrp-table__filter-select",classNamePrefix:o+" altrp-field-select2",onChange:function(e){_.isArray(e)||(e=[]);var t=e.map((function(e){return e.value}));n(t)}})}function he(e){var t=e.column,n=t.filterValue,r=t.setFilter,a=t.preFilteredRows,l=t.id,o=t.filter_button_text,i=C.useMemo((function(){var e=a.length?a[0].values[l]:0;"##"===l&&a.length&&(e=a[0].index);var t=e,n=e;return a.forEach((function(e){var r=e.values[l];"##"===l&&(r=e.index),t=Math.min(r,t),n=Math.max(r,n)})),[t,n]}),[l,a]),c=(0,v.Z)(i,2),s=c[0],_=c[1],u=o||"Off";return C.createElement(C.Fragment,null,C.createElement("input",{type:"range",className:"altrp-field",min:s,max:_,value:n||s,onChange:function(e){r(parseInt(e.target.value,10))}}),C.createElement("button",{className:"altrp-btn ".concat(void 0!==n?"active":""),onClick:function(){return r(void 0)}},u))}function ve(e){var t=e.column,n=t.filterValue,r=void 0===n?[]:n,a=t.preFilteredRows,l=t.setFilter,o=t.filter_max_placeholder,i=t.filter_min_placeholder,c=t.id,s=C.useMemo((function(){var e=a.length?a[0].values[c]:0;"##"===c&&a.length&&(e=a[0].index);var t=e,n=e;return a.forEach((function(e){var r=e.values[c];"##"===c&&(r=e.index),t=Math.min(r,t),n=Math.max(r,n)})),[t,n]}),[c,a]),_=(0,v.Z)(s,2),u=_[0],p=_[1],d=i||"Min (".concat(u,")"),g=o||"Max (".concat(p,")");return C.createElement("div",{className:"altrp-filter-group",style:{display:"flex"}},C.createElement("input",{value:r[0]||"",type:"number",className:"altrp-field",onChange:function(e){var t=e.target.value;l((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[t?parseInt(t,10):void 0,e[1]]}))},placeholder:d,style:{width:"70px",marginRight:"0.5rem"}}),"to",C.createElement("input",{value:r[1]||"",type:"number",className:"altrp-field",onChange:function(e){var t=e.target.value;l((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[e[0],t?parseInt(t,10):void 0]}))},placeholder:g,style:{width:"70px",marginLeft:"0.5rem"}}))}ue.autoRemove=function(e){return!e||!e.length},pe.autoRemove=function(e){return!e},de.autoRemove=function(e){return!e},ge.autoRemove=function(e){return!e};var Ee=C.forwardRef((function(e,t){var n=e.indeterminate,r=e.icons,o=(0,l.Z)(e,ie),i=C.useRef(),c=t||i;C.useEffect((function(){c.current.indeterminate=n}),[c,n]);var s=r.checkedIcon.name?o.checked?r.checkedIcon:n?r.indeterminateIcon:r.uncheckedIcon:null;return C.createElement("label",{className:"check-icon--"+(o.checked?"checked":n?"indeterminate":"unchecked")},s&&(0,w.renderAssetIcon)(s),C.createElement("input",(0,a.Z)({type:"checkbox",ref:c},o,{className:s?"hidden":""})))}));function ye(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,r=e.setGlobalFilter,a=e.widgetId,l=e.settings,o=l.global_filter_placeholder,i=l.global_filter_label,c=t.length,s=C.useState(n),_=(0,v.Z)(s,2),u=_[0],p=_[1],d=(0,D.useAsyncDebounce)((function(e){r(e||void 0)}),200),g=i||"Search:".concat(" "),m=o||"".concat(c," records...");return m=m.replace(/{{count}}/g,c),C.createElement("div",{className:"altrp-table-global-filter"},C.createElement("label",{htmlFor:"altrp-table-global-filter".concat(a),dangerouslySetInnerHTML:{__html:g}}),C.createElement("input",{id:"altrp-table-global-filter".concat(a),value:u||"",onChange:function(e){p(e.target.value),d(e.target.value)},placeholder:m}))}var Oe=function(e){if("datasource"===(e=se({},e)).settings.choose_datasource){var t=C.useMemo((function(){return e.settings.inner_page_size>0?100:10}),[e.settings.inner_page_size]);return e._status="success",(0,w.isEditor)()&&((e=se({},e)).settings=se({},e.settings),e.data=Array.from({length:t},(function(){return{}})),(0,w.setAltrpIndex)(e.data)),C.createElement(me,e)}return C.createElement(M.Z,e,C.createElement(me,null))};function Pe(e){var t=e.row,n=e.data,r=e.cell,a=e.value,l=e.updateData,o=r.column,i=C.useState(a),c=(0,v.Z)(i,2),s=c[0],u=c[1];C.useEffect((function(){u(a)}),[a,r]);var p,d,g=o.column_template,m=o.column_is_editable,b=o.column_edit_url,E=o.column_external_link,O=o.column_blank_link,P=o.edit_disabled,D=o.column_cell_content_type,M=o._accessor;if((M=(M=M||"").trim())&&-1!==M.indexOf("?")&&-1!==M.indexOf(":")){var R=M.split("?")[1].split(":"),S=(0,v.Z)(R,2);p=S[0],d=S[1],p=p.trim(),d=d.trim(),r.value=r.value?p:d}0===M.indexOf('"')&&'"'===M[M.length-1]&&(r.value=M.substring(1,M.length-1));var k=C.useState(null),L=(0,v.Z)(k,2),B=L[0],Z=L[1],U=C.useMemo((function(){return m&&b?(0,w.parseURLTemplate)(b,t.original):null}),[b,m,t]),N=C.useCallback((0,h.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.default.loadParsedTemplate(g);case 2:t=e.sent,Z(t);case 4:case"end":return e.stop()}}),e)}))),[g]);C.useEffect((function(){g&&N()}),[N]);var W=r.value,K=(0,w.isEditor)()?"a":_e;switch(E&&!(0,w.isEditor)()&&(K="a"),_.isObject(r.value)&&(W=""),D){case"email":W=C.createElement("a",{href:"mailto:".concat(r.value),className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:0===r.value?"0":r.value||"&nbsp;"}});break;case"phone":W=C.createElement("a",{href:"tel:".concat(r.value),className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:0===r.value?"0":r.value||"&nbsp;"}});break;default:W=o.column_link?C.createElement(K,{to:(0,w.parseURLTemplate)(o.column_link,t.original),href:(0,w.parseURLTemplate)(o.column_link,t.original),target:O?"_blank":"",className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:0===r.value?"0":r.value||"&nbsp;"}}):C.createElement("span",{href:null,className:"altrp-inherit altrp-table-td__default-content",dangerouslySetInnerHTML:{__html:0===r.value?"0":r.value||"&nbsp;"}})}var z=C.useMemo((function(){if(!B)return null;var e=T.default.cloneElement(B);return e.setCardModel(new I.Z(t.original||{})),C.createElement(e.componentClass,{element:e,ElementWrapper:A.default,children:e.children})}),[B,t.original,n]);return z?C.createElement("div",{className:"altrp-posts"},C.createElement("div",{className:"altrp-post overflow-visible"},z)):U&&!P?C.createElement(j.Z,{className:"altrp-inherit",route:U,resourceid:"",changevalue:function(e){u(e)},onBlur:function(e){l(t.index,M,e)},value:s}):_.get(r,"column.actions.length")?(0,f.IN)(r,t):_.isString(W)?W:C.createElement(C.Fragment,null,W)}var we=["style"],De=["style"],Me=["style"];function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=window.altrpHelpers,Ce=ke.getDataByPath,xe=ke.getWidgetState,Te=ke.isEditor,Ie=ke.storeWidgetState;(window.globalDefaults=window.globalDefaults||[]).push('\n.altrp-table-th {\n  text-align: center;\n  font-size: 14px;\n  font-weight: normal;\n  font-family: "Open Sans";\n  line-height: 1.5;\n  letter-spacing: 0;\n  padding: 0 0 0 0;\n  display: table-cell;\n}\n.altrp-table-td {\n  text-align: left;\n  padding: 0 0 0 0;\n  font-size: 14px;\n  font-weight: normal;\n  font-family: "Open Sans";\n  line-height: 1.5;\n  letter-spacing: 0;\n  display: table-cell;\n}\n.altrp-table-tbody--striped tr:nth-child(2n) {\n  background-color: rgba(0, 0, 50, .05);\n}\n.altrp-table-tbody,\n.altrp-table-th {\n  border-collapse: separate;\n  user-select: none;\n}\n.altrp-table-td__grouping {\n  font-size: 18px;\n  font-weight: bold;\n}\n.altrp-table-th_sort {\n  padding: 0;\n  margin-left: 10px;\n}\n.altrp-table-th .sort-icon {\n  margin-left: 10px;\n}\n.altrp-table {\n  overflow: hidden;\n  display: table;\n  width: 100%;\n  border-collapse: collapse;\n  border-width: 1px 1px 1px 1px;\n  border-color: rgb(186, 186, 186);\n}\n.altrp-table__filter-select {\n  width: 100%;\n}\n.altrp-table__filter-select .altrp-field-select2__placeholder {\n  white-space: nowrap;\n}\n.altrp-table__filter-select .altrp-field-select2__single-value {\n  font-size: 14px;\n}\n.altrp-table__filter-select .altrp-field-select2__indicator-separator {\n  display: none;\n}\n.altrp-table__filter-select .altrp-field-select2__indicator {\n  align-items: center;\n}\n.altrp-table__filter-select .altrp-field-select2__control {\n  width: 100%;\n  min-height: 19px;\n  padding: 0;\n  border-radius: 0;\n  outline: none;\n  border-color: rgb(142, 148, 170);\n  -webkit-box-shadow: none;\n  -moz-box-shadow: none;\n  box-shadow: none;\n}\n.altrp-table__filter-select .altrp-field-select2__control input {\n  border: none;\n}\n.altrp-table__filter-select .altrp-field-select2__value-container {\n  padding-top: 0;\n  padding-bottom: 0;\n  line-height: 13px;\n}\n.altrp-table-td__grouping {\n  -webkit-transition-duration: 0.2s;\n  -moz-transition-duration: 0.2s;\n  -ms-transition-duration: 0.2s;\n  -o-transition-duration: 0.2s;\n  transition-duration: 0.2s;\n}\n.altrp-table-td_alignment .altrp-table-td_alignment-center .altrp-actions{\n  justify-content: center;\n}\n.altrp-table-td_alignment-right .altrp-actions {\n  justify-content: flex-end;\n}\n.altrp-table__collapse-icon {\n  display: inline-block;\n}\n.altrp-table__collapse-icon .altrp-table__collapse-icon svg {\n  position: relative;\n}\n\n.altrp-table-head {\n  display: table-header-group;\n}\n\n.altrp-table-tbody {\n  display: table-row-group;\n}\n\n.altrp-table-foot {\n  display: table-footer-group;\n}\n\n.altrp-table-tr {\n  display: table-row;\n}\n\n.altrp-table_loading {\n  display: block;\n}\n\n.altrp-table-th_global-filter {\n  colspan: all;\n}\n\n.altrp-table-td .altrp-inherit{\n  border: none;\n  width: 100%;\n}\n.altrp-table-td_loading {\n  display: block;\n  width: 100%;\n}\n\n.altrp-table__resizer {\n  display: inline-block;\n  background: blue;\n  width: 10px;\n  height: 100%;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: translateX(50%);\n  z-index: 1;\n  touch-action: none;\n}\n.altrp-table__resizer_resizing {\n    background: red;\n}\n.altrp-table .altrp-table-td .altrp-table-td__double-click-content {\n  display: none;\n}\n.altrp-table .altrp-table-td .altrp-table-td_double-clicked .altrp-table-td_double-clicked .altrp-table-td__double-click-content {\n  display: block;\n  width: 100%;\n  border-width: 2px;\n}\n.altrp-table .altrp-table-td .altrp-table-td_double-clicked .altrp-table-td_double-clicked .altrp-table-td__default-content {\n  display: none;\n}\n.altrp-table-global-filter {\n  font-weight: 400;\n}\n.altrp-table-global-filter label {\n  display: inline-block;\n}\n');var Ae=function(e){(0,u.Z)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,d.Z)(t);if(n){var a=(0,d.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,p.Z)(this,e)});function o(e){var t;return(0,i.Z)(this,o),(t=r.call(this,e)).state={settings:e.element.getSettings(),TableComponent:function(){return React.createElement("div",{children:"Loading..."})}},e.element.component=(0,s.Z)(t),window.elementDecorator&&window.elementDecorator((0,s.Z)(t)),e.baseRender&&(t.render=e.baseRender((0,s.Z)(t))),t.scrollbar=React.createRef(),t}return(0,c.Z)(o,[{key:"_componentDidMount",value:function(){var e=this;this.props.element.getSettings("store_state")&&xe(this.props.element.getId())?this.setState((function(t){return Se(Se({},t),{},{widgetState:xe(e.props.element.getId())})})):this.props.element.getSettings("store_state")&&Ie(this.props.element.getId(),null)}},{key:"showTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"datasource"===this.props.element.getSettings("choose_datasource")||!(!e.modelName&&!e.dataSource)}},{key:"render",value:function(){var e,t=this.props.element.getSettings();if(!this.props.currentModel.getProperty("altrpModelUpdated"))return"";var n=[];if(this.props.element.getSettings("table_datasource")&&"datasource"===this.props.element.getSettings("choose_datasource")){var r=this.props.element.getSettings("table_datasource").replace(/{{/g,"").replace(/}}/g,"");n=Ce(r,[],this.props.element.getCurrentModel().getData())}this.query&&this.table_query&&this.table_query===this.props.element.getSettings().table_query||(this.table_query=this.props.element.getSettings().table_query,this.query=new g.Z(this.props.element.getSettings().table_query||{},this));var o=this.query;if(!this.showTable(o))return React.createElement("div",{children:"Please Choose Source"});var i={ref:this.scrollbar,style:{zIndex:99999},autoHeight:!0,autoHideTimeout:500,autoHideDuration:200,renderTrackVertical:function(e){var t=e.style,n=(0,l.Z)(e,we);return React.createElement("div",(0,a.Z)({className:"altrp-scroll__vertical-track",style:t},n))}};if(this.props.element.getSettings("table_transpose",!1)&&(i.autoHeight=!0,i.autoHeightMax=1e4),!_.get(t,"tables_columns.length"))return React.createElement("div",{children:"Please Add Column"});var c=this.props.element.getSettings("table_2_0")?Oe:f.ZP;return React.createElement(m.$B,{ref:this.scrollbar,style:{zIndex:99999},autoHide:!0,autoHeightMax:3e4,autoHeight:!0,autoHideTimeout:500,autoHideDuration:200,renderTrackVertical:function(e){var t=e.style,n=(0,l.Z)(e,De);return t.display="none",React.createElement("div",(0,a.Z)({className:"altrp-scroll__vertical-track",style:t},n))},renderTrackHorizontal:function(e){var t=e.style,n=(0,l.Z)(e,Me);return React.createElement("div",(0,a.Z)({className:"altrp-scroll__horizontal-track",style:t},n))}},React.createElement(c,{query:o,updateToken:this.props.updateToken,widgetId:this.props.element.getId(),widgetState:Te()?null:this.state.widgetState,currentModel:this.props.currentModel,currentScreen:this.props.currentScreen,data:Te()?null:n||o.getFromModel(this.state.modelData),settings:null===(e=this.props.element)||void 0===e?void 0:e.settings}))}}]),o}(Component)}}]);
//# sourceMappingURL=TableWidget.ac24c2753d75aeb2e632.bundle.js.map