(self.webpackChunk=self.webpackChunk||[]).push([[6362],{71743:function(e,t,n){"use strict";var r=n(6610),a=n(5991),i=n(83465),o=n.n(i),l=n(29208),c=n.n(l),u=n(31468),s=n.n(u),d=n(38394),f=n.n(d),m=n(96633),h=n.n(m),v=n(99245),p=n.n(v),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,e),this.data=o()(t)}return(0,a.Z)(e,[{key:"getData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?o()(this.data):this.data}},{key:"isEmpty",value:function(){return p()(this.data)}},{key:"getProperty",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(this.data,e,t)}},{key:"hasProperty",value:function(e){return f()(this.data,e)}},{key:"setProperty",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n instanceof e&&(n=n.getData(!1)),s()(this.data,t,n)}},{key:"unsetProperty",value:function(e){return h()(this.data,e)}}]),e}();window.AltrpModel=y,t.Z=y},10284:function(e,t,n){"use strict";n.r(t);var r=n(92137),a=n(6610),i=n(5991),o=n(63349),l=n(10379),c=n(46070),u=n(77608),s=n(87757),d=n.n(s),f=n(67294),m=n(38773),h=n(84204),v=n.n(h),p=n(76593);function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){return f.createElement("svg",e,f.createElement("path",{d:"M13.6 11.9h.85a.85.85 0 0 0 .85-.85v-5.1a.85.85 0 0 0-.85-.85H2.55a.85.85 0 0 0-.85.85v5.1a.85.85 0 0 0 .85.85h.85V7.65h10.2v4.25zM3.4 3.4V0h10.2v3.4h.85A2.55 2.55 0 0 1 17 5.95v5.1a2.55 2.55 0 0 1-2.55 2.55h-.85V17H3.4v-3.4h-.85A2.55 2.55 0 0 1 0 11.05v-5.1A2.55 2.55 0 0 1 2.55 3.4h.85zm1.7 11.9h6.8V9.35H5.1v5.95zm0-11.9h6.8V1.7H5.1v1.7z",fill:"#76767A"}))};w.defaultProps={width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var b=function(e){return f.createElement("svg",e,f.createElement("path",{fillRule:"evenodd",d:"M4.854 4.146a.5.5 0 0 1 0 .708L1.707 8l3.147 3.146a.5.5 0 0 1-.708.708l-3.5-3.5a.5.5 0 0 1 0-.708l3.5-3.5a.5.5 0 0 1 .708 0zm6.292 0a.5.5 0 0 0 0 .708L14.293 8l-3.147 3.146a.5.5 0 0 0 .708.708l3.5-3.5a.5.5 0 0 0 0-.708l-3.5-3.5a.5.5 0 0 0-.708 0zm-.999-3.124a.5.5 0 0 1 .33.625l-4 13a.5.5 0 0 1-.955-.294l4-13a.5.5 0 0 1 .625-.33z"}))};b.defaultProps={width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-code-slash",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};var E=function(e){(0,l.Z)(g,e);var t,n,s,h=(n=g,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.Z)(n);if(s){var r=(0,u.Z)(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function g(e){var t;return(0,a.Z)(this,g),t=h.call(this,e),console.log(e),t.state={hidePanel:e.element.getSettings().hidePanel},t.print=t.print.bind((0,o.Z)(t)),t.code=t.code.bind((0,o.Z)(t)),t.fireAction=t.fireAction.bind((0,o.Z)(t)),t}return(0,i.Z)(g,[{key:"fireAction",value:function(e){void 0!==this[e]?this[e]():alert("NOT FOUND ACTION")}},{key:"formatting",value:function(e){return v().html(e,{indent_size:"4",indent_char:" ",max_preserve_newlines:"5",preserve_newlines:!0,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"normal",brace_style:"collapse",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!1,wrap_line_length:"0",indent_inner_html:!1,comma_first:!1,e4x:!1,indent_empty_lines:!1})}},{key:"code",value:(t=(0,r.Z)(d().mark((function e(){var t,n,r,a,i,o,l,c,u,s,f,h,v,g,w,b;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.cloneNode(!0),null!==(n=t.getElementById("export-panel"))&&n.remove(),r=window.location.pathname,e.next=6,(0,p.getRoutes)();case 6:return e.next=8,e.sent.default.resource.getAll();case 8:for(a=e.sent,i=_.find(a.pages,{path:r}).id,null!==t.getElementById("ace-solarized-dark")&&t.getElementById("ace-solarized-dark").remove(),null!==t.getElementById("ace-tm")&&t.getElementById("ace-tm").remove(),null!==t.getElementById("ace_editor.css")&&t.getElementById("ace_editor.css").remove(),null!==t.getElementById("styles-container")&&t.getElementById("styles-container").remove(),o="",l=document.getElementsByTagName("style"),c=0;l.length>0&&c<l.length;)"undefined"!==l[c]&&(o+=void 0!==l[c]?l[c].innerText:"",l[c].parentNode.removeChild(l[c]),c++);u=y(t.querySelectorAll("[id]"));try{for(u.s();!(s=u.n()).done;)(f=s.value).hasAttribute("id")&&""==f.getAttribute("id")&&f.removeAttribute("id"),f.hasAttribute("id")&&"columnCount"==f.getAttribute("id")&&f.removeAttribute("id")}catch(e){u.e(e)}finally{u.f()}h=t.getElementsByTagName("img"),v=y(h);try{for(v.s();!(g=v.n()).done;)(w=g.value).src=w.src.toString()}catch(e){v.e(e)}finally{v.f()}b=this.formatting(t.documentElement.innerHTML),new m.Z({route:"/reports/generate"}).post({dom:b,reportID:i,cssRules:o}).then((function(e){void 0===e.message?window.location.replace(e.path):alert("ОШИБКА")}),(function(e){console.log(e)}));case 25:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"print",value:function(){window.print()}},{key:"render",value:function(){return f.createElement(f.Fragment,null,!this.state.hidePanel&&f.createElement("div",{className:"export-panel",id:"export-panel"},f.createElement("div",{className:"col"},f.createElement("div",{className:"row justify-content-start d-flex py-3"},f.createElement("div",{className:"col-auto"},f.createElement("button",{onClick:this.code},f.createElement(b,null))),f.createElement("div",{className:"col-auto"},f.createElement("button",{onClick:this.print},f.createElement(w,null)))))))}}]),g}(Component);t.default=E}}]);
//# sourceMappingURL=ExportPanelWidget.5f0aedd4fe8e9f175f0d.bundle.js.map