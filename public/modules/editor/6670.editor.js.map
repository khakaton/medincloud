{"version":3,"sources":["webpack:///./resources/modules/front-app/src/js/helpers/plugins.js"],"names":["vIOn","document","getElementsByClassName","length","link","body","appendChild","createElement","classList","add","$","bvi","bvi_target","click","remove","loadVIPlugin","init","loadJQuery","querySelector","bVIStyles","head","setAttribute","style","css","styleSheet","cssText","createTextNode","bVIScript","promise","Promise","res","rej","resolve","reject","scriptsLoaded","loadChecker","onload","onerror","jQueryScript"],"mappings":"yOAGO,SAASA,IACd,IAAGC,SAASC,uBAAuB,YAAYC,OAA/C,CAGA,IAAMC,EAAOH,SAASI,KAAKC,YAAYL,SAASM,cAAc,MAC9DH,EAAKI,UAAUC,IAAI,kBACnBC,EAAEC,IAAI,CACJC,WAAY,oBAEdR,EAAKS,QACLT,EAAKU,UAOA,SAAeC,IAAtB,+B,wCAAO,yHAA4BC,IAA5B,0CACCC,IADD,WAGFhB,SAASiB,cAAc,+EAGnBjB,SAASiB,cAAc,4EANzB,uBAQHF,GAAQhB,IARL,iCAYCmB,EAAYlB,SAASmB,KAAKd,YAAYL,SAASM,cAAc,UACzDc,aAAa,OAAQ,gEAC/BF,EAAUE,aAAa,MAAO,eAExBC,EAAQrB,SAASmB,KAAKd,YAAYL,SAASM,cAAc,WACzDc,aAAa,OAAQ,YAErBE,EAnBD,gLA+BDD,EAAME,WAERF,EAAME,WAAWC,QAAUF,EAE3BD,EAAMhB,YAAYL,SAASyB,eAAeH,KAMtCI,EAAY1B,SAASmB,KAAKd,YAAYL,SAASM,cAAc,YACzDc,aAAa,MAAO,8DAMxBO,EAAU,IAAIC,SAAQ,SAACC,EAAKC,GAChCC,EAAUF,EACVG,EAASF,KAIPG,EAAgB,EACdC,EAAc,aACbD,EAAgB,IAGrBlB,GAAQhB,IACRgC,GAAWA,MAGbb,EAAUiB,OAASD,EAEnBR,EAAUS,OAASD,EAEnBhB,EAAUkB,QAAU,WAClBJ,GAAUA,KAQZN,EAAUU,QAAU,WAClBJ,GAAUA,KA7EP,kBA+EEL,GA/EF,6C,sBAsFA,SAAeX,IAAtB,+B,wCAAO,8FACFhB,SAASiB,cAAc,oCADrB,wDAKCoB,EAAerC,SAASmB,KAAKd,YAAYL,SAASM,cAAc,YACzDc,aAAa,MAAO,sBAG3BO,EAAU,IAAIC,SAAQ,SAACC,EAAKC,GAChCC,EAAUF,EACVG,EAASF,KAEXO,EAAaF,OAAS,WACpBJ,GAAWA,KAEbM,EAAaD,QAAU,WACrBJ,GAAUA,KAjBP,kBAoBEL,GApBF,4C","file":"6670.editor.js","sourcesContent":["/**\r\n * Включаем версию сайта для слабовидящих\r\n */\r\nexport function vIOn(){\r\n  if(document.getElementsByClassName('bvi-body').length){\r\n    return;\r\n  }\r\n  const link = document.body.appendChild(document.createElement('a'));\r\n  link.classList.add('altrp-bvi-open');\r\n  $.bvi({\r\n    bvi_target: '.altrp-bvi-open'\r\n  });\r\n  link.click();\r\n  link.remove();\r\n}\r\n/**\r\n * Загружаем BVI, если не заргужен\r\n * @param {boolean} init - нужно ли включать\r\n * @return {Promise<void>}\r\n */\r\nexport async function loadVIPlugin(init = true){\r\n  await loadJQuery();\r\n\r\n  if(document.querySelector('link[href=\"/plugins/button-visually-impaired-javascript/css/bvi.min.css\"]')\r\n      // && document.querySelector('script[src=\"/plugins/button-visually-impaired-javascript/js/js.cookie.min.js\"]')\r\n      // && document.querySelector('script[src=\"/plugins/button-visually-impaired-javascript/js/bvi-init.min.js\"]')\r\n      && document.querySelector('script[src=\"/plugins/button-visually-impaired-javascript/js/bvi.min.js\"]')\r\n  ){\r\n    init && vIOn();\r\n    return;\r\n  }\r\n\r\n  const bVIStyles = document.head.appendChild(document.createElement('link'));\r\n  bVIStyles.setAttribute('href', '/plugins/button-visually-impaired-javascript/css/bvi.min.css');\r\n  bVIStyles.setAttribute('rel', 'stylesheet');\r\n\r\n  const style = document.head.appendChild(document.createElement('style'));\r\n  style.setAttribute('type', 'text/css');\r\n  // language=CSS\r\n  const css = `\r\n  .bvi-body{\r\n    height: 100%;\r\n  }\r\n  .bvi-link-copy{\r\n    display: none!important;\r\n  }\r\n  .bvi-hide.admin-bar,\r\n  .bvi-hide.altrp-element{\r\n    display: flex;\r\n  }\r\n  `;\r\n  if (style.styleSheet){\r\n    // This is required for IE8 and below.\r\n    style.styleSheet.cssText = css;\r\n  } else {\r\n    style.appendChild(document.createTextNode(css));\r\n  }\r\n\r\n  // const jsCookieScript = document.head.appendChild(document.createElement('script'));\r\n  // jsCookieScript.setAttribute('src', '/plugins/button-visually-impaired-javascript/js/js.cookie.min.js');\r\n\r\n  const bVIScript = document.head.appendChild(document.createElement('script'));\r\n  bVIScript.setAttribute('src', '/plugins/button-visually-impaired-javascript/js/bvi.min.js');\r\n\r\n  // const bVIInitScript = document.head.appendChild(document.createElement('script'));\r\n  // bVIInitScript.setAttribute('src', '/plugins/button-visually-impaired-javascript/js/bvi-init.min.js');\r\n\r\n  let resolve, reject;\r\n  const promise = new Promise((res, rej) => {\r\n    resolve = res;\r\n    reject = rej;\r\n  });\r\n\r\n  \r\n  let scriptsLoaded = 0;\r\n  const loadChecker = ()=>{\r\n    if(++scriptsLoaded < 2){\r\n      return;\r\n    }\r\n    init && vIOn();\r\n    resolve && resolve();\r\n  };\r\n\r\n  bVIStyles.onload = loadChecker;\r\n  // jsCookieScript.onload = loadChecker;\r\n  bVIScript.onload = loadChecker;\r\n\r\n  bVIStyles.onerror = () => {\r\n    reject && reject()\r\n  };\r\n  // jsCookieScript.onerror = () => {\r\n  //   reject && reject()\r\n  // };\r\n  // bVIInitScript.onerror = () => {\r\n  //   reject && reject()\r\n  // };\r\n  bVIScript.onerror = () => {\r\n    reject && reject()\r\n  };\r\n  return promise;\r\n}\r\n\r\n/**\r\n * Загружаем jQuery, если не заргужен\r\n * @return {Promise<void>}\r\n */\r\nexport async function loadJQuery(){\r\n  if(document.querySelector('script[src=\"/plugins/jquery.js\"]')){\r\n    return;\r\n  }\r\n\r\n  const jQueryScript = document.head.appendChild(document.createElement('script'));\r\n  jQueryScript.setAttribute('src', '/plugins/jquery.js');\r\n\r\n  let resolve, reject;\r\n  const promise = new Promise((res, rej) => {\r\n    resolve = res;\r\n    reject = rej;\r\n  });\r\n  jQueryScript.onload = () => {\r\n    resolve && resolve()\r\n  };\r\n  jQueryScript.onerror = () => {\r\n    reject && reject()\r\n  };\r\n\r\n  return promise;\r\n}"],"sourceRoot":""}